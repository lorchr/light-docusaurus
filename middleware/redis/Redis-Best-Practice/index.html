<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-middleware docs-version-current docs-doc-page docs-doc-id-redis/Redis-Best-Practice" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Redis-Best-Practice | Light Docusaurus</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lorchr.github.io/light-docusaurus/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://lorchr.github.io/light-docusaurus/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://lorchr.github.io/light-docusaurus/middleware/redis/Redis-Best-Practice/"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-middleware-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-middleware-current"><meta data-rh="true" property="og:title" content="Redis-Best-Practice | Light Docusaurus"><meta data-rh="true" name="description" content="- Redis最佳实践：7个维度+43条使用规范，带你彻底玩转Redis | 附实践清单"><meta data-rh="true" property="og:description" content="- Redis最佳实践：7个维度+43条使用规范，带你彻底玩转Redis | 附实践清单"><link data-rh="true" rel="icon" href="/light-docusaurus/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lorchr.github.io/light-docusaurus/middleware/redis/Redis-Best-Practice/"><link data-rh="true" rel="alternate" href="https://lorchr.github.io/light-docusaurus/middleware/redis/Redis-Best-Practice/" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://lorchr.github.io/light-docusaurus/middleware/redis/Redis-Best-Practice/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://TLGHDZ3Y2I-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/light-docusaurus/blog/rss.xml" title="Light Docusaurus RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/light-docusaurus/blog/atom.xml" title="Light Docusaurus Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Light Docusaurus" href="/light-docusaurus/opensearch.xml"><link rel="stylesheet" href="/light-docusaurus/assets/css/styles.609e5209.css">
<script src="/light-docusaurus/assets/js/runtime~main.8c0ff940.js" defer="defer"></script>
<script src="/light-docusaurus/assets/js/main.898faf32.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/light-docusaurus/"><div class="navbar__logo"><img src="/light-docusaurus/img/logo.svg" alt="Torch Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/light-docusaurus/img/logo.svg" alt="Torch Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Torch</b></a><a class="navbar__item navbar__link" href="/light-docusaurus/docs/category/guide/">Torch</a><a class="navbar__item navbar__link" href="/light-docusaurus/blog/">Blog</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/light-docusaurus/middleware/">Middleware</a><a class="navbar__item navbar__link" href="/light-docusaurus/electron/">Electron</a><a class="navbar__item navbar__link" href="/light-docusaurus/postman/">Postman</a><a class="navbar__item navbar__link" href="/light-docusaurus/diy/">DIY</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/light-docusaurus/middleware/redis/Redis-Best-Practice/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-Hans">简体中文</a></li></ul></div><a href="https://github.com/lorchr/light-docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/light-docusaurus/middleware/">MiddleWare</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/compare/">Compare</a><button aria-label="展开侧边栏分类 &#x27;Compare&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/mysql/">Mysql</a><button aria-label="展开侧边栏分类 &#x27;Mysql&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/postgresql/">Postgresql</a><button aria-label="展开侧边栏分类 &#x27;Postgresql&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/light-docusaurus/middleware/category/redis/">Redis</a><button aria-label="折叠侧边栏分类 &#x27;Redis&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/redis/Build-Redis-Cluster-With-Docker-Compose/">Build-Redis-Cluster-With-Docker-Compose</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/redis/Spring-Boot-RateLimit/">Spring-Boot-RateLimit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/redis/Spring-Boot-Redis-BitMap/">Spring-Boot-Redis-BitMap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/redis/Redis-Bigkey-Analysis/">Redis-Bigkey-Analysis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/redis/Redis-Memory-Usage/">Redis-Memory-Usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/redis/Redis-Data-Persistence/">Redis-Data-Persistence</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/redis/Feed-Stream-System/">Feed-Stream-System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/redis/Redis-Use-Situation/">Redis-Use-Situation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/redis/Risk-Control/">Risk-Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/redis/Lua-In-Redis/">Lua-In-Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/redis/Lettuce-RedisCommandTimeoutException/">Lettuce-RedisCommandTimeoutException</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/redis/Lettuce-pipeline-1/">Lettuce-pipeline-1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/redis/Lettuce-pipeline-2/">Lettuce-pipeline-2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/redis/Login-Max-Times-Limit/">Login-Max-Times-Limit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/light-docusaurus/middleware/redis/Redis-Best-Practice/">Redis-Best-Practice</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/redis/Redisson-Lock/">Redisson-Lock</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/redis/RedisConfigBean/">RedisConfigBean</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/nginx/">Nginx</a><button aria-label="展开侧边栏分类 &#x27;Nginx&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/mqtt/">MQTT</a><button aria-label="展开侧边栏分类 &#x27;MQTT&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/influxdb/">InfluxDB</a><button aria-label="展开侧边栏分类 &#x27;InfluxDB&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/kafka/">Kafka</a><button aria-label="展开侧边栏分类 &#x27;Kafka&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/rocketmq/">RocketMQ</a><button aria-label="展开侧边栏分类 &#x27;RocketMQ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/workflow/">Workflow</a><button aria-label="展开侧边栏分类 &#x27;Workflow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/plusar/">Plusar</a><button aria-label="展开侧边栏分类 &#x27;Plusar&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/shardingsphere/">ShardingSphere</a><button aria-label="展开侧边栏分类 &#x27;ShardingSphere&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/light-docusaurus/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/light-docusaurus/middleware/category/redis/"><span itemprop="name">Redis</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Redis-Best-Practice</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Redis-Best-Practice</h1></header><ul>
<li><a href="https://mp.weixin.qq.com/s/H6GFmzPq0Tl_j9NghcEt-w">Redis最佳实践：7个维度+43条使用规范，带你彻底玩转Redis | 附实践清单</a></li>
</ul>
<h2 id="前言">前言</h2>
<p>这篇文章我想和你聊一聊 Redis 的最佳实践。</p>
<p>你的项目或许已经使用 Redis 很长时间了，但在使用过程中，你可能还会或多或少地遇到以下问题：</p>
<ul>
<li>我的 Redis 内存为什么增长这么快？</li>
<li>为什么我的 Redis 操作延迟变大了？</li>
<li>如何降低 Redis 故障发生的频率？</li>
<li>日常运维 Redis 需要注意什么？</li>
<li>部署 Redis 时，如何做好资源规划？</li>
<li>Redis 监控重点要关注哪些指标？</li>
</ul>
<p>尤其是当你的项目越来越依赖 Redis 时，这些问题就变得尤为重要。</p>
<p>此时，你迫切需要一份「最佳实践指南」 。</p>
<p>这篇文章，我将从以下七个维度，带你「全面」分析 Redis 的最佳实践优化：</p>
<ul>
<li>内存</li>
<li>性能</li>
<li>  高可靠</li>
<li>日常运维</li>
<li>资源规划</li>
<li>监控</li>
<li>安全</li>
</ul>
<h2 id="如何使用-redis-更节省内存">如何使用 Redis 更节省内存？</h2>
<p>首先，我们来看一下 Redis 内存方面的优化。</p>
<p>众所周知，Redis 的性能之所以如此之高，原因就在于它的数据都存储在「内存」中，所以访问 Redis 中的数据速度极快。</p>
<p>但从资源利用率层面来说，机器的内存资源相比于磁盘，还是比较昂贵的。</p>
<p>当你的业务应用在 Redis 中存储数据很少时，你可能并不太关心内存资源的使用情况。但随着业务的发展，你的业务存储在 Redis 中的数据就会越来越多。</p>
<p>如果没有提前制定好内存优化策略，那么等业务开始增长时，Redis 占用的内存也会开始膨胀。</p>
<p>所以，提前制定合理的内存优化策略，对于资源利用率的提升是很有必要的。</p>
<p>那在使用 Redis 时，怎样做才能更节省内存呢？这里我给你总结了 6 点建议，我们依次来看：</p>
<h3 id="1-控制-key-的长度">1) 控制 key 的长度</h3>
<p>最简单直接的内存优化，就是控制 key 的长度。</p>
<p>在开发业务时，你需要提前预估整个 Redis 中写入 key 的数量，如果 key 数量达到了百万级别，那么，过长的 key 名也会占用过多的内存空间。</p>
<p>所以，你需要保证 key 在简单、清晰的前提下，尽可能把 key 定义得短一些。</p>
<p>例如，原有的 key 为 <code>user:book:123</code>，则可以优化为 <code>u:bk:123</code>。</p>
<p>这样一来，你的 Redis 就可以节省大量的内存，这个方案对内存的优化非常直接和高效。</p>
<h3 id="2-避免存储-bigkey">2) 避免存储 bigkey</h3>
<p>除了控制 key 的长度之外，你同样需要关注 value 的大小，如果大量存储 <code>bigkey</code>，也会导致 Redis 内存增长过快。</p>
<p>除此之外，客户端在读写 <code>bigkey</code> 时， 还有产生性能问题（下文会具体详述）。</p>
<p>所以，你要避免在 Redis 中存储 <code>bigkey</code>，我给你的建议是：</p>
<ul>
<li><code>String</code>：大小控制在 10KB 以下</li>
<li><code>List</code>/<code>Hash</code>/<code>Set</code>/<code>ZSet</code>：元素数量控制在 1 万以下</li>
</ul>
<h3 id="3-选择合适的数据类型">3) 选择合适的数据类型</h3>
<p>Redis 提供了丰富的数据类型，这些数据类型在实现上，也对内存使用做了优化。具体来说就是，一种数据类型对应多种数据结构来实现：</p>
<p><img alt="img" src="/light-docusaurus/assets/images/15-1-3960456982aa9f668ddfa5cd1a1846c5.png" width="581" height="425"></p>
<p>例如，String、Set 在存储 int 数据时，会采用整数编码存储。Hash、ZSet 在元素数量比较少时（可配置），会采用压缩列表（ziplist）存储，在存储比较多的数据时，才会转换为哈希表和跳表。</p>
<p>作者这么设计的原因，就是为了进一步节约内存资源。</p>
<p>那么你在存储数据时，就可以利用这些特性来优化 Redis 的内存。这里我给你的建议如下：</p>
<ul>
<li><code>String</code>、<code>Set</code>：尽可能存储 int 类型数据</li>
<li><code>Hash</code>、<code>ZSet</code>：存储的元素数量控制在转换阈值之下，以压缩列表存储，节约内存</li>
</ul>
<h3 id="4-把-redis-当作缓存使用">4) 把 Redis 当作缓存使用</h3>
<p>Redis 数据存储在内存中，这也意味着其资源是有限的。你在使用 Redis 时，要把它当做缓存来使用，而不是数据库。</p>
<p>所以，你的应用写入到  Redis 中的数据，尽可能地都设置「过期时间」。</p>
<p>业务应用在 Redis 中查不到数据时，再从后端数据库中加载到 Redis 中。</p>
<p><img alt="img" src="data:image/jpeg;base64,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" width="431" height="241"></p>
<p>采用这种方案，可以让 Redis 中只保留经常访问的「热数据」，内存利用率也会比较高。</p>
<h3 id="5-实例设置-maxmemory--淘汰策略">5) 实例设置 maxmemory + 淘汰策略</h3>
<p>虽然你的 Redis key 都设置了过期时间，但如果你的业务应用写入量很大，并且过期时间设置得比较久，那么短期间内 Redis 的内存依旧会快速增长。</p>
<p>如果不控制 Redis 的内存上限，也会导致使用过多的内存资源。</p>
<p>对于这种场景，你需要提前预估业务数据量，然后给这个实例设置 maxmemory 控制实例的内存上限，这样可以避免 Redis 的内存持续膨胀。</p>
<p>配置了 maxmemory，此时你还要设置数据淘汰策略，而淘汰策略如何选择，你需要结合你的业务特点来决定：</p>
<ul>
<li><code>volatile-lru / allkeys-lru</code>：优先保留最近访问过的数据</li>
<li><code>volatile-lfu / allkeys-lfu</code>：优先保留访问次数最频繁的数据（4.0+版本支持）</li>
<li><code>volatile-ttl</code> ：优先淘汰即将过期的数据</li>
<li><code>volatile-random / allkeys-random</code>：随机淘汰数据</li>
</ul>
<h3 id="6-数据压缩后写入-redis">6) 数据压缩后写入 Redis</h3>
<p>以上方案基本涵盖了 Redis 内存优化的各个方面。</p>
<p>如果你还想进一步优化 Redis 内存，你还可以在业务应用中先将数据压缩，再写入到 Redis 中（例如采用 snappy、gzip 等压缩算法）。</p>
<p>当然，压缩存储的数据，客户端在读取时还需要解压缩，在这期间会消耗更多 CPU 资源，你需要根据实际情况进行权衡。</p>
<p>以上就是「节省内存资源」方面的实践优化，是不是都比较简单？</p>
<p>下面我们来看「性能」方面的优化。</p>
<h2 id="如何持续发挥-redis-的高性能">如何持续发挥 Redis 的高性能？</h2>
<p>当你的系统决定引入 Redis 时，想必看中它最关键的一点  就是：性能 。</p>
<p>我们知道，一个单机版 Redis 就可以达到 10W QPS，这么高的性能，也意味着如果在使用过程中发生延迟情况，就会与我们的预期不符。</p>
<p>所以，在使用 Redis 时，如何持续发挥它的高性能，避免操作延迟的情况发生，也是我们的关注焦点。</p>
<p>在这方面，我给你总结了 13 条建议：</p>
<h3 id="1-避免存储-bigkey">1) 避免存储 bigkey</h3>
<p>存储 bigkey 除了前面讲到的使用过多内存之外，对 Redis 性能也会有很大影响。</p>
<p>由于 Redis 处理请求是单线程的，当你的应用在写入一个 bigkey 时，更多时间将消耗在「内存分配」上，这时操作延迟就会增加。同样地，删除一个 bigkey 在「释放内存」时，也会发生耗时。</p>
<p>而且，当你在读取这个 bigkey 时，也会在「网络数据传输」上花费更多时间，此时后面待执行的请求就会发生排队，Redis 性能下降。</p>
<p><img alt="img" src="/light-docusaurus/assets/images/15-3-4537b7e4346383de048a36e9c69de1a6.jpg" width="647" height="205"></p>
<p>所以，你的业务应用尽量不要存储 bigkey，避免操作延迟发生。</p>
<p>如果你确实有存储 bigkey 的需求，你可以把 bigkey 拆分为多个小 key 存储。</p>
<h3 id="2-开启-lazy-free-机制">2) 开启 lazy-free 机制</h3>
<p>如果你无法避免存储 bigkey，那么我建议你开启 Redis 的 lazy-free 机制。（4.0+版本支持）</p>
<p>当开启这个机制后，Redis 在删除一个 bigkey 时，释放内存的耗时操作，将会放到后台线程中去执行，这样可以在最大程度上，避免对主线程的影响。</p>
<p><img alt="img" src="/light-docusaurus/assets/images/15-4-e14677038096ebe2381f912dedfcb2b7.jpg" width="581" height="256"></p>
<h3 id="3-不使用复杂度过高的命令">3) 不使用复杂度过高的命令</h3>
<p>Redis 是单线程模型处理请求，除了操作 bigkey 会导致后面请求发生排队之外，在  执行复杂度过高的命令时，也会发生这种情况。</p>
<p>因为执行复杂度过高的命令，会消耗更多的 CPU 资源，主线程中的其它请求只能等待，这时也会发生排队延迟。</p>
<p>所以，你需要避免执行例如 <code>SORT</code>、<code>SINTER</code>、<code>SINTERSTORE</code>、<code>ZUNIONSTORE</code>、<code>ZINTERSTORE</code> 等聚合类命令。</p>
<p>对于这种聚合类操作，我建议你把它放到客户端来执行，不要让 Redis 承担太多的计算工作。</p>
<h3 id="4-执行-on-命令时关注-n-的大小">4) 执行 O(N) 命令时，关注 N 的大小</h3>
<p>规避使用复杂度过高的命令，就可以高枕无忧了么？</p>
<p>答案是否定的。</p>
<p>当你在执行 O(N) 命令时，同样需要注意 N 的大小。</p>
<p>如果一次性查询过多的数据，也会在网络传输过程中耗时过长，操作延迟变大。</p>
<p>所以，对于容器类型（<code>List/Hash/Set/ZSet</code>），在元素数量未知的情况下，一定不要无脑执行 <code>LRANGE key 0 -1</code> / <code>HGETALL</code> / <code>SMEMBERS</code> / <code>ZRANGE key 0 -1</code>。</p>
<p>在查询数据时，你要遵循以下原则：</p>
<ul>
<li>先查询数据元素的数量（<code>LLEN/HLEN/SCARD/ZCARD</code>）</li>
<li>元素数量较少，可一次性查询全量数据</li>
<li>元素数量非常多，分批查询数据（<code>LRANGE/HASCAN/SSCAN/ZSCAN</code>）</li>
</ul>
<h3 id="5-关注-del-时间复杂度">5) 关注 DEL 时间复杂度</h3>
<p>你没看错，在删除一个 key 时，如果姿势不对，也有可能影响到 Redis 性能。</p>
<p>删除一个 key，我们通常使用的是 DEL 命令，回想一下，你觉得 DEL 的时间复杂度是多少？</p>
<p>O(1) ？其实不一定。</p>
<p>当你删除的是一个 String 类型 key 时，时间复杂度确实是 O(1)。</p>
<p>但当你要删除的 key 是 <code>List/Hash/Set/ZSet</code> 类型，它的复杂度其实为 O(N)，N 代表元素个数。</p>
<p><strong>也就是说，删除一个 key，其元素数量越多，执行 DEL 也就越慢！</strong></p>
<p>原因在于，删除大量元素时，需要依次回收每个元素的内存，元素越多，花费的时间也就越久！</p>
<p>而且，这个过程默认是在主线程中执行的，这势必会阻塞主线程，产生性能问题。</p>
<p>那删除这种元素比较多的 key，如何处理呢？</p>
<p>我给你的建议是，分批删除：</p>
<ul>
<li><code>List</code>类型：执行多次 <code>LPOP/RPOP</code>，直到所有元素都删除完成</li>
<li><code>Hash/Set/ZSet</code>类型：先执行 <code>HSCAN/SSCAN/SCAN</code> 查询元素，再执行 <code>HDEL/SREM/ZREM</code> 依次删除每个元素</li>
</ul>
<p>没想到吧？一个小小的删除操作，稍微不小心，也有可能引发性能问题，你在操作时需要格外注意。</p>
<h3 id="6-批量命令代替单个命令">6) 批量命令代替单个命令</h3>
<p>当你需要一次性操作多个 key 时，你应该使用批量命令来处理。</p>
<p>批量操作相比于多次单个操作的优势在于，可以显著减少客户端、服务端的来回网络 IO 次数。</p>
<p>所以我给你的建议是：</p>
<ul>
<li>String / Hash 使用 MGET/MSET 替代 GET/SET，HMGET/HMSET 替代 HGET/HSET</li>
<li>其它数据类型使用 Pipeline，打包一次性发送多个命令到服务端执行</li>
</ul>
<p><img alt="img" src="/light-docusaurus/assets/images/15-5-bd2faa1abed60e31033c78952d61829c.jpg" width="521" height="451"></p>
<h3 id="7-避免集中过期-key">7) 避免集中过期 key</h3>
<p>Redis 清理过期 key 是采用定时 + 懒惰的方式来做的，而且这个过程都是在主线程中执行。</p>
<p>如果你的业务存在大量 key 集中过期的情况，那么 Redis 在清理过期 key 时，也会有阻塞主线程的风险。</p>
<p><img alt="img" src="data:image/jpeg;base64,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evJuc3YlERVBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQeFhj3Rnsjtf4FVHRdK1qAPlvWtO8rnO+dzYHyDd0DQS9uAOgGPHz5JuqxIWefnred3PsrHDWn6jpdq/WtzQS0DskqNja4OjyDvZgk93IDhz5biOgasrujN1HU5rd+JskMcL69eDruDvduOeW44aAPADr3iG2UBQQnF+5r1er+qVT4TIrTeVWJhM6EQ13F299doOWuyers4Jd+S0c9uT3NAOpeQ7dZirx2mOMe6CQubIB0fhwG3PXbzx512QgGE4u/Nrf8ApzNVltw05JNPrtsztGWwuf2ZefNnHJcvhOjbqx37uqRxR39QsdtJEx+9sbQ1rGM3YGcBo+VxVnwscFWRmb5njix0LzeIn3ZdRL9NMHZso9iAGSbs9pv69OWPSu2BhA3JWQGFWbbTHJVbi2rqGoe11WnXgfB5XBNPM6YtMYjkD+63b3s7NvUdValiApxc69N6xI5KvyaI91qW2LjjaBeyJz4wWRMdglm0YyCQHE53Egc+W1WNSFOE1Z7PnUvDmpwaN7WtpVbFQxGF5OpTx7mEbT3Qwgcl1OIdGt65wZPplplOO5K3aA1xkjj96MloJ5eOAre4ZUEJM8nHW/Uaupr+y9U92gyTh77T9wkeJ3sYXN3ubjYzPgwbQ7l7o5PIZB8tC0LUK8dGzYlbVsizPJYgjcZWvjke9wZuwOYJaQ7HnH4Su7eiAKekv1G7OKpe4bivavbszzvMcrKoayN5BBhke/n4EEuHXzFbGo6LEyi40NMoPlYPvUkQa1582ccvz4d+ZWIDCyVmWPu6rg8K0JtO0hkNrYLJfJLMI3Oc0Pe8vcGk+GXFdwdFJGUwq561dXtZIiKgiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiIChEQEREBERAUIiAOilERBERFFIREEKCiIMgoREBERBKhEQf//Z" width="703" height="161"></p>
<p>想要避免这种情况发生，你可以在设置过期时间时，增加一个随机时间，把这些 key 的过期时间打散，从而降低集中过期对主线程的影响。</p>
<h3 id="8-使用长连接操作-redis合理配置连接池">8) 使用长连接操作 Redis，合理配置连接池</h3>
<p>你的业务应该使用长连接操作 Redis，避免短连接。</p>
<p>当使用短连接操作 Redis 时，每次都需要经过 TCP 三次握手、四次挥手，这个过程也会增加操作耗时。</p>
<p>同时，你的客户端应该使用连接池的方式访问 Redis，并设置合理的参数，长时间不操作 Redis 时，需及时释放连接资源。</p>
<h3 id="9-只使用-db0">9) 只使用 db0</h3>
<p>尽管 Redis 提供了 16 个 db，但我只建议你使用 db0。</p>
<p>为什么呢？我总结了以下 3 点原因：</p>
<ul>
<li>在一个连接上操作多个 db 数据时，每次都需要先执行 SELECT，这会给 Redis 带来额外的压力</li>
<li>使用多个 db 的目的是，按不同业务线存储数据，那为何不拆分多个实例存储呢？拆分多个实例部署，多个业务线不会互相影响，还能提高 Redis 的访问性能</li>
<li>Redis Cluster 只支持 db0，如果后期你想要迁移到 Redis Cluster，迁移成本高</li>
</ul>
<h3 id="10-使用读写分离--分片集群">10) 使用读写分离 + 分片集群</h3>
<p>如果你的业务读请求量很大，那么可以采用部署多个从库的方式，实现读写分离，让 Redis 的从库分担读压力，进而提升性能。</p>
<p><img alt="img" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAEZAa8DASIAAhEBAxEB/8QAHAABAAEFAQEAAAAAAAAAAAAAAAYBAgQFBwMI/8QAUBAAAQQBAgIECAYNCgYDAQAAAQACAwQFERIGIRMxQVEHFBUiMlRhlEJScYGT0SMzVXJzdHWRobO00tMkNDZEYoKDorG1FiU1hMHwZJLCxP/EABkBAQADAQEAAAAAAAAAAAAAAAABAgMEBf/EACYRAQACAQQBBAMAAwAAAAAAAAABAhEDEhMhMQQUQVEiMmGBofD/2gAMAwEAAhEDEQA/APqlERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAQqjjotXnLrcdjZbbm9J0Y5Rg6F7jya0e0uLR86iZwR3OGz1VdygBpC6HSZj+Wzu5va8axt59TGdTR2a+kdOasOCxA9HFY8f9sz6lSbuqvpZmMugapqFz/yHivuXj/dmfUnkPFfcvH+7M+pRvT7b+ug9I3vTpG96595BxX3Mx/urPqTyDivuZj/dmfUo5D2v9dB6RveqdI3vXP8AyDivuZj/AHZn1J5BxX3Mx/uzPqTkT7X+ug9I3vVOkb3rn/kHFfczH+7M+pPIOK+5mP8AdmfUnIe1/roPSN71TpG965/5BxX3Mx/uzPqTyDivuZj/AHZn1JyHtf66BuZ8ZNze9c/8h4r7mY/3Zn1J5CxXWMbSa7sLa4H/AITkPa/10MFFB8ZamxGQrw9LJJjbLui0kc5zoHnXaQTz0cRt0PU5w05aqbBaROXLes1nErkRFZUREQEREBERAREQEREBERAREQER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" width="431" height="281">
如果你的业务写请求量很大，单个 Redis 实例已无法支撑这么大的写流量，那么此时你需要使用分片集群，分担写压力。</p>
<p><img alt="img" src="/light-docusaurus/assets/images/15-8-87876188fc29e2d1124dd77f157cedd9.jpg" width="682" height="342"></p>
<h3 id="11-不开启-aof-或-aof-配置为每秒刷盘">11) 不开启 AOF 或 AOF 配置为每秒刷盘</h3>
<p>如果对于丢失数据不敏感的业务，我建议你不开启 AOF，避免 AOF 写磁盘拖慢 Redis 的性能。</p>
<p>如果确实需要开启 AOF，那么我建议你配置为 <code>appendfsync everysec</code>，把数据持久化的刷盘操作，放到后台线程中去执行，尽量降低 Redis 写磁盘对性能的影响。</p>
<h3 id="12-使用物理机部署-redis">12) 使用物理机部署 Redis</h3>
<p>Redis 在做数据持久化时，采用创建子进程的方式进行。</p>
<p>而创建子进程会调用操作系统的 fork 系统调用，这个系统调用的执行耗时，与系统环境有关。</p>
<p>虚拟机环境执行 fork 的耗时，要比物理机慢得多，所以你的 Redis 应该尽可能部署在物理机上。</p>
<h3 id="13-关闭操作系统内存大页机制">13) 关闭操作系统内存大页机制</h3>
<p>Linux 操作系统提供了内存大页机制，其特点在于，每次应用程序向操作系统申请内存时，申请单位由之前的 4KB 变为了 2MB。</p>
<p>这会导致什么问题呢？</p>
<p>当 Redis 在做数据持久化时，会先 fork 一个子进程，此时主进程和子进程共享相同的内存地址空间。</p>
<p>当主进程需要修改现有数据时，会采用写时复制（Copy On Write）的方式进行操作，在这个过程中，需要重新申请内存。</p>
<p>如果申请内存单位变为了 2MB，那么势必会增加内存申请的耗时，如果此时主进程有大量写操作，需要修改原有的数据，那么在此期间，操作延迟就会变大。</p>
<p><img alt="img" src="/light-docusaurus/assets/images/15-9-1f197e7e15c3434edd7ecfc7f5dfb34d.jpg" width="831" height="821"></p>
<p>所以，为了避免出现这种问题，你需要在操作系统上关闭内存大页机制。</p>
<p>好了，以上这些就是 Redis 「高性能」方面的实践优化。如果你非常关心 Redis 的性能问题，可以结合这些方面针对性优化。</p>
<p>我们再来看 Redis 「可靠性」如何保证。</p>
<h2 id="如何保证-redis-的可靠性">如何保证 Redis 的可靠性？</h2>
<p>这里我想提醒你的是，保证 Redis 可靠性其实并不难，但难的是如何做到「持续稳定」。</p>
<p>下面我会从「资源隔离」、「多副本」、「故障恢复」这三大维度，带你分析保障 Redis 可靠性的最佳实践。</p>
<h3 id="1-按业务线部署实例">1) 按业务线部署实例</h3>
<p>提升可靠性的第一步，就是「资源隔离」。</p>
<p>你最好按不同的业务线来部署 Redis 实例，这样当其中一个实例发生故障时，不会影响到其它业务。</p>
<p>这种资源隔离的方案，实施成本是最低的，但成效却是非常大的。</p>
<h3 id="2-部署主从集群">2) 部署主从集群</h3>
<p>如果你只使用单机版 Redis，那么就会存在机器宕机服务不可用的风险。</p>
<p>所以，你需要部署「多副本」实例，即主从集群，这样当主库宕机后，依旧有从库可以使用，避免了数据丢失的风险，也降低了服务不可用的时间。</p>
<p>在部署主从集群时，你还需要注意，主从库需要分布在不同机器上，避免交叉部署。</p>
<p>这么做的原因在于，通常情况下，Redis 的主库会承担所有的读写流量，所以我们一定要优先保证主库的稳定性，即使从库机器异常，也不要对主库造成影响。</p>
<p>而且，有时我们需要对 Redis 做日常维护，例如数据定时备份等操作，这时你就可以只在从库上进行，这只会消耗从库机器的资源，也避免了对主库的影响 。</p>
<h3 id="3-合理配置主从复制参数">3) 合理配置主从复制参数</h3>
<p>在部署主从集群时，如果参数配置不合理，也有可能导致主从复制发生问题：</p>
<ul>
<li>主从复制中断</li>
<li>从库发起全量复制，主库性能受到影响</li>
</ul>
<p>在这方面我给你的建议有以下 2 点：</p>
<ul>
<li>设置合理的 <code>repl-backlog</code> 参数：过小的 <code>repl-backlog</code> 在写流量比较大的场景下，主从复制中断会引发全量复制数据的风险
-设置合理的 <code>slave client-output-buffer-limit</code>：当从库复制发生问题时，过小的 buffer 会导致从库缓冲区溢出，从而导致复制中断</li>
</ul>
<h3 id="4-部署哨兵集群实现故障自动切换">4) 部署哨兵集群，实现故障自动切换</h3>
<p>只部署了主从节点，但故障发生时是无法自动切换的，所以，你还需要部署哨兵集群，实现故障的「自动切换」。</p>
<p>而且，多个哨兵节点需要分布在不同机器上，实例为奇数个，防止哨兵选举失败，影响切换时间。</p>
<p>以上这些就是保障 Redis「高可靠」实践优化，你应该也发现了，这些都是部署和运维层的优化。</p>
<p>除此之外，你可能还会对 Redis 做一些「日常运维」工作，这时你要注意哪些问题呢？</p>
<h2 id="日常运维-redis-需要注意什么">日常运维 Redis 需要注意什么？</h2>
<p>如果你是 DBA 运维人员，在平时运维 Redis 时，也需要注意以下 6 个方面。** **</p>
<h3 id="1-禁止使用-keysflushallflushdb-命令">1) 禁止使用 KEYS/FLUSHALL/FLUSHDB 命令</h3>
<p>执行这些命令，会长时间阻塞 Redis 主线程，危害极大，所以你必须禁止使用它。</p>
<p>如果确实想使用这些命令，我给你的建议是：</p>
<ul>
<li>SCAN 替换 KEYS</li>
<li>4.0+版本可使用 FLUSHALL/FLUSHDB ASYNC，清空数据的操作放在后台线程执行</li>
</ul>
<h3 id="2-扫描线上实例时设置休眠时间">2) 扫描线上实例时，设置休眠时间</h3>
<p>不管你是使用 SCAN 扫描线上实例，还是对实例做 bigkey 统计分析，我建议你在扫描时一定记得设置休眠时间。</p>
<p>防止在扫描过程中，实例 OPS 过高对 Redis 产生性能抖动。</p>
<h3 id="3-慎用-monitor-命令">3) 慎用 MONITOR 命令</h3>
<p>有时在排查 Redis 问题时，你会使用 MONITOR 查看 Redis 正在执行的命令。</p>
<p>但如果你的 Redis OPS 比较高，那么在执行 MONITOR 会导致 Redis 输出缓冲区的内存持续增长，这会严重消耗 Redis 的内存资源，甚至会导致实例内存超过 maxmemory，引发数据淘汰，这种情况你需要格外注意。</p>
<p><img alt="img" src="data:image/jpeg;base64,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" width="576" height="191"></p>
<p>所以你在执行 MONITOR 命令时，一定要谨慎，尽量少用。</p>
<h3 id="4-从库必须设置为-slave-read-only">4) 从库必须设置为 slave-read-only</h3>
<p>你的从库必须设置为 <code>slave-read-only</code> 状态，避免从库写入数据，导致主从数据不一致。</p>
<p>除此之外，从库如果是非 <code>read-only</code> 状态，如果你使用的是 4.0 以下的 Redis，它存在这样的 Bug：</p>
<p><strong>从库写入了有过期时间的数据，不会做定时清理和释放内存。</strong></p>
<p>这会造成从库的内存泄露！这个问题直到 4.0 版本才修复，你在配置从库时需要格外注意。</p>
<h3 id="5-合理配置-timeout-和-tcp-keepalive-参数">5) 合理配置 timeout 和 tcp-keepalive 参数</h3>
<p>如果因为网络原因，导致你的大量客户端连接与 Redis 意外中断，恰好你的 Redis 配置的 maxclients 参数比较小，此时有可能导致客户端无法与服务端建立新的连接（服务端认为超过了 maxclients）。</p>
<p>造成这个问题原因在于，客户端与服务端每建立一个连接，Redis 都会给这个客户端分配了一个 client fd。</p>
<p><strong>当客户端与服务端网络发生问题时，服务端并不会立即释放这个 client fd。</strong></p>
<p>什么时候释放呢？</p>
<p>Redis 内部有一个定时任务，会定时检测所有 client 的空闲时间是否超过配置的 timeout 值。</p>
<p>如果 Redis 没有开启 tcp-keepalive 的话，服务端直到配置的 timeout 时间后，才会清理释放这个 client fd。</p>
<p>在没有清理之前，如果还有大量新连接进来，就有可能导致 Redis 服务端内部持有的 client fd 超过了 maxclients，这时新连接就会被拒绝。</p>
<p>针对这种情况，我给你的优化建议是：</p>
<ul>
<li>不要配置过高的 timeout：让服务端尽快把无效的 client fd 清理掉</li>
<li>Redis 开启 tcp-keepalive：这样服务端会定时给客户端发送 TCP 心跳包，检测连接连通性，当网络异常时，可以尽快清理僵尸 client fd</li>
</ul>
<h3 id="6-调整-maxmemory-时注意主从库的调整顺序">6) 调整 maxmemory 时，注意主从库的调整顺序</h3>
<p>Redis 5.0 以下版本存在这样一个问题：<strong>从库内存如果超过了 maxmemory，也会触发数据淘汰。</strong></p>
<p>在某些场景下，从库是可能优先主库达到 maxmemory 的（例如在从库执行 MONITOR 命令，输出缓冲区占用大量内存），那么此时从库开始淘汰数据，主从库就会产生不一致。</p>
<p>要想避免此问题，在调整 maxmemory 时，一定要注意主从库的修改顺序：</p>
<ul>
<li>调大 <code>maxmemory</code>：先修改从库，再修改主库</li>
<li>调小 <code>maxmemory</code>：先修改主库，再修改从库</li>
</ul>
<p>直到 Redis 5.0，Redis 才增加了一个配置 <code>replica-ignore-maxmemory</code>，默认从库超过 <code>maxmemory</code> 不会淘汰数据，才解决了此问题。</p>
<p>好了，以上这些就是「日常运维」Redis 需要注意的，你可以对各个配置项查漏补缺，看有哪些是需要优化的。</p>
<p>接下来，我们来看一下，保障 Redis「安全」都需要注意哪些问题。</p>
<h2 id="redis-安全如何保证">Redis 安全如何保证？</h2>
<p>无论如何，在互联网时代，安全问题一定是我们需要随时警戒的。</p>
<p>你可能听说过 Redis 被注入可执行脚本，然后拿到机器 root 权限的安全问题，都是因为在部署 Redis 时，没有把安全风险注意起来。</p>
<p>针对这方面，我给你的建议是：</p>
<ul>
<li>不要把 Redis 部署在公网可访问的服务器上</li>
<li>部署时不使用默认端口 6379</li>
<li>以普通用户启动 Redis 进程，禁止 root 用户启动</li>
<li>限制 Redis 配置文件的目录访问权限</li>
<li>推荐开启密码认证</li>
<li>禁用/重命名危险命令（<code>KEYS/FLUSHALL/FLUSHDB/CONFIG/EVAL</code>）</li>
</ul>
<p>只要你把这些做到位，基本上就可以保证 Redis 的安全风险在可控范围内。</p>
<p>至此，我们分析了 Redis 在内存、性能、可靠性、日常运维方面的最佳实践优化。</p>
<p>除了以上这些，你还需要做到提前「预防」。</p>
<h2 id="如何预防-redis-问题">如何预防 Redis 问题？</h2>
<p>要想提前预防 Redis 问题，你需要做好以下两个方面：</p>
<ul>
<li>合理的资源规划</li>
<li>完善的监控预警</li>
<li>先来说资源规划。</li>
</ul>
<p>在部署 Redis 时，如果你可以提前做好资源规划，可以避免很多因为资源不足产生的问题。这方面我给你的建议有以下 3 点：</p>
<ol>
<li>保证机器有足够的 CPU、内存、带宽、磁盘资源</li>
<li>提前做好容量规划，主库机器预留一半内存资源，防止主从机器网络故障，引发大面积全量同步，导致主库机器内存不足的问题</li>
<li>单个实例内存建议控制在 10G 以下，大实例在主从全量同步、RDB 备份时有阻塞风险</li>
</ol>
<p>再来看监控如何做。</p>
<p>监控预警是提高稳定性的重要环节，完善的监控预警，可以把问题提前暴露出来，这样我们才可以快速反应，把问题最小化。</p>
<p>这方面我给你的建议是：</p>
<ol>
<li>做好机器 CPU、内存、带宽、磁盘监控，资源不足时及时报警，任意资源不足都会影响 Redis 性能</li>
<li>设置合理的 <code>slowlog</code> 阈值，并对其进行监控，<code>slowlog</code> 过多及时报警</li>
<li>监控组件采集 Redis INFO 信息时，采用长连接，避免频繁的短连接</li>
<li>做好实例运行时监控，重点关注 <code>expired_keys</code>、<code>evicted_keys</code>、<code>latest_fork_usec</code> 指标，这些指标短时突增可能会有阻塞风险</li>
</ol>
<h2 id="总结">总结</h2>
<p>好了，总结一下，这篇文章我带你全面分析了 Redis 最佳实践的优化路径，  其中包括内存资源、高性能、高可靠、日常运维、资源规划、监控、安全 7 个维度。</p>
<p>这里我画成了思维导图，方便你在实践时做参考。</p>
<p><img alt="img" src="/light-docusaurus/assets/images/15-11-d6de6dba1f5c98912aa5dce343e49206.png" width="1080" height="934"></p>
<p>我还把这些实践优化，按照「业务开发」和「运维」两个维度，进一步做了划分。</p>
<p>并且以「强制」、「推荐」、「参考」3 个级别做了标注，这样你在实践优化时，就会更明确哪些该做，哪些需要结合实际的业务场景进一步分析。</p>
<p>这些级别的实施规则如下：</p>
<ul>
<li>强制：需严格遵守，否则危害极大</li>
<li>推荐：推荐遵守，可提升性能、降低内存、便于运维</li>
<li>参考：根据业务特点参考实施</li>
</ul>
<p>如果你是业务开发人员，你需要了解 Redis 的运行机制，例如各个命令的执行时间复杂度、数据过期策略、数据淘汰策略等，使用合理的命令，并结合业务场景进行优化。</p>
<p><img alt="img" src="/light-docusaurus/assets/images/15-12-6628c178b9740cef9a0a81af05dad4e7.png" width="1080" height="1080">
如果你是 DBA 运维人员，你需要在资源规划、运维、监控、安全层面做到位，做到未雨绸缪。</p>
<p><img alt="img" src="/light-docusaurus/assets/images/15-13-dda1c4df8932e4a2d2c1e73e221da471.png" width="1080" height="1247"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/lorchr/light-docusaurus/tree/main/middleware/redis/15-Redis-Best-Practice.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">最后<!-- -->由 <b>Lorchr</b> <!-- -->于 <b><time datetime="2024-02-23T08:49:58.000Z">2024年2月23日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/light-docusaurus/middleware/redis/Login-Max-Times-Limit/"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Login-Max-Times-Limit</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/light-docusaurus/middleware/redis/Redisson-Lock/"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Redisson-Lock</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#前言" class="table-of-contents__link toc-highlight">前言</a></li><li><a href="#如何使用-redis-更节省内存" class="table-of-contents__link toc-highlight">如何使用 Redis 更节省内存？</a><ul><li><a href="#1-控制-key-的长度" class="table-of-contents__link toc-highlight">1) 控制 key 的长度</a></li><li><a href="#2-避免存储-bigkey" class="table-of-contents__link toc-highlight">2) 避免存储 bigkey</a></li><li><a href="#3-选择合适的数据类型" class="table-of-contents__link toc-highlight">3) 选择合适的数据类型</a></li><li><a href="#4-把-redis-当作缓存使用" class="table-of-contents__link toc-highlight">4) 把 Redis 当作缓存使用</a></li><li><a href="#5-实例设置-maxmemory--淘汰策略" class="table-of-contents__link toc-highlight">5) 实例设置 maxmemory + 淘汰策略</a></li><li><a href="#6-数据压缩后写入-redis" class="table-of-contents__link toc-highlight">6) 数据压缩后写入 Redis</a></li></ul></li><li><a href="#如何持续发挥-redis-的 高性能" class="table-of-contents__link toc-highlight">如何持续发挥 Redis 的高性能？</a><ul><li><a href="#1-避免存储-bigkey" class="table-of-contents__link toc-highlight">1) 避免存储 bigkey</a></li><li><a href="#2-开启-lazy-free-机制" class="table-of-contents__link toc-highlight">2) 开启 lazy-free 机制</a></li><li><a href="#3-不使用复杂度过高的命令" class="table-of-contents__link toc-highlight">3) 不使用复杂度过高的命令</a></li><li><a href="#4-执行-on-命令时关注-n-的大小" class="table-of-contents__link toc-highlight">4) 执行 O(N) 命令时，关注 N 的大小</a></li><li><a href="#5-关注-del-时间复杂度" class="table-of-contents__link toc-highlight">5) 关注 DEL 时间复杂度</a></li><li><a href="#6-批量命令代替单个命令" class="table-of-contents__link toc-highlight">6) 批量命令代替单个命令</a></li><li><a href="#7-避免集中过期-key" class="table-of-contents__link toc-highlight">7) 避免集中过期 key</a></li><li><a href="#8-使用长连接操作-redis合理配置连接池" class="table-of-contents__link toc-highlight">8) 使用长连接操作 Redis，合理配置连接池</a></li><li><a href="#9-只使用-db0" class="table-of-contents__link toc-highlight">9) 只使用 db0</a></li><li><a href="#10-使用读写分离--分片集群" class="table-of-contents__link toc-highlight">10) 使用读写分离 + 分片集群</a></li><li><a href="#11-不开启-aof-或-aof-配置为每秒刷盘" class="table-of-contents__link toc-highlight">11) 不开启 AOF 或 AOF 配置为每秒刷盘</a></li><li><a href="#12-使用物理机部署-redis" class="table-of-contents__link toc-highlight">12) 使用物理机部署 Redis</a></li><li><a href="#13-关闭操作系统内存大页机制" class="table-of-contents__link toc-highlight">13) 关闭操作系统内存大页机制</a></li></ul></li><li><a href="#如何保证-redis-的可靠性" class="table-of-contents__link toc-highlight">如何保证 Redis 的可靠性？</a><ul><li><a href="#1-按业务线部署实例" class="table-of-contents__link toc-highlight">1) 按业务线部署实例</a></li><li><a href="#2-部署主从集群" class="table-of-contents__link toc-highlight">2) 部署主从集群</a></li><li><a href="#3-合理配置主从复制参数" class="table-of-contents__link toc-highlight">3) 合理配置主从复制参数</a></li><li><a href="#4-部署哨兵集群实现故障自动切换" class="table-of-contents__link toc-highlight">4) 部署哨兵集群，实现故障自动切换</a></li></ul></li><li><a href="#日常运维-redis-需要注意什么" class="table-of-contents__link toc-highlight">日常运维 Redis 需要注意什么？</a><ul><li><a href="#1-禁止使用-keysflushallflushdb-命令" class="table-of-contents__link toc-highlight">1) 禁止使用 KEYS/FLUSHALL/FLUSHDB 命令</a></li><li><a href="#2-扫描线上实例时设置休眠时间" class="table-of-contents__link toc-highlight">2) 扫描线上实例时，设置休眠时间</a></li><li><a href="#3-慎用-monitor-命令" class="table-of-contents__link toc-highlight">3) 慎用 MONITOR 命令</a></li><li><a href="#4-从库必须设置为-slave-read-only" class="table-of-contents__link toc-highlight">4) 从库必须设置为 slave-read-only</a></li><li><a href="#5-合理配置-timeout-和-tcp-keepalive-参数" class="table-of-contents__link toc-highlight">5) 合理配置 timeout 和 tcp-keepalive 参数</a></li><li><a href="#6-调整-maxmemory-时注意主从库的调整顺序" class="table-of-contents__link toc-highlight">6) 调整 maxmemory 时，注意主从库的调整顺序</a></li></ul></li><li><a href="#redis-安全如何保证" class="table-of-contents__link toc-highlight">Redis 安全如何保证？</a></li><li><a href="#如何预防-redis-问题" class="table-of-contents__link toc-highlight">如何预防 Redis 问题？</a></li><li><a href="#总结" class="table-of-contents__link toc-highlight">总结</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/docs/category/guide/">Torch</a></li><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/middleware/">Middleware</a></li><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/electron/">Electron</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/blog/">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/diy/">DIY</a></li><li class="footer__item"><a href="https://github.com/lorchr/light-docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Offical</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docusaurus.io/docs/playground" target="_blank" rel="noopener noreferrer" class="footer__link-item">Playground<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Light-Docusaurus, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>