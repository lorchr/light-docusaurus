<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-middleware docs-version-current docs-doc-page docs-doc-id-shardingsphere/ShardingSphere-Separate-Database-And-Table" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">ShardingSphere-Separate-Database-And-Table | Light Docusaurus</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lorchr.github.io/light-docusaurus/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://lorchr.github.io/light-docusaurus/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://lorchr.github.io/light-docusaurus/middleware/shardingsphere/ShardingSphere-Separate-Database-And-Table/"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-middleware-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-middleware-current"><meta data-rh="true" property="og:title" content="ShardingSphere-Separate-Database-And-Table | Light Docusaurus"><meta data-rh="true" name="description" content="- SpringBoot 2 种方式快速实现分库分表，轻松拿捏"><meta data-rh="true" property="og:description" content="- SpringBoot 2 种方式快速实现分库分表，轻松拿捏"><link data-rh="true" rel="icon" href="/light-docusaurus/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lorchr.github.io/light-docusaurus/middleware/shardingsphere/ShardingSphere-Separate-Database-And-Table/"><link data-rh="true" rel="alternate" href="https://lorchr.github.io/light-docusaurus/middleware/shardingsphere/ShardingSphere-Separate-Database-And-Table/" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://lorchr.github.io/light-docusaurus/middleware/shardingsphere/ShardingSphere-Separate-Database-And-Table/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://TLGHDZ3Y2I-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/light-docusaurus/blog/rss.xml" title="Light Docusaurus RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/light-docusaurus/blog/atom.xml" title="Light Docusaurus Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Light Docusaurus" href="/light-docusaurus/opensearch.xml"><link rel="stylesheet" href="/light-docusaurus/assets/css/styles.609e5209.css">
<script src="/light-docusaurus/assets/js/runtime~main.8c0ff940.js" defer="defer"></script>
<script src="/light-docusaurus/assets/js/main.898faf32.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/light-docusaurus/"><div class="navbar__logo"><img src="/light-docusaurus/img/logo.svg" alt="Torch Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/light-docusaurus/img/logo.svg" alt="Torch Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Torch</b></a><a class="navbar__item navbar__link" href="/light-docusaurus/docs/category/guide/">Torch</a><a class="navbar__item navbar__link" href="/light-docusaurus/blog/">Blog</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/light-docusaurus/middleware/">Middleware</a><a class="navbar__item navbar__link" href="/light-docusaurus/electron/">Electron</a><a class="navbar__item navbar__link" href="/light-docusaurus/postman/">Postman</a><a class="navbar__item navbar__link" href="/light-docusaurus/diy/">DIY</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/light-docusaurus/middleware/shardingsphere/ShardingSphere-Separate-Database-And-Table/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-Hans">简体中文</a></li></ul></div><a href="https://github.com/lorchr/light-docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/light-docusaurus/middleware/">MiddleWare</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/compare/">Compare</a><button aria-label="展开侧边栏分类 &#x27;Compare&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/mysql/">Mysql</a><button aria-label="展开侧边栏分类 &#x27;Mysql&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/postgresql/">Postgresql</a><button aria-label="展开侧边栏分类 &#x27;Postgresql&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/redis/">Redis</a><button aria-label="展开侧边栏分类 &#x27;Redis&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/nginx/">Nginx</a><button aria-label="展开侧边栏分类 &#x27;Nginx&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/mqtt/">MQTT</a><button aria-label="展开侧边栏分类 &#x27;MQTT&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/influxdb/">InfluxDB</a><button aria-label="展开侧边栏分类 &#x27;InfluxDB&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/kafka/">Kafka</a><button aria-label="展开侧边栏分类 &#x27;Kafka&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/rocketmq/">RocketMQ</a><button aria-label="展开侧边栏分类 &#x27;RocketMQ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/workflow/">Workflow</a><button aria-label="展开侧边栏分类 &#x27;Workflow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/middleware/category/plusar/">Plusar</a><button aria-label="展开侧边栏分类 &#x27;Plusar&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/light-docusaurus/middleware/category/shardingsphere/">ShardingSphere</a><button aria-label="折叠侧边栏分类 &#x27;ShardingSphere&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/light-docusaurus/middleware/shardingsphere/ShardingSphere-Separate-Database-And-Table/">ShardingSphere-Separate-Database-And-Table</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/shardingsphere/Shardingsphere-Jdbc-ReadWrite-Split/">Shardingsphere-Jdbc-ReadWrite-Split</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/middleware/shardingsphere/Shardingsphere-Proxy-Install/">Shardingsphere-Proxy-Install</a></li></ul></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/light-docusaurus/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/light-docusaurus/middleware/category/shardingsphere/"><span itemprop="name">ShardingSphere</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ShardingSphere-Separate-Database-And-Table</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页 总览</button></div><div class="theme-doc-markdown markdown"><header><h1>ShardingSphere-Separate-Database-And-Table</h1></header><ul>
<li><a href="https://mp.weixin.qq.com/s/ptAfDSZ5UVgcugjl99P3iQ">SpringBoot 2 种方式快速实现分库分表，轻松拿捏</a></li>
</ul>
<p>本文将为您介绍 ShardingSphere 的一些基础特性和架构组成，以及在 Springboot 环境下通过 JAVA编码 和 Yml配置 两种方式快速实现分库分表。</p>
<h2 id="一什么是-shardingsphere">一、什么是 ShardingSphere？</h2>
<p>shardingsphere 是一款开源的分布式关系型数据库中间件，为 Apache 的顶级项目。其前身是 <code>sharding-jdbc</code> 和 <code>sharding-proxy</code> 的两个独立项目，后来在 2018 年合并成了一个项目，并正式更名为 ShardingSphere。</p>
<p>其中 sharding-jdbc 为整个生态中最为经典和成熟的框架，最早接触分库分表的人应该都知道它，是学习分库分表的最佳入门工具。</p>
<p>如今的 ShardingSphere 已经不再是单纯代指某个框架，而是一个完整的技术生态圈，由三款开源的分布式数据库中间件 sharding-jdbc、sharding-proxy 和 sharding-sidecar 所构成。前两者问世较早，功能较为成熟，是目前广泛应用的两个分布式数据库中间件，因此在后续的文章中，我们将重点介绍它们的特点和使用方法。</p>
<h2 id="二为什么选-shardingsphere">二、为什么选 ShardingSphere？</h2>
<p>为了回答这个问题，我整理了市面上常见的分库分表工具，包括 ShardingSphere、Cobar、Mycat、TDDL、MySQL Fabric 等，并从多个角度对它们进行了简单的比较。</p>
<h3 id="cobar">Cobar</h3>
<p>Cobar 是阿里巴巴开源的一款基于MySQL的分布式数据库中间件，提供了分库分表、读写分离和事务管理等功能。它采用轮询算法和哈希算法来进行数据分片，支持分布式分表，但是不支持单库分多表。</p>
<p>它以 Proxy 方式提供服务，在阿里内部  被广泛使用已开源，配置比较容易，无需依赖其他东西，只需要有Java环境即可。兼容市面上几乎所有的 ORM 框架，仅支持 MySQL 数据库，且事务支持方面比较麻烦。</p>
<h3 id="mycat">MyCAT</h3>
<p>Mycat 是社区爱好者在阿里 Cobar 基础上进行二次开发的，也是一款比较经典的分库分表工具。它以 Proxy 方式提供服务，支持分库分表、读写分离、SQL路由、数据分片等功能。</p>
<p>兼容市面上几乎所有的 ORM 框架，包括 Hibernate、MyBatis和 JPA等都兼容，不过，美中不足的是它仅支持 MySQL数据库，目前社区的活跃度相对较低。</p>
<h3 id="tddl">TDDL</h3>
<p>TDDL 是阿里巴巴集团开源的一款分库分表解决方案，可以自动将SQL路由到相应的库表上。它采用了垂直切分和水平切分两种方式来进行分表分库，并且支持多数据源和读写分离功能。</p>
<p>TDDL 是基于 Java 开发的，支持 MySQL、Oracle 和 SQL Server 数据库，并且可以与市面上 Hibernate、MyBatis等 ORM 框架集成。</p>
<p>不过，TDDL仅支持一些阿里巴巴内部的工具和框架的集成，对于外部公司来说可能相对有些局限性。同时，其文档和社区活跃度相比 ShardingSphere 来说稍显不足。</p>
<h3 id="mysql-fabric">Mysql Fabric</h3>
<p>MySQL Fabric是 MySQL 官方提供的一款分库分表解决方案，同时也支持 MySQL其他功能，如高可用、负载均衡等。它采用了管理节点和代理节点的架构，其中管理节点负责实时管理分片信息，代理节点则负责接收并处理客户端的读写请求。</p>
<p>它仅支持 MySQL 数据库，并且可以与市面上 Hibernate、MyBatis 等 ORM 框架集成。MySQL Fabric 的文档相对来说比较简略，而且由于是官方提供的解决方案，其社区活跃度也相对较低。</p>
<h3 id="shardingsphere">ShardingSphere</h3>
<p>ShardingSphere 成员中的 sharding-jdbc 以 JAR 包的形式下提供分库分表、读写分离、分布式事务等功能，但仅支持 Java 应用，在应用扩展上存在局限性。</p>
<p>因此，ShardingSphere 推出了独立的中间件 sharding-proxy，它基于 MySQL协议实现了透明的分片和多数据源功能，支持各种语言和框架的应用程序使用，对接的应用程序几乎无需更改代码，分库分表配置可在代理服务中进行管理。</p>
<p>除了支持 MySQL，ShardingSphere还可以支持 PostgreSQL、SQLServer、Oracle等多种主流数据库，并且可以很好地与 Hibernate、MyBatis、JPA等 ORM 框架集成。重要的是，ShardingSphere的开源社区非常活跃。</p>
<p>如果在使用中出现问题，用户可以在 GitHub 上提交PR并得到快速响应和解决，这为用户提供了足够的安全感。</p>
<h3 id="产品比较">产品比较</h3>
<p>通过对上述的 5 个分库分表工具进行比较，我们不难发现，就整体性能、功能丰富度以及社区支持等方面来看，ShardingSphere 在众多产品中优势还是比较突出的。下边用各个产品的主要指标整理了一个表格，看着更加直观一点。</p>
<table><thead><tr><th>特性</th><th>ShardingSphere</th><th>Cobar</th><th>Mycat</th><th>TDDL</th><th>MySQL Fabric</th></tr></thead><tbody><tr><td>分库</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>分表</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>连接模式</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>支持DB</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>ORM支持</td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table>
<h2 id="三shardingsphere-成员">三、ShardingSphere 成员</h2>
<p>ShardingSphere 的主要组成成员为sharding-jdbc、sharding-proxy，它们是实现分库分表的两种不同模式：</p>
<h3 id="sharding-jdbc">sharding-jdbc</h3>
<p>它是一款轻量级Java框架，提供了基于 JDBC 的分库分表功能，为客户端直连模式。使用sharding-jdbc，开发者可以通 过简单的配置实现数据的分片，同时无需修改原有的SQL语句。支持多种分片策略和算法，并且可以与各种主流的ORM框架无缝集成。</p>
<p>图片</p>
<h3 id="sharding-proxy">sharding-proxy</h3>
<p>它是基于 MySQL 协议的代理服务，提供了透明的分库分表功能。使用 sharding-proxy 开发者可以将分片逻辑从应用程序中解耦出来，无需修改应用代码就能实现分片功能，还支持多数据源和读写分离等高级特性，并且可以作为独立的服务运行。</p>
<p>图片</p>
<h2 id="四快速实现">四、快速实现</h2>
<p>我们先使用sharding-jdbc来快速实现分库分表。相比于 sharding-proxy，sharding-jdbc 适用于简单的应用场景，不需要额外的环境搭建等。下边主要基于 SpringBoot 的两种方式来实现分库分表，一种是通过YML配置方式，另一种则是通过纯Java编码方式（不可并存 ）。在后续章节中，我们会单独详细介绍如何使用sharding-proxy以及其它高级特性。</p>
<p>ShardingSphere 官网地址：<a href="https://shardingsphere.apache.org/">https://shardingsphere.apache.org/</a></p>
<h3 id="准备工作">准备工作</h3>
<p>在开始实现之前，需要对数据库和表的拆分规则进行明确。以对t_order表进行分库分表拆分为例，具体地，我们将 t_order 表拆分到两个数据库中，分别为db1和db2，每个数据库又将该表拆分为三张表，分别为t_order_1、t_order_2和t_order_3。</p>
<pre><code class="language-shell">db0
├── t_order_0
├── t_order_1
└── t_order_2
db1
├── t_order_0
├── t_order_1
└── t_order_2
</code></pre>
<h3 id="jar包引入">JAR包引入</h3>
<p>引入必要的 JAR 包，其中最重要的是shardingsphere-jdbc-core-spring-boot-starter和mysql-connector-java这两个。为了保证功能的全面性和兼容性，以及避免因低版本包导致的不必要错误和调试工作，我选择的包版本都较高。</p>
<p>图片
shardingsphere-jdbc-core-spring-boot-starter 是 ShardingSphere 框架的核心组件，提供了对 JDBC 的分库分表支持；而 mysql-connector-java 则是 MySQL JDBC 驱动程序的实现，用于连接MySQL数据库。除此之外，我使用了JPA作为持久化工具还引入了相应的依赖包。</p>
<pre><code class="language-xml">&lt;!-- jpa持久化工具 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
    &lt;version&gt;2.7.6&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- 必须引入的包 mysql --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
    &lt;version&gt;8.0.31&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- 必须引入的包 ShardingSphere --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.shardingsphere&lt;/groupId&gt;
    &lt;artifactId&gt;shardingsphere-jdbc-core-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;5.2.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3 id="yml配置">YML配置</h3>
<p>我个人是比较推荐使用YML配置方式来实现 sharding-jdbc 分库分表的，使用YML配置方式不仅可以让分库分表的实现更加简单、高效、可维护，也更符合 SpringBoot的开发规范。</p>
<p>在 src/main/resources/application.yml 路径文件下添加以下完整的配置，即可实现对t_order表的分库分表，接下来拆解看看每个配置模块都做了些什么。</p>
<pre><code class="language-yaml">spring:
  shardingsphere:
    # 数据源配置
    datasource:
      # 数据源名称，多数据源以逗号分隔
      names: db0,db1
      db0:
        type: com.zaxxer.hikari.HikariDataSource
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbc-url: jdbc:mysql://127.0.0.1:3306/shardingsphere-db1?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true
        username: root
        password: 123456
      db1:
        type: com.zaxxer.hikari.HikariDataSource
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbc-url: jdbc:mysql://127.0.0.1:3306/shardingsphere-db0?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true
        username: root
        password: 123456
    # 分片规则配置
    rules:
      sharding:
        # 分片算法配置
        sharding-algorithms:
          database-inline:
            # 分片算法类型
            type: INLINE
            props:
              # 分片算法的行表达式（算法自行定义，此处为方便演示效果）
              algorithm-expression: db$-&gt;{order_id &gt; 4?1:0}
          table-inline:
            # 分片算法类型
            type: INLINE
            props:
              # 分片算法的行表达式
              algorithm-expression: t_order_$-&gt;{order_id % 4}
        tables:
          # 逻辑表名称
          t_order:
            # 行表达式标识符可以使用 ${...} 或 $-&gt;{...}，但前者与 Spring 本身的属性文件占位符冲突，因此在 Spring 环境中使用行表达式标识符建议使用 $-&gt;{...}
            actual-data-nodes: db${0..1}.t_order_${0..3}
            # 分库策略
            database-strategy:
              standard:
                # 分片列名称
                sharding-column: order_id
                # 分片算法名称
                sharding-algorithm-name: database-inline
            # 分表策略
            table-strategy:
              standard:
                # 分片列名称
                sharding-column: order_id
                # 分片算法名称
                sharding-algorithm-name: table-inline
    # 属性配置
    props:
      # 展示修改以后的sql语句
      sql-show: true
</code></pre>
<p>以下是 shardingsphere 多数据源信息的配置，其中的 names 表示需要连接的数据库别名列表，每添加一个数据库名就需要新增一份对应的数据库连接配置。</p>
<pre><code class="language-yaml">spring:
  shardingsphere:
    # 数据源配置
    datasource:
      # 数据源名称，多数据源以逗号分隔
      names: db0,db1
      db0:
        type: com.zaxxer.hikari.HikariDataSource
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbc-url: jdbc:mysql://127.0.0.1:3306/shardingsphere-db1?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true
        username: root
        password: 123456
      db1:
        type: com.zaxxer.hikari.HikariDataSource
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbc-url: jdbc:mysql://127.0.0.1:3306/shardingsphere-db0?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true
        username: root
        password: 123456
</code></pre>
<p>rules节点下为分片规则的配置，sharding-algorithms 节点为自定义的分片算法模块，分片算法可以在后边配置表的分片规则时被引用，其中：</p>
<ul>
<li><code>database-inline</code>：自定义的分片算法名称；</li>
<li><code>type</code>：该分片算法的类型，这里先以 <code>inline</code> 为例，后续会有详细章节介绍；</li>
<li><code>props</code>：指定该分片算法的具体内容，其中 <code>algorithm-expression</code> 是该分片算法的表达式，即根据分片键值计算出要访问的真实数据库名或表名，。</li>
<li><code>db$-&gt;{order_id % 2}</code> 这种为 Groovy 语言表达式，表示对分片键 <code>order_id</code> 进行取模，根据取模结果计算出db0、db1，分表的表达式同理。</li>
</ul>
<pre><code class="language-yaml">spring:
  shardingsphere:
    # 规则配置
    rules:
      sharding:
        # 分片算法配置
        sharding-algorithms:
          database-inline:
            # 分片算法类型
            type: INLINE
            props:
              # 分片算法的行表达式（算法自行定义，此处为方便演示效果）
              algorithm-expression: db$-&gt;{order_id % 2}
          table-inline:
            # 分片算法类型
            type: INLINE
            props:
              # 分片算法的行表达式
              algorithm-expression: t_order_$-&gt;{order_id % 3}
</code></pre>
<p><code>tables</code>节点定义了逻辑表名<code>t_order</code>的分库分表规则。<code>actual-data-nodes</code> 用于设置物理数据节点的数量。</p>
<p><code>db${0..1}.t_order_${0..3} </code>表达式意思此逻辑表在不同数据库实例中的分布情况，如果只想单纯的分库或者分表，可以调整表达式，分库<code>db${0..1}</code>、分表<code>t_order_${0..3}</code>。</p>
<pre><code class="language-shell">db0
├── t_order_0
├── t_order_1
└── t_order_2
db1
├── t_order_0
├── t_order_1
└── t_order_2
spring:
  shardingsphere:
    # 规则配置
    rules:
      sharding:
        tables:
          # 逻辑表名称
          t_order:
            # 行表达式标识符可以使用 ${...} 或 $-&gt;{...}，但前者与 Spring 本身的属性文件占位符冲突，因此在 Spring 环境中使用行表达式标识符建议使用 $-&gt;{...}
            actual-data-nodes: db${0..1}.t_order_${0..3}
            # 分库策略
            database-strategy:
              standard:
                # 分片列名称
                sharding-column: order_id
                # 分片算法名称
                sharding-algorithm-name: database-inline
            # 分表策略
            table-strategy:
              standard:
                # 分片列名称
                sharding-column: order_id
                # 分片算法名称
                sharding-algorithm-name: table-inline
</code></pre>
<p>database-strategy 和 table-strategy分别设置了分库和分表策略；</p>
<p>sharding-column表示根据表的哪个列（分片键）进行计算分片路由到哪个库、表中；</p>
<p>sharding-algorithm-name 表示使用哪种分片算法对分片键进行运算处理，这里可以引用刚才自定义的分片算法名称使用。</p>
<p>props节点用于设置其他的属性配置，比如：sql-show表示是否在控制台输出解析改造后真实执行的 SQL语句以便进行调试。</p>
<pre><code class="language-yaml">spring:
  shardingsphere:
    # 属性配置
    props:
      # 展示修改以后的sql语句
      sql-show: true
</code></pre>
<p>跑个单测在向数据库中插入 10 条数据时，发现数据已经相对均匀地插入到了各个分片中。</p>
<p>图片</p>
<h3 id="java-编码">JAVA 编码</h3>
<p>如果您不想通过 yml 配置文件实现自动装配，也可以使用 ShardingSphere 的 API 实现相同的功能。使用 API 完成分片规则和数据源的配置，优势在于更加灵活、可定制性强的特点，方便进行二次开发和扩展。</p>
<p>下边是纯JAVA编码方式实现分库分表的完整代码。</p>
<pre><code class="language-java">@Configuration
public class ShardingConfiguration {

    /**
     * 配置分片数据源
     */
    @Bean
    public DataSource getShardingDataSource() throws SQLException {
        Map&lt;String, DataSource&gt; dataSourceMap = new HashMap&lt;&gt;();
        dataSourceMap.put(&quot;db0&quot;, dataSource1());
        dataSourceMap.put(&quot;db1&quot;, dataSource2());

        // 分片rules规则配置
        ShardingRuleConfiguration shardingRuleConfig = new ShardingRuleConfiguration();
        shardingRuleConfig.setShardingAlgorithms(getShardingAlgorithms());

        // 配置 t_order 表分片规则
        ShardingTableRuleConfiguration orderTableRuleConfig = new ShardingTableRuleConfiguration(&quot;t_order&quot;, &quot;db${0..1}.t_order_${0..2}&quot;);
        orderTableRuleConfig.setTableShardingStrategy(new StandardShardingStrategyConfiguration(&quot;order_id&quot;, &quot;table-inline&quot;));
        orderTableRuleConfig.setDatabaseShardingStrategy(new StandardShardingStrategyConfiguration(&quot;order_id&quot;, &quot;database-inline&quot;));
        shardingRuleConfig.getTables().add(orderTableRuleConfig);

        // 是否在控制台输出解析改造后真实执行的 SQL
        Properties properties = new Properties();
        properties.setProperty(&quot;sql-show&quot;, &quot;true&quot;);
        // 创建 ShardingSphere 数据源
        return ShardingSphereDataSourceFactory.createDataSource(dataSourceMap, Collections.singleton(shardingRuleConfig), properties);
    }

    /**
     * 配置数据源1
     */
    public DataSource dataSource1() {
        HikariDataSource dataSource = new HikariDataSource();
        dataSource.setDriverClassName(&quot;com.mysql.cj.jdbc.Driver&quot;);
        dataSource.setJdbcUrl(&quot;jdbc:mysql://127.0.0.1:3306/shardingsphere-db1?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true&quot;);
        dataSource.setUsername(&quot;root&quot;);
        dataSource.setPassword(&quot;123456&quot;);
        return dataSource;
    }

    /**
     * 配置数据源2
     */
    public DataSource dataSource2() {
        HikariDataSource dataSource = new HikariDataSource();
        dataSource.setDriverClassName(&quot;com.mysql.cj.jdbc.Driver&quot;);
        dataSource.setJdbcUrl(&quot;jdbc:mysql://127.0.0.1:3306/shardingsphere-db0?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true&quot;);
        dataSource.setUsername(&quot;root&quot;);
        dataSource.setPassword(&quot;123456&quot;);
        return dataSource;
    }

    /**
     * 配置分片算法
     */
    private Map&lt;String, AlgorithmConfiguration&gt; getShardingAlgorithms() {
        Map&lt;String, AlgorithmConfiguration&gt; shardingAlgorithms = new LinkedHashMap&lt;&gt;();

        // 自定义分库算法
        Properties databaseAlgorithms = new Properties();
        databaseAlgorithms.setProperty(&quot;algorithm-expression&quot;, &quot;db$-&gt;{order_id % 2}&quot;);
        shardingAlgorithms.put(&quot;database-inline&quot;, new AlgorithmConfiguration(&quot;INLINE&quot;, databaseAlgorithms));

        // 自定义分表算法
        Properties tableAlgorithms = new Properties();
        tableAlgorithms.setProperty(&quot;algorithm-expression&quot;, &quot;t_order_$-&gt;{order_id % 3}&quot;);
        shardingAlgorithms.put(&quot;table-inline&quot;, new AlgorithmConfiguration(&quot;INLINE&quot;, tableAlgorithms));

        return shardingAlgorithms;
    }
}
</code></pre>
<p>ShardingSphere 的分片核心配置类 ShardingRuleConfiguration，它主要用来加载分片规则、分片算法、主键生成规则、绑定表、广播表等核心配置。我们将相关的配置信息 set到配置类，并通过createDataSource创建并覆盖 DataSource，最后注入Bean。</p>
<p>使用Java编码方式只是将 ShardingSphere 预知的加载配置逻辑自己手动实现了一遍，两种实现方式比较下来，还是推荐使用YML配置方式来实现 ShardingSphere的分库分表功能，相比于Java编码，YML配置更加直观和易于理解，开发者可以更加专注于业务逻辑的实现，而不需要过多关注底层技术细节。</p>
<pre><code class="language-java">@Getter
@Setter
public final class ShardingRuleConfiguration implements DatabaseRuleConfiguration, DistributedRuleConfiguration {
    
    // 分表配置配置
    private Collection&lt;ShardingTableRuleConfiguration&gt; tables = new LinkedList&lt;&gt;();
    // 自动分片规则配置
    private Collection&lt;ShardingAutoTableRuleConfiguration&gt; autoTables = new LinkedList&lt;&gt;();
    // 绑定表配置
    private Collection&lt;String&gt; bindingTableGroups = new LinkedList&lt;&gt;();
    // 广播表配置
    private Collection&lt;String&gt; broadcastTables = new LinkedList&lt;&gt;();
    // 默认的分库策略配置
    private ShardingStrategyConfiguration defaultDatabaseShardingStrategy;
    // 默认的分表策略配置
    private ShardingStrategyConfiguration defaultTableShardingStrategy;
    // 主键生成策略配置
    private KeyGenerateStrategyConfiguration defaultKeyGenerateStrategy;
    
    private ShardingAuditStrategyConfiguration defaultAuditStrategy;
    // 默认的分片键
    private String defaultShardingColumn;
    // 自定义的分片算法
    private Map&lt;String, AlgorithmConfiguration&gt; shardingAlgorithms = new LinkedHashMap&lt;&gt;();
    // 主键生成算法
    private Map&lt;String, AlgorithmConfiguration&gt; keyGenerators = new LinkedHashMap&lt;&gt;();
    
    private Map&lt;String, AlgorithmConfiguration&gt; auditors = new LinkedHashMap&lt;&gt;();
}
</code></pre>
<p>经过查看控制台打印的真实 SQL日志，发现在使用 ShardingSphere 进行数据插入时，其内部实现会先根据分片键 order_id 查询记录是否存在。如果记录不存在，则执行插入操作；如果记录已存在，则进行更新操作。看似只会执行10条插入SQL，但实际上需要执行20条SQL语句，多少会对数据库的性能产生一定的影响。</p>
<p>图片
功能挺简单的，但由于不同版本的 ShardingSphere 的 API 变化较大 ，网上类似的资料太不靠谱，本来想着借助 GPT 快点实现这段代码，结果差点和它干起来，最后还是扒了扒看了源码完成的。</p>
<p>图片</p>
<h2 id="默认数据源">默认数据源</h2>
<p>可能有些小伙伴会有疑问，对于已经设置了分片规则的t_order表可以正常操作数据，如果我们的t_user表没有配置分库分表规则，那么在执行插入操作时会发生什么呢？</p>
<p>仔细看了下官方的技术文档，其实已经回答了小伙伴这个问题，如果只有部分数据库分库分表，是否需要将不分库分表的表也配置在分片规则中？官方回答：不需要 。</p>
<p>图片
我们创建一张t_user表，并且不对其进行任何分片规则的配置。在我的印象中没有通过设置 default-data-source-name 默认的数据源，操作未分片的表应该会报错的！</p>
<p>图片
我们向t_user尝试插入一条数据，结果居然成功了？翻了翻库表发现数据只被插在了 db1 库里，说明没有走广播路由。</p>
<p>图片
shardingsphere-jdbc 5.x版本移除了原本的默认数据源配置，自动使用了默认数据源的规则，为验证我多增加了数据源，尝试性的调整了db2、db0、db1的顺序，再次插入数据，这回记录被插在了 db2 库，反复试验初步得出结论。</p>
<p><strong>未分片的表默认会使用第一个数据源作为默认数据源，也就是 datasource.names 第一个</strong>。</p>
<pre><code class="language-yaml">spring:
  shardingsphere:
    # 数据源配置
    datasource:
      # 数据源名称，多数据源以逗号分隔
      names: db2 , db1 , db0
</code></pre>
<h2 id="总结">总结</h2>
<p>本期我们对 shardingsphere 做了简单的介绍，并使用 yml 和 Java编码的方式快速实现了分库分表功能。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/lorchr/light-docusaurus/tree/main/middleware/shardingsphere/1-ShardingSphere-Separate-Database-And-Table.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">最后<!-- -->由 <b>Lorchr</b> <!-- -->于 <b><time datetime="2024-02-23T08:49:58.000Z">2024年2月23日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/light-docusaurus/middleware/category/shardingsphere/"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">ShardingSphere</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/light-docusaurus/middleware/shardingsphere/Shardingsphere-Jdbc-ReadWrite-Split/"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Shardingsphere-Jdbc-ReadWrite-Split</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#一什么是-shardingsphere" class="table-of-contents__link toc-highlight">一、什么是 ShardingSphere？</a></li><li><a href="#二为什么选-shardingsphere" class="table-of-contents__link toc-highlight">二、为什么选 ShardingSphere？</a><ul><li><a href="#cobar" class="table-of-contents__link toc-highlight">Cobar</a></li><li><a href="#mycat" class="table-of-contents__link toc-highlight">MyCAT</a></li><li><a href="#tddl" class="table-of-contents__link toc-highlight">TDDL</a></li><li><a href="#mysql-fabric" class="table-of-contents__link toc-highlight">Mysql Fabric</a></li><li><a href="#shardingsphere" class="table-of-contents__link toc-highlight">ShardingSphere</a></li><li><a href="#产品比较" class="table-of-contents__link toc-highlight">产品比较</a></li></ul></li><li><a href="#三shardingsphere-成员" class="table-of-contents__link toc-highlight">三、ShardingSphere 成员</a><ul><li><a href="#sharding-jdbc" class="table-of-contents__link toc-highlight">sharding-jdbc</a></li><li><a href="#sharding-proxy" class="table-of-contents__link toc-highlight">sharding-proxy</a></li></ul></li><li><a href="#四快速实现" class="table-of-contents__link toc-highlight">四、快速实现</a><ul><li><a href="#准备工作" class="table-of-contents__link toc-highlight">准备工作</a></li><li><a href="#jar包引入" class="table-of-contents__link toc-highlight">JAR包引入</a></li><li><a href="#yml配置" class="table-of-contents__link toc-highlight">YML配置</a></li><li><a href="#java-编码" class="table-of-contents__link toc-highlight">JAVA 编码</a></li></ul></li><li><a href="#默认数据源" class="table-of-contents__link toc-highlight">默认数据源</a></li><li><a href="#总结" class="table-of-contents__link toc-highlight">总结</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/docs/category/guide/">Torch</a></li><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/middleware/">Middleware</a></li><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/electron/">Electron</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/blog/">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/diy/">DIY</a></li><li class="footer__item"><a href="https://github.com/lorchr/light-docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Offical</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docusaurus.io/docs/playground" target="_blank" rel="noopener noreferrer" class="footer__link-item">Playground<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Light-Docusaurus, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>