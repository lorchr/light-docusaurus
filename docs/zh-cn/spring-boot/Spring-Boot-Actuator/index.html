<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-zh-cn/spring-boot/Spring-Boot-Actuator" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Spring-Boot-Actuator | Light Docusaurus</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lorchr.github.io/light-docusaurus/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://lorchr.github.io/light-docusaurus/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://lorchr.github.io/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-Actuator/"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Spring-Boot-Actuator | Light Docusaurus"><meta data-rh="true" name="description" content="- SpringBoot 监控神器—Actuator 保姆级教程"><meta data-rh="true" property="og:description" content="- SpringBoot 监控神器—Actuator 保姆级教程"><link data-rh="true" rel="icon" href="/light-docusaurus/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lorchr.github.io/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-Actuator/"><link data-rh="true" rel="alternate" href="https://lorchr.github.io/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-Actuator/" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://lorchr.github.io/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-Actuator/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://TLGHDZ3Y2I-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/light-docusaurus/blog/rss.xml" title="Light Docusaurus RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/light-docusaurus/blog/atom.xml" title="Light Docusaurus Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Light Docusaurus" href="/light-docusaurus/opensearch.xml"><link rel="stylesheet" href="/light-docusaurus/assets/css/styles.609e5209.css">
<script src="/light-docusaurus/assets/js/runtime~main.79436775.js" defer="defer"></script>
<script src="/light-docusaurus/assets/js/main.af3b976d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/light-docusaurus/"><div class="navbar__logo"><img src="/light-docusaurus/img/logo.svg" alt="Torch Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/light-docusaurus/img/logo.svg" alt="Torch Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Torch</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/light-docusaurus/docs/category/guide/">Torch</a><a class="navbar__item navbar__link" href="/light-docusaurus/blog/">Blog</a><a class="navbar__item navbar__link" href="/light-docusaurus/middleware/">Middleware</a><a class="navbar__item navbar__link" href="/light-docusaurus/electron/">Electron</a><a class="navbar__item navbar__link" href="/light-docusaurus/postman/">Postman</a><a class="navbar__item navbar__link" href="/light-docusaurus/diy/">DIY</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-Actuator/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-Hans">简体中文</a></li></ul></div><a href="https://github.com/lorchr/light-docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/guide/">Guide</a><button aria-label="展开侧边栏分类 &#x27;Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/develop-environment/">Develop Environment</a><button aria-label="展开侧边栏分类 &#x27;Develop Environment&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/java-jvm/">Java (JVM)</a><button aria-label="展开侧边栏分类 &#x27;Java (JVM)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/light-docusaurus/docs/category/spring-boot/">Spring Boot</a><button aria-label="折叠侧边栏分类 &#x27;Spring Boot&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Api-Specification/">Api-Specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/SPI/">SPI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Common-Async-Data-Handle/">Common-Async-Data-Handle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Multi-Thread-Transaction/">Multi-Thread-Transaction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Obfuscate-Spring-Boot-Application-With-Classfinal/">Obfuscate-Spring-Boot-Application-With-Classfinal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Obfuscate-Spring-Boot-Application-With-Proguard/">Obfuscate-Spring-Boot-Application-With-Proguard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-Endpoints/">Spring-Boot-Endpoints</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-Ip-Address-Parse/">Spring-Boot-Ip-Address-Parse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-Ip-Ragion-Parse/">Spring-Boot-Ip-Ragion-Parse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-Json-Diff/">Spring-Boot-Json-Diff</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-Native-Memory-Leak/">Spring-Boot-Native-Memory-Leak</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-Unit-Test/">Spring-Boot-Unit-Test</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Core/">Spring-Core</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Rate-Limit/">Spring-Rate-Limit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Statemachine/">Spring-Statemachine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/SpringEvent/">SpringEvent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-Dynamic-Datasource/">Spring-Boot-Dynamic-Datasource</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-QrCode-Zxing/">Spring-Boot-QrCode-Zxing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-With-Enum-Type/">Spring-Boot-With-Enum-Type</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-Actuator/">Spring-Boot-Actuator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-Parameter-Validate/">Spring-Boot-Parameter-Validate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/Sql-Injection/">Sql-Injection</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-boot/file/File-Upload-Split-Continue-on-Break/">file</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/light-docusaurus/docs/category/file/">File</a><button aria-label="展开侧边栏分类 &#x27;File&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/spring-cloud/">Spring Cloud</a><button aria-label="展开侧边栏分类 &#x27;Spring Cloud&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/spring-security/">Spring Security</a><button aria-label="展开侧边栏分类 &#x27;Spring Security&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/spring-authorization-server/">Spring Authorization Server</a><button aria-label="展开侧边栏分类 &#x27;Spring Authorization Server&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/database/">Database</a><button aria-label="展开侧边栏分类 &#x27;Database&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/git/">Git</a><button aria-label="展开侧边栏分类 &#x27;Git&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/linux/">Linux</a><button aria-label="展开侧边栏分类 &#x27;Linux&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/docker/">Docker</a><button aria-label="展开侧边栏分类 &#x27;Docker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/kubernetes/">Kubernetes</a><button aria-label="展开侧边栏分类 &#x27;Kubernetes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/test/">Test</a><button aria-label="展开侧边栏分类 &#x27;Test&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/others/">Others</a><button aria-label="展开侧边栏分类 &#x27;Others&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/light-docusaurus/docs/zh-cn/awesome-open-source/">Awesome open source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/light-docusaurus/docs/zh-cn/windows/">Windows</a></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/light-docusaurus/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/light-docusaurus/docs/category/spring-boot/"><span itemprop="name">Spring Boot</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Spring-Boot-Actuator</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Spring-Boot-Actuator</h1></header><ul>
<li><a href="https://mp.weixin.qq.com/s/qmrBW1rdBl-f0khijcf7uw">SpringBoot 监控神器—Actuator 保姆级教程</a></li>
</ul>
<p>SpringBoot自带监控功能Actuator，可以帮助实现对程序内部运行情况监控，比如监控状况、Bean加载情况、环境变量、日志信息、线程信息等</p>
<h2 id="配置actuator">配置Actuator</h2>
<p>pom.xml</p>
<pre><code class="language-xml">&lt;!-- web start--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!-- web end--&gt;
&lt;!-- actuator start--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!-- actuator end--&gt;
</code></pre>
<p>浏览器打开链接 <code>http://localhost:8080/actuator/</code></p>
<p>可以看到所有支持的连接，默认只有</p>
<ul>
<li><code>/actuator</code></li>
<li><code>/actuator/health</code></li>
<li><code>/actuator/health/{component}</code></li>
<li><code>/actuator/health/{component}/{instance}</code></li>
<li><code>/actuator/info</code></li>
</ul>
<p>bean加载情况 <code>http://localhost:8080/actuator/beans</code></p>
<h2 id="具体的使用方法">具体的使用方法：</h2>
<p>引入上述的依赖jar
通过下面的配置启用所有的监控端点，默认情况下，这些端点是禁用的；</p>
<pre><code class="language-yaml">management:
  endpoints:
    web:
      exposure:
        include: &quot;*&quot;
</code></pre>
<p>“*”号代表启用所有的监控端点，可以单独启用，例如，health，info，metrics等</p>
<h2 id="actuator-的-rest-接口">Actuator 的 REST 接口</h2>
<p>Actuator 监控分成两类：原生端点和用户自定义端点；自定义端点主要  是指扩展性，用户可以根据自己的实际应用，定义一些比较关心的指标，在运行期进行监控。</p>
<p>原生端点是在应用程序里提供众多 Web 接口，通过它们了解应用程序运行时的内部状况。原生端点又可以分成三类：</p>
<ul>
<li><strong>应用配置类</strong> ：可以查看应用在运行期的静态信息：例如自动配置信息、加载的 springbean 信息、yml 文件配置信息、环境信息、请求映射信息；</li>
<li><strong>度量指标类</strong> ：主要是运行期的动态信息，例如堆栈、请求连、一些健康指标、metrics 信息等；</li>
<li><strong>操作控制类</strong> ：主要是指 shutdown,用户可以发送一个请求将应用的监控功能关闭。
Actuator 提供了 13 个接口，具体如下表所示。</li>
</ul>
<table><thead><tr><th>Http请求方式</th><th>端点</th><th>含义</th></tr></thead><tbody><tr><td>GET</td><td>/auditevents</td><td>显示应用暴露的审计事件 (比如认证进入、订单失败)</td></tr><tr><td>GET</td><td>/beans</td><td>描述应用程序上下文里全部的 Bean，以及它们的关系</td></tr><tr><td>GET</td><td>/conditions</td><td>就是 1.0 的 <code>/autoconfig</code> ，提供一份自动配置生效的条件情况，记录哪些自动配置条件通过了，哪些没通过</td></tr><tr><td>GET</td><td>/configprops</td><td>描述配置属性(包含默认值)如何注入Bean</td></tr><tr><td>GET</td><td>/env</td><td>获取全部环境属性</td></tr><tr><td>GET</td><td><code>/env/{name}</code></td><td>根据名称获取特定的环境属性值</td></tr><tr><td>GET</td><td>/flyway</td><td>提供一份 Flyway 数据库迁移信息</td></tr><tr><td>GET</td><td>/liquidbase</td><td>显示Liquibase 数据库迁移的纤细信息</td></tr><tr><td>GET</td><td>/health</td><td>报告应用程序的健康指标，这些值由 HealthIndicator 的实现类提供</td></tr><tr><td>GET</td><td>/heapdump</td><td>dump 一份应用的 JVM 堆信息</td></tr><tr><td>GET</td><td>/httptrace</td><td>显示HTTP足迹，最近100个HTTP request/repsponse</td></tr><tr><td>GET</td><td>/info</td><td>获取应用程序的定制信息，这些信息由info打头的属性提供</td></tr><tr><td>GET</td><td>/logfile</td><td>返回log file中的内容(如果 <code>logging.file</code> 或者 <code>logging.path</code> 被设置)</td></tr><tr><td>GET</td><td>/loggers</td><td>显示和修改配置的loggers</td></tr><tr><td>GET</td><td>/metrics</td><td>报告各种应用程序度量信息，比如内存用量和HTTP请求计数</td></tr><tr><td>GET</td><td><code>/metrics/{name}</code></td><td>报告指定名称的应用程序度量值</td></tr><tr><td>GET</td><td>/scheduledtasks</td><td>展示应用中的定时任务信息</td></tr><tr><td>GET</td><td>/sessions</td><td>如果我们使用了 Spring Session 展示应用中的 HTTP sessions 信息</td></tr><tr><td>POST</td><td>/shutdown</td><td>关闭应用程序，要求<code>endpoints.shutdown.enabled</code>设置为true</td></tr><tr><td>GET</td><td>/mappings</td><td>描述全部的 URI路径，以及它们和控制器(包含Actuator端点)的映射关系</td></tr><tr><td>GET</td><td>/threaddump</td><td>获取线程活动的快照</td></tr></tbody></table>
<h2 id="命令详解">命令详解</h2>
<p>在 Spring Boot 2.x 中为了安全期间，Actuator 只开放了两个端点 <code>/actuator/health</code> 和 <code>/actuator/info</code>。可以在配置文件中设置打开。</p>
<p>可以打开所有的监控点</p>
<pre><code class="language-yaml">management:
  endpoints:
    web:
      exposure:
        include: &quot;*&quot;
</code></pre>
<p>也可以选择打开部分</p>
<pre><code class="language-yaml">management:
  endpoints:
    web:
      exposure:
        exclude: beans,trace
</code></pre>
<p>Actuator 默认所有的监控点路径都在<code>/actuator/*</code>，当然如果有需要这个路径也支持定制。</p>
<pre><code class="language-yaml">management:
  endpoints:
    web:
      base-path: /manage #记得要加上/
</code></pre>
<p>设置完重启后，再次访问地址就会变成<code>/manage/*</code></p>
<p>Actuator 几乎监控了应用涉及的方方面面，我们重点讲述一些经常在项目中常用的命令。</p>
<h3 id="health">health</h3>
<p>health 主要用来检查应用的运行状态，这是我们使用最高频的一个监控点。通常使用此接口提醒我们应用实例的运行状态，以及应用不”健康“的原因，比如数据库连接、磁盘空间不够等。</p>
<p>默认情况下 health 的状态是开放的，添加依赖后启动项目，访问：<code>http://localhost:8080/actuator/health</code>即可看到应用的状态。</p>
<pre><code class="language-json">{
    &quot;status&quot; : &quot;UP&quot;
}
</code></pre>
<p>要想查看详细的应用健康信息需要配置<code>management.endpoint.health.show-details</code> 的值为always，配置之后我们再次访问<code>http://localhost:8080/actuator/health</code>，获取的信息如下：</p>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;UP&quot;,
    &quot;components&quot;: {
        &quot;diskSpace&quot;: {
            &quot;status&quot;: &quot;UP&quot;,
            &quot;details&quot;: {
                &quot;total&quot;: 236510507008,
                &quot;free&quot;: 223361744896,
                &quot;threshold&quot;: 10485760
            }
        },
        &quot;ping&quot;: {
            &quot;status&quot;: &quot;UP&quot;
        }
    }
}
</code></pre>
<p>Spring boot的健康信息都是从ApplicationContext中的各种HealthIndicator Beans中收集到的，Spring boot框架中包含了大量的HealthIndicators的实现类，当然你也可以实现自己认为的健康状态。</p>
<p>默认情况下，最终的 Spring Boot 应用的状态是由 HealthAggregator 汇总而成的，汇总的算法是：</p>
<ul>
<li>设置状态码顺序：<code>setStatusOrder(Status.DOWN, Status.OUT_OF_SERVICE, Status.UP, Status.UNKNOWN);</code>。</li>
<li>过滤掉不能识别的状态码。</li>
<li>如  果无任何状态码，整个 Spring Boot 应用的状态是 UNKNOWN。</li>
<li>将所有收集到的状态码按照 1 中的顺序排序。</li>
<li>返回有序状态码序列中的第一个状态码，作为整个 Spring Boot 应用的状态。</li>
</ul>
<p>health 通过合并几个健康指数检查应用的健康情况。Spring boot框架自带的 HealthIndicators 目前包括：</p>
<table><thead><tr><th>实现</th><th>含义</th></tr></thead><tbody><tr><td>CassandraHealthIndicator</td><td>Checks that a Cassandra database is up.</td></tr><tr><td>DiskSpaceHealthIndicator</td><td>Checks for low disk space.</td></tr><tr><td>DataSourceHealthIndicator</td><td>Checks that a connection to DataSource can be obtained.</td></tr><tr><td>ElasticsearchHealthIndicator</td><td>Checks that an Elasticsearch cluster is up.</td></tr><tr><td>InfluxDbHealthIndicator</td><td>Checks that an InfluxDB server is up.</td></tr><tr><td>JmsHealthIndicator</td><td>Checks that a JMS broker is up.</td></tr><tr><td>MailHealthIndicator</td><td>Checks that a mail server is up.</td></tr><tr><td>MongoHealthIndicator</td><td>Checks that a Mongo database is up.</td></tr><tr><td>Neo4jHealthIndicator</td><td>Checks that a Neo4j server is up.</td></tr><tr><td>RabbitHealthIndicator</td><td>Checks that a Neo4j server is up.</td></tr><tr><td>RedisHealthIndicator</td><td>Checks that a Redis server is up.</td></tr><tr><td>SolrHealthIndicator</td><td>Checks that a Solr server is up.</td></tr></tbody></table>
<p>举个例子，如果你的应用使用 Redis，RedisHealthindicator 将被当作检查的一部分；如果使用 MongoDB，那么MongoHealthIndicator 将被当作检查的一部分。</p>
<p>可以在配置文件中关闭特定的健康检查指标，比如关闭 redis 的健康检查：</p>
<pre><code class="language-yaml">management:
  health:
    redise:
      enabled: false
</code></pre>
<p>默认，所有的这些健康指标被当作健康检查的一部分。</p>
<h3 id="自定义-healthindicator-健康检查">自定义 HealthIndicator 健康检查</h3>
<p>有时候需要提供自定义的健康状态检查信息，你可以通过实现HealthIndicator的接口来实现，并将该实现类注册为spring bean。你需要实现其中的health()方法，并返回自定义的健康状态响应信息，该响应信息应该包括一个状态码和要展示详细信息。例如，下面就是一个接口HealthIndicator的实现类：</p>
<pre><code class="language-java">@Component
public class MyHealthIndicator implements HealthIndicator {

    @Override
    public Health health() {
        int errorCode = check(); // perform some specific health check
        if (errorCode != 0) {
            return Health.down().withDetail(&quot;Error Code&quot;, errorCode).build();
        }
        return Health.up().build();
    }

}
</code></pre>
<p>另外，除了Spring boot定义的几个状态类型，我们也可以自定义状态类型，用来表示一个新的系统状态。在这种情况下，你还需要实现接口 HealthAggregator ，或者通过配置 <code>management.health.status.order</code> 来继续使用HealthAggregator的默认实现。</p>
<p>例如，在你自定义的健康检查HealthIndicator的实现类中，使用了自定义的状态类型FATAL，为了配置该状态类型的严重程度，你需要在application的配置文件中添加如下配置：</p>
<pre><code class="language-yaml">management:
  health:
    status:
      order: FATAL, DOWN, OUT_OF_SERVICE, UNKNOWN, UP
</code></pre>
<p>在做健康检查时，响应中的HTTP状态码反应了整体的健康状态，（例如，UP 对应 200, 而 OUT_OF_SERVICE 和 DOWN 对应 503）。同样，你也需要为自定义的状态类型设置对应的HTTP状态码，例如，下面的配置可以将 FATAL 映射为 503（服务不可用）：</p>
<pre><code class="language-yaml">management:
  health:
    status:
      http-mapping:
        FATAL: 503
</code></pre>
<p>下面是内置健康状态类型对应的HTTP状态码列表：</p>
<table><thead><tr><th>Status</th><th>Mapping</th></tr></thead><tbody><tr><td>OUT_OF_SERVICE</td><td>SERVICE_UNAVAILABLE (503)</td></tr><tr><td>DOWN</td><td>SERVICE_UNAVAILABLE (503)</td></tr><tr><td>UP</td><td>No mapping by default, so http status is 200</td></tr><tr><td>UNKNOWN</td><td>No mapping by default, so http status is 200</td></tr></tbody></table>
<h3 id="info">info</h3>
<p>info 就是我们自己配置在配置文件中以 info 开头的配置信息，比如我们在示例项目中的配置是：</p>
<pre><code class="language-yaml">info:
  app:
    name:
      spring-boot-actuator
    version: 1.0.0
    test: test
</code></pre>
<p>启动示例项目，访问：<code>http://localhost:8080/actuator/info</code> 返回部分信息如下：</p>
<pre><code class="language-json">{
  &quot;app&quot;: {
    &quot;name&quot;: &quot;spring-boot-actuator&quot;,
    &quot;version&quot;: &quot;1.0.0&quot;,
    &quot;test&quot;:&quot;test&quot;
  }
}
</code></pre>
<h3 id="beans">beans</h3>
<p>根据示例就可以看出，展示了 bean 的别名、类型、是否单例、类的地址、依赖等信息。</p>
<p>启动示例项目，访问：<code>http://localhost:8080/actuator/beans</code> 返回部分信息如下：</p>
<pre><code class="language-json">[
  {
    &quot;context&quot;: &quot;application:8080:management&quot;,
    &quot;parent&quot;: &quot;application:8080&quot;,
    &quot;beans&quot;: [
      {
        &quot;bean&quot;: &quot;embeddedServletContainerFactory&quot;,
        &quot;aliases&quot;: [
          
        ],
        &quot;scope&quot;: &quot;singleton&quot;,
        &quot;type&quot;: &quot;org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory&quot;,
        &quot;resource&quot;: &quot;null&quot;,
        &quot;dependencies&quot;: [
          
        ]
      },
      {
        &quot;bean&quot;: &quot;endpointWebMvcChildContextConfiguration&quot;,
        &quot;aliases&quot;: [
          
        ],
        &quot;scope&quot;: &quot;singleton&quot;,
        &quot;type&quot;: &quot;org.springframework.boot.actuate.autoconfigure.EndpointWebMvcChildContextConfiguration$$EnhancerBySpringCGLIB$$a4a10f9d&quot;,
        &quot;resource&quot;: &quot;null&quot;,
        &quot;dependencies&quot;: [
          
        ]
      }
  }
]
</code></pre>
<h3 id="conditions">conditions</h3>
<p>Spring Boot 的自动配置功能非常便利，但有时候也意味着出问题比较难找出具体的原因。使用 conditions 可以在应用运行时查看代码了某个配置在什么条件下生效，或者某个自动配置为什么没有生效。</p>
<p>启动示例项目，访问：<code>http://localhost:8080/actuator/conditions</code> 返回部分信息如下：</p>
<pre><code class="language-json">{
    &quot;positiveMatches&quot;: {
     &quot;DevToolsDataSourceAutoConfiguration&quot;: {
            &quot;notMatched&quot;: [
                {
                    &quot;condition&quot;: &quot;DevToolsDataSourceAutoConfiguration.DevToolsDataSourceCondition&quot;, 
                    &quot;message&quot;: &quot;DevTools DataSource Condition did not find a single DataSource bean&quot;
                }
            ], 
            &quot;matched&quot;: [ ]
        }, 
        &quot;RemoteDevToolsAutoConfiguration&quot;: {
            &quot;notMatched&quot;: [
                {
                    &quot;condition&quot;: &quot;OnPropertyCondition&quot;, 
                    &quot;message&quot;: &quot;@ConditionalOnProperty (spring.devtools.remote.secret) did not find property &#x27;secret&#x27;&quot;
                }
            ], 
            &quot;matched&quot;: [
                {
                    &quot;condition&quot;: &quot;OnClassCondition&quot;, 
                    &quot;message&quot;: &quot;@ConditionalOnClass found required classes &#x27;javax.servlet.Filter&#x27;, &#x27;org.springframework.http.server.ServerHttpRequest&#x27;; @ConditionalOnMissingClass did not find unwanted class&quot;
                }
            ]
        }
    }
}
</code></pre>
<h3 id="heapdump">heapdump</h3>
<p>返回一个 GZip 压缩的 JVM 堆 dump</p>
<p>启动示例项目，访问：<code>http://localhost:8080/actuator/heapdump</code> 会自动生成一个 Jvm 的堆文件 heapdump，我们可以使用 JDK 自带的 Jvm 监控工具 VisualVM 打开此文件查看内存快照。类似如下图：</p>
<p>图片</p>
<p>图片</p>
<h3 id="shutdown">shutdown</h3>
<p>开启接口优雅关闭 Spring Boot 应用，要使用这个功能首先需要在配置文件中开启：</p>
<pre><code class="language-yaml">management:
  endpoint:
    shutdown:
      enabled: true
</code></pre>
<p>配置完成之后，启动示例项目，使用 curl 模拟 post 请求访问 shutdown 接口。</p>
<p>shutdown 接口默认只支持 post 请求。</p>
<pre><code class="language-json">curl -X POST &quot;http://localhost:8080/actuator/shutdown&quot; 
{
    &quot;message&quot;: &quot;Shutting down, bye...&quot;
}
</code></pre>
<p>此时你会发现应用已经被关闭。</p>
<h3 id="mappings">mappings</h3>
<p>描述全部的 URI 路径，以及它们和控制器的映射关系</p>
<p>启动示例项目，访问：<code>http://localhost:8080/actuator/mappings</code> 返回部分信息如下：</p>
<pre><code class="language-json">{
  &quot;/**/favicon.ico&quot;: {
    &quot;bean&quot;: &quot;faviconHandlerMapping&quot;
  },
  &quot;{[/hello]}&quot;: {
    &quot;bean&quot;: &quot;requestMappingHandlerMapping&quot;,
    &quot;method&quot;: &quot;public java.lang.String com.neo.controller.HelloController.index()&quot;
  },
  &quot;{[/error]}&quot;: {
    &quot;bean&quot;: &quot;requestMappingHandlerMapping&quot;,
    &quot;method&quot;: &quot;public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)&quot;
  }
}
</code></pre>
<h3 id="threaddump">threaddump</h3>
<p>/threaddump 接口会生成当前线程活动的快照。这个功能非常 好，方便我们在日常定位问题的时候查看线程的情况。 主要展示了线程名、线程ID、线程的状态、是否等待锁资源等信息。</p>
<p>启动示例项目，访问：<code>http://localhost:8080/actuator/threaddump</code> 返回部分信息如下：</p>
<pre><code class="language-json">[
  {
    &quot;threadName&quot;: &quot;http-nio-8088-exec-6&quot;,
    &quot;threadId&quot;: 49,
    &quot;blockedTime&quot;: -1,
    &quot;blockedCount&quot;: 0,
    &quot;waitedTime&quot;: -1,
    &quot;waitedCount&quot;: 2,
    &quot;lockName&quot;: &quot;java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@1630a501&quot;,
    &quot;lockOwnerId&quot;: -1,
    &quot;lockOwnerName&quot;: null,
    &quot;inNative&quot;: false,
    &quot;suspended&quot;: false,
    &quot;threadState&quot;: &quot;WAITING&quot;,
    &quot;stackTrace&quot;: [
      {
        &quot;methodName&quot;: &quot;park&quot;,
        &quot;fileName&quot;: &quot;Unsafe.java&quot;,
        &quot;lineNumber&quot;: -2,
        &quot;className&quot;: &quot;sun.misc.Unsafe&quot;,
        &quot;nativeMethod&quot;: true
      },
      ...
      {
        &quot;methodName&quot;: &quot;run&quot;,
        &quot;fileName&quot;: &quot;TaskThread.java&quot;,
        &quot;lineNumber&quot;: 61,
        &quot;className&quot;: &quot;org.apache.tomcat.util.threads.TaskThread$WrappingRunnable&quot;,
        &quot;nativeMethod&quot;: false
      }
      ...
    ],
    &quot;lockInfo&quot;: {
      &quot;className&quot;: &quot;java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject&quot;,
      &quot;identityHashCode&quot;: 372286721
    }
  }
  ...
]
</code></pre>
<p>生产出现问题的时候，可以通过应用的线程快照来检测应用正在执行的任务。</p>
<h3 id="loggers-端点">loggers 端点</h3>
<p>访问 <code>http://localhost:8080/actuator/loggers</code> 可以查看当前应用的日志级别等信息：</p>
<p>图片</p>
<p>图片
这里面本身并不特别，但是有一个功能却非常有用，比如我们生产环境日志级别一般都是 info，但是现在有一个 bug 通过 info 级别无法排查，那么我们就可以临时修改 log 级别。</p>
<p>比如上图中的 ROOT 节点是 info 级别，那么我们可以通过 postman 等工具来发一个 post 请求修改日志级别。</p>
<p>图片</p>
<p>图片
修改之后就会发现，日志由原来的 info 变成了 debug：</p>
<p>图片</p>
<p>图片</p>
<h3 id="metrics-端点">metrics 端点</h3>
<p>metrics 是一个非常重要的监控端点，其监控内容覆盖了 JVM 内存、堆、类加载、处理器和 tomcat 容器等一些重要指标：</p>
<p>图片</p>
<p>图片
可以看到这里面包含了非常多的指标，任意访问一个指标就可以查看对应的指标信息：</p>
<p>图片</p>
<p>图片</p>
<h2 id="自定义endpoint">自定义Endpoint</h2>
<p>自定义配置来控制是否开启过滤</p>
<pre><code class="language-yaml">actuator:
  filter:
    switch: false
</code></pre>
<h3 id="自定义监控端点常用注解">自定义监控端点常用注解</h3>
<p>自定义一个监控端点主要有如下常用注解：</p>
<ul>
<li><code>@Endpoint</code> ：定义一个监控端点，同时支持 HTTP 和 JMX 两种方式。</li>
<li><code>@WebEndpoint</code> ：定义一个监控端点，只支持 HTTP 方式。</li>
<li><code>@JmxEndpoint</code> ：定义一个监控端点，只支持 JMX 方式。</li>
</ul>
<p>以上三个注解作用在类上，表示当前类是一个监控端点，另外还有一些注解会用在方法和参数上：</p>
<ul>
<li><code>@ReadOperation</code> ：作用在方法上，可用来返回端点展示的信息（通过 Get 方法请求）。</li>
<li><code>@WriteOperation</code> ：作用在方法上，可用来修改端点展示的信息（通过 Post 方法请求）。</li>
<li><code>@DeleteOperation</code> ：作用在方法上，可用来删除对应端点信息（通过 Delete 方法请求）。</li>
<li><code>@Selector</code> ：作用在参数上，用来定位一个端点的具体指标路由。</li>
</ul>
<p>一般情况下，是没必要自定义Endpoint的，但是也不排除特殊情况，我这里自定义一个Endpoint，用来往request里放一个user对象，这个user是用来做测试的，用于下面突破filter用的（下面再说），这里先说怎么增查这个user。</p>
<p>过程如下：</p>
<ul>
<li>使用<code>@Endpoint</code>注解相应的类，作为Actuator的一个endpoint。注解要指定id，这个id作为访问路径，比如这里是<code>/actuator/super</code>；</li>
<li><code>@ReadOperation</code>来注解查询接口，如果要根据路径做查询，要用@Selector注解方法参数；注意这地方是<code>@Selector String arg0</code>，这个arg0不能改变，改成其他的，开放出去的接口还是<code>/{arg0}</code>，这就导致你的方法无法正常获取参数值。</li>
<li><code>@WriteOperation</code> 来注解修改接口，注意请求数据必须是json，而且参数不像controller中那么灵活，不能将实体作为参数，要把实体中相应的属性拿出来做参数。</li>
<li>这里在增加用户时，往request里放一个user对象。</li>
</ul>
<h3 id="superendpoint-">SuperEndPoint :</h3>
<pre><code class="language-java">@Endpoint(id = &quot;super&quot;)
public class SuperEndPoint {
    private Map&lt;String, SuperUser&gt; users = new ConcurrentHashMap&lt;&gt;();

    @ReadOperation
    public Set&lt;String&gt; users() {
        return users.keySet();
    }

    @ReadOperation
    public SuperUser usersIdentify(@Selector String arg0) {
        return users.get(arg0);
    }

    @WriteOperation
    public Set&lt;String&gt; set(String userName, String passwd) {
        HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes())
                .getRequest();
        if (request != null) {
            SuperUser superUser = new SuperUser();
            superUser.setUserName(userName);
            superUser.setPasswd(passwd);
            request.getSession().setAttribute(&quot;superUser&quot;, superUser);

            users.put(superUser.getUserName(), superUser);
        }

        return users.keySet();
    }

    public static class SuperUser {
        private String userName;
        private String passwd;

        public String getUserName() {
            return userName;
        }

        public void setUserName(String userName) {
            this.userName = userName;
        }

        public String getPasswd() {
            return passwd;
        }

        public void setPasswd(String passwd) {
            this.passwd = passwd;
        }
    }
}
</code></pre>
<h3 id="还要将endpoint注册为bean">还要将Endpoint注册为bean</h3>
<p>MvcEndPointConfig:</p>
<pre><code class="language-java">@Configuration
@ServletComponentScan 
public class MvcEndPointConfig {

    @Bean
    @ConditionalOnEnabledEndpoint
    public SuperEndPoint superEndPoint() {
        return new SuperEndPoint();
    }
}
</code></pre>
<h3 id="使用filter对访问actuator做限制">使用Filter对访问actuator做限制</h3>
<p>上面已经说了，actuator的接口要做保护，我这里就用filter对接口做最简单的保护。</p>
<ul>
<li>对<code>/actuator/*</code>下所有路径做过滤,并用<code>actuator.filter.switch</code>属性对filter做开关；</li>
<li>如果时<code>/actuator/super</code>路径的post操作，放行它，它将会往request中放一个对象；</li>
<li>其他<code>/actuator/*</code>下路径要判断request中有没有user对象，没有就返回错误提示。</li>
</ul>
<p>ActuatorPermissionFilter ：</p>
<pre><code class="language-java">@WebFilter(urlPatterns = &quot;/actuator/*&quot;, filterName = &quot;actuatorPermissionFilter&quot;)
@Order(1) // 指定过滤器的执行顺序,值越大越靠后执行
public class ActuatorPermissionFilter implements Filter {
    private String excludePath = &quot;actuator/super&quot;;
    @Value(&quot;${actuator.filter.switch}&quot;)
    Boolean actuatorSwitch;

    @Override
    public void init(FilterConfig filterConfig) {

    }

    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)
            throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) servletRequest;
        HttpServletResponse response = (HttpServletResponse) servletResponse;
        if (actuatorSwitch &amp;&amp; !(request.getRequestURI().endsWith(excludePath)
                &amp;&amp; request.getMethod().equals(HttpMethod.POST.toString()))) {
            Object user = request.getSession().getAttribute(&quot;superUser&quot;);
            if (user == null) {
                // 未登录,返回数据
                ObjectMapper mapper = new ObjectMapper();
                response.setStatus(HttpStatus.OK.value());
                response.setContentType(MediaType.APPLICATION_JSON_UTF8_VALUE);
                mapper.writeValue(response.getWriter(), &quot;您没有权限访问该接口，请使用自定义的登录接口设置superUser后使用！&quot;);
                return;
            }
        }
        filterChain.doFilter(servletRequest, servletResponse);

    }

    @Override
    public void destroy() {
    }

}
</code></pre>
<h2 id="spring-boot-monitor做监控页面">Spring Boot Monitor做监控页面</h2>
<p>额外引入依赖</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;cn.pomit&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-monitor&lt;/artifactId&gt;
    &lt;version&gt;0.0.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>Spring Boot Monitor是一个对Spring boot admin监控工具做修改并适配单机的监控工具，完美继承了Spring boot admin的风格，直接使用actuator的指标进行显示。</p>
<p>Spring Boot Monitor官网：<code>https://www.pomit.cn/SpringBootMonitor</code>
前面maven依赖中，已经说明依赖spring-boot-monitor，这时，无需其他配置.</p>
<p>访问<code>http://127.0.0.1:8080/monitor</code>， 自动跳转到Spring Boot Monitor的监控页面。</p>
<p>图片</p>
<p>图片
Spring Boot Monitor的监控页面和Spring boot admin的一模一样，前端的功能也一模一样。</p>
<p>图片</p>
<p>图片
可以对Spring boot的各项指标一目了然，还可以进行简单的操作。</p>
<p>当然，如果Spring boot actuator的指标被限制了，它也拿不到相应的指标了，因为它是直接请求actuator接口的。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/lorchr/light-docusaurus/tree/main/docs/zh-cn/spring-boot/19-Spring-Boot-Actuator.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-With-Enum-Type/"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Spring-Boot-With-Enum-Type</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/light-docusaurus/docs/zh-cn/spring-boot/Spring-Boot-Parameter-Validate/"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Spring-Boot-Parameter-Validate</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#配置actuator" class="table-of-contents__link toc-highlight">配置Actuator</a></li><li><a href="#具体的使用方法" class="table-of-contents__link toc-highlight">具体的使用方法：</a></li><li><a href="#actuator-的-rest-接口" class="table-of-contents__link toc-highlight">Actuator 的 REST 接口</a></li><li><a href="#命令详解" class="table-of-contents__link toc-highlight">命令详解</a><ul><li><a href="#health" class="table-of-contents__link toc-highlight">health</a></li><li><a href="#自定义-healthindicator-健康检查" class="table-of-contents__link toc-highlight">自定义 HealthIndicator 健康检查</a></li><li><a href="#info" class="table-of-contents__link toc-highlight">info</a></li><li><a href="#beans" class="table-of-contents__link toc-highlight">beans</a></li><li><a href="#conditions" class="table-of-contents__link toc-highlight">conditions</a></li><li><a href="#heapdump" class="table-of-contents__link toc-highlight">heapdump</a></li><li><a href="#shutdown" class="table-of-contents__link toc-highlight">shutdown</a></li><li><a href="#mappings" class="table-of-contents__link toc-highlight">mappings</a></li><li><a href="#threaddump" class="table-of-contents__link toc-highlight">threaddump</a></li><li><a href="#loggers-端点" class="table-of-contents__link toc-highlight">loggers 端点</a></li><li><a href="#metrics-端点" class="table-of-contents__link toc-highlight">metrics 端点</a></li></ul></li><li><a href="#自定义endpoint" class="table-of-contents__link toc-highlight">自定义Endpoint</a><ul><li><a href="#自定义监控端点常用注解" class="table-of-contents__link toc-highlight">自定义监控端点常用注解</a></li><li><a href="#superendpoint-" class="table-of-contents__link toc-highlight">SuperEndPoint :</a></li><li><a href="#还要将endpoint注册为bean" class="table-of-contents__link toc-highlight">还要将Endpoint注册为bean</a></li><li><a href="#使用filter对访问actuator做限制" class="table-of-contents__link toc-highlight">使用Filter对访问actuator做限制</a></li></ul></li><li><a href="#spring-boot-monitor做监控页面" class="table-of-contents__link toc-highlight">Spring Boot Monitor做监控页面</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/docs/category/guide/">Torch</a></li><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/middleware/">Middleware</a></li><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/electron/">Electron</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/blog/">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/diy/">DIY</a></li><li class="footer__item"><a href="https://github.com/lorchr/light-docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Offical</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docusaurus.io/docs/playground" target="_blank" rel="noopener noreferrer" class="footer__link-item">Playground<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Light-Docusaurus, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>