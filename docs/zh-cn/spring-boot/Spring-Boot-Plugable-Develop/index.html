<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-zh-cn/spring-boot/Spring-Boot-Plugable-Develop" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Spring-Boot-Plugable-Develop | Light Docusaurus</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lorchr.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://lorchr.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://lorchr.github.io/docs/zh-cn/spring-boot/Spring-Boot-Plugable-Develop/"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Spring-Boot-Plugable-Develop | Light Docusaurus"><meta data-rh="true" name="description" content="- SpringBoot 插件化开发详细总结"><meta data-rh="true" property="og:description" content="- SpringBoot 插件化开发详细总结"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lorchr.github.io/docs/zh-cn/spring-boot/Spring-Boot-Plugable-Develop/"><link data-rh="true" rel="alternate" href="https://lorchr.github.io/docs/zh-cn/spring-boot/Spring-Boot-Plugable-Develop/" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://lorchr.github.io/docs/zh-cn/spring-boot/Spring-Boot-Plugable-Develop/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://TLGHDZ3Y2I-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Light Docusaurus RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Light Docusaurus Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Light Docusaurus" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.e8086d6f.css">
<script src="/assets/js/runtime~main.2519630d.js" defer="defer"></script>
<script src="/assets/js/main.a410c441.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Torch Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Torch Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Torch</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/category/guide/">Torch</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a class="navbar__item navbar__link" href="/middleware/">Middleware</a><a class="navbar__item navbar__link" href="/electron/">Electron</a><a class="navbar__item navbar__link" href="/postman/">Postman</a><a class="navbar__item navbar__link" href="/diy/">DIY</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/docs/zh-cn/spring-boot/Spring-Boot-Plugable-Develop/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-Hans">简体中文</a></li></ul></div><a href="https://github.com/lorchr/light-docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索 (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/guide/">Guide</a><button aria-label="展开侧边栏分类 &#x27;Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/develop-environment/">Develop Environment</a><button aria-label="展开侧边栏分类 &#x27;Develop Environment&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/java-jvm/">Java (JVM)</a><button aria-label="展开侧边栏分类 &#x27;Java (JVM)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/spring-boot/">Spring Boot</a><button aria-label="折叠侧边栏分类 &#x27;Spring Boot&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Api-Specification/">Api-Specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/SPI/">SPI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Common-Async-Data-Handle/">Common-Async-Data-Handle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Multi-Thread-Transaction/">Multi-Thread-Transaction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Obfuscate-Spring-Boot-Application-With-Classfinal/">Obfuscate-Spring-Boot-Application-With-Classfinal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Obfuscate-Spring-Boot-Application-With-Proguard/">Obfuscate-Spring-Boot-Application-With-Proguard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Endpoints/">Spring-Boot-Endpoints</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Ip-Address-Parse/">Spring-Boot-Ip-Address-Parse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Ip-Ragion-Parse/">Spring-Boot-Ip-Ragion-Parse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Json-Diff/">Spring-Boot-Json-Diff</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Native-Memory-Leak/">Spring-Boot-Native-Memory-Leak</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Unit-Test/">Spring-Boot-Unit-Test</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Core/">Spring-Core</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Rate-Limit/">Spring-Rate-Limit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Statemachine/">Spring-Statemachine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/SpringEvent/">SpringEvent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Dynamic-Datasource/">Spring-Boot-Dynamic-Datasource</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-QrCode-Zxing/">Spring-Boot-QrCode-Zxing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-With-Enum-Type/">Spring-Boot-With-Enum-Type</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Actuator/">Spring-Boot-Actuator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Parameter-Validate/">Spring-Boot-Parameter-Validate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Sql-Injection/">Sql-Injection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Enhance-Request-And-Response/">Enhance-Request-And-Response</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Integrate-SpringDoc-Aggregation/">Spring-Boot-Integrate-SpringDoc-Aggregation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Hotswap-Aop/">Spring-Boot-Hotswap-Aop</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Customlize-Request-Trace/">Customlize-Request-Trace</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Integrate-Alipay/">Spring-Boot-Integrate-Alipay</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/ApiKey-design/">ApiKey-design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-RSA-AES-Encryption/">Spring-Boot-RSA-AES-Encryption</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Slim-Spring-Boot-FatJar/">Slim-Spring-Boot-FatJar</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-boot-Dynamic-Load-Dependency/">Spring-boot-Dynamic-Load-Dependency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Start-Sequence/">Spring-Boot-Start-Sequence</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Transaction-Hook/">Spring-Boot-Transaction-Hook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Naming-Validate/">Spring-Boot-Naming-Validate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Launch-Speed-Up/">Spring-Boot-Launch-Speed-Up</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Insert-Annotation-Like-Lombok/">Insert-Annotation-Like-Lombok</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Encryption/">Spring-Boot-Encryption</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Dynamic-Load-Jar/">Spring-Boot-Dynamic-Load-Jar</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Auto-Switch-between-Schedule-And-XXL-Job/">Auto-Switch-between-Schedule-And-XXL-Job</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Plugable-Develop/">Spring-Boot-Plugable-Develop</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/How-To-Write-Controller/">How-To-Write-Controller</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Dynamic-DataSource/">Spring-Boot-Dynamic-DataSource</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-No-Stop-Update/">Spring-Boot-No-Stop-Update</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Dynamic-Load-Plugin/">Spring-Boot-Dynamic-Load-Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh-cn/spring-boot/Spring-Boot-Log-To-JSON-Format/">Spring-Boot-Log-To-JSON-Format</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/zh-cn/spring-boot/file/File-Upload-Split-Continue-on-Break/">file</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/file/">File</a><button aria-label="展开侧边栏分类 &#x27;File&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/spring-cloud/">Spring Cloud</a><button aria-label="展开侧边栏分类 &#x27;Spring Cloud&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/spring-security/">Spring Security</a><button aria-label="展开侧边栏分类 &#x27;Spring Security&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/spring-authorization-server/">Spring Authorization Server</a><button aria-label="展开侧边栏分类 &#x27;Spring Authorization Server&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/active-directory/">Active Directory</a><button aria-label="展开侧边栏分类 &#x27;Active Directory&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/database/">Database</a><button aria-label="展开侧边栏分类 &#x27;Database&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/git/">Git</a><button aria-label="展开侧边栏分类 &#x27;Git&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/linux/">Linux</a><button aria-label="展开侧边栏分类 &#x27;Linux&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/docker/">Docker</a><button aria-label="展开侧边栏分类 &#x27;Docker&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/kubernetes/">Kubernetes</a><button aria-label="展开侧边栏分类 &#x27;Kubernetes&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/test/">Test</a><button aria-label="展开侧边栏分类 &#x27;Test&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/others/">Others</a><button aria-label="展开侧边栏分类 &#x27;Others&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/zh-cn/awesome-open-source/">Github Speed UP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/zh-cn/windows/">Windows</a></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/spring-boot/"><span itemprop="name">Spring Boot</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Spring-Boot-Plugable-Develop</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Spring-Boot-Plugable-Develop</h1></header><ul>
<li><a href="https://blog.csdn.net/zhangcongyi420/article/details/131139599" target="_blank" rel="noopener noreferrer">SpringBoot 插件化开发详细总结</a></li>
<li><a href="https://mp.weixin.qq.com/s/vSzTs04sWzc6HKJTJvaiNQ" target="_blank" rel="noopener noreferrer">Spring Boot 如何实现插件化开发模式</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="前言">前言<a href="#前言" class="hash-link" aria-label="前言的直接链接" title="前言的直接链接">​</a></h2>
<p>插件化开发模式正在很多编程语言或技术框架中得以广泛的应用实践，比如大家熟悉的jenkins，docker可视化管理平台rancher，以及日常编码使用的编辑器idea，vscode等，随处可见的带有热插拔功能的插件，让系统像插了翅膀一样，大大提升了系统的扩展性和伸缩性，也拓展了系统整体的使用价值，那么为什么要使用插件呢？</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-使用插件的好处">1 使用插  件的好处<a href="#1-使用插件的好处" class="hash-link" aria-label="1 使用插件的好处的直接链接" title="1 使用插件的好处的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="11模块解耦">1.1模块解耦<a href="#11模块解耦" class="hash-link" aria-label="1.1模块解耦的直接链接" title="1.1模块解耦的直接链接">​</a></h4>
<p>实现服务模块之间解耦的方式有很多，但是插件来说，其解耦的程度似乎更高，而且更灵活，可定制化、个性化更好。
举例来说，代码中可以使用设计模式来选择使用哪种方式发送短信给下单完成的客户，问题是各个短信服务商并不一定能保证在任何情况下都能发送成功，怎么办呢？这时候设计模式也没法帮你解决这个问题，如果使用定制化插件的方式，结合外部配置参数，假设系统中某种短信发送不出去了，这时候就可以利用插件动态植入，切换为不同的厂商发短信了。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="12-提升扩展性和开放性">1.2 提升扩展性和开放性<a href="#12-提升扩展性和开放性" class="hash-link" aria-label="1.2 提升扩展性和开放性的直接链接" title="1.2 提升扩展性和开放性的直接链接">​</a></h4>
<p>以spring来说，之所以具备如此广泛的生态，与其自身内置的各种可扩展的插件机制是分不开的，试想为什么使用了spring框架之后可以很方便的对接其他中间件，那就是spring框架提供了很多基于插件化的扩展点。</p>
<p>插件化机制让系统的扩展性得以提升，从而可以丰富系统的周边应用生态。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="13-方便第三方接入">1.3 方便第三方接入<a href="#13-方便第三方接入" class="hash-link" aria-label="1.3 方便第三方接入的直接链接" title="1.3 方便第三方接入的直接链接">​</a></h4>
<p>有了插件之后，第三方应用或系统如果要对接自身的系统，直接基于系统预留的插件接口完成一套适合自己业务的实现即可，而且对自身系统的侵入性很小，甚至可以实现基于配置参数的热加载，方便灵活，开箱即用。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-插件化常用实现思路">2 插件化常用实现思路<a href="#2-插件化常用实现思路" class="hash-link" aria-label="2 插件化常用实现思路的直接链接" title="2 插件化常用实现思路的直接链接">​</a></h3>
<p>以java为例，这里结合实际经验，整理一些常用的插件化实现思路：</p>
<ul>
<li>spi机制；</li>
<li>约定配置和目录，利用反射配合实现；</li>
<li>springboot中的Factories机制；</li>
<li>java agent（探针）技术；</li>
<li>spring内置扩展点；</li>
<li>第三方插件包，例如：spring-plugin-core；</li>
<li>spring aop技术；</li>
<li>...</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="java常用插件实现方案">Java常用插件实现方案<a href="#java常用插件实现方案" class="hash-link" aria-label="Java常用插件实现方案的直接链接" title="Java常用插件实现方案的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-serviceloader方式">1 serviceloader方式<a href="#1-serviceloader方式" class="hash-link" aria-label="1 serviceloader方式的直接链接" title="1 serviceloader方式的直接链接">​</a></h3>
<p>serviceloader是java提供的spi模式的实现。按照接口开发实现类，而后配置，java通过ServiceLoader来实现统一接口不同实现的依次调用。而java中最经典的serviceloader的使用就是Java的spi机制。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="11-java-spi">1.1 java spi<a href="#11-java-spi" class="hash-link" aria-label="1.1 java spi的直接链接" title="1.1 java spi的直接链接">​</a></h4>
<p>SPI全称 Service Provider Interface ，是JDK内置的一种服务发现机制，SPI是一 种动态替换扩展机制，比如有个接口，你想在运行时动态给他添加实现，你只需按照规范给他添加一个实现类即可。比如大家熟悉的jdbc中的Driver接口，不同的厂商可以提供不同的实现，有mysql的，也有oracle的，而Java的SPI机制就可以为某个接口寻找服务的实现。</p>
<p>下面用一张简图说明下SPI机制的原理</p>
<p><img decoding="async" loading="lazy" alt="img" src="/assets/images/39-1-2ad2475cf320287c83c2b74e5ed8213c.webp" width="848" height="291" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="12-java-spi-简单案例">1.2 java spi 简单案例<a href="#12-java-spi-简单案例" class="hash-link" aria-label="1.2 java spi 简单案例的直接链接" title="1.2 java spi 简单案例的直接链接">​</a></h4>
<p>如下工程目录，在某个应用工程中定义一个插件接口，而其他应用工程为了实现这个接口，只需要引入当前工程的jar包依赖进行实现即可，这里为了演示我就将不同的实现直接放在同一个工程下；</p>
<p><img decoding="async" loading="lazy" alt="img" src="/assets/images/39-2-9e5117291c0b01b09824b5096ba545e0.webp" width="543" height="517" class="img_ev3q"></p>
<p>定义接口</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface MessagePlugin {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String sendMsg(Map msgMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代 码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>定义两个不同的实现</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class AliyunMsg implements MessagePlugin {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String sendMsg(Map msgMap) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;aliyun sendMsg&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;aliyun sendMsg&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TencentMsg implements MessagePlugin {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String sendMsg(Map msgMap) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;tencent sendMsg&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;tencent sendMsg&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在resources目录按照规范要求创建文件目录，并填写实现类的全类名</p>
<p><img decoding="async" loading="lazy" alt="img" src="/assets/images/39-3-b455e2caa89b573d00a1abc07086c5c9.webp" width="1080" height="275" class="img_ev3q"></p>
<p>自定义服务加载类</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServiceLoader&lt;MessagePlugin&gt; serviceLoader = ServiceLoader.load(MessagePlugin.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Iterator&lt;MessagePlugin&gt; iterator = serviceLoader.iterator();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map map = new HashMap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (iterator.hasNext()){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MessagePlugin messagePlugin = iterator.next();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            messagePlugin.sendMsg(map);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>运行上面的程序后，可以看到下面的效果，这就是说，使用ServiceLoader的方式可以加载到不同接口的实现，业务中只需要根据自身的需求，结合配置参数的方式就可以灵活的控制具体使用哪一个实现。</p>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/webp;base64,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" width="600" height="130" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-自定义配置约定方式">2 自定义配置约定方式<a href="#2-自定义配置约定方式" class="hash-link" aria-label="2 自定义配置约定方式的直接链接" title="2 自定义配置约定方式的直接链接">​</a></h3>
<p>serviceloader其实是有缺陷的，在使用中必须在META-INF里定义接口名称的文件，在文件中才能写上实现类的类名，如果一个项目里插件化的东西比较多，那很可能会出现越来越多配置文件的情况。所以在结合实际项目使用时，可以考虑下面这种实现思路：</p>
<ul>
<li>A应用定义接口；</li>
<li>B,C,D等其他应用定义服务实现；</li>
<li>B,C,D应用实现后达成SDK的jar；</li>
<li>A应用引用SDK或者将SDK放到某个可以读取到的目录下；</li>
<li>A应用读取并解析SDK中的实现类；</li>
</ul>
<p>在上文中案例基础上，我们做如下调整；</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="21-添加配置文件">2.1 添加配置文件<a href="#21-添加配置文件" class="hash-link" aria-label="2.1 添加配置文件的直接链接" title="2.1 添加配置文件的直接链接">​</a></h4>
<p>在配置文件中，将具体的实现类配置进去</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">server</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8081</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">impl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> com.congge.plugins.spi.MessagePlugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">clazz</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> com.congge.plugins.impl.TencentMsg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> com.congge.plugins.impl.AliyunMsg</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="22-自定义配置文件加载类">2.2 自定义配置文件加载类<a href="#22-自定义配置文件加载类" class="hash-link" aria-label="2.2 自定义配置文件加载类的直接链接" title="2.2 自定义配置文件加载类的直接链接">​</a></h4>
<p>通过这个类，将上述配置文件中的实现类封装到类对象中，方便后续使用；</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import lombok.Getter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import lombok.Setter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import lombok.ToString;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.boot.context.properties.ConfigurationProperties;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConfigurationProperties(&quot;impl&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ToString</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ClassImpl {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Setter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Setter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String[] clazz;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="23-自定义测试接口">2.3 自定义测试接口<a href="#23-自定义测试接口" class="hash-link" aria-label="2.3 自定义测试接口的直接链接" title="2.3 自定义测试接口的直接链接">​</a></h4>
<p>使用上述的封装对象通过类加载的方式动态的在程序中引入</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import com.congge.config.ClassImpl;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.congge.plugins.spi.MessagePlugin;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.beans.factory.annotation.Autowired;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.web.bind.annotation.GetMapping;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.web.bind.annotation.RestController;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.HashMap;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SendMsgController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ClassImpl classImpl;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //localhost:8081/sendMsg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;/sendMsg&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String sendMsg() throws Exception{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i=0;i&lt;classImpl.getClazz().length;i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Class pluginClass= Class.forName(classImpl.getClazz()[i]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MessagePlugin messagePlugin = (MessagePlugin) pluginClass.newInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            messagePlugin.sendMsg(new HashMap());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;success&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="24-启动类">2.4 启动类<a href="#24-启动类" class="hash-link" aria-label="2.4 启动类的直接链接" title="2.4 启动类的直接链接">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@EnableConfigurationProperties({ClassImpl.class})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PluginApp {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SpringApplication.run(PluginApp.class,args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>启动工程代码后，调用接口：<code>localhost:8081/sendMsg</code>，在控制台中可以看到下面的输出信息，即通过这种方式也可以实现类似serviceloader的方式，不过在实际使用时，可以结合配置参数进行灵活的控制；</p>
<p><img decoding="async" loading="lazy" alt="img" src="/assets/images/39-5-8dfefedc0ea5b9a098ee174f24e67f46.webp" width="795" height="152" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-自定义配置读取依赖jar的方式">3 自定义配置读取依赖jar的方式<a href="#3-自定义配置读取依赖jar的方式" class="hash-link" aria-label="3 自定义配置读取依赖jar的方式的直接链接" title="3 自定义配置读取依赖jar的方式的直接链接">​</a></h3>
<p>更进一步，在很多场景下，可能我们并不想直接在工程中引入接口实现的依赖包，这时候可以考虑通过读取指定目录下的依赖jar的方式，利用反射的方式进行动态加载，这也是生产中一种比较常用的实践经验。</p>
<p>具体实践来说，主要为下面的步骤：</p>
<ul>
<li>应用A定义服务接口；</li>
<li>应用B,C,D等实现接口（或者在应用内部实现相同的接口）；</li>
<li>应用B,C,D打成jar，放到应用A约定的读取目录下；</li>
<li>应用A加载约定目录下的jar，通过反射加载目标方法；</li>
</ul>
<p>在上述的基础上，按照上面的实现思路来实现一下；</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="31-创建约定目录">3.1 创建约定目录<a href="#31-创建约定目录" class="hash-link" aria-label="3.1 创建约定目录的直接链接" title="3.1 创建约定目录的直接链接">​</a></h4>
<p>在当前工程下创建一个lib目录，并将依赖的jar放进去</p>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/webp;base64,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" width="320" height="193" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="32-新增读取jar的工具类">3.2 新增读取jar的工具类<a href="#32-新增读取jar的工具类" class="hash-link" aria-label="3.2 新增读取jar的工具类的直接链接" title="3.2 新增读取jar的工具类的直接链接">​</a></h4>
<p>添加一个工具类，用于读取指定目录下的jar，并通过反射的方式，结合配置文件中的约定配置进行反射方法的执行；</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ServiceLoaderUtils {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ClassImpl classImpl;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void loadJarsFromAppFolder() throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String path = &quot;E:\\code-self\\bitzpp\\lib&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        File f = new File(path);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (f.isDirectory()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (File subf : f.listFiles()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (subf.isFile()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    loadJarFile(subf);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            loadJarFile(f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void loadJarFile(File path) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        URL url = path.toURI().toURL();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 可以获取到AppClassLoader，可以提到前面，不用每次都获取一次</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        URLClassLoader classLoader = (URLClassLoader) ClassLoader.getSystemClassLoader();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 加载</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //Method method = URLClassLoader.class.getDeclaredMethod(&quot;sendMsg&quot;, Map.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Method method = URLClassLoader.class.getMethod(&quot;sendMsg&quot;, Map.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        method.setAccessible(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        method.invoke(classLoader, url);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public  void main(String[] args) throws Exception{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(invokeMethod(&quot;hello&quot;));;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String doExecuteMethod() throws Exception{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String path = &quot;E:\\code-self\\bitzpp\\lib&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        File f1 = new File(path);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object result = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (f1.isDirectory()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (File subf : f1.listFiles()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //获取文件名称</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                String name = subf.getName();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                String fullPath = path + &quot;\\&quot; + name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //执行反射相关的方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //ServiceLoaderUtils serviceLoaderUtils = new ServiceLoaderUtils();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                //result = serviceLoaderUtils.loadMethod(fullPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                File f = new File(fullPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                URL urlB = f.toURI().toURL();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                URLClassLoader classLoaderA = new URLClassLoader(new URL[]{urlB}, Thread.currentThread()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .getContextClassLoader());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                String[] clazz = classImpl.getClazz();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                for(String claName : clazz){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if(name.equals(&quot;biz-pt-1.0-SNAPSHOT.jar&quot;)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if(!claName.equals(&quot;com.congge.spi.BitptImpl&quot;)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            continue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Class&lt;?&gt; loadClass = classLoaderA.loadClass(claName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if(Objects.isNull(loadClass)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            continue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        //获取实例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Object obj = loadClass.newInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Map map = new HashMap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        //获取方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Method method=loadClass.getDeclaredMethod(&quot;sendMsg&quot;,Map.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        result = method.invoke(obj,map);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if(Objects.nonNull(result)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }else if(name.equals(&quot;miz-pt-1.0-SNAPSHOT.jar&quot;)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if(!claName.equals(&quot;com.congge.spi.MizptImpl&quot;)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            continue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Class&lt;?&gt; loadClass = classLoaderA.loadClass(claName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if(Objects.isNull(loadClass)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            continue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        //获取实例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Object obj = loadClass.newInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Map map = new HashMap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        //获取方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Method method=loadClass.getDeclaredMethod(&quot;sendMsg&quot;,Map.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        result = method.invoke(obj,map);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if(Objects.nonNull(result)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if(Objects.nonNull(result)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return result.toString();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object loadMethod(String fullPath) throws Exception{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        File f = new File(fullPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        URL urlB = f.toURI().toURL();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        URLClassLoader classLoaderA = new URLClassLoader(new URL[]{urlB}, Thread.currentThread()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .getContextClassLoader());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object result = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String[] clazz = classImpl.getClazz();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for(String claName : clazz){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Class&lt;?&gt; loadClass = classLoaderA.loadClass(claName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if(Objects.isNull(loadClass)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                continue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //获取实例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Object obj = loadClass.newInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Map map = new HashMap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //获取方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Method method=loadClass.getDeclaredMethod(&quot;sendMsg&quot;,Map.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            result = method.invoke(obj,map);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if(Objects.nonNull(result)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return result;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static String invokeMethod(String text) throws Exception{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String path = &quot;E:\\code-self\\bitzpp\\lib\\miz-pt-1.0-SNAPSHOT.jar&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        File f = new File(path);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        URL urlB = f.toURI().toURL();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        URLClassLoader classLoaderA = new URLClassLoader(new URL[]{urlB}, Thread.currentThread()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .getContextClassLoader());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Class&lt;?&gt; product = classLoaderA.loadClass(&quot;com.congge.spi.MizptImpl&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //获取实例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object obj = product.newInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map map = new HashMap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //获取方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Method method=product.getDeclaredMethod(&quot;sendMsg&quot;,Map.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //执行方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object result1 = method.invoke(obj,map);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // TODO According to the requirements , write the implementation code.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return result1.toString();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static String getApplicationFolder() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String path = ServiceLoaderUtils.class.getProtectionDomain().getCodeSource().getLocation().getPath();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new File(path).getParent();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="33-添加测试接口">3.3 添加测试接口<a href="#33-添加测试接口" class="hash-link" aria-label="3.3 添加测试接口的直接链接" title="3.3 添加测试接口的直接链接">​</a></h4>
<p>添加如下测试接口</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;/sendMsgV2&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String index() throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String result = serviceLoaderUtils.doExecuteMethod();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return result;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>以上全部完成之后，启动工程，测试一下该接口，仍然可以得到预期结果；</p>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/webp;base64,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" width="483" height="133" class="img_ev3q"></p>
<p>在上述的实现中还是比较粗糙的，实际运用时，还需要做较多的优化改进以满足实际的业务需要，比如接口传入类型参数用于控制具体使用哪个依赖包的方法进行执行等；</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="springboot中的插件化实现">SpringBoot中的插件化实现<a href="#springboot中的插件化实现" class="hash-link" aria-label="SpringBoot中的插件化实现的直接链接" title="SpringBoot中的插件化实现的直接链接">​</a></h2>
<p>在大家使用较多的springboot框架中，其实框架自身提供了非常多的扩展点，其中最适合做插件扩展的莫过于spring.factories的实现；</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-spring-boot中的spi机制">1. Spring Boot中的SPI机制<a href="#1-spring-boot中的spi机制" class="hash-link" aria-label="1. Spring Boot中的SPI机制的直接链接" title="1. Spring Boot中的SPI机制的直接链接">​</a></h3>
<p>在Spring中也有一种类似与Java SPI的加载机制。它在META-INF/spring.factories文件中配置接口的实现类名称，然后在程序中读取这些配置文件并实例化，这种自定义的SPI机制是Spring Boot Starter实现的基础。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-spring-factories实现原理">2. Spring Factories实现原理<a href="#2-spring-factories实现原理" class="hash-link" aria-label="2. Spring Factories实现原理的直接链接" title="2. Spring Factories实现原理的直接链接">​</a></h3>
<p>spring-core包里定义了SpringFactoriesLoader类，这个类实现了检索META-INF/spring.factories文件，并获取指定接口的配置的功能。在这个类中定义了两个对外的方法：</p>
<ul>
<li>loadFactories 根据接口类获取其实现类的实例，这个方法返回的是对象列表；</li>
<li>loadFactoryNames 根据接口获取其接口类的名称，这个方法返回的是类名的列表；</li>
</ul>
<p>上面的两个方法的关键都是从指定的ClassLoader中获取spring.factories文件，并解析得到类名列表，具体代码如下：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public static List&lt;String&gt; loadFactoryNames(Class&lt;?&gt; factoryClass, ClassLoader classLoader) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String factoryClassName = factoryClass.getName();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Enumeration&lt;URL&gt; urls = (classLoader != null ? classLoader.getResources(FACTORIES_RESOURCE_LOCATION) :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ClassLoader.getSystemResources(FACTORIES_RESOURCE_LOCATION));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;String&gt; result = new ArrayList&lt;String&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (urls.hasMoreElements()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            URL url = urls.nextElement();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Properties properties = PropertiesLoaderUtils.loadProperties(new UrlResource(url));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String factoryClassNames = properties.getProperty(factoryClassName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            result.addAll(Arrays.asList(StringUtils.commaDelimitedListToStringArray(factoryClassNames)));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return result;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    catch (IOException ex) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw new IllegalArgumentException(&quot;Unable to load [&quot; + factoryClass.getName() +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;] factories from location [&quot; + FACTORIES_RESOURCE_LOCATION + &quot;]&quot;, ex);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>从代码中我们可以知道，在这个方法中会遍历整个ClassLoader中所有jar包下的spring.factories文件，就是说我们可以在自己的jar中配置spring.factories文  件，不会影响到其它地方的配置，也不会被别人的配置覆盖。</p>
<p>spring.factories的是通过Properties解析得到的，所以我们在写文件中的内容都是安装下面这种方式配置的：</p>
<blockquote>
<p>com.xxx.interface=com.xxx.classname</p>
</blockquote>
<p>如果一个接口希望配置多个实现类，可以使用’,’进行分割</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-spring-factories案例实现">3. Spring Factories案例实现<a href="#3-spring-factories案例实现" class="hash-link" aria-label="3. Spring Factories案例实现的直接链接" title="3. Spring Factories案例实现的直接链接">​</a></h3>
<p>接下来看一个具体的案例实现来体验下Spring Factories的使用；</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="31-定义一个服务接口">3.1 定义一个服务接口<a href="#31-定义一个服务接口" class="hash-link" aria-label="3.1 定义一个服务接口的直接链接" title="3.1 定义一个服务接口的直接链接">​</a></h4>
<p>自定义一个接口，里面添加一个方法；</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface SmsPlugin {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void sendMessage(String message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="32-定义2个服务实现">3.2 定义2个服务实现<a href="#32-定义2个服务实现" class="hash-link" aria-label="3.2 定义2个服务实现的直接链接" title="3.2 定义2个服务实现的直接链接">​</a></h4>
<p>实现类1</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class BizSmsImpl implements SmsPlugin {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void sendMessage(String message) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;this is BizSmsImpl sendMessage...&quot; + message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>实现类2</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class SystemSmsImpl implements SmsPlugin {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void sendMessage(String message) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;this is SystemSmsImpl sendMessage...&quot; + message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="33-添加springfactories文件">3.3 添加spring.factories文件<a href="#33-添加springfactories文件" class="hash-link" aria-label="3.3 添加spring.factories文件的直接链接" title="3.3 添加spring.factories文件的直接链接">​</a></h4>
<p>在resources目录下，创建一个名叫：META-INF的目录，然后在该目录下定义一个spring.factories的配置文件，内容如下，其实就是配置了服务接口，以及两个实现类的全类名的路径；</p>
<ul>
<li>com.congge.plugin.spi.SmsPlugin=\</li>
<li>com.congge.plugin.impl.SystemSmsImpl,\</li>
<li>com.congge.plugin.impl.BizSmsImpl</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="34-添加自定义接口">3.4 添加自定义接口<a href="#34-添加自定义接口" class="hash-link" aria-label="3.4 添加自定义接口的直接链接" title="3.4 添加自定义接口的直接链接">​</a></h4>
<p>添加一个自定义的接口，有没有发现，这里和java 的spi有点类似，只不过是这里换成了SpringFactoriesLoader去加载服务；</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;/sendMsgV3&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String sendMsgV3(String msg) throws Exception{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;SmsPlugin&gt; smsServices= SpringFactoriesLoader.loadFactories(SmsPlugin.class, null);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for(SmsPlugin smsService : smsServices){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            smsService.sendMessage(msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;success&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>启动工程之后，调用一下该接口进行测试，<code>localhost:8087/sendMsgV3?msg=hello</code>，通过控制台，可以看到，这种方式能够正确获取到系统中可用的服务实现；</p>
<p><img decoding="async" loading="lazy" alt="img" src="/assets/images/39-8-577109d8b3a89e8fa9305ef6afada993.webp" width="607" height="170" class="img_ev3q"></p>
<p>利用spring的这种机制，可以很好的对系统中的某些业务逻辑通过插件化接口的方式进行扩展实现；</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="插件化机制案例实战">插件化机制案例实战<a href="#插件化机制案例实战" class="hash-link" aria-label="插件化机制案例实战的直接链接" title="插件化机制案例实战的直接链接">​</a></h2>
<p>结合上面掌握的理论知识，下面基于Java SPI机制进行一个接近真实使用场景的完整的操作步骤；</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-案例背景">1. 案例背景<a href="#1-案例背景" class="hash-link" aria-label="1. 案例背景的直接链接" title="1. 案例背景的直接链接">​</a></h3>
<ul>
<li>3个微服务模块，在A模块中有个插件化的接口；</li>
<li>在A模块中的某个接口，需要调用插件化的服务实现进行短信发送；</li>
<li>可以通过配置文件配置参数指定具体的哪一种方式发送短信；</li>
<li>如果没有加载到任何插件，将走A模块在默认的发短信实现；</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="11-模块结构">1.1 模块结构<a href="#11-模块结构" class="hash-link" aria-label="1.1 模块结构的直接链接" title="1.1 模块结构的直接链接">​</a></h4>
<ol>
<li>biz-pp，插件化接口工程；</li>
<li>bitpt，aliyun短信发送实现；</li>
<li>miz-pt，tencent短信发送实现；</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="12-整体实现思路">1.2 整体实现思路<a href="#12-整体实现思路" class="hash-link" aria-label="1.2 整体实现思路的直接链接" title="1.2 整体实现思路的直接链接">​</a></h4>
<p>本案例完整的实现思路参考如下：</p>
<ul>
<li>biz-pp定义服务接口，并提供出去jar被其他实现工程依赖；</li>
<li>bitpt与miz-pt依赖biz-pp的jar并实现SPI中的方法；</li>
<li>bitpt与miz-pt按照API规范实现完成后，打成jar包，或者安装到仓库中；</li>
<li>biz-pp在pom中依赖bitpt与miz-pt的jar，或者通过启动加载的方式即可得到具体某个实现；</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-biz-pp-关键代码实现过程">2 biz-pp 关键代码实现过程<a href="#2-biz-pp-关键代码实现过程" class="hash-link" aria-label="2 biz-pp 关键代码实现过程的直接链接" title="2 biz-pp 关键代码实现过程的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="21-添加服务接口">2.1 添加服务接口<a href="#21-添加服务接口" class="hash-link" aria-label="2.1 添加服务接口的直接链接" title="2.1 添加服务接口的直接链接">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface MessagePlugin {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String sendMsg(Map msgMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="22-打成jar包并安装到仓库">2.2 打成jar包并安装到仓库<a href="#22-打成jar包并安装到仓库" class="hash-link" aria-label="2.2 打成jar包并安装到仓库的直接链接" title="2.2 打成jar包并安装到仓库的直接链接">​</a></h4>
<p>这一步比较简单就不展开了</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="23-自定义服务加载工具类">2.3 自定义服务加载工具类<a href="#23-自定义服务加载工具类" class="hash-link" aria-label="2.3 自定义服务加载工具类的直接链接" title="2.3 自定义服务加载工具类的直接链接">​</a></h4>
<p>这个类，可以理解为在真实的业务编码中，可以根据业务定义的规则，具体加载哪个插件的实现类进行发送短信的操作；</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import com.congge.plugin.spi.MessagePlugin;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.congge.spi.BitptImpl;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.congge.spi.MizptImpl;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.*;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PluginFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void installPlugin(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map context = new LinkedHashMap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context.put(&quot;_userId&quot;,&quot;&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context.put(&quot;_version&quot;,&quot;1.0&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context.put(&quot;_type&quot;,&quot;sms&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServiceLoader&lt;MessagePlugin&gt; serviceLoader = ServiceLoader.load(MessagePlugin.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Iterator&lt;MessagePlugin&gt; iterator = serviceLoader.iterator();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (iterator.hasNext()){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MessagePlugin messagePlugin = iterator.next();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            messagePlugin.sendMsg(context);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static MessagePlugin getTargetPlugin(String type){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServiceLoader&lt;MessagePlugin&gt; serviceLoader = ServiceLoader.load(MessagePlugin.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Iterator&lt;MessagePlugin&gt; iterator = serviceLoader.iterator();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;MessagePlugin&gt; messagePlugins = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (iterator.hasNext()){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MessagePlugin messagePlugin = iterator.next();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            messagePlugins.add(messagePlugin);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MessagePlugin targetPlugin = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (MessagePlugin messagePlugin : messagePlugins) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            boolean findTarget = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            switch (type) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                case &quot;aliyun&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (messagePlugin instanceof BitptImpl){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        targetPlugin = messagePlugin;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        findTarget = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                case &quot;tencent&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (messagePlugin instanceof MizptImpl){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        targetPlugin = messagePlugin;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        findTarget = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if(findTarget) break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return targetPlugin;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new PluginFactory().installPlugin();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="24-自定义接口">2.4 自定义接口<a href="#24-自定义接口" class="hash-link" aria-label="2.4 自定义接口的直接链接" title="2.4 自定义接口的直接链接">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SmsController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private SmsService smsService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ServiceLoaderUtils serviceLoaderUtils;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //localhost:8087/sendMsg?msg=sendMsg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;/sendMsg&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String sendMessage(String msg){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return smsService.sendMsg(msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="25-接口实现">2.5 接口实现<a href="#25-接口实现" class="hash-link" aria-label="2.5 接口实现的直接链接" title="2.5 接口实现的直接链接">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SmsService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Value(&quot;${msg.type}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String msgType;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private DefaultSmsService defaultSmsService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String sendMsg(String msg) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MessagePlugin messagePlugin = PluginFactory.getTargetPlugin(msgType);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map paramMap = new HashMap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(Objects.nonNull(messagePlugin)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return messagePlugin.sendMsg(paramMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return defaultSmsService.sendMsg(paramMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="26-添加服务依赖">2.6 添加服务依赖<a href="#26-添加服务依赖" class="hash-link" aria-label="2.6 添加服务依赖的直接链接" title="2.6 添加服务依赖的直接链接">​</a></h4>
<p>在该模块中，需要引入对具体实现的两个工程的jar依赖（也可以通过启动加载的命令方式）</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">spring-boot-starter-web</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--依赖具体的实现--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.congge</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">biz-pt</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.0-SNAPSHOT</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.congge</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">miz-pt</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.0-SNAPSHOT</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.projectlombok</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">lombok</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>biz-pp的核心代码实现就到此结束了，后面再具体测试的时候再继续；</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-bizpt-关键代码实现过程">3 bizpt 关键代码实现过程<a href="#3-bizpt-关键代码实现过程" class="hash-link" aria-label="3 bizpt 关键代码实现过程的直接链接" title="3 bizpt 关键代码实现过程的直接链接">​</a></h3>
<p>接下来就是插件化机制中具体的SPI实现过程，两个模块的实现步骤完全一致，挑选其中一个说明，工程目录结构如下：</p>
<p><img decoding="async" loading="lazy" alt="img" src="/assets/images/39-9-e34bf35c2b11759bc44841e7d8048bc1.webp" width="507" height="417" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="31-添加对biz-app的jar的依赖">3.1 添加对biz-app的jar的依赖<a href="#31-添加对biz-app的jar的依赖" class="hash-link" aria-label="3.1 添加对biz-app的jar的依赖的直接链接" title="3.1 添加对biz-app的jar的依赖的直接链接">​</a></h4>
<p>将上面biz-app工程打出来的jar依赖过来</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.congge</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">biz-app</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.0-SNAPSHOT</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="32-添加messageplugin接口的实现">3.2 添加MessagePlugin接口的实现<a href="#32-添加messageplugin接口的实现" class="hash-link" aria-label="3.2 添加MessagePlugin接口的实现的直接链接" title="3.2 添加MessagePlugin接口的实现的直接链接">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class BitptImpl implements MessagePlugin {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String sendMsg(Map msgMap) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object userId = msgMap.get(&quot;userId&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object type = msgMap.get(&quot;_type&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //TODO 参数校验</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot; ==== userId :&quot; + userId + &quot;,type :&quot; + type);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;aliyun send message success&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;aliyun send message success&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="33-添加spi配置文件">3.3 添加SPI配置文件<a href="#33-添加spi配置文件" class="hash-link" aria-label="3.3 添加SPI配置文件的直接链接" title="3.3 添加SPI配置文件的直接链接">​</a></h4>
<p>按照前文的方式，在resources目录下创建一个文件，注意文件名称为SPI中的接口全名，文件内容为实现类的全类名</p>
<blockquote>
<p>com.congge.spi.BitptImpl</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="34-将jar安装到仓库中">3.4 将jar安装到仓库中<a href="#34-将jar安装到仓库中" class="hash-link" aria-label="3.4 将jar安装到仓库中的直接链接" title="3.4 将jar安装到仓库中的直接链接">​</a></h4>
<p>完成实现类的编码后，通过maven命令将jar安装到仓库中，然后再在上一步的biz-app中引入即可；</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-效果演示">4 效果演示<a href="#4-效果演示" class="hash-link" aria-label="4 效果演示的直接链接" title="4 效果演示的直接链接">​</a></h3>
<p>启动biz-app服务，调用接口：<code>localhost:8087/sendMsg?msg=sendMsg</code>，可以看到如下效果
<img decoding="async" loading="lazy" alt="img" src="data:image/webp;base64,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" width="664" height="138" class="img_ev3q"></p>
<p>为什么会出现这个效果呢？因为我们在实现类配置了具体使用哪一种方式进行短信的发送，而加载插件的时候正好能够找到对应的服务实现，这样的话就给当前的业务提供了一个较好的扩展点。</p>
<p><img decoding="async" loading="lazy" alt="img" src="/assets/images/39-11-95985b9cefac1943f7ac85c84d14864a.webp" width="934" height="493" class="img_ev3q"></p>
<h1>写在文末</h1>
<p>从当前的趋势来看，插件化机制的思想已经遍布各种编程语言，框架，中间件，开源工具等领域，因此掌握插件化的实现机制对于当下做程序实现，或架构设计方面都有着很重要的意义，值得深入研究，本篇到此结束，感谢观看！</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/lorchr/light-docusaurus/tree/main/docs/zh-cn/spring-boot/39-Spring-Boot-Plugable-Develop.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/zh-cn/spring-boot/Auto-Switch-between-Schedule-And-XXL-Job/"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Auto-Switch-between-Schedule-And-XXL-Job</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/zh-cn/spring-boot/How-To-Write-Controller/"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">How-To-Write-Controller</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#前言" class="table-of-contents__link toc-highlight">前言</a><ul><li><a href="#1-使用插件的好处" class="table-of-contents__link toc-highlight">1 使用插件的好处</a></li><li><a href="#2-插件化常用实现思路" class="table-of-contents__link toc-highlight">2 插件化常用实现思路</a></li></ul></li><li><a href="#java常用插件实现方案" class="table-of-contents__link toc-highlight">Java常用插件实现方案</a><ul><li><a href="#1-serviceloader方式" class="table-of-contents__link toc-highlight">1 serviceloader方式</a></li><li><a href="#2-自定义配置约定方式" class="table-of-contents__link toc-highlight">2 自定义配置约定方式</a></li><li><a href="#3-自定义配置读取依赖jar的方式" class="table-of-contents__link toc-highlight">3 自定义配置读取依赖jar的方式</a></li></ul></li><li><a href="#springboot中的插件化实现" class="table-of-contents__link toc-highlight">SpringBoot中的插件化实现</a><ul><li><a href="#1-spring-boot中的spi机制" class="table-of-contents__link toc-highlight">1. Spring Boot中的SPI机制</a></li><li><a href="#2-spring-factories实现原理" class="table-of-contents__link toc-highlight">2. Spring Factories实现原理</a></li><li><a href="#3-spring-factories案例实现" class="table-of-contents__link toc-highlight">3. Spring Factories案例实现</a></li></ul></li><li><a href="#插件化机制案例实战" class="table-of-contents__link toc-highlight">插件化机制案例实战</a><ul><li><a href="#1-案例背景" class="table-of-contents__link toc-highlight">1. 案例背景</a></li><li><a href="#2-biz-pp-关键代码实现过程" class="table-of-contents__link toc-highlight">2 biz-pp 关键代码实现过程</a></li><li><a href="#3-bizpt-关键代码实现过程" class="table-of-contents__link toc-highlight">3 bizpt 关键代码实现过程</a></li><li><a href="#4-效果演示" class="table-of-contents__link toc-highlight">4 效果演示</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/category/guide/">Torch</a></li><li class="footer__item"><a class="footer__link-item" href="/middleware/">Middleware</a></li><li class="footer__item"><a class="footer__link-item" href="/electron/">Electron</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/diy/">DIY</a></li><li class="footer__item"><a href="https://github.com/lorchr/light-docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Offical</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docusaurus.io/docs/playground" target="_blank" rel="noopener noreferrer" class="footer__link-item">Playground<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Light-Docusaurus, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>