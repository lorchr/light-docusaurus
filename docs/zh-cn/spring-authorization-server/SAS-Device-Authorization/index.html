<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-zh-cn/spring-authorization-server/SAS-Device-Authorization" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">SAS-Device-Authorization | Light Docusaurus</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lorchr.github.io/light-docusaurus/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://lorchr.github.io/light-docusaurus/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://lorchr.github.io/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Device-Authorization/"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="SAS-Device-Authorization | Light Docusaurus"><meta data-rh="true" name="description" content="- Spring Authorization Server入门 (四) 自定义设备码授权"><meta data-rh="true" property="og:description" content="- Spring Authorization Server入门 (四) 自定义设备码授权"><link data-rh="true" rel="icon" href="/light-docusaurus/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lorchr.github.io/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Device-Authorization/"><link data-rh="true" rel="alternate" href="https://lorchr.github.io/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Device-Authorization/" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://lorchr.github.io/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Device-Authorization/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://TLGHDZ3Y2I-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/light-docusaurus/blog/rss.xml" title="Light Docusaurus RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/light-docusaurus/blog/atom.xml" title="Light Docusaurus Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Light Docusaurus" href="/light-docusaurus/opensearch.xml"><link rel="stylesheet" href="/light-docusaurus/assets/css/styles.609e5209.css">
<script src="/light-docusaurus/assets/js/runtime~main.79436775.js" defer="defer"></script>
<script src="/light-docusaurus/assets/js/main.af3b976d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/light-docusaurus/"><div class="navbar__logo"><img src="/light-docusaurus/img/logo.svg" alt="Torch Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/light-docusaurus/img/logo.svg" alt="Torch Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Torch</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/light-docusaurus/docs/category/guide/">Torch</a><a class="navbar__item navbar__link" href="/light-docusaurus/blog/">Blog</a><a class="navbar__item navbar__link" href="/light-docusaurus/middleware/">Middleware</a><a class="navbar__item navbar__link" href="/light-docusaurus/electron/">Electron</a><a class="navbar__item navbar__link" href="/light-docusaurus/postman/">Postman</a><a class="navbar__item navbar__link" href="/light-docusaurus/diy/">DIY</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Device-Authorization/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-Hans">简体中文</a></li></ul></div><a href="https://github.com/lorchr/light-docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/guide/">Guide</a><button aria-label="展开侧边栏分类 &#x27;Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/develop-environment/">Develop Environment</a><button aria-label="展开侧边栏分类 &#x27;Develop Environment&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/java-jvm/">Java (JVM)</a><button aria-label="展开侧边栏分类 &#x27;Java (JVM)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/spring-boot/">Spring Boot</a><button aria-label="展开侧边栏分类 &#x27;Spring Boot&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/spring-cloud/">Spring Cloud</a><button aria-label="展开侧边栏分类 &#x27;Spring Cloud&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/spring-security/">Spring Security</a><button aria-label="展开侧边栏分类 &#x27;Spring Security&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/light-docusaurus/docs/category/spring-authorization-server/">Spring Authorization Server</a><button aria-label="折叠侧边栏分类 &#x27;Spring Authorization Server&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Geting-Start-Index/">SAS-Geting-Start-Index</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-OAuth2.1-Protocol/">SAS-OAuth2.1-Protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Spring-Boot-Authorization-Server/">SAS-Spring-Boot-Authorization-Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Spring-Boot-Authorization-Server-Addition/">SAS-Spring-Boot-Authorization-Server-Addition</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Device-Authorization/">SAS-Device-Authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Customlize-Exception-Configurer/">SAS-Customlize-Exception-Configurer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Token-Enhancer-And-Parser/">SAS-Token-Enhancer-And-Parser</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Image-Captcha/">SAS-Image-Captcha</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-OAuth2-Client/">SAS-OAuth2-Client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-OAuth2-Resource-Server/">SAS-OAuth2-Resource-Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-SMS-Code-Login/">SAS-SMS-Code-Login</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-OAuth2-Extension-Grant-Type copy/">SAS-OAuth2-Extension-Grant-Type copy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Frontend-Backend-Separate/">SAS-Frontend-Backend-Separate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Github-Gitee-Login/">SAS-Github-Gitee-Login</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Wechat-Login/">SAS-Wechat-Login</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Separate-Authorize-And-Device-Code-Page/">SAS-Separate-Authorize-And-Device-Code-Page</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Spring-Cloud-Gateway/">SAS-Spring-Cloud-Gateway</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Vue-Authorization-Code/">SAS-Vue-Authorization-Code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Vue-PKCE/">SAS-Vue-PKCE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Store-Token-And-UserInfo-With-Redis/">SAS-Store-Token-And-UserInfo-With-Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Optimize-Customlize-UserDetailService/">SAS-Optimize-Customlize-UserDetailService</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Optimize-Add-Redis-Cache/">SAS-Optimize-Add-Redis-Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Optimize-Persistance-JWKSource/">SAS-Optimize-Persistance-JWKSource</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Optimize-Redis-Serializer-Add-Jackson-Mixin/">SAS-Optimize-Redis-Serializer-Add-Jackson-Mixin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-FAQ/">SAS-FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/database/">Database</a><button aria-label="展开侧边栏分类 &#x27;Database&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/git/">Git</a><button aria-label="展开侧边栏分类 &#x27;Git&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/linux/">Linux</a><button aria-label="展开侧边栏分类 &#x27;Linux&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/docker/">Docker</a><button aria-label="展开侧边栏分类 &#x27;Docker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/kubernetes/">Kubernetes</a><button aria-label="展开侧边栏分类 &#x27;Kubernetes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/test/">Test</a><button aria-label="展开侧边栏分类 &#x27;Test&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/others/">Others</a><button aria-label="展开侧边栏分类 &#x27;Others&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/light-docusaurus/docs/zh-cn/awesome-open-source/">Awesome open source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/light-docusaurus/docs/zh-cn/windows/">Windows</a></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/light-docusaurus/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/light-docusaurus/docs/category/spring-authorization-server/"><span itemprop="name">Spring Authorization Server</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">SAS-Device-Authorization</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>SAS-Device-Authorization</h1></header><ul>
<li><a href="https://juejin.cn/post/7241101553712283707">Spring Authorization Server入门 (四) 自定义设备码授权</a></li>
</ul>
<h2 id="一代码集成">一、代码集成</h2>
<p>添加一个authorization包，文件都放在该包下，代码参考<a href="https://github.com/spring-projects/spring-authorization-server/blob/main/samples/demo-authorizationserver">官方示例</a></p>
<h3 id="1-添加deviceclientauthenticationtoken">1. 添加DeviceClientAuthenticationToken</h3>
<pre><code class="language-java">package com.example.authorization;

import java.util.Map;

import org.springframework.lang.Nullable;
import org.springframework.security.core.Transient;
import org.springframework.security.oauth2.core.ClientAuthenticationMethod;
import org.springframework.security.oauth2.server.authorization.authentication.OAuth2ClientAuthenticationToken;
import org.springframework.security.oauth2.server.authorization.client.RegisteredClient;

/**
 * 设备码模式token
 *
 * @author Joe Grandja
 * @author Steve Riesenberg
 * @since 1.1
 */
@Transient
public class DeviceClientAuthenticationToken extends OAuth2ClientAuthenticationToken {

    public DeviceClientAuthenticationToken(String clientId, ClientAuthenticationMethod clientAuthenticationMethod,
                                           @Nullable Object credentials, @Nullable Map&lt;String, Object&gt; additionalParameters) {
        super(clientId, clientAuthenticationMethod, credentials, additionalParameters);
    }

    public DeviceClientAuthenticationToken(RegisteredClient registeredClient, ClientAuthenticationMethod clientAuthenticationMethod,
                                           @Nullable Object credentials) {
        super(registeredClient, clientAuthenticationMethod, credentials);
    }

}
</code></pre>
<h3 id="2-添加deviceclientauthenticationconverter">2. 添加DeviceClientAuthenticationConverter</h3>
<pre><code class="language-java">package com.example.authorization;

import jakarta.servlet.http.HttpServletRequest;

import org.springframework.http.HttpMethod;
import org.springframework.lang.Nullable;
import org.springframework.security.core.Authentication;
import org.springframework.security.oauth2.core.AuthorizationGrantType;
import org.springframework.security.oauth2.core.ClientAuthenticationMethod;
import org.springframework.security.oauth2.core.OAuth2AuthenticationException;
import org.springframework.security.oauth2.core.OAuth2ErrorCodes;
import org.springframework.security.oauth2.core.endpoint.OAuth2ParameterNames;
import org.springframework.security.web.authentication.AuthenticationConverter;
import org.springframework.security.web.util.matcher.AndRequestMatcher;
import org.springframework.security.web.util.matcher.AntPathRequestMatcher;
import org.springframework.security.web.util.matcher.RequestMatcher;
import org.springframework.util.StringUtils;

/**
 * 获取请求中参数转化为DeviceClientAuthenticationToken
 *
 * @author Joe Grandja
 * @author Steve Riesenberg
 * @since 1.1
 */
public final class DeviceClientAuthenticationConverter implements AuthenticationConverter {
    private final RequestMatcher deviceAuthorizationRequestMatcher;
    private final RequestMatcher deviceAccessTokenRequestMatcher;

    public DeviceClientAuthenticationConverter(String deviceAuthorizationEndpointUri) {
        RequestMatcher clientIdParameterMatcher = request -&gt;
                request.getParameter(OAuth2ParameterNames.CLIENT_ID) != null;
        this.deviceAuthorizationRequestMatcher = new AndRequestMatcher(
                new AntPathRequestMatcher(
                        deviceAuthorizationEndpointUri, HttpMethod.POST.name()),
                clientIdParameterMatcher);
        this.deviceAccessTokenRequestMatcher = request -&gt;
                AuthorizationGrantType.DEVICE_CODE.getValue().equals(request.getParameter(OAuth2ParameterNames.GRANT_TYPE)) &amp;&amp;
                        request.getParameter(OAuth2ParameterNames.DEVICE_CODE) != null &amp;&amp;
                        request.getParameter(OAuth2ParameterNames.CLIENT_ID) != null;
    }

    @Nullable
    @Override
    public Authentication convert(HttpServletRequest request) {
        if (!this.deviceAuthorizationRequestMatcher.matches(request) &amp;&amp;
                !this.deviceAccessTokenRequestMatcher.matches(request)) {
            return null;
        }

        // client_id (REQUIRED)
        String clientId = request.getParameter(OAuth2ParameterNames.CLIENT_ID);
        if (!StringUtils.hasText(clientId) ||
                request.getParameterValues(OAuth2ParameterNames.CLIENT_ID).length != 1) {
            throw new OAuth2AuthenticationException(OAuth2ErrorCodes.INVALID_REQUEST);
        }

        return new DeviceClientAuthenticationToken(clientId, ClientAuthenticationMethod.NONE, null, null);
    }

}
</code></pre>
<h3 id="3-添加deviceclientauthenticationprovider">3. 添加DeviceClientAuthenticationProvider</h3>
<pre><code class="language-java">package com.example.authorization;

import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.security.authentication.AuthenticationProvider;
import org.springframework.security.core.Authentication;
import org.springframework.security.core.AuthenticationException;
import org.springframework.security.oauth2.core.ClientAuthenticationMethod;
import org.springframework.security.oauth2.core.OAuth2AuthenticationException;
import org.springframework.security.oauth2.core.OAuth2Error;
import org.springframework.security.oauth2.core.OAuth2ErrorCodes;
import org.springframework.security.oauth2.core.endpoint.OAuth2ParameterNames;
import org.springframework.security.oauth2.server.authorization.client.RegisteredClient;
import org.springframework.security.oauth2.server.authorization.client.RegisteredClientRepository;
import org.springframework.security.oauth2.server.authorization.web.OAuth2ClientAuthenticationFilter;

/**
 * 设备码认证提供者
 *
 * @author Joe Grandja
 * @author Steve Riesenberg
 * @author vains
 * @since 1.1
 * @see DeviceClientAuthenticationToken
 * @see DeviceClientAuthenticationConverter
 * @see OAuth2ClientAuthenticationFilter
 */
@Slf4j
@RequiredArgsConstructor
public final class DeviceClientAuthenticationProvider implements AuthenticationProvider {

    private final RegisteredClientRepository registeredClientRepository;

    /**
     * 异常说明地址
     */
    private static final String ERROR_URI = &quot;https://datatracker.ietf.org/doc/html/rfc6749#section-3.2.1&quot;;


    @Override
    public Authentication authenticate(Authentication authentication) throws AuthenticationException {
        // 执行时肯定是设备码流程
        DeviceClientAuthenticationToken deviceClientAuthentication =
                (DeviceClientAuthenticationToken) authentication;

        // 只支持公共客户端
        if (!ClientAuthenticationMethod.NONE.equals(deviceClientAuthentication.getClientAuthenticationMethod())) {
            return null;
        }

        // 获取客户端id并查询
        String clientId = deviceClientAuthentication.getPrincipal().toString();
        RegisteredClient registeredClient = this.registeredClientRepository.findByClientId(clientId);
        if (registeredClient == null) {
            throwInvalidClient(OAuth2ParameterNames.CLIENT_ID);
        }

        if (log.isTraceEnabled()) {
            log.trace(&quot;Retrieved registered client&quot;);
        }

        // 校验客户端
        if (!registeredClient.getClientAuthenticationMethods().contains(
                deviceClientAuthentication.getClientAuthenticationMethod())) {
            throwInvalidClient(&quot;authentication_method&quot;);
        }

        if (log.isTraceEnabled()) {
            log.trace(&quot;Validated device client authentication parameters&quot;);
        }

        if (log.isTraceEnabled()) {
            log.trace(&quot;Authenticated device client&quot;);
        }

        return new DeviceClientAuthenticationToken(registeredClient,
                deviceClientAuthentication.getClientAuthenticationMethod(), null);
    }

    @Override
    public boolean supports(Class&lt;?&gt; authentication) {
        // 只处理设备码请求
        return DeviceClientAuthenticationToken.class.isAssignableFrom(authentication);
    }

    private static void throwInvalidClient(String parameterName) {
        OAuth2Error error = new OAuth2Error(
                OAuth2ErrorCodes.INVALID_CLIENT,
                &quot;Device client authentication failed: &quot; + parameterName,
                ERROR_URI
        );
        throw new OAuth2AuthenticationException(error);
    }

}
</code></pre>
<h3 id="4-在登录页面同路径下添加device-activatehtml">4. 在登录页面同路径下添加device-activate.html</h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:th=&quot;https://www.thymeleaf.org&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
    &lt;title&gt;Spring Authorization Server sample&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/webjars/bootstrap/css/bootstrap.css&quot; th:href=&quot;@{/webjars/bootstrap/css/bootstrap.css}&quot; /&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class=&quot;container&quot;&gt;
    &lt;div class=&quot;row py-5&quot;&gt;
        &lt;div class=&quot;col-md-5&quot;&gt;
            &lt;h2&gt;Device Activation&lt;/h2&gt;
            &lt;p&gt;Enter the activation code to authorize the device.&lt;/p&gt;
            &lt;div class=&quot;mt-5&quot;&gt;
                &lt;form th:action=&quot;@{/oauth2/device_verification}&quot; method=&quot;post&quot;&gt;
                    &lt;div class=&quot;mb-3&quot;&gt;
                        &lt;label for=&quot;user_code&quot; class=&quot;form-label&quot;&gt;Activation Code&lt;/label&gt;
                        &lt;input type=&quot;text&quot; id=&quot;user_code&quot; name=&quot;user_code&quot; class=&quot;form-control&quot; required autofocus&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;mb-3&quot;&gt;
                        &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Submit&lt;/button&gt;
                    &lt;/div&gt;
                &lt;/form&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;col-md-7&quot;&gt;
            &lt;img src=&quot;/assets/img/devices.png&quot; th:src=&quot;@{/assets/img/devices.png}&quot; class=&quot;img-responsive&quot; alt=&quot;Devices&quot;&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="5-在登录页面同路径下添加device-activatedhtml">5. 在登录页面同路径下添加device-activated.html</h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:th=&quot;https://www.thymeleaf.org&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
    &lt;title&gt;Spring Authorization Server sample&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/webjars/bootstrap/css/bootstrap.css&quot; th:href=&quot;@{/webjars/bootstrap/css/bootstrap.css}&quot; /&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class=&quot;container&quot;&gt;
    &lt;div class=&quot;row py-5&quot;&gt;
        &lt;div class=&quot;col-md-5&quot;&gt;
            &lt;h2 class=&quot;text-success&quot;&gt;Success!&lt;/h2&gt;
            &lt;p&gt;
                You have successfully activated your device.&lt;br/&gt;
                Please return to your device to continue.
            &lt;/p&gt;
        &lt;/div&gt;
        &lt;div class=&quot;col-md-7&quot;&gt;
            &lt;img src=&quot;/assets/img/devices.png&quot; th:src=&quot;@{/assets/img/devices.png}&quot; class=&quot;img-responsive&quot; alt=&quot;Devices&quot;&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="6-复制devicespng至resourcesstaticassetsimg下">6. 复制devices.png至resources\static\assets\img下</h3>
<p>device-activate.html页面中有用到该图片</p>
<p><img alt="img" src="data:;base64,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" width="640" height="357"></p>
<h3 id="7-authorizationcontroller接口添加转发接口">7. AuthorizationController接口添加转发接口</h3>
<pre><code class="language-java">@GetMapping(&quot;/activate&quot;)
public String activate(@RequestParam(value = &quot;user_code&quot;, required = false) String userCode) {
	if (userCode != null) {
		return &quot;redirect:/oauth2/device_verification?user_code=&quot; + userCode;
	}
	return &quot;device-activate&quot;;
}

@GetMapping(&quot;/activated&quot;)
public String activated() {
	return &quot;device-activated&quot;;
}

@GetMapping(value = &quot;/&quot;, params = &quot;success&quot;)
public String success() {
	return &quot;device-activated&quot;;
}
</code></pre>
<p>完整代码如下</p>
<pre><code class="language-java">package com.example.controller;

import lombok.Data;
import lombok.RequiredArgsConstructor;
import org.springframework.security.oauth2.core.endpoint.OAuth2ParameterNames;
import org.springframework.security.oauth2.core.oidc.OidcScopes;
import org.springframework.security.oauth2.server.authorization.OAuth2AuthorizationConsent;
import org.springframework.security.oauth2.server.authorization.OAuth2AuthorizationConsentService;
import org.springframework.security.oauth2.server.authorization.client.RegisteredClient;
import org.springframework.security.oauth2.server.authorization.client.RegisteredClientRepository;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.util.StringUtils;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestParam;

import java.security.Principal;
import java.util.Collections;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Map;
import java.util.Set;

/**
 * 认证服务器相关自定接口
 *
 * @author vains
 */
@Controller
@RequiredArgsConstructor
public class AuthorizationController {

    private final RegisteredClientRepository registeredClientRepository;

    private final OAuth2AuthorizationConsentService authorizationConsentService;

    @GetMapping(&quot;/activate&quot;)
    public String activate(@RequestParam(value = &quot;user_code&quot;, required = false) String userCode) {
        if (userCode != null) {
            return &quot;redirect:/oauth2/device_verification?user_code=&quot; + userCode;
        }
        return &quot;device-activate&quot;;
    }

    @GetMapping(&quot;/activated&quot;)
    public String activated() {
        return &quot;device-activated&quot;;
    }

    @GetMapping(value = &quot;/&quot;, params = &quot;success&quot;)
    public String success() {
        return &quot;device-activated&quot;;
    }

    @GetMapping(&quot;/login&quot;)
    public String login() {
        return &quot;login&quot;;
    }

    @GetMapping(value = &quot;/oauth2/consent&quot;)
    public String consent(Principal principal, Model model,
                          @RequestParam(OAuth2ParameterNames.CLIENT_ID) String clientId,
                          @RequestParam(OAuth2ParameterNames.SCOPE) String scope,
                          @RequestParam(OAuth2ParameterNames.STATE) String state,
                          @RequestParam(name = OAuth2ParameterNames.USER_CODE, required = false) String userCode) {

        // Remove scopes that were already approved
        Set&lt;String&gt; scopesToApprove = new HashSet&lt;&gt;();
        Set&lt;String&gt; previouslyApprovedScopes = new HashSet&lt;&gt;();
        RegisteredClient registeredClient = this.registeredClientRepository.findByClientId(clientId);
        if (registeredClient == null) {
            throw new RuntimeException(&quot;客户端不存在&quot;);
        }
        OAuth2AuthorizationConsent currentAuthorizationConsent =
                this.authorizationConsentService.findById(registeredClient.getId(), principal.getName());
        Set&lt;String&gt; authorizedScopes;
        if (currentAuthorizationConsent != null) {
            authorizedScopes = currentAuthorizationConsent.getScopes();
        } else {
            authorizedScopes = Collections.emptySet();
        }
        for (String requestedScope : StringUtils.delimitedListToStringArray(scope, &quot; &quot;)) {
            if (OidcScopes.OPENID.equals(requestedScope)) {
                continue;
            }
            if (authorizedScopes.contains(requestedScope)) {
                previouslyApprovedScopes.add(requestedScope);
            } else {
                scopesToApprove.add(requestedScope);
            }
        }

        model.addAttribute(&quot;clientId&quot;, clientId);
        model.addAttribute(&quot;state&quot;, state);
        model.addAttribute(&quot;scopes&quot;, withDescription(scopesToApprove));
        model.addAttribute(&quot;previouslyApprovedScopes&quot;, withDescription(previouslyApprovedScopes));
        model.addAttribute(&quot;principalName&quot;, principal.getName());
        model.addAttribute(&quot;userCode&quot;, userCode);
        if (StringUtils.hasText(userCode)) {
            model.addAttribute(&quot;requestURI&quot;, &quot;/oauth2/device_verification&quot;);
        } else {
            model.addAttribute(&quot;requestURI&quot;, &quot;/oauth2/authorize&quot;);
        }

        return &quot;consent&quot;;
    }

    private static Set&lt;ScopeWithDescription&gt; withDescription(Set&lt;String&gt; scopes) {
        Set&lt;ScopeWithDescription&gt; scopeWithDescriptions = new HashSet&lt;&gt;();
        for (String scope : scopes) {
            scopeWithDescriptions.add(new ScopeWithDescription(scope));

        }
        return scopeWithDescriptions;
    }

    @Data
    public static class ScopeWithDescription {
        private static final String DEFAULT_DESCRIPTION = &quot;UNKNOWN SCOPE - We cannot provide information about this permission, use caution when granting this.&quot;;
        private static final Map&lt;String, String&gt; scopeDescriptions = new HashMap&lt;&gt;();
        static {
            scopeDescriptions.put(
                    OidcScopes.PROFILE,
                    &quot;This application will be able to read your profile information.&quot;
            );
            scopeDescriptions.put(
                    &quot;message.read&quot;,
                    &quot;This application will be able to read your message.&quot;
            );
            scopeDescriptions.put(
                    &quot;message.write&quot;,
                    &quot;This application will be able to add new messages. It will also be able to edit and delete existing messages.&quot;
            );
            scopeDescriptions.put(
                    &quot;other.scope&quot;,
                    &quot;This is another scope example of a scope description.&quot;
            );
        }

        public final String scope;
        public final String description;

        ScopeWithDescription(String scope) {
            this.scope = scope;
            this.description = scopeDescriptions.getOrDefault(scope, DEFAULT_DESCRIPTION);
        }
    }

}
</code></pre>
<h3 id="8-authorizationconfig文件中添加相关配置将provider和converter添加至端点配置中">8. AuthorizationConfig文件中添加相关配置，将provider和converter添加至端点配置中</h3>
<p><code>authorizationServerSettings</code>和<code>registeredClientRepository</code>是在<code>authorizationServerSecurityFilterChain</code>方法的入参中注入的</p>
<pre><code class="language-java">// 新建设备码converter和provider
DeviceClientAuthenticationConverter deviceClientAuthenticationConverter =
        new DeviceClientAuthenticationConverter(
                authorizationServerSettings.getDeviceAuthorizationEndpoint());
DeviceClientAuthenticationProvider deviceClientAuthenticationProvider =
        new DeviceClientAuthenticationProvider(registeredClientRepository);


http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)
        // 设置设备码用户验证url(自定义用户验证页)
        .deviceAuthorizationEndpoint(deviceAuthorizationEndpoint -&gt;
                deviceAuthorizationEndpoint.verificationUri(&quot;/activate&quot;)
        )
        // 设置验证设备码用户确认页面
        .deviceVerificationEndpoint(deviceVerificationEndpoint -&gt;
                deviceVerificationEndpoint.consentPage(CUSTOM_CONSENT_PAGE_URI)
        )
        .clientAuthentication(clientAuthentication -&gt;
                // 客户端认证添加设备码的converter和provider
                clientAuthentication
                        .authenticationConverter(deviceClientAuthenticationConverter)
                        .authenticationProvider(deviceClientAuthenticationProvider)
        );
</code></pre>
<p>完整<code>AuthorizationConfig.java</code>内容如下</p>
<pre><code class="language-java">package com.example.config;

import com.example.authorization.DeviceClientAuthenticationConverter;
import com.example.authorization.DeviceClientAuthenticationProvider;
import com.nimbusds.jose.jwk.JWKSet;
import com.nimbusds.jose.jwk.RSAKey;
import com.nimbusds.jose.jwk.source.ImmutableJWKSet;
import com.nimbusds.jose.jwk.source.JWKSource;
import com.nimbusds.jose.proc.SecurityContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.http.MediaType;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.security.access.annotation.Secured;
import org.springframework.security.config.Customizer;
import org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.core.userdetails.User;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.security.oauth2.core.AuthorizationGrantType;
import org.springframework.security.oauth2.core.ClientAuthenticationMethod;
import org.springframework.security.oauth2.core.oidc.OidcScopes;
import org.springframework.security.oauth2.jwt.JwtDecoder;
import org.springframework.security.oauth2.server.authorization.JdbcOAuth2AuthorizationConsentService;
import org.springframework.security.oauth2.server.authorization.JdbcOAuth2AuthorizationService;
import org.springframework.security.oauth2.server.authorization.OAuth2AuthorizationConsentService;
import org.springframework.security.oauth2.server.authorization.OAuth2AuthorizationService;
import org.springframework.security.oauth2.server.authorization.client.JdbcRegisteredClientRepository;
import org.springframework.security.oauth2.server.authorization.client.RegisteredClient;
import org.springframework.security.oauth2.server.authorization.client.RegisteredClientRepository;
import org.springframework.security.oauth2.server.authorization.config.annotation.web.configuration.OAuth2AuthorizationServerConfiguration;
import org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.OAuth2AuthorizationServerConfigurer;
import org.springframework.security.oauth2.server.authorization.settings.AuthorizationServerSettings;
import org.springframework.security.oauth2.server.authorization.settings.ClientSettings;
import org.springframework.security.provisioning.InMemoryUserDetailsManager;
import org.springframework.security.web.SecurityFilterChain;
import org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint;
import org.springframework.security.web.util.matcher.MediaTypeRequestMatcher;

import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.interfaces.RSAPrivateKey;
import java.security.interfaces.RSAPublicKey;
import java.util.UUID;

/**
 * 认证配置
 * {@link EnableMethodSecurity} 开启全局方法认证，启用JSR250注解支持，启用注解 {@link Secured} 支持，
 * 在Spring Security 6.0版本中将@Configuration注解从@EnableWebSecurity, @EnableMethodSecurity, @EnableGlobalMethodSecurity
 * 和 @EnableGlobalAuthentication 中移除，使用这些注解需手动添加 @Configuration 注解
 * {@link EnableWebSecurity} 注解有两个作用:
 * 1. 加载了WebSecurityConfiguration配置类, 配置安全认证策略。
 * 2. 加载了AuthenticationConfiguration, 配置了认证信息。
 *
 * @author vains
 */
@Configuration
@EnableWebSecurity
@EnableMethodSecurity(jsr250Enabled = true, securedEnabled = true)
public class AuthorizationConfig {

    private static final String CUSTOM_CONSENT_PAGE_URI = &quot;/oauth2/consent&quot;;

    /**
     * 配置端点的过滤器链
     *
     * @param http spring security核心配置类
     * @return 过滤器链
     * @throws Exception 抛出
     */
    @Bean
    public SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http,
                                                                      RegisteredClientRepository registeredClientRepository,
                                                                      AuthorizationServerSettings authorizationServerSettings) throws Exception {
        // 配置默认的设置，忽略认证端点的csrf校验
        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);

        // 新建设备码converter和provider
        DeviceClientAuthenticationConverter deviceClientAuthenticationConverter =
                new DeviceClientAuthenticationConverter(
                        authorizationServerSettings.getDeviceAuthorizationEndpoint());
        DeviceClientAuthenticationProvider deviceClientAuthenticationProvider =
                new DeviceClientAuthenticationProvider(registeredClientRepository);


        http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)
                // 开启OpenID Connect 1.0协议相关端点
                .oidc(Customizer.withDefaults())
                // 设置自定义用户确认授权页
                .authorizationEndpoint(authorizationEndpoint -&gt; authorizationEndpoint.consentPage(CUSTOM_CONSENT_PAGE_URI))
                // 设置设备码用户验证url(自定义用户验证页)
                .deviceAuthorizationEndpoint(deviceAuthorizationEndpoint -&gt;
                        deviceAuthorizationEndpoint.verificationUri(&quot;/activate&quot;)
                )
                // 设置验证设备码用户确认页面
                .deviceVerificationEndpoint(deviceVerificationEndpoint -&gt;
                        deviceVerificationEndpoint.consentPage(CUSTOM_CONSENT_PAGE_URI)
                )
                .clientAuthentication(clientAuthentication -&gt;
                        // 客户端认证添加设备码的converter和provider
                        clientAuthentication
                                .authenticationConverter(deviceClientAuthenticationConverter)
                                .authenticationProvider(deviceClientAuthenticationProvider)
                );
        http
                // 当未登录时访问认证端点时重定向至login页面
                .exceptionHandling((exceptions) -&gt; exceptions
                        .defaultAuthenticationEntryPointFor(
                                new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;),
                                new MediaTypeRequestMatcher(MediaType.TEXT_HTML)
                        )
                )
                // 处理使用access token访问用户信息端点和客户端注册端点
                .oauth2ResourceServer((resourceServer) -&gt; resourceServer
                        .jwt(Customizer.withDefaults()));

        return http.build();
    }

    /**
     * 配置认证相关的过滤器链
     *
     * @param http spring security核心配置类
     * @return 过滤器链
     * @throws Exception 抛出
     */
    @Bean
    public SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http) throws Exception {
        http.authorizeHttpRequests((authorize) -&gt; authorize
                        // 放行静态资源
                        .requestMatchers(&quot;/assets/**&quot;, &quot;/webjars/**&quot;, &quot;/login&quot;).permitAll()
                        .anyRequest().authenticated()
                )
                // 指定登录页面
                .formLogin(formLogin -&gt;
                        formLogin.loginPage(&quot;/login&quot;)
                );
        // 添加BearerTokenAuthenticationFilter，将认证服务当做一个资源服务，解析请求头中的token
        http.oauth2ResourceServer((resourceServer) -&gt; resourceServer
                .jwt(Customizer.withDefaults()));

        return http.build();
    }

    /**
     * 配置密码解析器，使用BCrypt的方式对密码进行加密和验证
     *
     * @return BCryptPasswordEncoder
     */
    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }

    /**
     * 配置客户端Repository
     *
     * @param jdbcTemplate    db 数据源信息
     * @param passwordEncoder 密码解析器
     * @return 基于数据库的repository
     */
    @Bean
    public RegisteredClientRepository registeredClientRepository(JdbcTemplate jdbcTemplate, PasswordEncoder passwordEncoder) {
        RegisteredClient registeredClient = RegisteredClient.withId(UUID.randomUUID().toString())
                // 客户端id
                .clientId(&quot;messaging-client&quot;)
                // 客户端秘钥，使用密码解析器加密
                .clientSecret(passwordEncoder.encode(&quot;123456&quot;))
                // 客户端认证方式，基于请求头的认证
                .clientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_BASIC)
                // 配置资源服务器使用该客户端获取授权时支持的方式
                .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)
                .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)
                .authorizationGrantType(AuthorizationGrantType.CLIENT_CREDENTIALS)
                // 授权码模式回调地址，oauth2.1已改为精准匹配，不能只设置域名，并且屏蔽了localhost，本机使用127.0.0.1访问
                .redirectUri(&quot;http://127.0.0.1:8080/login/oauth2/code/messaging-client-oidc&quot;)
                .redirectUri(&quot;https://www.baidu.com&quot;)
                // 该客户端的授权范围，OPENID与PROFILE是IdToken的scope，获取授权时请求OPENID的scope时认证服务会返回IdToken
                .scope(OidcScopes.OPENID)
                .scope(OidcScopes.PROFILE)
                // 自定scope
                .scope(&quot;message.read&quot;)
                .scope(&quot;message.write&quot;)
                // 客户端设置，设置用户需要确认授权
                .clientSettings(ClientSettings.builder().requireAuthorizationConsent(true).build())
                .build();

        // 基于db存储客户端，还有一个基于内存的实现 InMemoryRegisteredClientRepository
        JdbcRegisteredClientRepository registeredClientRepository = new JdbcRegisteredClientRepository(jdbcTemplate);

        // 初始化客户端
        RegisteredClient repositoryByClientId = registeredClientRepository.findByClientId(registeredClient.getClientId());
        if (repositoryByClientId == null) {
            registeredClientRepository.save(registeredClient);
        }
        // 设备码授权客户端
        RegisteredClient deviceClient = RegisteredClient.withId(UUID.randomUUID().toString())
                .clientId(&quot;device-message-client&quot;)
                // 公共客户端
                .clientAuthenticationMethod(ClientAuthenticationMethod.NONE)
                // 设备码授权
                .authorizationGrantType(AuthorizationGrantType.DEVICE_CODE)
                .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)
                // 自定scope
                .scope(&quot;message.read&quot;)
                .scope(&quot;message.write&quot;)
                .build();
        RegisteredClient byClientId = registeredClientRepository.findByClientId(deviceClient.getClientId());
        if (byClientId == null) {
            registeredClientRepository.save(deviceClient);
        }

        // PKCE客户端
        RegisteredClient pkceClient = RegisteredClient.withId(UUID.randomUUID().toString())
                .clientId(&quot;pkce-message-client&quot;)
                // 公共客户端
                .clientAuthenticationMethod(ClientAuthenticationMethod.NONE)
                // 授权码模式，因为是扩展授权码流程，所以流程还是授权码的流程，改变的只是参数
                .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)
                .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)
                // 授权码模式回调地址，oauth2.1已改为精准匹配，不能只设置域名，并且屏蔽了localhost，本机使用127.0.0.1访问
                .redirectUri(&quot;http://127.0.0.1:8080/login/oauth2/code/messaging-client-oidc&quot;)
                .clientSettings(ClientSettings.builder().requireProofKey(Boolean.TRUE).build())
                // 自定scope
                .scope(&quot;message.read&quot;)
                .scope(&quot;message.write&quot;)
                .build();
        RegisteredClient findPkceClient = registeredClientRepository.findByClientId(pkceClient.getClientId());
        if (findPkceClient == null) {
            registeredClientRepository.save(pkceClient);
        }
        return registeredClientRepository;
    }

    /**
     * 配置基于db的oauth2的授权管理服务
     *
     * @param jdbcTemplate               db数据源信息
     * @param registeredClientRepository 上边注入的客户端repository
     * @return JdbcOAuth2AuthorizationService
     */
    @Bean
    public OAuth2AuthorizationService authorizationService(JdbcTemplate jdbcTemplate, RegisteredClientRepository registeredClientRepository) {
        // 基于db的oauth2认证服务，还有一个基于内存的服务实现InMemoryOAuth2AuthorizationService
        return new JdbcOAuth2AuthorizationService(jdbcTemplate, registeredClientRepository);
    }

    /**
     * 配置基于db的授权确认管理服务
     *
     * @param jdbcTemplate               db数据源信息
     * @param registeredClientRepository 客户端repository
     * @return JdbcOAuth2AuthorizationConsentService
     */
    @Bean
    public OAuth2AuthorizationConsentService authorizationConsentService(JdbcTemplate jdbcTemplate, RegisteredClientRepository registeredClientRepository) {
        // 基于db的授权确认管理服务，还有一个基于内存的服务实现InMemoryOAuth2AuthorizationConsentService
        return new JdbcOAuth2AuthorizationConsentService(jdbcTemplate, registeredClientRepository);
    }

    /**
     * 配置jwk源，使用非对称加密，公开用于检索匹配指定选择器的JWK的方法
     *
     * @return JWKSource
     */
    @Bean
    public JWKSource&lt;SecurityContext&gt; jwkSource() {
        KeyPair keyPair = generateRsaKey();
        RSAPublicKey publicKey = (RSAPublicKey) keyPair.getPublic();
        RSAPrivateKey privateKey = (RSAPrivateKey) keyPair.getPrivate();
        RSAKey rsaKey = new RSAKey.Builder(publicKey)
                .privateKey(privateKey)
                .keyID(UUID.randomUUID().toString())
                .build();
        JWKSet jwkSet = new JWKSet(rsaKey);
        return new ImmutableJWKSet&lt;&gt;(jwkSet);
    }

    /**
     * 生成rsa密钥对，提供给jwk
     *
     * @return 密钥对
     */
    private static KeyPair generateRsaKey() {
        KeyPair keyPair;
        try {
            KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;);
            keyPairGenerator.initialize(2048);
            keyPair = keyPairGenerator.generateKeyPair();
        } catch (Exception ex) {
            throw new IllegalStateException(ex);
        }
        return keyPair;
    }

    /**
     * 配置jwt解析器
     *
     * @param jwkSource jwk源
     * @return JwtDecoder
     */
    @Bean
    public JwtDecoder jwtDecoder(JWKSource&lt;SecurityContext&gt; jwkSource) {
        return OAuth2AuthorizationServerConfiguration.jwtDecoder(jwkSource);
    }

    /**
     * 添加认证服务器配置，设置jwt签发者、默认端点请求地址等
     *
     * @return AuthorizationServerSettings
     */
    @Bean
    public AuthorizationServerSettings authorizationServerSettings() {
        return AuthorizationServerSettings.builder().build();
    }

    /**
     * 先暂时配置一个基于内存的用户，框架在用户认证时会默认调用
     * {@link UserDetailsService#loadUserByUsername(String)} 方法根据
     * 账号查询用户信息，一般是重写该方法实现自己的逻辑
     *
     * @param passwordEncoder 密码解析器
     * @return UserDetailsService
     */
    @Bean
    public UserDetailsService users(PasswordEncoder passwordEncoder) {
        UserDetails user = User.withUsername(&quot;admin&quot;)
                .password(passwordEncoder.encode(&quot;123456&quot;))
                .roles(&quot;admin&quot;, &quot;normal&quot;, &quot;unAuthentication&quot;)
                .authorities(&quot;app&quot;, &quot;web&quot;, &quot;/test2&quot;, &quot;/test3&quot;)
                .build();
        return new InMemoryUserDetailsManager(user);
    }

}
</code></pre>
<p>至此，自定义的设备码的流程就结束了，接下来开始测试一下。</p>
<h2 id="二测试设备码流程">二、测试设备码流程</h2>
<p>授权码流程详见<a href="https://datatracker.ietf.org/doc/html/rfc8628">rfc8628</a></p>
<p>首先，用户请求<code>/oauth2/device_authorization</code>接口，获取<code>user_code</code>、设备码和给用户在浏览器访问的地址，用户在浏览器打开地址，输入<code>user_code</code>，如果用户尚未登录则需要进行登录；输入<code>user_code</code>之后如果该客户端当前用户尚未授权则重定向至授权确认页面；授权完成后设备通过设备码换取token，设备一般是在给出用户验证地址后轮训携带设备码访问<code>/oauth2/token</code>接口，如果用户尚未验证时访问则会响应&quot;authorization_pending&quot;，详见：<a href="https://datatracker.ietf.org/doc/html/rfc8628#section-3.5">rfc8628#section-3.5</a></p>
<h3 id="1-设备发起授权请求携带要求的参数请求oauth2device_authorization接口">1. 设备发起授权请求，携带要求的参数请求<code>/oauth2/device_authorization</code>接口</h3>
<p><img alt="img" src="/light-docusaurus/assets/images/4-2-480e9f4d44cce711116ab947c4257f11.awebp" width="1424" height="571"></p>
<p>请求参数说明</p>
<ul>
<li><code>client_id</code>: 客户端id</li>
<li><code>scope</code>: 设备请求授权的范围</li>
</ul>
<p>响应参数说明</p>
<ul>
<li><code>user_code</code>: 用户在浏览器打开验证地址时输入的内容</li>
<li><code>device_code</code>：设备码，用该值换取token</li>
<li><code>verification_uri_complete</code>：用户在浏览器打开的验证地址，页面会自动获取参数并提交表单</li>
<li><code>verification_uri</code>：验证地址，需要用户输入<code>user_code</code></li>
<li><code>expires_in</code>：过期时间，单位（秒）</li>
</ul>
<h3 id="2-访问verification_uri或者verification_uri_complete">2. 访问verification_uri或者verification_uri_complete</h3>
<p>未登录，跳转至登录页</p>
<p><img alt="img" src="data:;base64,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" width="1512" height="406"></p>
<h3 id="3-输入user_code并提交">3. 输入user_code并提交</h3>
<p><img alt="img" src="/light-docusaurus/assets/images/4-4-01ade90a24c3ad9fc3d8e1a05eed24ae.awebp" width="1512" height="418"></p>
<h3 id="4-重定向至用户授权确认页面">4. 重定向至用户授权确认页面</h3>
<p>该客户端用户尚未确认过，重定向至授权确认页面，勾选scope后提交</p>
<p><img alt="img" src="/light-docusaurus/assets/images/4-5-67d44bdf6c020b24c181163195e18635.awebp" width="1512" height="602"></p>
<h3 id="5-授权成功后跳转至成功页面">5. 授权成功后跳转至成功页面</h3>
<p><img alt="img" src="/light-docusaurus/assets/images/4-6-95f4ae5220d211617b470064b962a733.awebp" width="1512" height="452"></p>
<h3 id="6-设备发起请求用设备码换取token请求oauth2token接口">6. 设备发起请求用设备码换取token，请求<code>/oauth2/token</code>接口</h3>
<p>老样子，使用postman模拟设备请求</p>
<p><img alt="img" src="/light-docusaurus/assets/images/4-7-b6b42435cb3a58b5a480089ceeec0b59.awebp" width="1423" height="646"></p>
<p>这里我是重新获取了一个，之前的过期了，使用过期设备码请求如下所示</p>
<p><img alt="img" src="/light-docusaurus/assets/images/4-8-7575ec1679800015b4fefd41e18e0a80.awebp" width="1422" height="531"></p>
<p>用户尚未验证时使用设备码请求如下</p>
<p><img alt="img" src="/light-docusaurus/assets/images/4-9-823fd3b2cf316dbe4c7fb9b82ed1ccd6.awebp" width="1428" height="518"></p>
<p>参数解释</p>
<ul>
<li><code>client_id</code>：客户端id</li>
<li><code>device_code</code>：请求<code>/oauth2/device_authorization</code>接口返回的设备码(<code>device_code</code>)</li>
<li><code>grant_type</code>：在设备码模式固定是<code>urn:ietf:params:oauth:grant-type:device_code</code></li>
</ul>
<p>至此，自定义设备码流程结束，项目结构如下图所示</p>
<h2 id="三写在最后">三、写在最后</h2>
<p>设备码流程一般使用在不便  输入的设备上，设备提供一个链接给用户验证，用户在其它设备的浏览器中认证；其它的三方服务需要接入时就比较适合授权码模式，桌面客户端、移动app和前端应用就比较适合pkce流程，pkce靠随机生成的<code>Code Verifier</code>和<code>Code Challenge</code>来保证流程的安全，无法让他人拆包获取clientId和<code>clientSecret</code>来伪造登录信息；至于用户登录时输入的账号和密码只能通过升级https来防止拦截请求获取用户密码。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/lorchr/light-docusaurus/tree/main/docs/zh-cn/spring-authorization-server/4-SAS-Device-Authorization.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Spring-Boot-Authorization-Server-Addition/"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">SAS-Spring-Boot-Authorization-Server-Addition</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/light-docusaurus/docs/zh-cn/spring-authorization-server/SAS-Customlize-Exception-Configurer/"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">SAS-Customlize-Exception-Configurer</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#一代码集成" class="table-of-contents__link toc-highlight">一、代码集成</a><ul><li><a href="#1-添加deviceclientauthenticationtoken" class="table-of-contents__link toc-highlight">1. 添加DeviceClientAuthenticationToken</a></li><li><a href="#2-添加deviceclientauthenticationconverter" class="table-of-contents__link toc-highlight">2. 添加DeviceClientAuthenticationConverter</a></li><li><a href="#3-添加deviceclientauthenticationprovider" class="table-of-contents__link toc-highlight">3. 添加DeviceClientAuthenticationProvider</a></li><li><a href="#4-在登录页面同路径下添加device-activatehtml" class="table-of-contents__link toc-highlight">4. 在登录页面同路径下添加device-activate.html</a></li><li><a href="#5-在登录页面同路径下添加device-activatedhtml" class="table-of-contents__link toc-highlight">5. 在登录页面同路径下添加device-activated.html</a></li><li><a href="#6-复制devicespng至resourcesstaticassetsimg下" class="table-of-contents__link toc-highlight">6. 复制devices.png至resources\static\assets\img下</a></li><li><a href="#7-authorizationcontroller接口添加转发接口" class="table-of-contents__link toc-highlight">7. AuthorizationController接口添加转发接口</a></li><li><a href="#8-authorizationconfig文件中添加相关配置将provider和converter添加至端点配置中" class="table-of-contents__link toc-highlight">8. AuthorizationConfig文件中添加相关配置，将provider和converter添加至端点配置中</a></li></ul></li><li><a href="#二测试设备码流程" class="table-of-contents__link toc-highlight">二、测试设备码流程</a><ul><li><a href="#1-设备发起授权请求携带要求的参数请求oauth2device_authorization接口" class="table-of-contents__link toc-highlight">1. 设备发起授权请求，携带要求的参数请求<code>/oauth2/device_authorization</code>接口</a></li><li><a href="#2-访问verification_uri或者verification_uri_complete" class="table-of-contents__link toc-highlight">2. 访问verification_uri或者verification_uri_complete</a></li><li><a href="#3-输入user_code并提交" class="table-of-contents__link toc-highlight">3. 输入user_code并提交</a></li><li><a href="#4-重定向至用户授权确认页面" class="table-of-contents__link toc-highlight">4. 重定向至用户授权确认页面</a></li><li><a href="#5-授权成功后跳转至成功页面" class="table-of-contents__link toc-highlight">5. 授权成功后跳转至成功页面</a></li><li><a href="#6-设备发起请求用设备码换取token请求oauth2token接口" class="table-of-contents__link toc-highlight">6. 设备发起请求用设备码换取token，请求<code>/oauth2/token</code>接口</a></li></ul></li><li><a href="#三写在最后" class="table-of-contents__link toc-highlight">三、写在最后</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/docs/category/guide/">Torch</a></li><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/middleware/">Middleware</a></li><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/electron/">Electron</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/blog/">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/diy/">DIY</a></li><li class="footer__item"><a href="https://github.com/lorchr/light-docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Offical</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docusaurus.io/docs/playground" target="_blank" rel="noopener noreferrer" class="footer__link-item">Playground<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Light-Docusaurus, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>