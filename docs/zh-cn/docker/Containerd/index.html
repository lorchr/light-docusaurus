<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-zh-cn/docker/Containerd" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Containerd | Light Docusaurus</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lorchr.github.io/light-docusaurus/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://lorchr.github.io/light-docusaurus/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://lorchr.github.io/light-docusaurus/docs/zh-cn/docker/Containerd/"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Containerd | Light Docusaurus"><meta data-rh="true" name="description" content="- Containerd ctr、crictl、nerdctl 客户端命令介绍与实战操作"><meta data-rh="true" property="og:description" content="- Containerd ctr、crictl、nerdctl 客户端命令介绍与实战操作"><link data-rh="true" rel="icon" href="/light-docusaurus/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lorchr.github.io/light-docusaurus/docs/zh-cn/docker/Containerd/"><link data-rh="true" rel="alternate" href="https://lorchr.github.io/light-docusaurus/docs/zh-cn/docker/Containerd/" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://lorchr.github.io/light-docusaurus/docs/zh-cn/docker/Containerd/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://TLGHDZ3Y2I-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/light-docusaurus/blog/rss.xml" title="Light Docusaurus RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/light-docusaurus/blog/atom.xml" title="Light Docusaurus Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Light Docusaurus" href="/light-docusaurus/opensearch.xml"><link rel="stylesheet" href="/light-docusaurus/assets/css/styles.609e5209.css">
<script src="/light-docusaurus/assets/js/runtime~main.ce5c1d45.js" defer="defer"></script>
<script src="/light-docusaurus/assets/js/main.704d0d8d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/light-docusaurus/"><div class="navbar__logo"><img src="/light-docusaurus/img/logo.svg" alt="Torch Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/light-docusaurus/img/logo.svg" alt="Torch Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Torch</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/light-docusaurus/docs/category/guide/">Torch</a><a class="navbar__item navbar__link" href="/light-docusaurus/blog/">Blog</a><a class="navbar__item navbar__link" href="/light-docusaurus/middleware/">Middleware</a><a class="navbar__item navbar__link" href="/light-docusaurus/electron/">Electron</a><a class="navbar__item navbar__link" href="/light-docusaurus/postman/">Postman</a><a class="navbar__item navbar__link" href="/light-docusaurus/diy/">DIY</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/light-docusaurus/docs/zh-cn/docker/Containerd/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-Hans">简体中文</a></li></ul></div><a href="https://github.com/lorchr/light-docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/guide/">Guide</a><button aria-label="展开侧边栏分类 &#x27;Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/develop-environment/">Develop Environment</a><button aria-label="展开侧边栏分类 &#x27;Develop Environment&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/java-jvm/">Java (JVM)</a><button aria-label="展开侧边栏分类 &#x27;Java (JVM)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/spring-boot/">Spring Boot</a><button aria-label="展开侧边栏分类 &#x27;Spring Boot&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/spring-cloud/">Spring Cloud</a><button aria-label="展开侧边栏分类 &#x27;Spring Cloud&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/spring-security/">Spring Security</a><button aria-label="展开侧边栏分类 &#x27;Spring Security&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/database/">Database</a><button aria-label="展开侧边栏分类 &#x27;Database&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/git/">Git</a><button aria-label="展开侧边栏分类 &#x27;Git&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/linux/">Linux</a><button aria-label="展开侧边栏分类 &#x27;Linux&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/light-docusaurus/docs/category/docker/">Docker</a><button aria-label="折叠侧边栏分类 &#x27;Docker&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/docker/Containers/">Containers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/docker/Docker-Install/">Docker-Install</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/docker/Play-With-Docker/">Play-With-Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/docker/Oracle-Cloud-Free-Tier/">Oracle-Cloud-Free-Tier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/docker/Docker-Add-Hosts-For-Container/">Docker-Add-Hosts-For-Container</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/light-docusaurus/docs/zh-cn/docker/Docker-Port-Bind-Error-In-Windows/">Docker-Port-Bind-Error-In-Windows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/light-docusaurus/docs/zh-cn/docker/Containerd/">Containerd</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/kubernetes/">Kubernetes</a><button aria-label="展开侧边栏分类 &#x27;Kubernetes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/test/">Test</a><button aria-label="展开侧边栏分类 &#x27;Test&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/light-docusaurus/docs/category/others/">Others</a><button aria-label="展开侧边栏分类 &#x27;Others&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/light-docusaurus/docs/zh-cn/awesome-open-source/">Awesome open source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/light-docusaurus/docs/zh-cn/windows/">Windows</a></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/light-docusaurus/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/light-docusaurus/docs/category/docker/"><span itemprop="name">Docker</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Containerd</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Containerd</h1></header><ul>
<li><a href="https://blog.csdn.net/zfw_666666/article/details/126605139">Containerd ctr、crictl、nerdctl 客户端命令介绍与实战操作</a></li>
<li><a href="https://www.jianshu.com/p/0f7940258b7a">crictl 命令用法及与docker-cli的命令对比</a></li>
</ul>
<h2 id="一概述">一、概述</h2>
<p>作为接替 Docker 运行时的 Containerd 在早在 <code>Kubernetes1.7</code> 时就能直接与 Kubelet 集成使用，只是大部分时候我们因熟悉 Docker，在部署集群时采用了默认的 dockershim。在V1.24起的版本的 kubelet 就彻底移除了dockershim，改为默认使用Containerd了 ，当然也使用cri-dockerd适配器来将Docker Engine与 Kubernetes 集成。可以参考<a href="https://kubernetes.io/zh-cn/docs/setup/production-environment/container-runtimes/#docker">官方文档</a>：</p>
<blockquote>
<p><a href="https://kubernetes.io/zh-cn/docs/setup/production-environment/container-runtimes/#docker">https://kubernetes.io/zh-cn/docs/setup/production-environment/container-runtimes/#docker</a></p>
</blockquote>
<h2 id="二containerd-常见命令操作">二、Containerd 常见命令操作</h2>
<blockquote>
<p>更换 Containerd 后，以往我们常用的 docker 命令也不再使用，取而代之的分别是crictl和ctr两个命令客户端。</p>
</blockquote>
<ul>
<li><code>crictl</code>是遵循 CRI 接口规范的一个命令行工具，通常用它来检查和管理kubelet节点上的容器运行时和镜像。</li>
<li><code>ctr</code>是containerd的一个客户端工具。</li>
<li><code>ctr -v</code>输出的是containerd的版本，<code>crictl -v</code>输出的是当前 k8s 的版本，从结果显而易见你可以认为crictl是用于k8s的。</li>
</ul>
<blockquote>
<p>一般来说你某个主机安装了 k8s 后，命令行才会有 crictl 命令。而 ctr 是跟 k8s 无关的，你主机安装了 containerd 服务后就可以操作 ctr 命令。</p>
</blockquote>
<p>使用crictl命令之前，需要先配置<code>/etc/crictl.yaml</code>如下：</p>
<pre><code class="language-yaml">runtime-endpoint: unix:///run/containerd/containerd.sock 
image-endpoint: unix:///run/containerd/containerd.sock 
timeout: 10 
debug: false
</code></pre>
<p>也可以通过命令进行设置：</p>
<pre><code class="language-shell">crictl config runtime-endpoint unix:///run/containerd/containerd.sock 
crictl config image-endpoint unix:///run/containerd/containerd.sock
</code></pre>
<table><thead><tr><th>命令</th><th>docker</th><th>ctr (containerd)</th><th>crictl(kubernates)</th></tr></thead><tbody><tr><td>查看运行的容器</td><td>docker ps</td><td>ctr task ls / ctr container ls</td><td>crictl ps</td></tr><tr><td>查看镜像</td><td>docker images</td><td>ctr image ls</td><td>crictl images</td></tr><tr><td>查看容器日志</td><td>docker logs</td><td>-</td><td>crictl logs</td></tr><tr><td>查看容器数据信息</td><td>docker inspect</td><td>ctr container info</td><td>crictl inspect</td></tr><tr><td>查看容器资源</td><td>docker stats</td><td>-</td><td>crictl stats</td></tr><tr><td>启动/关闭已有的容器</td><td>docker start/stop</td><td>ctr task start/kill</td><td>crictl start/stop</td></tr><tr><td>运行一个新的容器</td><td>docker run</td><td>ctr run</td><td>- (最小单元为pod)</td></tr><tr><td>打标签</td><td>docker tag</td><td>ctr image tag</td><td>-</td></tr><tr><td>创建一个新的容器</td><td>docker create</td><td>ctr container create</td><td>crictl create</td></tr><tr><td>导入镜像</td><td>docker load</td><td>ctr image import</td><td>-</td></tr><tr><td>导出镜像</td><td>docker save</td><td>ctr image export</td><td>-</td></tr><tr><td>删除容器</td><td>docker rm</td><td>ctr container rm</td><td>crictl rm</td></tr><tr><td>删除镜像</td><td>docker rmi</td><td>ctr image rm</td><td>crictl rmi</td></tr><tr><td>拉取镜像</td><td>docker pull</td><td>ctr image pull</td><td>crictl pull</td></tr><tr><td>推送镜像</td><td>docker push</td><td>ctr image push</td><td>-</td></tr><tr><td>登录或在容器内部执行命令</td><td>docker exec</td><td>-</td><td>crictl  exec</td></tr><tr><td>清空不用的容器</td><td>docker image prune</td><td>-</td><td>crictl rmi --prune</td></tr></tbody></table>
<p>更多命令操作，可以直接在命令行输入命令查看帮助。</p>
<pre><code class="language-shell">docker --help 
ctr --help 
crictl --help
</code></pre>
<p>由于 Containerd 也有 namespaces 的概念，对于上层编排系统的支持，ctr客户端 主要区分了 3 个命名空间分别是<code>k8s.io</code>、<code>moby</code>和<code>default</code>，以上我们用crictl操作的均在<code>k8s.io</code>命名空间，使用ctr看镜像  列表就需要加上<code>-n</code> 参数。crictl 是只有一个<code>k8s.io</code>命名空间，但是没有<code>-n</code>参数。</p>
<blockquote>
<p>【温馨提示】<code>ctr images pull</code> 拉取的镜像默认放在<code>default</code>，而 <code>crictl pull</code> 和 <code>kubelet</code> 默认拉取的镜像都在 <code>k8s.io</code> 命名空间下。所以通过<code>ctr</code>导入镜像的时候特别注意一点，最好指定命名空间。</p>
</blockquote>
<pre><code class="language-shell"># 注意-n不能放在命令最后面，下面几行查看的镜像是一样的 
ctr -n=k8s.io image ls 
ctr -n k8s.io image ls 

# crictl 没有-n参数，操作都在`k8s.io`命名空间下。 
crictl image ls 
crictl images
# crictl image list = ctr -n=k8s.io image list 
# crictl image ls   = ctr -n=k8s.io image ls 
# crictl images     = ctr -n=k8s.io image list 
# crictl images     = ctr -n=k8s.io image ls 

# 使用ctr命令指定命名空间导入镜像 
ctr -n=k8s.io image import dashboard.tar 
# 查看镜像，可以看到可以查询到了
crictl images
</code></pre>
<h2 id="三containerd-客户端工具-nerdctl">三、containerd 客户端工具 nerdctl</h2>
<p>推荐使用 nerdctl，使用效果与 docker 命令的语法一致，github 下载链接：</p>
<blockquote>
<p><a href="https://github.com/containerd/nerdctl/releases">https://github.com/containerd/nerdctl/releases</a></p>
</blockquote>
<ul>
<li>精简 (nerdctl--linux-amd64.tar.gz): 只包含 <code>nerdctl</code></li>
<li>完整 (nerdctl-full--linux-amd64.tar.gz):包含 <code>containerd</code>, <code>runc</code>, and <code>CNI</code> 等依赖</li>
</ul>
<blockquote>
<p><code>nerdctl</code>的目标并不是单纯地复制 <code>docker</code> 的功能，它还实现了很多 <code>docker</code> 不具备的功能，例如延迟拉取镜像（<code>lazy-pulling</code>）、镜像加密（<code>imgcrypt</code>）等。具体看 nerdctl。</p>
</blockquote>
<p>延迟拉取镜像功能可以参考这篇文章：Containerd 使用 Stargz Snapshotter 延迟拉取镜像</p>
<blockquote>
<p><a href="https://icloudnative.io/posts/startup-containers-in-lightning-speed-with-lazy-image-distribution-on-containerd/">https://icloudnative.io/posts/startup-containers-in-lightning-speed-with-lazy-image-distribution-on-containerd/</a></p>
</blockquote>
<h3 id="1安装-nerdctl精简版">1）安装 nerdctl（精简版）</h3>
<pre><code class="language-shell">wget https://github.com/containerd/nerdctl/releases/download/v0.22.2/nerdctl-0.22.2-linux-amd64.tar.gz 
# 解压
tar -xf nerdctl-0.22.2-linux-amd64.tar.gz 
ln -s /opt/k8s/nerdctl/nerdctl /usr/local/bin/nerdctl
</code></pre>
<h3 id="2安装-nerdctl完整版这里不装">2）安装 nerdctl（完整版，这里不装）</h3>
<pre><code class="language-shell">wget https://github.com/containerd/nerdctl/releases/download/v0.22.2/nerdctl-full-0.22.2-linux-amd64.tar.gz
# 解压
tar -xf nerdctl-full-0.16.0-linux-amd64.tar.gz -C /usr/local/
cp /usr/local/lib/systemd/system/*.service /etc/systemd/system/
</code></pre>
<p>启动服务 <code>buildkit</code></p>
<pre><code class="language-shell">systemctl enable buildkit containerd --now 
systemctl status buildkit containerd
</code></pre>
<h3 id="3安装-buildkit-支持构建镜像">3）安装 buildkit 支持构建镜像</h3>
<p>buildkit GitHub 地址：</p>
<blockquote>
<p><a href="https://github.com/moby/buildkit">https://github.com/moby/buildkit</a></p>
</blockquote>
<blockquote>
<p>使用<strong>精简版 nerdctl 无法直接通过 containerd 构建镜像</strong>，需要与 buildkit 组全使用以实现镜像构建。当然你也可以安装上面的完整 nerdctl；buildkit 项目是 Docker 公司开源出来的一个构建工具包，支持 OCI 标准的镜像构建。它主要包含以下部分:</p>
</blockquote>
<ul>
<li>服务端 buildkitd，当前支持 runc 和 containerd 作为 worker，默认是 runc；</li>
<li>客户端 buildctl，负责解析 Dockerfile，并向服务端 buildkitd 发出构建请求。</li>
</ul>
<p>buildkit 是典型的<strong>C/S 架构</strong>，client 和 server 可以不在一台服务器上。而 nerdctl 在构建镜像方面也可以作为 buildkitd 的客户端。</p>
<pre><code class="language-shell"># https://github.com/moby/buildkit/releases 
wget https://github.com/moby/buildkit/releases/download/v0.10.4/buildkit-v0.10.4.linux-amd64.tar.gz 
tar -xf buildkit-v0.10.4.linux-amd64.tar.gz -C /usr/local/
</code></pre>
<p>配置 buildkit 的启动文件，可以从这里下载：</p>
<pre><code class="language-shell">https://github.com/moby/buildkit/tree/master/examples/systemd
</code></pre>
<p>buildkit 需要配置两个文件</p>
<ul>
<li>/usr/lib/systemd/system/buildkit.socket</li>
</ul>
<pre><code class="language-shell">cat &gt; /usr/lib/systemd/system/buildkit.socket &lt;&lt; EOF
[Unit] 
Description=BuildKit 
Documentation=https://github.com/moby/buildkit

[Socket] 
ListenStream=%t/buildkit/buildkitd.sock 
SocketMode=0660 

[Install] 
WantedBy=sockets.target
EOF
</code></pre>
<ul>
<li>/usr/lib/systemd/system/buildkit.service</li>
</ul>
<pre><code class="language-shell">cat &gt; /usr/lib/systemd/system/buildkit.service &lt;&lt; EOF 
[Unit] 
Description=BuildKit 
Requires=buildkit.socket 
After=buildkit.socket 
Documentation=https://github.com/moby/buildkit 

[Service] 
# Replace runc build swith containerd builds
ExecStart=/usr/local/bin/buildkitd --addr fd://

[Install] 
WantedBy=multi-user.target 
EOF
</code></pre>
<p>启动 buildkit</p>
<pre><code class="language-shell">systemctl daemon-reload 
systemctl enable buildkit --now
</code></pre>
<h2 id="四实战操作">四、实战操作</h2>
<h3 id="1修改-containerd-配置文件">1）修改 containerd 配置文件</h3>
<pre><code class="language-shell">containerd config default &gt; /etc/containerd/config.toml
</code></pre>
<p>配置如下：</p>
<pre><code class="language-toml">[plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry] 
    config_path=&quot;&quot; 
    
    [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.auths] 
    
    [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.configs] 
        [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.configs.&quot;myharbor-minio.com&quot;.tls] 
            insecure_skip_verify=true #跳过认证 
            ca_file=&quot;/etc/containerd/myharbor-minio.com/ca.crt&quot; 
        [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.configs.&quot;myharbor-minio.com&quot;.auth] 
            username=&quot;admin&quot; 
            password=&quot;Harbor12345&quot; 

        [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.headers] 

        [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.mirrors] 
            [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.mirrors.&quot;myharbor-minio.com&quot;] 
                endpoint=[&quot;https://myharbor-minio.com&quot;]
</code></pre>
<p>重启 containerd</p>
<pre><code class="language-shell"># 重新加载配置 
systemctl daemon-reload 
# 重启containerd 
systemctl restart containerd
</code></pre>
<blockquote>
<p><strong>注意：</strong> 这个配置文件是给<code>crictl</code>和<code>kubelet</code>使用，<code>ctr</code>是不可以用这个配置文件的，<code>ctr</code> 不使用 CRI，因此它不读取 plugins.&quot;io.containerd.grpc.v1.cri&quot;配置。</p>
</blockquote>
<h3 id="2ctr-拉取推送镜像">2）ctr 拉取推送镜像</h3>
<pre><code class="language-shell"># 推送镜像到harbor 
ctr --namespace=k8s.io images push myharbor-minio.com/bigdata/minio:2022.8.22-debian-11-r0 --skip-verify --user admin:Harbor12345 

# --namespace=k8s.io 指定命名空间，不是必须，根据环境而定 
# --skip-verify 跳过认证 
# --user指定harbor用户名及密码

# 从harbor拉取镜像
ctr images pull --user admin:Harbor12345 --tlscacert=/etc/containerd/myharbor-minio.com/ca.crt myharbor-minio.com/bigdata/minio:2022.8.22-debian-11-r0
</code></pre>
<p>不想 <code>-u user:password</code> 每次必须使用 <code>ctr pull</code>/<code>ctr push</code>， 可以使用 <code>nerdctl</code>。</p>
<h3 id="3镜像构建">3）镜像构建</h3>
<pre><code class="language-shell">cat &gt; Dockerfile &lt;&lt; EOF 
FROM nginx:alpine 
RUN echo &#x27;Hello Nerdctl From Containerd&#x27; &gt; /usr/share/nginx/html/index.html 
EOF
</code></pre>
<p>然后在文件所在目录执行镜像构建命令：</p>
<pre><code class="language-shell"># 不加-n指定命名空间，crictl看不到，kubelet也不能使用它，默认在default命名空间下 
nerdctl -n k8s.io build -t nginx:nerctl -f./Dockerfile . 

### 参数解释 
# -t：指定镜像名称 
# . ：当前目录Dockerfile 
# -f：指定Dockerfile路径 
# --no-cache：不缓存
</code></pre>
<h3 id="4打标签-tag">4）打标签 tag</h3>
<pre><code class="language-shell"># crictl没有tag命令，只能使用nerdctl和ctr，必须指定命名空间，要不然kubelet无法使用。 
ctr -n k8s.io i tag 
nerdctl -n k8s.io tag nginx:nerctl myharbor-minio.com/bigdata/nginx:nerctl 
# ctr -n k8s.io tag nginx:nerctl myharbor-minio.com/bigdata/nginx:nerctl 
# 查看镜像 
nerdctl -n k8s.io images myharbor-minio.com/bigdata/nginx:nerctl
</code></pre>
<h3 id="5将镜像推送到-harbor">5）将镜像推送到 Harbor</h3>
<p>第一种情况：http方式，配置如下：</p>
<pre><code class="language-shell"># 以下两个哪个都可以 
# mkdir -p /etc/docker/certs.d/myharbor-minio.com:443 
mkdir -p /etc/containerd/certs.d/myharbor-minio.com:443 
cat &gt; /etc/containerd/certs.d/myharbor-minio.com\:443/hosts.toml &lt;&lt; EOF 
server=&quot;https://docker.io&quot;

[host.&quot;http://myharbor-minio.com:80&quot;] 
    capabilities=[&quot;pull&quot;,&quot;resolve&quot;,&quot;push&quot;] 
    #skip_verify=true 
    #ca=&quot;ca.crt&quot;            # 相对路径 
    #ca=&quot;/opt/auth/ca.crt&quot;  # 绝对路径 
    #ca=[&quot;/opt/auth/ca.crt&quot;] 
    #ca=[&quot;ca.crt&quot;] 
    #client=[[&quot;/opt/auth/nginx.cclinux.cn.crt&quot;,&quot;/opt/auth/nginx.cclinux.cn.key&quot;]] 
EOF
</code></pre>
<p>第一种情况：https方式，配置如下：</p>
<pre><code class="language-shell"># 以下两个哪个都可以 
# mkdir -p /etc/docker/certs.d/myharbor-minio.com:443 
mkdir -p /etc/containerd/certs.d/myharbor-minio.com:443 
cat &gt; /etc/containerd/certs.d/myharbor-minio.com\:443/hosts.toml &lt;&lt; EOF 
server=&quot;https://docker.io&quot; 

[host.&quot;https://myharbor-minio.com:443&quot;] 
    capabilities=[&quot;pull&quot;,&quot;resolve&quot;,&quot;push&quot;] 
    skip_verify=true 
    #ca=&quot;ca.crt&quot;            # 相对路径 
    #ca=&quot;/opt/auth/ca.crt&quot;  # 绝对路径 
    #ca=[&quot;/opt/auth/ca.crt&quot;] 
    ca=[&quot;/etc/containerd/myharbor-minio.com/ca.crt&quot;] 
    #client=[[&quot;/opt/auth/nginx.cclinux.cn.crt&quot;,&quot;/opt/auth/nginx.cclinux.cn.key&quot;]] 
EOF
</code></pre>
<p>通过 nerdctl 登录 harbor</p>
<pre><code class="language-shell">echo Harbor12345| nerdctl login --username &quot;admin&quot; --password-stdin myharbor-minio.com:443

# nerdctl login --username &quot;admin&quot; --password Harbor12345 myharbor-minio.com:443

# 登出 
# nerdctl logout
</code></pre>
<p>开始将镜像推送到 harbor</p>
<pre><code class="language-shell">### 推送到Harbor 
# --insecure-registry       skips verifying HTTPS certs, and allows falling back to plain HTTP 
nerdctl --insecure-registry --namespace=k8s.io push myharbor-minio.com/bigdata/nginx:nerctl 
# ctr --namespace=k8s.io images push myharbor-minio.com/bigdata/nginx:nerctl --skip-verify --user admin:Harbor12345 

# --namespace=k8s.io指定命名空间，跟 -n 一样，不是必须，根据环境而定
# --skip-verify跳过认证 
# --user指定harbor用户名及密码
</code></pre>
<p>Containerd ctr，crictl，nerdctl 客户端命令介绍与实战操作就到这里了，有疑问的小伙伴欢迎给我留言哦！</p>
<h2 id="五crictl-与-docker-cli命令对比">五、crictl 与 docker-cli命令对比</h2>
<p><code>crictl</code> 是 CRI 兼容的容器运行时命令行接口。 你可以使用它来检查和调试 Kubernetes 节点上的容器运行时和应用程序。 <code>crictl</code> 和它的源代码在 <code>cri-tools</code> 代码库。</p>
<p>crictl 默认连接到<code>unix:///var/run/dockershim.sock</code>。 对于其他的运行时，你可以用多种不同的方法设置端点:</p>
<ul>
<li>通过设置参数 <code>--runtime-endpoint</code>和 <code>--image-endpoint</code></li>
<li>通过设置环境变量 <code>CONTAINER_RUNTIME_ENDPOINT</code> 和 <code>IMAGE_SERVICE_ENDPOINT</code></li>
<li>通过在配置文件中设置端点<code>--config=/etc/crictl.yaml</code></li>
</ul>
<p>要查看或编辑当前配置，请查看或编辑 <code>/etc/crictl.yaml</code> 的内容。</p>
<pre><code class="language-shell">[root ~]$ cat /etc/crictl.yaml
runtime-endpoint: unix:///var/run/dockershim.sock
image-endpoint: unix:///var/run/dockershim.sock
timeout: 10
debug: true
</code></pre>
<table><thead><tr><th>crictl</th><th>描述</th></tr></thead><tbody><tr><td>imagefsinfo</td><td>返回镜像的文件系统信息</td></tr><tr><td>inspectp</td><td>显示一个或多个 Pod 的状态</td></tr><tr><td>port-forward</td><td>转发本地端口到 Pod</td></tr><tr><td>pods</td><td>列举 Pod</td></tr><tr><td>runp</td><td>运行一个新的 Pod</td></tr><tr><td>rmp</td><td>移除一个或多个 Pod</td></tr><tr><td>stopp</td><td>停止一个或多个正运行的 Pod</td></tr><tr><td>attach</td><td>连接到一个运行中的容器</td></tr><tr><td>exec</td><td>在运行中的容器里运行一个命令</td></tr><tr><td>images</td><td>列举镜像</td></tr><tr><td>info</td><td>显示系统级的信息</td></tr><tr><td>inspect, inspecti</td><td>返回容器、镜像或者任务的详细信息</td></tr><tr><td>logs</td><td>获取容器的日志</td></tr><tr><td>ps</td><td>列举容器</td></tr><tr><td>stats</td><td>实时显示容器的资源使用统计信息</td></tr><tr><td>version</td><td>显示运行时（Docker、ContainerD、或者其他) 的版本信息</td></tr><tr><td>create</td><td>创建一个新的容器</td></tr><tr><td>stop (timeout=0)</td><td>杀死一个或多个正在运行的容器</td></tr><tr><td>pull</td><td>从镜像仓库拉取镜像或者代码仓库</td></tr><tr><td>rm</td><td>移除一个或多个容器</td></tr><tr><td>rmi</td><td>移除一个或多个镜像</td></tr><tr><td>run</td><td>在新容器里运行一个命令</td></tr><tr><td>start</td><td>启动一个或多个停止的容器</td></tr><tr><td>stop</td><td>停止一个或多个正运行的容器</td></tr><tr><td>update</td><td>更新一个或多个容器的配置</td></tr></tbody></table>
<h2 id="docker-cli-和-crictl-的映射">Docker CLI 和 crictl 的映射</h2>
<p>以下的映射表格只适用于 <code>Docker CLI v1.40</code> 和 <code>crictl v1.19.0</code> 版本。 请注意该表格并不详尽。例如，其中不包含 Docker CLI 的实验性命令。</p>
<blockquote>
<p>说明： 尽管有些命令的输出缺少了一些数据列，CRICTL 的输出格式与 Docker CLI 是类似的。 如果你的脚本程序需要解析命令的输出，请确认检查该特定命令的输出。</p>
</blockquote>
<table><thead><tr><th>docker cli</th><th>crictl</th><th>描述</th><th>不支持的功能</th></tr></thead><tbody><tr><td>attach</td><td>attach</td><td>连接到一个运行中的容器</td><td>--detach-keys, --sig-proxy</td></tr><tr><td>exec</td><td>exec</td><td>在运行中的容器里运行一个命令</td><td>--privileged, --user, --detach-keys</td></tr><tr><td>images</td><td>images</td><td>列举镜像</td><td></td></tr><tr><td>info</td><td>info</td><td>显示系统级的信息</td><td></td></tr><tr><td>inspect</td><td>inspect, inspecti</td><td>返回容器、镜像或者任务的详细信息</td><td></td></tr><tr><td>logs</td><td>logs</td><td>获取容器的日志</td><td>--details</td></tr><tr><td>ps</td><td>ps</td><td>列举容器</td><td></td></tr><tr><td>stats</td><td>stats</td><td>实时显示容器的资源使用统计信息</td><td>列：NET/BLOCK I/O, PIDs</td></tr><tr><td>version</td><td>version</td><td>显示运行时（Docker、ContainerD、或者其他) 的版本信息</td><td></td></tr><tr><td>create</td><td>create</td><td>创建一个新的容器</td><td></td></tr><tr><td>kill</td><td>stop (timeout=0)</td><td>杀死一个或多个正在运行的容器</td><td>--signal</td></tr><tr><td>pull</td><td>pull</td><td>从镜像仓库拉取镜像或者代码仓库--all-tags, --disable-content-trust</td><td></td></tr><tr><td>rm</td><td>rm</td><td>移除一个或多个容器</td><td></td></tr><tr><td>rmi</td><td>rmi</td><td>移除一个或多个镜像</td><td></td></tr><tr><td>run</td><td>run</td><td>在新容器里运行一个命令</td><td></td></tr><tr><td>start</td><td>start</td><td>启动一个或多个停止的容器</td><td>--detach-keys</td></tr><tr><td>stop</td><td>stop</td><td>停止一个或多个正运行的容器</td><td></td></tr><tr><td>update</td><td>update</td><td>更新一个或多个容器的配置</td><td>CRI 不支持 --restart、--blkio-weight 以及一些其他的资源限制选项。</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/lorchr/light-docusaurus/tree/main/docs/zh-cn/docker/6-Containerd.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/light-docusaurus/docs/zh-cn/docker/Docker-Port-Bind-Error-In-Windows/"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Docker-Port-Bind-Error-In-Windows</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/light-docusaurus/docs/category/kubernetes/"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Kubernetes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#一概述" class="table-of-contents__link toc-highlight">一、概述</a></li><li><a href="#二containerd-常见命令操作" class="table-of-contents__link toc-highlight">二、Containerd 常见命令操作</a></li><li><a href="#三containerd-客户端工具-nerdctl" class="table-of-contents__link toc-highlight">三、containerd 客户端工具 nerdctl</a><ul><li><a href="#1安装-nerdctl精简版" class="table-of-contents__link toc-highlight">1）安装 nerdctl（精简版）</a></li><li><a href="#2安装-nerdctl完整版这里不装" class="table-of-contents__link toc-highlight">2）安装 nerdctl（完整版，这里不装）</a></li><li><a href="#3安装-buildkit-支持构建镜像" class="table-of-contents__link toc-highlight">3）安装 buildkit 支持构建镜像</a></li></ul></li><li><a href="#四实战操作" class="table-of-contents__link toc-highlight">四、实战操作</a><ul><li><a href="#1修改-containerd-配置文件" class="table-of-contents__link toc-highlight">1）修改 containerd 配置文件</a></li><li><a href="#2ctr-拉取推送镜像" class="table-of-contents__link toc-highlight">2）ctr 拉取推送镜像</a></li><li><a href="#3镜像构建" class="table-of-contents__link toc-highlight">3）镜像构建</a></li><li><a href="#4打标签-tag" class="table-of-contents__link toc-highlight">4）打标签 tag</a></li><li><a href="#5将镜像推送到-harbor" class="table-of-contents__link toc-highlight">5）将镜像推送到 Harbor</a></li></ul></li><li><a href="#五crictl-与-docker-cli命令对比" class="table-of-contents__link toc-highlight">五、crictl 与 docker-cli命令对比</a></li><li><a href="#docker-cli-和-crictl-的映射" class="table-of-contents__link toc-highlight">Docker CLI 和 crictl 的映射</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/docs/category/guide/">Torch</a></li><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/middleware/">Middleware</a></li><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/electron/">Electron</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/lorchr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/blog/">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/light-docusaurus/diy/">DIY</a></li><li class="footer__item"><a href="https://github.com/lorchr/light-docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Offical</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docusaurus.io/docs/playground" target="_blank" rel="noopener noreferrer" class="footer__link-item">Playground<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Light-Docusaurus, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>