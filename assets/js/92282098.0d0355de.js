"use strict";(self.webpackChunklight_docusaurus=self.webpackChunklight_docusaurus||[]).push([[46649],{48582:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>o});var t=s(74848),i=s(28453);const r={},a=void 0,l={id:"zh-cn/active-directory/ADFS-Login",title:"ADFS-Login",description:"\u76f8\u5173\u7f51\u7ad9",source:"@site/docs/zh-cn/active-directory/3-ADFS-Login.md",sourceDirName:"zh-cn/active-directory",slug:"/zh-cn/active-directory/ADFS-Login",permalink:"/docs/zh-cn/active-directory/ADFS-Login",draft:!1,unlisted:!1,editUrl:"https://github.com/lorchr/light-docusaurus/tree/main/docs/zh-cn/active-directory/3-ADFS-Login.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{},sidebar:"troch",previous:{title:"Tomcat-Integrate-Windows-Authentication-With-Spnego",permalink:"/docs/zh-cn/active-directory/Tomcat-Integrate-Windows-Authentication-With-Spnego"},next:{title:"Install-AD-FS-For-SSO-Login",permalink:"/docs/zh-cn/active-directory/Install-AD-FS-For-SSO-Login"}},d={},o=[{value:"\u76f8\u5173\u7f51\u7ad9",id:"\u76f8\u5173\u7f51\u7ad9",level:2},{value:"\u4e00\u3001\u6982\u5ff5",id:"\u4e00\u6982\u5ff5",level:2},{value:"1. \u8eab\u4efd\u63d0\u4f9b\u8005",id:"1-\u8eab\u4efd\u63d0\u4f9b\u8005",level:3},{value:"2. \u670d\u52a1\u63d0\u4f9b\u8005",id:"2-\u670d\u52a1\u63d0\u4f9b\u8005",level:3},{value:"3. SAML\u8ba4\u8bc1\u65f6\u5e8f\u56fe",id:"3-saml\u8ba4\u8bc1\u65f6\u5e8f\u56fe",level:3},{value:"\u4e8c\u3001IDP\u914d\u7f6e (ADFS Server)",id:"\u4e8cidp\u914d\u7f6e-adfs-server",level:2},{value:"1. \u83b7\u53d6\u8054\u5408\u5143\u6570\u636e XML",id:"1-\u83b7\u53d6\u8054\u5408\u5143\u6570\u636e-xml",level:3},{value:"2. \u4e0b\u8f7d\u5143\u6570\u636e",id:"2-\u4e0b\u8f7d\u5143\u6570\u636e",level:3},{value:"3. \u521b\u5efa\u4fe1\u8d56\u4fe1\u4efb\u65b9",id:"3-\u521b\u5efa\u4fe1\u8d56\u4fe1\u4efb\u65b9",level:3},{value:"4. \u521b\u5efa Claims \u7b7e\u53d1\u7b56\u7565\u89c4\u5219",id:"4-\u521b\u5efa-claims-\u7b7e\u53d1\u7b56\u7565\u89c4\u5219",level:3},{value:"\u4e09\u3001SP\u914d\u7f6e (Spring Boot Application)",id:"\u4e09sp\u914d\u7f6e-spring-boot-application",level:2},{value:"1. \u5bfc\u5165\u4f9d\u8d56",id:"1-\u5bfc\u5165\u4f9d\u8d56",level:3},{value:"2. \u6307\u5b9a\u8eab\u4efd\u63d0\u4f9b\u8005\uff08Identity Provider\uff09\u5143\u6570\u636e",id:"2-\u6307\u5b9a\u8eab\u4efd\u63d0\u4f9b\u8005identity-provider\u5143\u6570\u636e",level:3},{value:"3. \u914d\u7f6e\u7c7b",id:"3-\u914d\u7f6e\u7c7b",level:3},{value:"4. \u83b7\u53d6 SP \u5143\u6570\u636e",id:"4-\u83b7\u53d6-sp-\u5143\u6570\u636e",level:3},{value:"\u56db\u3001\u793a\u4f8b",id:"\u56db\u793a\u4f8b",level:2},{value:"1. \u8bf7\u6c42\u6d41\u7a0b",id:"1-\u8bf7\u6c42\u6d41\u7a0b",level:3},{value:"2. \u8bf7\u6c42\u53c2\u6570\u89e3\u6790 SAMLRequest",id:"2-\u8bf7\u6c42\u53c2\u6570\u89e3\u6790-samlrequest",level:3},{value:"3. \u54cd\u5e94\u503c\u89e3\u6790 SAMLResponse",id:"3-\u54cd\u5e94\u503c\u89e3\u6790-samlresponse",level:3},{value:"\u4e94\u3001\u6ce8\u610f\u4e8b\u9879",id:"\u4e94\u6ce8\u610f\u4e8b\u9879",level:2},{value:"1. \u54cd\u5e94\u72b6\u6001\u7801",id:"1-\u54cd\u5e94\u72b6\u6001\u7801",level:3},{value:"2. IDP \u4e0e SP \u7684\u6458\u8981\u7b97\u6cd5\u9700\u8981\u4e00\u81f4",id:"2-idp-\u4e0e-sp-\u7684\u6458\u8981\u7b97\u6cd5\u9700\u8981\u4e00\u81f4",level:3},{value:"3. NameID\u5c5e\u6027",id:"3-nameid\u5c5e\u6027",level:3},{value:"4. \u6ce8\u610f <code>ds:Reference</code> \u7b7e\u540d\u9700\u8981\u6307\u5411 <code>Assertion</code>",id:"4-\u6ce8\u610f-dsreference-\u7b7e\u540d\u9700\u8981\u6307\u5411-assertion",level:3}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"\u76f8\u5173\u7f51\u7ad9",children:"\u76f8\u5173\u7f51\u7ad9"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://docs.spring.io/spring-security/reference/servlet/saml2/index.html",children:"Spring SAML2"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/zh-cn/windows-server/identity/identity-and-access",children:"Microsoft - \u6807\u8bc6\u548c\u8bbf\u95ee\u6587\u6863"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/zh-cn/windows-server/identity/ad-fs/ad-fs-overview",children:"Microsoft - AD FS \u6982\u8ff0"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/zh-cn/entra/identity-platform/single-sign-on-saml-protocol",children:"Microsoft - SAML SSO\u534f\u8bae"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/zh-cn/entra/identity-platform/saml-claims-customization#edit-nameid",children:"Microsoft - \u81ea\u5b9a\u4e49 SAML \u4ee4\u724c\u58f0\u660e"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/zh-cn/entra/identity/enterprise-apps/troubleshoot-password-based-sso",children:"Microsoft - \u7591\u96be\u89e3\u7b54"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://help.aliyun.com/zh/ram/user-guide/implement-role-based-sso-from-ad-fs",children:"\u963f\u91cc\u4e91 - \u4f7f\u7528AD FS\u8fdb\u884c\u89d2\u8272SSO\u7684\u793a\u4f8b"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://cloud.tencent.com/document/product/598/84174",children:"\u817e\u8baf\u4e91 - ADFS \u7528\u6237 SSO \u4f7f\u7528\u8bf4\u660e"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://docs.keeper.io/sso-connect-cloud/identity-provider-setup/ad-fs-keeper",children:"Keeper SSO Connect - Microsoft AD FS"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://www.samltool.com/decode.php",children:"\u89e3\u6790SAML Request Response"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://www.samltool.com/validate_authn_req.php",children:"\u6821\u9a8cSAML Request"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://www.samltool.com/validate_response.php",children:"\u6821\u9a8cSAML Response"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u4e00\u6982\u5ff5",children:"\u4e00\u3001\u6982\u5ff5"}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u5b66\u4e60\u4e4b\u524d\uff0c\u9996\u5148\u8981\u4e86\u89e3SAML\u7684\u6982\u5ff5\uff0cSAML\u4e3b\u8981\u6709\u4e09\u4e2a\u8eab\u4efd\uff1a\u7528\u6237/\u6d4f\u89c8\u5668\uff0c\u670d\u52a1\u63d0\u4f9b\u5546\uff0c\u8eab\u4efd\u63d0\u4f9b\u5546"}),"\n",(0,t.jsx)(n.h3,{id:"1-\u8eab\u4efd\u63d0\u4f9b\u8005",children:"1. \u8eab\u4efd\u63d0\u4f9b\u8005"}),"\n",(0,t.jsx)(n.p,{children:"\u201c\u8eab\u4efd\u63d0\u4f9b\u8005\u201d\u548c\u201c\u65ad\u8a00\u65b9\u201d\u662f\u540c\u4e49\u8bcd\uff0c\u5728ADFS\uff0cOKta\u901a\u5e38\u53eb\u505aIDP\uff0c\u800c\u5728Spring\u8fd9\u4e9b\u7ecf\u5e38\u88ab\u7f29\u5199\u4e3aAP\u3002\u7b80\u800c\u8a00\u4e4b\u7528\u6237\u9700\u8981\u91cd\u5b9a\u5411\u5230IDP\u53bb\u767b\u5f55\uff0c\u4ee5\u7ed5\u8fc7\u670d\u52a1\u63d0\u4f9b\u5546\uff0c\u907f\u514d\u8ba9\u670d\u52a1\u63d0\u4f9b\u5546\u83b7\u53d6\u7528\u6237\u654f\u611f\u4fe1\u606f\u3002"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"IDP\uff08Identity Provider\uff09\u8eab\u4efd\u63d0\u4f9b\u8005"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u89e3\u91ca\uff1aIDP\u8d1f\u8d23\u9a8c\u8bc1\u7528\u6237\u7684\u8eab\u4efd\uff0c\u5e76\u751f\u6210\u5305\u542b\u6709\u5173\u7528\u6237\u8eab\u4efd\u4fe1\u606f\u7684\u5b89\u5168\u65ad\u8a00\uff08assertion\uff09\u3002\u5728SAML\u4e2d\uff0cIDP\u901a\u5e38\u662f\u7531\u4e00\u4e2a\u7ec4\u7ec7\u6216\u670d\u52a1\u63d0\u4f9b\u5546\u63d0\u4f9b\u7684\uff0c\u7528\u4e8e\u9a8c\u8bc1\u7528\u6237\u8eab\u4efd\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"AP\uff08Attribute Provider\uff09\u5c5e\u6027\u63d0\u4f9b\u8005\uff0c\u57fa\u672c\u7b49\u540cIDP"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u89e3\u91ca\uff1aAP\u662f\u4e00\u4e2a\u63d0\u4f9b\u7528\u6237\u5c5e\u6027\u4fe1\u606f\u7684\u5b9e\u4f53\u3002\u5728SAML\u4e2d\uff0c\u8fd9\u4e9b\u5c5e\u6027\u4fe1\u606f\u53ef\u80fd\u5305\u62ec\u7528\u6237\u7684\u59d3\u540d\u3001\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3001\u89d2\u8272\u7b49\u3002AP\u901a\u5e38\u4e0eIDP\u5206\u5f00\uff0c\u4ee5\u4fbf\u5c5e\u6027\u4fe1\u606f\u53ef\u4ee5\u7531\u4e13\u95e8\u7684\u5b9e\u4f53\u8fdb\u884c\u7ba1\u7406\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-\u670d\u52a1\u63d0\u4f9b\u8005",children:"2. \u670d\u52a1\u63d0\u4f9b\u8005"}),"\n",(0,t.jsx)(n.p,{children:"\u201c\u670d\u52a1\u63d0\u4f9b\u8005\u201d\u548c\u201c\u4fe1\u8d56\u65b9\u201d\u4e5f\u662f\u540c\u4e49\u8bcd\uff0c\u5728ADFS\uff0cOKta\u901a\u5e38\u53eb\u505aSP\uff0c\u800c\u5728Spring\u901a\u5e38\u53eb\u505aRP\u3002"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"SP\uff08Service Provider\uff09\u670d\u52a1\u63d0\u4f9b\u8005"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u89e3\u91ca\uff1aSP\u662f\u4f9d\u8d56SAML\u65ad\u8a00\u6765\u5bf9\u7528\u6237\u8fdb\u884c\u6388\u6743\u7684\u5b9e\u4f53\u3002SP\u53ef\u80fd\u662f\u4e00\u4e2aWeb\u5e94\u7528\u7a0b\u5e8f\u3001\u670d\u52a1\u6216\u8d44\u6e90\uff0c\u5b83\u4f9d\u8d56IDP\u751f\u6210\u7684\u65ad\u8a00\u6765\u786e\u5b9a\u7528\u6237\u662f\u5426\u6709\u6743\u8bbf\u95ee\u53d7\u4fdd\u62a4\u7684\u8d44\u6e90\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"RP\uff08Relying Party\uff09\u4f9d\u8d56\u65b9 SP \u540c\u4e49\u8bcd"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u89e3\u91ca\uff1aRP\u662f\u6307\u4f9d\u8d56SAML\u65ad\u8a00\u6765\u63a5\u53d7\u6216\u62d2\u7edd\u7528\u6237\u8bbf\u95ee\u8bf7\u6c42\u7684\u5b9e\u4f53\u3002RP\u53ef\u4ee5\u662fSP\u7684\u540c\u4e49\u8bcd\uff0c\u8868\u793a\u5b83\u4f9d\u8d56IDP\u751f\u6210\u7684\u65ad\u8a00\u6765\u8fdb\u884c\u7528\u6237\u6388\u6743\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3-saml\u8ba4\u8bc1\u65f6\u5e8f\u56fe",children:"3. SAML\u8ba4\u8bc1\u65f6\u5e8f\u56fe"}),"\n",(0,t.jsx)(n.p,{children:"\u6211\u4eec\u5148\u6765\u770b\u770bSAML 2.0\u4f9d\u8d56\u65b9\u8ba4\u8bc1\u5728Spring Security\u4e2d\u662f\u5982\u4f55\u5de5\u4f5c\u7684\u3002\u9996\u5148\uff0c\u6211\u4eec\u770b\u5230\uff0c\u50cfOAuth 2.0 \u767b\u5f55\u4e00\u6837\uff0cSpring Security \u5c06\u7528\u6237\u5e26\u5230\u7b2c\u4e09\u65b9\u8fdb\u884c\u8ba4\u8bc1\u3002\u5b83\u901a\u8fc7\u4e00\u7cfb\u5217\u7684\u91cd\u5b9a\u5411\u6765\u505a\u5230\u8fd9\u4e00\u70b9\u3002"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"saml2 web sso authentication request filter",src:s(5).A+"",width:"1298",height:"850"})}),"\n",(0,t.jsxs)(n.p,{children:["\u4ee5\u4e0a\u662f\u6839\u636eSpring\u5b98\u65b9\u6587\u6863\u6765\u63cf\u8ff0\uff0c\u8bf7\u53c2\u8003\uff1a",(0,t.jsx)(n.a,{href:"https://docs.spring.io/spring-security/reference/servlet/saml2/login/overview.html",children:"SAML 2.0 Login Overview"})]}),"\n",(0,t.jsx)(n.h2,{id:"\u4e8cidp\u914d\u7f6e-adfs-server",children:"\u4e8c\u3001IDP\u914d\u7f6e (ADFS Server)"}),"\n",(0,t.jsxs)(n.p,{children:["\u53ef\u4ee5\u53c2\u8003 ",(0,t.jsx)(n.a,{href:"https://docs.keeper.io/sso-connect-cloud/identity-provider-setup/ad-fs-keeper",children:"Microsoft AD FS"})]}),"\n",(0,t.jsx)(n.h3,{id:"1-\u83b7\u53d6\u8054\u5408\u5143\u6570\u636e-xml",children:"1. \u83b7\u53d6\u8054\u5408\u5143\u6570\u636e XML"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728 AD FS \u7ba1\u7406\u5e94\u7528\u7a0b\u5e8f\u5185\uff0c\u627e\u5230\u8054\u5408\u5143\u6570\u636e xml \u6587\u4ef6\u3002\u5355\u51fb ",(0,t.jsx)(n.code,{children:"AD FS"})," > ",(0,t.jsx)(n.code,{children:"\u670d\u52a1"})," > ",(0,t.jsx)(n.code,{children:"\u7aef\u70b9"}),"\uff0c\u7136\u540e\u5728 ",(0,t.jsx)(n.code,{children:"\u5143\u6570\u636e"})," \u90e8\u5206\u4e2d\u627e\u5230 URL \u8def\u5f84\u5373\u53ef\u627e\u5230\u6b64\u4fe1\u606f\u3002\u8be5\u8def\u5f84\u901a\u5e38\u4e3a",(0,t.jsx)(n.code,{children:"/FederationMetadata/2007-06/FederationMetadata.xml"})," \uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Locate the Federation Metadata XML File",src:s(34023).A+"",width:"1518",height:"941"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Metadata Path",src:s(87188).A+"",width:"3106",height:"340"})}),"\n",(0,t.jsx)(n.h3,{id:"2-\u4e0b\u8f7d\u5143\u6570\u636e",children:"2. \u4e0b\u8f7d\u5143\u6570\u636e"}),"\n",(0,t.jsxs)(n.p,{children:["\u8981\u4e0b\u8f7d\u5143\u6570\u636e\u6587\u4ef6\uff0c\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u5728\u670d\u52a1\u5668\u4e0a\u7684\u6d4f\u89c8\u5668\u4e2d\u52a0\u8f7d URL \u6765\u627e\u5230\u8be5\u6587\u4ef6\u3002\u4f8b\u5982\uff1a ",(0,t.jsx)(n.code,{children:"https://idp.example.com/FederationMetadata/2007-06/FederationMetadata.xml"})," \u4e0b\u8f7d\u6b64\u6587\u4ef6\u5e76\u4fdd\u5b58\u5230\u8ba1\u7b97\u673a\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u4e2a\u6b65\u9aa4\u662f\u53ef\u9009\u7684\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5copy\u8fd9\u4e2aurl\uff0c\u5728\u540e\u7eedSpring Boot \u914d\u7f6e\u4e2d\u76f4\u63a5\u5bfc\u5165"}),"\n",(0,t.jsx)(n.h3,{id:"3-\u521b\u5efa\u4fe1\u8d56\u4fe1\u4efb\u65b9",children:"3. \u521b\u5efa\u4fe1\u8d56\u4fe1\u4efb\u65b9"}),"\n",(0,t.jsx)(n.p,{children:"\u521b\u5efa\u4f60\u7684\u670d\u52a1\u4f5c\u4e3a\u4f9d\u8d56\u4fe1\u4efb\u65b9\uff08\u4ee5Spring \u914d\u7f6e\u4e3a\u4f8b\uff09"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Add Relying Party Trust",src:s(96677).A+"",width:"1345",height:"572"})}),"\n",(0,t.jsx)(n.p,{children:"\u5bfc\u5165\u4f60\u7684\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5143\u6570\u636e\n\u901a\u8fc7\u5b8c\u6210\u4fe1\u8d56\u65b9\u4fe1\u4efb\u5411\u5bfc\uff0c\u5bfc\u5165\u4e4b\u524d\u4eceSpring\u5bfc\u51fa\u7684 SP Metadata \u5143\u6570\u636e(\u89c1 3.4 \u83b7\u53d6 SP \u5143\u6570\u636e)\uff0c\u5982\u4ee5\u4e0b\u6b65\u9aa4\u6240\u793a\uff1a"}),"\n",(0,t.jsxs)(n.p,{children:["Welcom\u6b65\u9aa4\u9009\u62e9 ",(0,t.jsx)(n.code,{children:"Claims aware"})]}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u516c\u7f51\u53ef\u4ee5\u7528\u7684\u8bdd\u9009\u7528\u7b2c\u4e00\u9879\uff0c\u66f4\u65b0\u5f88\u65b9\u4fbf\uff0c\u5426\u5219\u9009\u7528\u7b2c\u4e8c\u9879\u81ea\u884c\u5bfc\u5165\uff0c\u56e0\u4e3a\u8981\u6c42\u5fc5\u987b\u662fhttps\u94fe\u63a5\uff0c\u6216\u8005\u8bbe\u7f6e\u5c40\u57df\u7f51https"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Import Keeper Metadata",src:s(4190).A+"",width:"1576",height:"910"})}),"\n",(0,t.jsx)(n.p,{children:"\u8f93\u5165\u663e\u793a\u540d\u79f0"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Enter a Display Name: Keeper SSO Connect Cloud",src:s(71803).A+"",width:"705",height:"439"})}),"\n",(0,t.jsx)(n.p,{children:"\u9009\u62e9\u8bbf\u95ee\u63a7\u5236\u7b56\u7565"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Choose an access control policy",src:s(70547).A+"",width:"854",height:"488"})}),"\n",(0,t.jsx)(n.p,{children:"\u914d\u7f6eLogout\u7aef\u70b9"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"SAML Logout Endpoints",src:s(26537).A+"",width:"1030",height:"479"})}),"\n",(0,t.jsx)(n.p,{children:"\u5230\u8fd9\u4e00\u6b65\u70b9\u5b8c\u6210\u5c31\u53ef\u4ee5\u4e86"}),"\n",(0,t.jsxs)(n.p,{children:["\u4f46\u662f\u8fd8\u7f3a\u4e00\u6b65\uff0cADFS\u9700\u8981\u4f60\u914d\u7f6e\u53d1\u653e\u7684\u5b57\u6bb5\uff0c\u81f3\u5c11\u9700\u8981\u914d\u7f6e\u4e00\u4e2a",(0,t.jsx)(n.code,{children:"NameID"}),"\u5c5e\u6027\uff0c\u5426\u5219\u4f60\u4f1a\u53d1\u73b0\u767b\u5f55\u5b8c\u62a5\u9519\uff0c\u53ef\u81ea\u884c\u5c1d\u8bd5\u3002\u63a5\u4e0b\u6765\u662f\u914d\u7f6e\u5c5e\u6027"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u6ce8\u610f\uff1a"})," Metadata\u4e5f\u53ef\u4ee5\u624b\u52a8\u914d\u7f6e\uff0c\u4e0d\u901a\u8fc7\u5bfc\u5165 ",(0,t.jsx)(n.code,{children:"Metadata.xml"}),"\uff0c\u914d\u7f6e\u4e0b\u9762\u4e24\u4e2a\u5c5e\u6027\u5373\u53ef"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u7ec8\u7ed3\u70b9\uff08",(0,t.jsx)(n.code,{children:"Assertion Consumer Endpoints"}),"\uff09: ",(0,t.jsx)(n.code,{children:"https://sp.example.com:8080/oauth/saml/SSO/adfs"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u4fe1\u8d56\u65b9\u6807\u8bc6\u7b26 (",(0,t.jsx)(n.code,{children:"Identifier"}),"): ",(0,t.jsx)(n.code,{children:"https://sp.example.com:8080/oauth"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"4-\u521b\u5efa-claims-\u7b7e\u53d1\u7b56\u7565\u89c4\u5219",children:"4. \u521b\u5efa Claims \u7b7e\u53d1\u7b56\u7565\u89c4\u5219"}),"\n",(0,t.jsx)(n.p,{children:"\u8981\u5728 AD FS \u548c App \u4e4b\u95f4\u6620\u5c04\u5c5e\u6027\uff0c\u60a8\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u58f0\u660e\u53d1\u5e03\u7b56\u7565\uff0c\u5176\u4e2d\u5c06 LDAP \u5c5e\u6027\u4f5c\u4e3a\u58f0\u660e\u53d1\u9001\uff0c\u5e76\u5c06 LDAP \u5c5e\u6027\u6620\u5c04\u5230 SpringApp \u5c5e\u6027\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u7f16\u8f91 Claims \u7b7e\u53d1\u7b56\u7565"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Edit Claim Issuance Policy",src:s(56814).A+"",width:"685",height:"227"})}),"\n",(0,t.jsx)(n.p,{children:"\u6dfb\u52a0\u89c4\u5219"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Add Rule...",src:s(378).A+"",width:"273",height:"137"})}),"\n",(0,t.jsx)(n.p,{children:"\u9009\u62e9\u89c4\u5219\u7c7b\u578b"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Choose Rule Type",src:s(21477).A+"",width:"996",height:"450"})}),"\n",(0,t.jsx)(n.p,{children:"\u914d\u7f6eClaims\u5c5e\u6027\u53ca\u540d\u79f0"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Claim Rule Name - Mapping",src:s(52723).A+"",width:"761",height:"456"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981\u63d0\u793a\uff1a"})," \u786e\u4fdd \u81f3\u5c11\u6709\u4e2a\u5c5e\u6027\uff08",(0,t.jsx)(n.code,{children:"NameID"}),"\uff09\u914d\u7f6e\u4e3a\u4f7f\u7528\u5982\u4e0a\u6240\u793a\u7684\u51c6\u786e\u62fc\u5199\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u5230\u6b64ADFS\u914d\u7f6e\u5b8c\u6210"}),"\n",(0,t.jsx)(n.h2,{id:"\u4e09sp\u914d\u7f6e-spring-boot-application",children:"\u4e09\u3001SP\u914d\u7f6e (Spring Boot Application)"}),"\n",(0,t.jsx)(n.h3,{id:"1-\u5bfc\u5165\u4f9d\u8d56",children:"1. \u5bfc\u5165\u4f9d\u8d56"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.security</groupId>\n    <artifactId>spring-security-saml2-service-provider</artifactId>\n</dependency>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-\u6307\u5b9a\u8eab\u4efd\u63d0\u4f9b\u8005identity-provider\u5143\u6570\u636e",children:"2. \u6307\u5b9a\u8eab\u4efd\u63d0\u4f9b\u8005\uff08Identity Provider\uff09\u5143\u6570\u636e"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'spring:\n  security:\n    saml2:\n      relyingparty:\n        registration:\n          metadata:\n            entity-id: "{baseUrl}"\n            singlelogout:\n              binding: POST\n              url: "{baseUrl}/saml/logout"\n              responseUrl: "{baseUrl}/saml/SingleLogout"\n            acs:\n              location: "{baseUrl}/saml/sso/{registrationId}"\n            assertingparty:\n              metadata-uri: https://idp.example.com/FederationMetadata/2007-06/FederationMetadata.xml\n            identityprovider:\n              singlesignon:\n                sign-request: false\n              entity-id: "{baseUrl}"\n              sso-url: https://idp.example.com/adfs/ls/\n              metadata-uri: https://idp.example.com/FederationMetadata/2007-06/FederationMetadata.xml\n\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u5176\u4e2d\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"entity-id"})," \u662f\u8eab\u4efd\u63d0\u4f9b\u8005\u53d1\u51fa\u7684SAML\u54cd\u5e94\u4e2d\u7684 Issuer \u5c5e\u6027\u6240\u5305\u542b\u7684\u503c,\u5728adfs\u5c31\u662f\u4f60\u7684\u552f\u4e00id\uff0c\u76f8\u5f53\u4e8e\u4f9d\u8d56\u65b9\u7684 ",(0,t.jsx)(n.code,{children:'<EntityDescriptor EntityID="..."/>'})," \u4e2d\u627e\u5230\u7684\u503c\u3002\u8be5\u503c\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u5360\u4f4d\u7b26\u3002\u5b83\u4eec\u662fbaseUrl \u3001 registrationId \u3001 baseScheme \u3001 baseHost\u548cbasePort"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"singlelogout.url"})," \u662fSingleLogoutService \u4f4d\u7f6e\u76f8\u5f53\u4e8e\u4f9d\u8d56\u65b9\u7684 ",(0,t.jsx)(n.code,{children:"<SPSSODescriptor>"})," \u4e2d\u7684 ",(0,t.jsx)(n.code,{children:'<SingleLogoutService Location="..."/>'})," \u4e2d\u627e\u5230\u7684\u503c\u3002\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"acs.location"})," \u662fAssertionConsumerService \u4f4d\u7f6e\u3002\u76f8\u5f53\u4e8e\u4f9d\u8d56\u65b9\u7684 ",(0,t.jsx)(n.code,{children:"<SPSSODescriptor>"})," \u4e2d\u7684 ",(0,t.jsx)(n.code,{children:'<AssertionConsumerService Location="..."/>'})," \u4e2d\u627e\u5230\u7684\u503c\u8be5\u503c\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u5360\u4f4d\u7b26\u3002\u5b83\u4eec\u662fbaseUrl \u3001 registrationId \u3001 baseScheme \u3001 baseHost\u548cbasePort \u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"assertingparty.metadata-uri"})," \u662f\u65ad\u8a00\u65b9\u5143\u6570\u636e\u6587\u4ef6\u7684\u57fa\u4e8e\u7c7b\u8def\u5f84\u6216\u6587\u4ef6\u7684\u4f4d\u7f6e\u6216 HTTP \u7aef\u70b9"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3-\u914d\u7f6e\u7c7b",children:"3. \u914d\u7f6e\u7c7b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'import org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.autoconfigure.security.saml2.Saml2RelyingPartyProperties;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.convert.converter.Converter;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.saml2.core.Saml2X509Credential;\nimport org.springframework.security.saml2.provider.service.metadata.OpenSamlMetadataResolver;\nimport org.springframework.security.saml2.provider.service.registration.InMemoryRelyingPartyRegistrationRepository;\nimport org.springframework.security.saml2.provider.service.registration.RelyingPartyRegistration;\nimport org.springframework.security.saml2.provider.service.registration.RelyingPartyRegistrationRepository;\nimport org.springframework.security.saml2.provider.service.registration.RelyingPartyRegistrations;\nimport org.springframework.security.saml2.provider.service.servlet.filter.Saml2WebSsoAuthenticationFilter;\nimport org.springframework.security.saml2.provider.service.web.DefaultRelyingPartyRegistrationResolver;\nimport org.springframework.security.saml2.provider.service.web.Saml2MetadataFilter;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\n\nimport javax.servlet.http.HttpServletRequest;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.security.cert.CertificateException;\nimport java.security.cert.CertificateFactory;\nimport java.security.cert.X509Certificate;\nimport java.security.interfaces.RSAPrivateKey;\nimport java.util.UUID;\nimport java.util.stream.Collectors;\n\n@Configuration\npublic class SecurityConfig  {\n\n\n    @Bean\n    SecurityFilterChain securityFilterChain(HttpSecurity http, RelyingPartyRegistrationRepository registrations) throws Exception {\n        DefaultRelyingPartyRegistrationResolver relyingPartyRegistrationResolver =\n                new DefaultRelyingPartyRegistrationResolver(registrations);\n        Saml2MetadataFilter metadataFilter = new Saml2MetadataFilter(\n                (Converter<HttpServletRequest, RelyingPartyRegistration>) relyingPartyRegistrationResolver,\n                new OpenSamlMetadataResolver());\n        metadataFilter.setRequestMatcher(new AntPathRequestMatcher("/saml/metadata/{registrationId}", "GET"));\n\n        // @formatter:off\n        http.authorizeRequests()\n                .antMatchers("/app", "/error").permitAll()\n                .antMatchers("/saml/**", "/saml2/**").permitAll()\n                .anyRequest().authenticated()\n                .and()\n                .saml2Login((saml2) -> saml2.loginProcessingUrl("/saml/sso/{registrationId}"))\n                .addFilterBefore(metadataFilter, Saml2WebSsoAuthenticationFilter.class)\n//                .saml2Logout((saml2) -> saml2.logoutRequest((request) -> request.logoutUrl("/oauth/saml/logout")))\n//                .saml2Logout((saml2) -> saml2.logoutResponse((response) -> response.logoutUrl("/oauth/saml/SingleLogout")))\n                .csrf().disable()\n                .cors().disable();\n\n        return http.build();\n    }\n\n    @Bean\n    InMemoryRelyingPartyRegistrationRepository repository(Saml2RelyingPartyProperties properties) {\n//        Saml2X509Credential signing = Saml2X509Credential.signing(key, x509Certificate(cert));\n        Saml2RelyingPartyProperties.Registration registration = properties.getRegistration().values().iterator().next();\n        return new InMemoryRelyingPartyRegistrationRepository(RelyingPartyRegistrations\n                .collectionFromMetadataLocation(registration.getAssertingparty().getMetadataUri()).stream()\n                .map((builder) -> builder.registrationId(UUID.randomUUID().toString())\n                        .entityId(registration.getEntityId())\n                        .registrationId("adfs")\n                        .assertionConsumerServiceLocation(registration.getAcs().getLocation())\n                        .singleLogoutServiceLocation(registration.getSinglelogout().getUrl())\n                        .singleLogoutServiceResponseLocation(registration.getSinglelogout().getResponseUrl())\n//                        .signingX509Credentials((credentials) -> credentials.add(signing))\n                        .build())\n                .collect(Collectors.toList()));\n    }\n\n    X509Certificate x509Certificate(File location) {\n        try (InputStream source = new FileInputStream(location)) {\n            return (X509Certificate) CertificateFactory.getInstance("X.509").generateCertificate(source);\n        }\n        catch (CertificateException | IOException ex) {\n            throw new IllegalArgumentException(ex);\n        }\n    }\n\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"4-\u83b7\u53d6-sp-\u5143\u6570\u636e",children:"4. \u83b7\u53d6 SP \u5143\u6570\u636e"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u83b7\u53d6SP Metadata: ",(0,t.jsx)(n.code,{children:"https://sp.example.com:8080/oauth/saml/metadata/adfs"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u6b64\u529f\u80fd\u9700\u8981\u6dfb\u52a0 ",(0,t.jsx)(n.code,{children:"Saml2MetadataFilter"}),"\uff0c\u9ed8\u8ba4URL\u4e3a ",(0,t.jsx)(n.code,{children:"/saml2/service-provider-metadata/{registrationId}"}),"\uff0c\u6587\u4ef6\u540d\u9ed8\u8ba4\u4e3a ",(0,t.jsx)(n.code,{children:"saml-{registrationId}-metadata.xml"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="UTF-8"?>\n<EntityDescriptor entityID="https://sp.example.com:8080/oauth" xmlns="urn:oasis:names:tc:SAML:2.0:metadata">\n    <md:SPSSODescriptor WantAssertionsSigned="true"\n        protocolSupportEnumeration="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:md="urn:oasis:names:tc:SAML:2.0:metadata">\n        <md:AssertionConsumerService\n            Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"\n            Location="https://sp.example.com:8080/oauth/saml/sso/adfs" index="1"/>\n    </md:SPSSODescriptor>\n</EntityDescriptor>\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u5c31\u8fd9\u6837\uff01\u5df2\u7ecf\u5b8c\u6210\u4e86\u6700\u5c0f\u914d\u7f6e\uff01"}),"\n",(0,t.jsxs)(n.p,{children:["\u7a0b\u5e8f\u542f\u52a8\u4e4b\u540e \u8bbf\u95ee ",(0,t.jsx)(n.code,{children:"http://sp.example.com:8080"})," \u5e94\u8be5\u5c31\u53ef\u4ee5\u767b\u5f55\u4e86\uff0c\u767b\u5f55\u754c\u9762\u5982\u4e0b"]}),"\n",(0,t.jsx)(n.h2,{id:"\u56db\u793a\u4f8b",children:"\u56db\u3001\u793a\u4f8b"}),"\n",(0,t.jsx)(n.h3,{id:"1-\u8bf7\u6c42\u6d41\u7a0b",children:"1. \u8bf7\u6c42\u6d41\u7a0b"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\u8bbf\u95ee ",(0,t.jsx)(n.code,{children:"https://plmmidqas2.sfdomain.com:9100/test/#/home"})," \u9875\u9762"]}),"\n",(0,t.jsxs)(n.li,{children:["\u53d1\u9001\u8bf7\u6c42 ",(0,t.jsx)(n.code,{children:"https://plmmidqas2.sfdomain.com:31888/oauth/samlLogin"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u6ca1\u6709\u8ba4\u8bc1\uff0c\u91cd\u5b9a\u5411\u5230 ",(0,t.jsx)(n.code,{children:"https://plmmidqas2.sfdomain.com:31888/oauth/saml2/authenticate/adfs"})]}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u89c1 ",(0,t.jsx)(n.code,{children:"Saml2WebSsoAuthenticationRequestFilter"}),"\uff0c\u9ed8\u8ba4URL\u4e3a ",(0,t.jsx)(n.code,{children:"/saml2/authenticate/{registrationId}"})]}),"\n"]}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsxs)(n.li,{children:["\u7ec4\u88c5SAML\u8ba4\u8bc1\u8bf7\u6c42\uff0c\u91cd\u5b9a\u5411\u5230 ",(0,t.jsx)(n.code,{children:"https://adfs.sf-auto.com/adfs/ls/"})]}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"AD FS Server"}),"\n"]}),"\n",(0,t.jsxs)(n.ol,{start:"5",children:["\n",(0,t.jsxs)(n.li,{children:["\u8f93\u5165\u7528\u6237\u540d\u5bc6\u7801\uff0c\u518d\u6b21\u8bf7\u6c42 ",(0,t.jsx)(n.code,{children:"https://adfs.sf-auto.com/adfs/ls/"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u643a\u5e26\u8ba4\u8bc1\u7ed3\u679c\uff0c\u91cd\u5b9a\u5411 ",(0,t.jsx)(n.code,{children:"https://plmmidqas2.sfdomain.com:31888/oauth/saml/SSO/adfs"})]}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u89c1 ",(0,t.jsx)(n.code,{children:"Saml2WebSsoAuthenticationFilter"}),"\uff0c\u9ed8\u8ba4URL\u4e3a ",(0,t.jsx)(n.code,{children:"/login/saml2/sso/{registrationId}"})]}),"\n"]}),"\n",(0,t.jsxs)(n.ol,{start:"7",children:["\n",(0,t.jsxs)(n.li,{children:["\u6839\u636e\u7ed3\u679c\u8fdb\u884c\u8ba4\u8bc1\uff0c\u8ba4\u8bc1\u6210\u529f\u540e\u56de\u8c03\u5f00\u59cb\u7684\u8bf7\u6c42\u5730\u5740 ",(0,t.jsx)(n.code,{children:"https://plmmidqas2.sfdomain.com:31888/oauth/samlLogin"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u8ba4\u8bc1\u5b8c\u6210\u540e\u91cd\u5b9a\u5411\u5230\u539f\u59cb\u7684\u8bf7\u6c42\u5730\u5740 ",(0,t.jsx)(n.code,{children:"https://plmmidqas2.sfdomain.com:9100/test"})," \u5e76\u643a\u5e26token"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-\u8bf7\u6c42\u53c2\u6570\u89e3\u6790-samlrequest",children:"2. \u8bf7\u6c42\u53c2\u6570\u89e3\u6790 SAMLRequest"}),"\n",(0,t.jsx)(n.p,{children:"\u4e0a\u9762\u7b2c\u56db\u6b65\u643a\u5e26\u7684\u8bf7\u6c42\u53c2\u6570\u793a\u4f8b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"SAMLRequest: lZFNb4JAEIbv/RVk78t+iAobwdCapiY2WsEeelthqSSwi8xi+vOLoom9mPS4szPPTJ53Nv+pK+ekWiiNDhFzKXKUzkxe6u8Q7dJX7KN59DQDWVe8EXFnD3qrjp0C68QAqrX93IvR0NWqTVR7KjO1265CdLC2AUFIU9V1mR8lcBeK3NSy1G5majFivu8TI3sgOcNJkqyJzAtAzqKHl1ray0U3zvmrJ+B+wJwBlwKpgCBnuQhRvP2YsiAoWI6pzMfY8zKK95T5eFLIkSd5kI0473sBOrXUYKW2IeKUe5gyTKcp9QULxJi5bBJ8IWfTGmsyUz2XelDRtVoYCSUILWsFwmYiid9XgrtU7IcmEG9pusGbdZIi5/OmlJ+V9pI1iEHiY1ZzXYyiwbm4XNzeEx4D5C0VFP0jgxm53xZdn38Dj34B\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u8fd9\u4e2a\u53c2\u6570\u9700\u8981",(0,t.jsx)(n.a,{href:"https://www.samltool.com/decode.php",children:"Base64 Decode + Inflate\u89e3\u6790"}),"\u4e3aXML\u5e76",(0,t.jsx)(n.a,{href:"https://c.runoob.com/front-end/710/",children:"\u683c\u5f0f\u5316"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="UTF-8"?>\n<saml2p:AuthnRequest AssertionConsumerServiceURL="https://plmmidqas2.sfdomain.com:31888/oauth/saml/SSO/adfs" \n\t\t\t\t\t Destination="https://adfs.sf-auto.com/adfs/ls/" \n\t\t\t\t\t ID="ARQ7199f1d-0ad5-44c0-b018-6fa34a29c322" \n\t\t\t\t\t IssueInstant="2024-01-07T08:19:51.169Z" \n\t\t\t\t\t ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" \n\t\t\t\t\t Version="2.0"\n\t\t\t\t\t xmlns:saml2p="urn:oasis:names:tc:SAML:2.0:protocol">\n  <saml2:Issuer\n    xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion">https://plmmidqas2.sfdomain.com:31888/oauth\n  \n  </saml2:Issuer>\n</saml2p:AuthnRequest>\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u5bf9\u8bf7\u6c42\u53c2\u6570\u8fdb\u884c\u7b80\u5355\u7684",(0,t.jsx)(n.a,{href:"https://www.samltool.com/validate_authn_req.php",children:"\u6821\u9a8c"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"SAML AuthN Request"}),": \u8bf7\u6c42\u7684XML"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"SP EntityId"}),": ",(0,t.jsx)(n.code,{children:"https://plmmidqas2.sfdomain.com:31888/oauth"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Target URL, Destination of the AuthN Request"}),": ",(0,t.jsx)(n.code,{children:"https://adfs.sf-auto.com/adfs/ls/"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3-\u54cd\u5e94\u503c\u89e3\u6790-samlresponse",children:"3. \u54cd\u5e94\u503c\u89e3\u6790 SAMLResponse"}),"\n",(0,t.jsx)(n.p,{children:"\u4e0a\u9762\u7b2c\u516d\u6b65\u643a\u5e26\u7684\u8ba4\u8bc1\u7ed3\u679c\u793a\u4f8b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"SAMLResponse: PHNhbWxwOlJlc3BvbnNlIElEPSJfNjM2MmZjOGMtYWFkOS00M2EwLTljM2QtNTcyZTUwY2FiOWU2IiBWZXJzaW9uPSIyLjAiIElzc3VlSW5zdGFudD0iMjAyNC0wMS0wN1QwODoyMDo0NC4wMjVaIiBEZXN0aW5hdGlvbj0iaHR0cHM6Ly9wbG1taWRxYXMyLnNmZG9tYWluLmNvbTozMTg4OC9vYXV0aC9zYW1sL1NTTy9hZGZzIiBDb25zZW50PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6Y29uc2VudDp1bnNwZWNpZmllZCIgSW5SZXNwb25zZVRvPSJBUlE3MTk5ZjFkLTBhZDUtNDRjMC1iMDE4LTZmYTM0YTI5YzMyMiIgeG1sbnM6c2FtbHA9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpwcm90b2NvbCI+PElzc3VlciB4bWxucz0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmFzc2VydGlvbiI+aHR0cDovL2FkZnMuc2YtYXV0by5jb20vYWRmcy9zZXJ2aWNlcy90cnVzdDwvSXNzdWVyPjxzYW1scDpTdGF0dXM+PHNhbWxwOlN0YXR1c0NvZGUgVmFsdWU9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpzdGF0dXM6U3VjY2VzcyIgLz48L3NhbWxwOlN0YXR1cz48QXNzZXJ0aW9uIElEPSJfN2U4ODA4NWYtZWYyZS00MTBhLWEwMGQtODRkZjhkYzQ1MThjIiBJc3N1ZUluc3RhbnQ9IjIwMjQtMDEtMDdUMDg6MjA6NDQuMDI1WiIgVmVyc2lvbj0iMi4wIiB4bWxucz0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmFzc2VydGlvbiI+PElzc3Vlcj5odHRwOi8vYWRmcy5zZi1hdXRvLmNvbS9hZGZzL3NlcnZpY2VzL3RydXN0PC9Jc3N1ZXI+PGRzOlNpZ25hdHVyZSB4bWxuczpkcz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnIyI+PGRzOlNpZ25lZEluZm8+PGRzOkNhbm9uaWNhbGl6YXRpb25NZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzEwL3htbC1leGMtYzE0biMiIC8+PGRzOlNpZ25hdHVyZU1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMDQveG1sZHNpZy1tb3JlI3JzYS1zaGEyNTYiIC8+PGRzOlJlZmVyZW5jZSBVUkk9IiNfN2U4ODA4NWYtZWYyZS00MTBhLWEwMGQtODRkZjhkYzQ1MThjIj48ZHM6VHJhbnNmb3Jtcz48ZHM6VHJhbnNmb3JtIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI2VudmVsb3BlZC1zaWduYXR1cmUiIC8+PGRzOlRyYW5zZm9ybSBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMTAveG1sLWV4Yy1jMTRuIyIgLz48L2RzOlRyYW5zZm9ybXM+PGRzOkRpZ2VzdE1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMDQveG1sZW5jI3NoYTI1NiIgLz48ZHM6RGlnZXN0VmFsdWU+MzFrSUdOdkxzQTk3YWdCUTRXSmlMWWsyVUtDM212UEl0cGVySEtaVzd3dz08L2RzOkRpZ2VzdFZhbHVlPjwvZHM6UmVmZXJlbmNlPjwvZHM6U2lnbmVkSW5mbz48ZHM6U2lnbmF0dXJlVmFsdWU+Y3VKQWhPZWN0eENBT0Y4ZWRaVHp4T0tTOWpSeEhVNE1jUU9QNXFkZXk3WjdTQnZOOEdzeUs5ekVFNFVXYUJaYytnVm5sVFNPMXlyNmhhaWNkYktnN2FOeUpLWmFZV1NsaXBxc2RoUnNIOFJKZFBrOHI3aUJwNER5aVhQTVZUcFJGVHI5cDZJQmhCOUV3elUyNnFlN0RkZm9pSlcraVgxekNmNDZwci9DdXJueExSeERlT0tuYURoTHk4VjBVZWRqSk1YR1ZBQlRHOWsxajVYd1gwREgxQ0lUK0wzQ0x2d0cwNUVzUmJTWkdhclcwaWMrYWdWS1lDbDVEYlRNNWsvNnFzam9GWFhhMkFFUzNiQUp5bWNuOTd5UWd1ZjZpM3hxd3RCbE92ek9sTC9UTXpMTW55cnhXYXN4ZE83QnVFSEVhOFpxTVRyRVV0ek1PbzQzdThoRzRnPT08L2RzOlNpZ25hdHVyZVZhbHVlPjxLZXlJbmZvIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjIj48ZHM6WDUwOURhdGE+PGRzOlg1MDlDZXJ0aWZpY2F0ZT5NSUlIbHpDQ0JYK2dBd0lCQWdJUUNUQytvb1hYSVRBMmJhTk5FTXhhbmpBTkJna3Foa2lHOXcwQkFRc0ZBREJjTVFzd0NRWURWUVFHRXdKVlV6RVhNQlVHQTFVRUNoTU9SR2xuYVVObGNuUXNJRWx1WXk0eE5EQXlCZ05WQkFNVEsxSmhjR2xrVTFOTUlFZHNiMkpoYkNCVVRGTWdVbE5CTkRBNU5pQlRTRUV5TlRZZ01qQXlNaUJEUVRFd0hoY05Nak13T1RFNU1EQXdNREF3V2hjTk1qUXhNREV5TWpNMU9UVTVXakFZTVJZd0ZBWURWUVFEREEwcUxuTm1MV0YxZEc4dVkyOXRNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXVZQTZKM0RLVk81dCt3VkRmUGpJWnF1SmtiTTJkaE00UHpxNGtBME5XK2V3NkNrZDJnUmpuYXRTVTVtMlFnRWh1dzJjL3l2U25FbDdKMG5tTlBBQm9EZ3N6azRiaGtSRElyNVdZVUFQbTBXRnB2V2NIWHM0NEJwUXJxdUlOcUdHWFhUS3laV2FDYWhUN3hFYkJaRmx5Z3l2dU91NkZzK201Q01SdTRKbVNTZWo0MSs4YUJwa3d2QW9Ueld4NjZYLzcxS3U5UXdJU0pwajV3QmEvN3VmV3pqVDN6dlFTUnNPU1ptWkRRTTdSejEzSUlkL0RLTkZmcjZoRjJ4TzJBTXVaL2kraXdFSDI2bmdRRGtxazgydGtZYUVwa2N0MDlSUTBuTWlhRnJyb1QvM3hsM2RlbU00eHJRRmE1blhqM3RHTHNnLzBVZEpDOGlJcVlPMUdzcXNvd0lEQVFBQm80SURsekNDQTVNd0h3WURWUjBqQkJnd0ZvQVU4SnlGL2FLZmZZL0phTHZWMUlsTkhiN1RrUDh3SFFZRFZSME9CQllFRkJCdjZyeUV0RmxOWW9IUGZpL3A0ZDltcHNlK01DVUdBMVVkRVFRZU1CeUNEU291YzJZdFlYVjBieTVqYjIyQ0MzTm1MV0YxZEc4dVkyOXRNRDRHQTFVZElBUTNNRFV3TXdZR1o0RU1BUUlCTUNrd0p3WUlLd1lCQlFVSEFnRVdHMmgwZEhBNkx5OTNkM2N1WkdsbmFXTmxjblF1WTI5dEwwTlFVekFPQmdOVkhROEJBZjhFQkFNQ0JhQXdIUVlEVlIwbEJCWXdGQVlJS3dZQkJRVUhBd0VHQ0NzR0FRVUZCd01DTUlHZkJnTlZIUjhFZ1pjd2daUXdTS0JHb0VTR1FtaDBkSEE2THk5amNtd3pMbVJwWjJsalpYSjBMbU52YlM5U1lYQnBaRk5UVEVkc2IySmhiRlJNVTFKVFFUUXdPVFpUU0VFeU5UWXlNREl5UTBFeExtTnliREJJb0VhZ1JJWkNhSFIwY0RvdkwyTnliRFF1WkdsbmFXTmxjblF1WTI5dEwxSmhjR2xrVTFOTVIyeHZZbUZzVkV4VFVsTkJOREE1TmxOSVFUSTFOakl3TWpKRFFURXVZM0pzTUlHSEJnZ3JCZ0VGQlFjQkFRUjdNSGt3SkFZSUt3WUJCUVVITUFHR0dHaDBkSEE2THk5dlkzTndMbVJwWjJsalpYSjBMbU52YlRCUkJnZ3JCZ0VGQlFjd0FvWkZhSFIwY0RvdkwyTmhZMlZ5ZEhNdVpHbG5hV05sY25RdVkyOXRMMUpoY0dsa1UxTk1SMnh2WW1Gc1ZFeFRVbE5CTkRBNU5sTklRVEkxTmpJd01qSkRRVEV1WTNKME1Bd0dBMVVkRXdFQi93UUNNQUF3Z2dGL0Jnb3JCZ0VFQWRaNUFnUUNCSUlCYndTQ0FXc0JhUUIyQU83TjBHVFYyeHJPeFZ5M25iVE5FNkl5aDBaOHZPemV3MUZJV1VaeEg3V2JBQUFCaXF0cUExSUFBQVFEQUVjd1JRSWhBSkJRekwyMlp0dzR1VlBaVGcvR3hlMzlXRVZBM3dXY05OOGVFMXFBUzBPSEFpQWF5cVRFRDJVOVVmQVhHNUpvZjM3TzBUTUxISDNJanFOVG1lSnJrSThvcXdCMkFFaXc0MnZhcGtjMEQrVnFBdnFkTU9zY1VnSExWdDBzZ2RtN3Y2czUySVJ6QUFBQmlxdHFBM1VBQUFRREFFY3dSUUlnSkMreVNZMlY2NGVKN0J2a0tJdm54bWh6L1RCbVliY1UwbVNiTDhFcEJqa0NJUUN1cnNZRlpaY0I1OWRzQkJLaXgraHVVUHJHbUplNi9jcG5qSmFzY1ExOHFBQjNBTnEydjJzL3RiWWluNXZDdTF4cjZIQ1JjV3k3VVlTRk5MMmtQVEJJMS91ckFBQUJpcXRxQTZFQUFBUURBRWd3UmdJaEFKZXh4WjJxbnVqTkNDVmZ2ZTFaMThhdmZNVCtTVEhpdkxtVFFyV1dzZ3AyQWlFQXNldDR4d1NRQVRnM2hhT1dhN1dLTXVoSjAwaFBwelUrUFI1cTNoQUszZ2d3RFFZSktvWklodmNOQVFFTEJRQURnZ0lCQUk5NVJ2UDFBSUlSMyt0bU5QZ1QzRE9wbisxdUI0VFA3NCt3Z3QrWjB4dGJQbldVNUpxdjYxLzR0alpmZ2o1QjE1djVZbENhb3ZGS1FCMkxPRllhT3dBYy8xMGRGVTBqVnpDUTFlajU3cCtRL2habEpMNDEwNkZtOG1tc012U1BFMjlKTHFZSnh1bjZuTFZIelQ0T3NMMHN6a3oyRWl2OEw1MXNVdkFPZWtrSUo2RENYc1FqNHNqZVNja2FWK2tCZkVKSEZCdnJRRkxvbExYQzYyLzg3Y1BNSlUvbFQxYW42bnFmcHVlZ1pweldrRXJuS3NGcUtsTzZvdGJwTWJ5YnBkMVk5SFpkYlhnSkl5cUJxbjUrSmp0cHlyT3podGFNUWc0OEhGb21JdFhBRUVndE1iYkRFZUx1eVdSSzQ0eG1iYmNUZStnRVJ0MnlrWjZ2czYybUxRRUorQVl5YlBZTDVGTTRhcTB5YmZXUjZaKzNGSTZFdml1SUYzV3Exc1lSUTB0MlJla1lzZEx3eEZHT0FZd0tIdllPcUFzRkx6RnhhM0dYTlVsek80TXU3SllTMWtiMnZqM0R2d3FMZDRzeFRzRkRqM0dMaVN2K2oraVVzZFQvcTJpa0cwUzJjc2ZQNmhrWnY5cG9PakkrbGM2Z2xWeFpVaFUwRUkyTVh0anV2M2pRU0VyMkNYLzhsUjFBMHZKNjNCRjZPTXBjSmNBRjBqTTF0WFNCQXR0K3N1VFp1anc1dkZ2cW1vSGpqVWJ4R2lHS0Mza2xYd1R4aXJyTjRsNkxPak81SUk0NTZLaWtwYkQ3YjJwUVJoOU9EK0xZWkRLRE5LNXA0LzVvRm5XOGdKdnFrNzVPcjRGT0M1Nzk1RTFCaUtTTnJoUmx1V0lkcy80RjJlRGtUTGJuPC9kczpYNTA5Q2VydGlmaWNhdGU+PC9kczpYNTA5RGF0YT48L0tleUluZm8+PC9kczpTaWduYXR1cmU+PFN1YmplY3Q+PE5hbWVJRD55YW5nZ3VhbmctdkBzZmRvbWFpbi5jb208L05hbWVJRD48U3ViamVjdENvbmZpcm1hdGlvbiBNZXRob2Q9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpjbTpiZWFyZXIiPjxTdWJqZWN0Q29uZmlybWF0aW9uRGF0YSBJblJlc3BvbnNlVG89IkFSUTcxOTlmMWQtMGFkNS00NGMwLWIwMTgtNmZhMzRhMjljMzIyIiBOb3RPbk9yQWZ0ZXI9IjIwMjQtMDEtMDdUMDg6MjU6NDQuMDI1WiIgUmVjaXBpZW50PSJodHRwczovL3BsbW1pZHFhczIuc2Zkb21haW4uY29tOjMxODg4L29hdXRoL3NhbWwvU1NPL2FkZnMiIC8+PC9TdWJqZWN0Q29uZmlybWF0aW9uPjwvU3ViamVjdD48Q29uZGl0aW9ucyBOb3RCZWZvcmU9IjIwMjQtMDEtMDdUMDg6MjA6NDQuMDIzWiIgTm90T25PckFmdGVyPSIyMDI0LTAxLTA3VDA5OjIwOjQ0LjAyM1oiPjxBdWRpZW5jZVJlc3RyaWN0aW9uPjxBdWRpZW5jZT5odHRwczovL3BsbW1pZHFhczIuc2Zkb21haW4uY29tOjMxODg4L29hdXRoPC9BdWRpZW5jZT48L0F1ZGllbmNlUmVzdHJpY3Rpb24+PC9Db25kaXRpb25zPjxBdHRyaWJ1dGVTdGF0ZW1lbnQ+PEF0dHJpYnV0ZSBOYW1lPSJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiPjxBdHRyaWJ1dGVWYWx1ZT55YW5nZ3VhbmctdkBzZi5sb2NhbDwvQXR0cmlidXRlVmFsdWU+PC9BdHRyaWJ1dGU+PEF0dHJpYnV0ZSBOYW1lPSJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIj48QXR0cmlidXRlVmFsdWU+5p2o5YWJ77yIUExNLS3lpJbpg6jpob7pl67vvIk8L0F0dHJpYnV0ZVZhbHVlPjwvQXR0cmlidXRlPjwvQXR0cmlidXRlU3RhdGVtZW50PjxBdXRoblN0YXRlbWVudCBBdXRobkluc3RhbnQ9IjIwMjQtMDEtMDdUMDg6MjA6NDQuMDAwWiIgU2Vzc2lvbkluZGV4PSJfN2U4ODA4NWYtZWYyZS00MTBhLWEwMGQtODRkZjhkYzQ1MThjIj48QXV0aG5Db250ZXh0PjxBdXRobkNvbnRleHRDbGFzc1JlZj51cm46ZmVkZXJhdGlvbjphdXRoZW50aWNhdGlvbjp3aW5kb3dzPC9BdXRobkNvbnRleHRDbGFzc1JlZj48L0F1dGhuQ29udGV4dD48L0F1dGhuU3RhdGVtZW50PjwvQXNzZXJ0aW9uPjwvc2FtbHA6UmVzcG9uc2U+\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u8fd9\u4e2a\u54cd\u5e94\u503c\u9700\u8981",(0,t.jsx)(n.a,{href:"https://www.samltool.com/decode.php",children:"Base64 Decode + Inflate\u89e3\u6790"}),"\u4e3aXML\u5e76",(0,t.jsx)(n.a,{href:"https://c.runoob.com/front-end/710/",children:"\u683c\u5f0f\u5316"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<samlp:Response ID="_6362fc8c-aad9-43a0-9c3d-572e50cab9e6" \n\t\t\t\tVersion="2.0" \n\t\t\t\tIssueInstant="2024-01-07T08:20:44.025Z" \n\t\t\t\tDestination="https://plmmidqas2.sfdomain.com:31888/oauth/saml/SSO/adfs" \n\t\t\t\tConsent="urn:oasis:names:tc:SAML:2.0:consent:unspecified" \n\t\t\t\tInResponseTo="ARQ7199f1d-0ad5-44c0-b018-6fa34a29c322"\n  xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol">\n  <Issuer\n    xmlns="urn:oasis:names:tc:SAML:2.0:assertion">http://adfs.sf-auto.com/adfs/services/trust\n  </Issuer>\n  <samlp:Status>\n    <samlp:StatusCode Value="urn:oasis:names:tc:SAML:2.0:status:Success" />\n  </samlp:Status>\n  <Assertion ID="_7e88085f-ef2e-410a-a00d-84df8dc4518c" IssueInstant="2024-01-07T08:20:44.025Z" Version="2.0"\n    xmlns="urn:oasis:names:tc:SAML:2.0:assertion">\n    <Issuer>http://adfs.sf-auto.com/adfs/services/trust</Issuer>\n    <ds:Signature\n      xmlns:ds="http://www.w3.org/2000/09/xmldsig#">\n      <ds:SignedInfo>\n        <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />\n        <ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" />\n        <ds:Reference URI="#_7e88085f-ef2e-410a-a00d-84df8dc4518c">\n          <ds:Transforms>\n            <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />\n            <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />\n          </ds:Transforms>\n          <ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" />\n          <ds:DigestValue>31kIGNvLsA97agBQ4WJiLYk2UKC3mvPItperHKZW7ww=</ds:DigestValue>\n        </ds:Reference>\n      </ds:SignedInfo>\n      <ds:SignatureValue>cuJAhOectxCAOF8edZTzxOKS9jRxHU4McQOP5qdey7Z7SBvN8GsyK9zEE4UWaBZc+gVnlTSO1yr6haicdbKg7aNyJKZaYWSlipqsdhRsH8RJdPk8r7iBp4DyiXPMVTpRFTr9p6IBhB9EwzU26qe7DdfoiJW+iX1zCf46pr/CurnxLRxDeOKnaDhLy8V0UedjJMXGVABTG9k1j5XwX0DH1CIT+L3CLvwG05EsRbSZGarW0ic+agVKYCl5DbTM5k/6qsjoFXXa2AES3bAJymcn97yQguf6i3xqwtBlOvzOlL/TMzLMnyrxWasxdO7BuEHEa8ZqMTrEUtzMOo43u8hG4g==</ds:SignatureValue>\n      <KeyInfo\n        xmlns="http://www.w3.org/2000/09/xmldsig#">\n        <ds:X509Data>\n          <ds:X509Certificate>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</ds:X509Certificate>\n        </ds:X509Data>\n      </KeyInfo>\n    </ds:Signature>\n    <Subject>\n      <NameID>yangguang-v@sfdomain.com</NameID>\n      <SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer">\n        <SubjectConfirmationData InResponseTo="ARQ7199f1d-0ad5-44c0-b018-6fa34a29c322" NotOnOrAfter="2024-01-07T08:25:44.025Z" Recipient="https://plmmidqas2.sfdomain.com:31888/oauth/saml/SSO/adfs" />\n      </SubjectConfirmation>\n    </Subject>\n    <Conditions NotBefore="2024-01-07T08:20:44.023Z" NotOnOrAfter="2024-01-07T09:20:44.023Z">\n      <AudienceRestriction>\n        <Audience>https://plmmidqas2.sfdomain.com:31888/oauth</Audience>\n      </AudienceRestriction>\n    </Conditions>\n    <AttributeStatement>\n      <Attribute Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress">\n        <AttributeValue>yangguang-v@sf.local</AttributeValue>\n      </Attribute>\n      <Attribute Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name">\n        <AttributeValue>\u6768\u5149\uff08PLM--\u5916\u90e8\u987e\u95ee\uff09</AttributeValue>\n      </Attribute>\n    </AttributeStatement>\n    <AuthnStatement AuthnInstant="2024-01-07T08:20:44.000Z" SessionIndex="_7e88085f-ef2e-410a-a00d-84df8dc4518c">\n      <AuthnContext>\n        <AuthnContextClassRef>urn:federation:authentication:windows</AuthnContextClassRef>\n      </AuthnContext>\n    </AuthnStatement>\n  </Assertion>\n</samlp:Response>\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u5bf9\u54cd\u5e94\u503c\u8fdb\u884c\u7b80\u5355\u7684",(0,t.jsx)(n.a,{href:"https://www.samltool.com/validate_authn_req.php",children:"\u6821\u9a8c"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"SAML Response"}),": \u54cd\u5e94\u7684\u7684XML"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"IdP EntityId"}),": ",(0,t.jsx)(n.code,{children:"http://adfs.sf-auto.com/adfs/services/trust"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"SP EntityId"}),": ",(0,t.jsx)(n.code,{children:"https://plmmidqas2.sfdomain.com:31888/oauth"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"SP Attribute Consume Service Endpoint"}),": ",(0,t.jsx)(n.code,{children:"https://plmmidqas2.sfdomain.com:31888/oauth/saml/SSO/adfs"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Target URL, Destination of the Response"}),": ",(0,t.jsx)(n.code,{children:"https://plmmidqas2.sfdomain.com:31888/oauth/saml/SSO/adfs"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"X.509 cert of the IdP (to check Signature)"}),": \u54cd\u5e94XML\u4e2d\u7684 ",(0,t.jsx)(n.code,{children:"<ds:X509Certificate></ds:X509Certificate>"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u4e94\u6ce8\u610f\u4e8b\u9879",children:"\u4e94\u3001\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,t.jsx)(n.h3,{id:"1-\u54cd\u5e94\u72b6\u6001\u7801",children:"1. \u54cd\u5e94\u72b6\u6001\u7801"}),"\n",(0,t.jsxs)(n.p,{children:["\u53d6\u503c\u4e3a",(0,t.jsx)(n.code,{children:"Status"})," - ",(0,t.jsx)(n.code,{children:"StatusCode"})," \u7684 ",(0,t.jsx)(n.code,{children:"value"})," \u5c5e\u6027"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"urn:oasis:names:tc:SAML:2.0:status:Success"})," \u8868\u793a\u8ba4\u8bc1\u6210\u529f\uff0c\u6ca1\u6709\u6216\u4e3a\u5176\u4ed6\u503c\u90fd\u662f\u8ba4\u8bc1\u5931\u8d25"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"urn:oasis:names:tc:SAML:2.0:status:NoPassive"})," \u7528\u6237\u672a\u767b\u5f55 ",(0,t.jsx)(n.a,{href:"https://www.cnpython.com/java/785418",children:"\u54cd\u5e94\u4e3aNoPassive\u72b6\u6001\u7684\u88ab\u52a8\u767b\u5f55"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"urn:oasis:names:tc:SAML:2.0:status:Responder"})," IDP\u65e0\u6cd5\u9a8c\u8bc1",(0,t.jsx)(n.code,{children:"SAMLRequest"}),"\u8bf7\u6c42\u6d88\u606f\uff0c\u9700\u8981\u770bADFS\u7684\u540e\u53f0\u65e5\u5fd7\uff0c\u5b9a\u4f4d\u5177\u4f53\u95ee\u9898"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"Microsoft.IdentityServer.Protocols.Saml.SamlProtocolSignatureAlgorithmMismatchException: MSIS7093: \nThe message is not signed with expected signature algorithm. \nMessage is signed with signature algorithm http://www.w3.org/2000/09/xmldsig#rsa-sha1. \nExpected signature algorithm http://www.w3.org/2001/04/xmldsig-more#rsa-sha256. \nat Microsoft.IdentityServer.Web.Protocols.Saml.SamlProtocolManager.ValidateSignatureRequirements(SamlMessage samlMessage) \nat Microsoft.IdentityServer.Web.Protocols.Saml.SamlProtocolManager.Issue(HttpSamlRequestMessage httpSamlRequestMessage, SecurityTokenElement onBehalfOf, String sessionState, String relayState, String& newSamlSession, String& samlpAuthenticationProvider, Boolean isUrlTranslationNeeded, WrappedHttpListenerContext context, Boolean isKmsiRequested)\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u4f8b\u5982\u4e0a\u9762\u65e5\u5fd7\u5c31\u8868\u793a\u63a5\u6536\u5230\u4e86",(0,t.jsx)(n.code,{children:"rsa-sha1"}),"\u7684\u8bf7\u6c42\uff0cADFS\u671f\u671b\u6536\u5230\u7684\u4e3a",(0,t.jsx)(n.code,{children:"rsa-sha256"}),"\u8bf7\u6c42"]}),"\n",(0,t.jsx)(n.h3,{id:"2-idp-\u4e0e-sp-\u7684\u6458\u8981\u7b97\u6cd5\u9700\u8981\u4e00\u81f4",children:"2. IDP \u4e0e SP \u7684\u6458\u8981\u7b97\u6cd5\u9700\u8981\u4e00\u81f4"}),"\n",(0,t.jsxs)(n.p,{children:["\u53c2\u8003",(0,t.jsx)(n.a,{href:"https://www.coder.work/article/6699695",children:"\u5c06 ADFS \u4e0e Spring SAML \u6269\u5c55\u96c6\u6210\u65f6\u7684\u95ee\u9898"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["IDP \u7684\u6458\u8981\u7b97\u6cd5\u53ef\u4ee5\u4ece ",(0,t.jsx)(n.code,{children:"FederationMetadata.xml"})," \u4e2d\u83b7\u53d6\uff0c\u4e00\u822c\u9ed8\u8ba4\u4e3a",(0,t.jsx)(n.code,{children:"RSA-SHA256"}),"\uff0c\u5982\u4e0b\u6240\u793a"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<ds:Signature\n    xmlns:ds="http://www.w3.org/2000/09/xmldsig#">\n    <ds:SignedInfo>\n        <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>\n        <ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/>\n        <ds:Reference URI="#_a4c31e03-f662-4807-9765-9a308fd4718e">\n        <ds:Transforms>\n            <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>\n            <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>\n        </ds:Transforms>\n        <ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>\n        <ds:DigestValue>xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</ds:DigestValue>\n        </ds:Reference>\n    </ds:SignedInfo>\n    <ds:SignatureValue>xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</ds:SignatureValue>\n    <KeyInfo\n        xmlns="http://www.w3.org/2000/09/xmldsig#">\n        <X509Data>\n        <X509Certificate>xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</X509Certificate>\n        </X509Data>\n    </KeyInfo>\n</ds:Signature>\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["SP(Spring Security) \u7684\u6458\u8981\u7b97\u6cd5\u9ed8\u8ba4\u4e3a ",(0,t.jsx)(n.code,{children:"SignatureConstants.ALGO_ID_SIGNATURE_RSA_SHA256"}),"\uff0c\u53ef\u4ee5\u901a\u8fc7",(0,t.jsx)(n.a,{href:"https://docs.spring.io/spring-security/reference/servlet/appendix/namespace/http.html#nsa-asserting-party-attributes",children:"asserting-party"}),"\u6216\u8005",(0,t.jsx)(n.a,{href:"https://docs.spring.io/spring-security/reference/servlet/saml2/login/authentication-requests.html#servlet-saml2login-sp-initiated-factory-signing",children:"\u914d\u7f6e\u6587\u4ef6"}),"\u6765\u8bbe\u7f6e"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Bean\nInMemoryRelyingPartyRegistrationRepository repository(Saml2RelyingPartyProperties properties) {\n    Saml2RelyingPartyProperties.Registration registration = properties.getRegistration().values().iterator().next();\n    return new InMemoryRelyingPartyRegistrationRepository(RelyingPartyRegistrations\n            .fromMetadataLocation(registration.getIdentityprovider().getMetadataUri())\n            .registrationId("adfs")\n            .entityId(registration.getEntityId())\n            .assertingPartyDetails(party ->\n                    party.signingAlgorithms(sign ->\n                            sign.add(SignatureConstants.ALGO_ID_SIGNATURE_RSA_SHA256)))\n            .assertionConsumerServiceLocation(registration.getAcs().getLocation())\n            .build());\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"3-nameid\u5c5e\u6027",children:"3. NameID\u5c5e\u6027"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Assertion"})," - ",(0,t.jsx)(n.code,{children:"Subject"})," - ",(0,t.jsx)(n.code,{children:"NameID"}),"\u5c5e\u6027\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u5426\u5219Spring Security\u6846\u67b6\u4e0d\u80fd\u6b63\u786e\u83b7\u53d6\u8ba4\u8bc1\u7528\u6237\u540d\uff0c\u5bfc\u81f4\u8ba4\u8bc1\u51fa\u9519"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u89c1 ",(0,t.jsx)(n.code,{children:"org.springframework.security.saml2.provider.service.authentication.OpenSaml4AuthenticationProvider#createDefaultResponseAuthenticationConverter"})]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public static Converter<ResponseToken, Saml2Authentication> createDefaultResponseAuthenticationConverter() {\n    return (responseToken) -> {\n        Response response = responseToken.response;\n        Saml2AuthenticationToken token = responseToken.token;\n        Assertion assertion = CollectionUtils.firstElement(response.getAssertions());\n        String username = assertion.getSubject().getNameID().getValue();\n        Map<String, List<Object>> attributes = getAssertionAttributes(assertion);\n        return new Saml2Authentication(new DefaultSaml2AuthenticatedPrincipal(username, attributes),\n                token.getSaml2Response(), AuthorityUtils.createAuthorityList("ROLE_USER"));\n    };\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u786e\u5b9e\u6ca1\u6709",(0,t.jsx)(n.code,{children:"NameID"}),"\uff0c\u6216\u4e0d\u80fd\u63d0\u4f9b",(0,t.jsx)(n.code,{children:"NameID"}),"\uff0c\u53ef\u4ee5\u53c2\u8003\u6b64\u5904\u914d\u7f6e",(0,t.jsx)(n.a,{href:"https://docs.spring.io/spring-security/reference/servlet/saml2/login/authentication.html#servlet-saml2login-opensamlauthenticationprovider-userdetailsservice",children:"Coordinating with a UserDetailsService"}),"\uff0c\u91cd\u5199 ",(0,t.jsx)(n.code,{children:"ResponseAuthenticationConverter"}),"\uff0c\u5728\u751f\u6210\u8ba4\u8bc1\u4fe1\u606f\u65f6\u53d6\u5176\u4ed6\u5c5e\u6027"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    @Autowired\n    UserDetailsService userDetailsService;\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        OpenSaml4AuthenticationProvider authenticationProvider = new OpenSaml4AuthenticationProvider();\n        authenticationProvider.setResponseAuthenticationConverter(responseToken -> {\n            Saml2Authentication authentication = OpenSaml4AuthenticationProvider\n                    .createDefaultResponseAuthenticationConverter() \n                    .convert(responseToken);\n            Assertion assertion = responseToken.getResponse().getAssertions().get(0);\n            String username = assertion.getSubject().getNameID().getValue();\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username); \n            return MySaml2Authentication(userDetails, authentication); \n        });\n\n        http\n            .authorizeHttpRequests(authz -> authz\n                .anyRequest().authenticated()\n            )\n            .saml2Login(saml2 -> saml2\n                .authenticationManager(new ProviderManager(authenticationProvider))\n            );\n        return http.build();\n    }\n}\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"4-\u6ce8\u610f-dsreference-\u7b7e\u540d\u9700\u8981\u6307\u5411-assertion",children:["4. \u6ce8\u610f ",(0,t.jsx)(n.code,{children:"ds:Reference"})," \u7b7e\u540d\u9700\u8981\u6307\u5411 ",(0,t.jsx)(n.code,{children:"Assertion"})]}),"\n",(0,t.jsxs)(n.p,{children:["\u53c2\u8003",(0,t.jsx)(n.a,{href:"https://stackoverflow.com/questions/54617814/issuer-of-the-assertion-not-found-or-multiple-a-valid-subjectconfirmation-was-n",children:"Issuer of the Assertion not found or multiple"})]}),"\n",(0,t.jsx)(n.p,{children:"\u76f8\u5e94\u89e3\u6790XML\u4e3a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<samlp:Response ID="_6362fc8c-aad9-43a0-9c3d-572e50cab9e6" \n\xa0 \xa0 \xa0 \xa0 Version="2.0" \n\xa0 \xa0 \xa0 \xa0 IssueInstant="2024-01-07T08:20:44.025Z" \n\xa0 \xa0 \xa0 \xa0 Destination="https://plmmidqas2.sfdomain.com:31888/oauth/saml/SSO/adfs" \n\xa0 \xa0 \xa0 \xa0 Consent="urn:oasis:names:tc:SAML:2.0:consent:unspecified" \n\xa0 \xa0 \xa0 \xa0 InResponseTo="ARQ7199f1d-0ad5-44c0-b018-6fa34a29c322"\n\xa0 xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol">\n\xa0 <Issuer\n\xa0 \xa0 xmlns="urn:oasis:names:tc:SAML:2.0:assertion">http://adfs.sf-auto.com/adfs/services/trust\n\xa0 </Issuer>\n\xa0 <samlp:Status>\n\xa0 \xa0 <samlp:StatusCode Value="urn:oasis:names:tc:SAML:2.0:status:Success" />\n\xa0 </samlp:Status>\n\xa0 <Assertion ID="_7e88085f-ef2e-410a-a00d-84df8dc4518c" IssueInstant="2024-01-07T08:20:44.025Z" Version="2.0"\n\xa0 \xa0 xmlns="urn:oasis:names:tc:SAML:2.0:assertion">\n\xa0 \xa0 <Issuer>http://adfs.sf-auto.com/adfs/services/trust</Issuer>\n\xa0 \xa0 <ds:Signature\n\xa0 \xa0 \xa0 xmlns:ds="http://www.w3.org/2000/09/xmldsig#">\n\xa0 \xa0 \xa0 <ds:SignedInfo>\n\xa0 \xa0 \xa0 \xa0 <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />\n\xa0 \xa0 \xa0 \xa0 <ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" />\n\xa0 \xa0 \xa0 \xa0 <ds:Reference URI="#_7e88085f-ef2e-410a-a00d-84df8dc4518c">\n\xa0 \xa0 \xa0 \xa0 \xa0 <ds:Transforms>\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />\n\xa0 \xa0 \xa0 \xa0 \xa0 </ds:Transforms>\n\xa0 \xa0 \xa0 \xa0 \xa0 <ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" />\n\xa0 \xa0 \xa0 \xa0 \xa0 <ds:DigestValue>31kIGNvLsA97agBQ4WJiLYk2UKC3mvPItperHKZW7ww=</ds:DigestValue>\n\xa0 \xa0 \xa0 \xa0 </ds:Reference>\n\xa0 \xa0 \xa0 </ds:SignedInfo>\n\xa0 \xa0 \xa0 <ds:SignatureValue>xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</ds:SignatureValue>\n\xa0 \xa0 \xa0 <KeyInfo\n\xa0 \xa0 \xa0 \xa0 xmlns="http://www.w3.org/2000/09/xmldsig#">\n\xa0 \xa0 \xa0 \xa0 <ds:X509Data>\n\xa0 \xa0 \xa0 \xa0 \xa0 <ds:X509Certificate>xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</ds:X509Certificate>\n\xa0 \xa0 \xa0 \xa0 </ds:X509Data>\n\xa0 \xa0 \xa0 </KeyInfo>\n\xa0 \xa0 </ds:Signature>\n\xa0 </Assertion>\n</samlp:Response>\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"samlp:Response"})," \u6807\u7b7e\u7684 ID \u4e3a ",(0,t.jsx)(n.code,{children:"_6362fc8c-aad9-43a0-9c3d-572e50cab9e6"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<samlp:Response ID="_6362fc8c-aad9-43a0-9c3d-572e50cab9e6" \n    />\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Assertion"})," \u6807\u7b7e\u7684 ID \u4e3a ",(0,t.jsx)(n.code,{children:"_7e88085f-ef2e-410a-a00d-84df8dc4518c"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<Assertion ID="_7e88085f-ef2e-410a-a00d-84df8dc4518c" IssueInstant="2024-01-07T08:20:44.025Z" Version="2.0"\n\xa0 \xa0 xmlns="urn:oasis:names:tc:SAML:2.0:assertion">\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"ds:Reference"})," \u5f15\u7528\u7684ID\u5fc5\u987b\u6307\u5411 ",(0,t.jsx)(n.code,{children:"Assertion"})," \u800c\u4e0d\u662f\u6574\u4e2a ",(0,t.jsx)(n.code,{children:"Response"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<ds:Reference URI="#_7e88085f-ef2e-410a-a00d-84df8dc4518c">\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},5:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/3-1-4c85e45167be7369947235d5f6fad4bc.png"},378:(e,n,s)=>{s.d(n,{A:()=>t});const t="data:image/webp;base64,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"},21477:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/3-11-17fb887b7bcd9f7ca2bb645192dd40e2.webp"},52723:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/3-12-d93b99aca84e74a9b2d8cd8d7c57b508.png"},34023:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/3-2-75764fb7a9a6f59ed3c90ec4f529c240.jpeg"},87188:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/3-3-28066aeef127d986cb5600c3ef3e485a.webp"},96677:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/3-4-b4c484909ac9325213e498271d6a33d5.jpeg"},4190:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/3-5-b466d139951313d539d7c22079d87d15.jpeg"},71803:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/3-6-a31061be36de975840c0150417edd061.webp"},70547:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/3-7-ba39b96c28df2e031d47794c605e1d9a.png"},26537:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/3-8-95645b8db2f04c609ed08da585dbfc7c.webp"},56814:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/3-9-e83776edf76c4470f92ab6674b2a8558.webp"},28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var t=s(96540);const i={},r=t.createContext(i);function a(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);