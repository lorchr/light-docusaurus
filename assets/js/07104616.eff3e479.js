"use strict";(self.webpackChunklight_docusaurus=self.webpackChunklight_docusaurus||[]).push([[62760],{15742:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=t(74848),i=t(28453);const r={},o=void 0,s={id:"zh-cn/java/Build-Native-Image-With-GraalVM",title:"Build-Native-Image-With-GraalVM",description:"- Dubbo \u4f7f\u7528 GraalVM \u6253\u5305 Native Image",source:"@site/docs/zh-cn/java/21-Build-Native-Image-With-GraalVM.md",sourceDirName:"zh-cn/java",slug:"/zh-cn/java/Build-Native-Image-With-GraalVM",permalink:"/light-docusaurus/docs/zh-cn/java/Build-Native-Image-With-GraalVM",draft:!1,unlisted:!1,editUrl:"https://github.com/lorchr/light-docusaurus/tree/main/docs/zh-cn/java/21-Build-Native-Image-With-GraalVM.md",tags:[],version:"current",sidebarPosition:21,frontMatter:{},sidebar:"troch",previous:{title:"Java-Generic-Type",permalink:"/light-docusaurus/docs/zh-cn/java/Java-Generic-Type"},next:{title:"Garbge-Collect-Algrthim",permalink:"/light-docusaurus/docs/zh-cn/java/Garbge-Collect-Algrthim"}},l={},c=[{value:"\u4e00\u3001\u51c6\u5907",id:"\u4e00\u51c6\u5907",level:2},{value:"1. \u5b89\u88c5 SDKMan",id:"1-\u5b89\u88c5-sdkman",level:3},{value:"2. SDKMan \u5b89\u88c5 Liberica NIK",id:"2-sdkman-\u5b89\u88c5-liberica-nik",level:3},{value:"3. SDKMan \u5b89\u88c5 Maven",id:"3-sdkman-\u5b89\u88c5-maven",level:3},{value:"\u4e8c\u3001\u7f16\u7801",id:"\u4e8c\u7f16\u7801",level:2},{value:"1. pom.xml",id:"1-pomxml",level:3},{value:"2. \u542f\u52a8\u7c7b com.light.nativeimage.NativeImageApplication",id:"2-\u542f\u52a8\u7c7b-comlightnativeimagenativeimageapplication",level:3},{value:"\u4e09\u3001\u6784\u5efa\u3001\u6d4b\u8bd5\u4e0e\u53d1\u5e03(\u5728WSL Ubuntu\u6267\u884c)",id:"\u4e09\u6784\u5efa\u6d4b\u8bd5\u4e0e\u53d1\u5e03\u5728wsl-ubuntu\u6267\u884c",level:2},{value:"\u56db\u3001Windows\u6253\u5305Native Image",id:"\u56dbwindows\u6253\u5305native-image",level:2},{value:"1. \u5b89\u88c5 GraalVM SDK",id:"1-\u5b89\u88c5-graalvm-sdk",level:3},{value:"2. \u5b89\u88c5 Visual Studio",id:"2-\u5b89\u88c5-visual-studio",level:3},{value:"3. \u6d4b\u8bd5",id:"3-\u6d4b\u8bd5",level:3},{value:"\u5c0f\u7ed3",id:"\u5c0f\u7ed3",level:2},{value:"\u5e38\u89c1\u62a5\u9519",id:"\u5e38\u89c1\u62a5\u9519",level:2},{value:"1. \u5728Windows\u4e0b\u6267\u884c\u6253\u5305\u62a5\u9519 <code>returned non-zero result</code>",id:"1-\u5728windows\u4e0b\u6267\u884c\u6253\u5305\u62a5\u9519-returned-non-zero-result",level:3},{value:"2. <code>Native-image building on Windows currently only supports target architecture: AMD64 (32-bit architecture x86 unsupported)</code>",id:"2-native-image-building-on-windows-currently-only-supports-target-architecture-amd64-32-bit-architecture-x86-unsupported",level:3},{value:"3. Error: Main entry point class &#39;xxx&#39; neither found on classpath: &#39;yyy&#39; nor modulepath: &#39;zzz&#39;",id:"3-error-main-entry-point-class-xxx-neither-found-on-classpath-yyy-nor-modulepath-zzz",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://cn.dubbo.apache.org/zh-cn/docs/references/graalvm/support-graalvm/",children:"Dubbo \u4f7f\u7528 GraalVM \u6253\u5305 Native Image"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://vlts.cn/post/spring-boot-native-image-demo",children:"SpringBoot3.x\u539f\u751f\u955c\u50cf-Native Image\u5c1d\u9c9c"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://www.cnblogs.com/throwable/p/17644981.html",children:"SpringBoot3.x\u539f\u751f\u955c\u50cf-Native Image\u5b9e\u8df5"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/613341871",children:"\u624b\u628a\u624b\u5c06\u4f60\u7684Java maven\u9879\u76ee\u901a\u8fc7GraalVM\u6253\u5305\u6210windows\u53ef\u6267\u884c\u7a0b\u5e8f"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://www.jb51.net/article/273990.htm",children:"Spring Native\u6253\u5305\u672c\u5730\u955c\u50cf\u7684\u64cd\u4f5c\u65b9\u6cd5(\u65e0\u9700\u901a\u8fc7Graal\u7684maven\u63d2\u4ef6buildtools)"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://www.baeldung.com/spring-native-intro",children:"Native Images with Spring Boot and GraalVM"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://springdoc.cn/spring-native-intro/",children:"\u4f7f\u7528 Spring Boot \u548c GraalVM \u6784\u5efa\u539f\u751f\u955c\u50cf"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://www.graalvm.org/downloads/#",children:"GraalVM Downloads"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://github.com/graalvm/graalvm-ce-builds/releases",children:"GraalVM Community Edition"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://www.graalvm.org/docs/getting-started/container-images/",children:"GraalVM Getting Start"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://graalvm.github.io/native-build-tools/latest/maven-plugin.html",children:"Maven plugin for GraalVM Native Image building"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://docs.oracle.com/en/graalvm/enterprise/21/docs/getting-started",children:"Oracle GraalVM Document"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://docs.spring.io/spring-native/docs/current/reference/htmlsingle/",children:"Spring Native GraalVM Native Image Support"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://docs.spring.io/spring-native/docs/0.12.x/reference/htmlsingle/#_with_code_native_image_code",children:"With native-image"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://docs.spring.io/spring-boot/docs/current/reference/html/native-image.html",children:"Spring Boot GraalVM Native Image Support"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-with-GraalVM",children:"Spring-Boot-with-GraalVM"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://github.com/graalvm/native-build-tools/tree/master/samples",children:"GraalVM Spring Boot Samples"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://sdkman.io/",children:"SDKMan"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"\u4e00\u51c6\u5907",children:"\u4e00\u3001\u51c6\u5907"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"\u7ec4\u4ef6"}),(0,a.jsx)(n.th,{children:"\u7248\u672c"}),(0,a.jsx)(n.th,{children:"\u5907\u6ce8"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Maven"}),(0,a.jsx)(n.td,{children:"3.9.6"}),(0,a.jsx)(n.td,{})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Jdk"}),(0,a.jsx)(n.td,{children:"graalvm-openjdk-21"}),(0,a.jsx)(n.td,{})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Spring Boot"}),(0,a.jsx)(n.td,{children:"3.2.2"}),(0,a.jsx)(n.td,{})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"sdkman"}),(0,a.jsx)(n.td,{children:"5.18.2"}),(0,a.jsx)(n.td,{children:"JDK\u548c\u5404\u7c7bSDK\u5305\u7ba1\u7406\u5de5\u5177"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Liberica Native Image Kit"}),(0,a.jsx)(n.td,{children:"23.1.2.r21-nik"}),(0,a.jsx)(n.td,{children:"\u53ef\u4ee5\u6784\u5efaNative Image\u7684JDK"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Visual Studio"}),(0,a.jsx)(n.td,{children:"2022"}),(0,a.jsx)(n.td,{children:"Windows\u73af\u5883\u9700\u8981 x64 Native Tools Command Prompt for VS 2022 \u6765\u6253\u5305NativeImage"})]})]})]}),"\n",(0,a.jsx)(n.h3,{id:"1-\u5b89\u88c5-sdkman",children:"1. \u5b89\u88c5 SDKMan"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"\u5b89\u88c5SDKMan"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:'curl -s "https://get.sdkman.io" | bash\n\nsource "$HOME/.sdkman/bin/sdkman-init.sh"\n\n# \u9a8c\u8bc1sdkman\u7248\u672c\nsdk version\n\nSDKMAN!\nscript: 5.18.2\nnative: 0.4.6\n\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"SDKMan\u547d\u4ee4\u793a\u4f8b"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"# \u53ef\u4ee5\u901a\u8fc7sdk list java\u67e5\u770b\u652f\u6301\u7684JDK\u53d1\u884c\u7248\u672c\uff1a\nsdk list java\n\n# \u901a\u8fc7shell\u547d\u4ee4 sdk install java $Identifier \u5c31\u53ef\u4ee5\u5b89\u88c5\u5bf9\u5e94\u7684JDK\u53d1\u884c\u7248\u3002\nsdk install java 17.0.8-graalce\n\n# \u901a\u8fc7shell\u547d\u4ee4 sdk uninstall java $Identifier \u53ef\u4ee5\u5378\u8f7d\u5bf9\u5e94\u7684JDK\u53d1\u884c\u7248\u3002\nsdk uninstall java 17.0.8-graalce\n\n# \u901a\u8fc7shell\u547d\u4ee4 sdk default java $Identifier\u53bb \u6307\u5b9a\u9ed8\u8ba4\u4f7f\u7528\u7684JDK\u7248\u672c\nsdk default java 17.0.8-graalce\n\n# \u901a\u8fc7shell\u547d\u4ee4 sdk current \u6216\u8005 sdk current java \u67e5\u770b\u5f53\u524d\u6b63\u5728\u4f7f\u7528\u7684SDK\u6216\u8005JDK\u7248\u672c\nsdk current java\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"2-sdkman-\u5b89\u88c5-liberica-nik",children:"2. SDKMan \u5b89\u88c5 Liberica NIK"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"Liberica Native Image Kit"}),"\u662fbellsoft\u51fa\u54c1\u7684\u65e8\u5728\u521b\u5efa\u9ad8\u6027\u80fd\u539f\u751f\u4e8c\u8fdb\u5236\uff08Native Binaries\uff09\u57fa\u4e8eJVM\u7f16\u5199\u7684\u5e94\u7528\u7684\u5de5\u5177\u5305\uff0c\u7b80\u79f0\u4e3a",(0,a.jsx)(n.code,{children:"Liberica NIK"}),"\u3002",(0,a.jsx)(n.code,{children:"Liberica NIK"}),"\u672c\u8d28\u5c31\u662f\u628aOpenJDK\u548c\u591a\u79cd\u5176\u4ed6\u5de5\u5177\u5305\u4e00\u8d77\u5c01\u88c5\u8d77\u6765\u7684JDK\u53d1\u884c\u7248\uff0c\u5728Native Image\u529f\u80fd\u5e94\u7528\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u7b80\u5355\u628a\u5b83\u89c6\u4e3a",(0,a.jsx)(n.code,{children:"OpenJDK + GraalVM"}),"\u7684\u7ed3\u5408\u4f53\u3002\u53ef\u4ee5\u901a\u8fc7",(0,a.jsx)(n.code,{children:"sdk list java"}),"\u67e5\u770b\u76f8\u5e94\u7684JDK\u7248\u672c\uff1a"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:'sdk list java\n\nsdk install java 23.1.2.r21-nik\n# \u8fd9\u91cc\u6700\u597d\u628a\u6b64JDK\u8bbe\u7f6e\u4e3a\u5f53\u524d\u7cfb\u7edf\u7684\u9ed8\u8ba4JDK\uff0c\u5426\u5219\u540e\u9762\u7f16\u8bd1\u955c\u50cf\u65f6\u5019\u4f1a\u63d0\u793a\u627e\u4e0d\u5230GraalVM\nsdk default java 23.1.2.r21-nik\n\n# \u9a8c\u8bc1jdk\u7248\u672c\njava -version\n\nopenjdk version "21.0.2" 2024-01-16 LTS\nOpenJDK Runtime Environment Liberica-NIK-23.1.2-1 (build 21.0.2+14-LTS)\nOpenJDK 64-Bit Server VM Liberica-NIK-23.1.2-1 (build 21.0.2+14-LTS, mixed mode, sharing)\n\n# \u901a\u8fc7sdkman\u9a8c\u8bc1\nsdk current java\n\nUsing java version 23.1.2.r21-nik\n'})}),"\n",(0,a.jsx)(n.h3,{id:"3-sdkman-\u5b89\u88c5-maven",children:"3. SDKMan \u5b89\u88c5 Maven"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"sdk list maven\n\nsdk install maven 3.9.6\n\nsdk current maven\n\nmaven -version\n\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u4e8c\u7f16\u7801",children:"\u4e8c\u3001\u7f16\u7801"}),"\n",(0,a.jsx)(n.h3,{id:"1-pomxml",children:"1. pom.xml"}),"\n",(0,a.jsx)(n.p,{children:"\u57fa\u4e8eMaven\u65b0\u5efa\u4e00\u4e2aSpringBoot\u5e94\u7528\uff0c\u8fd9\u91cc\u5df2\u7ecf\u6574\u7406\u597d\u4e86\u4e00\u4efdPOM\u6587\u4ef6\uff0c\u5b9e\u8df5\u8fc7\u7a0b\u53ef\u4ee5\u76f4\u63a5\u7528\uff0c\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n\txsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">\n\t<modelVersion>4.0.0</modelVersion>\n\t<parent>\n\t\t<groupId>org.springframework.boot</groupId>\n\t\t<artifactId>spring-boot-starter-parent</artifactId>\n\t\t<version>3.2.4</version>\n\t\t<relativePath/> \x3c!-- lookup parent from repository --\x3e\n\t</parent>\n\n\t<groupId>com.light</groupId>\n\t<artifactId>native-image-demo</artifactId>\n\t<version>0.0.1-SNAPSHOT</version>\n\t<name>native-image-demo</name>\n\t<description>Demo project for Spring Boot</description>\n\n\t<properties>\n\t\t<java.version>21</java.version>\n\t\t<maven.compiler.source>21</maven.compiler.source>\n\t\t<maven.compiler.target>21</maven.compiler.target>\n\t\t<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n\t</properties>\n\n\t<dependencies>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-web</artifactId>\n\t\t\t<exclusions>\n\t\t\t\t<exclusion>\n\t\t\t\t\t<groupId>org.apache.tomcat.embed</groupId>\n\t\t\t\t\t<artifactId>tomcat-embed-core</artifactId>\n\t\t\t\t</exclusion>\n\t\t\t\t<exclusion>\n\t\t\t\t\t<groupId>org.apache.tomcat.embed</groupId>\n\t\t\t\t\t<artifactId>tomcat-embed-websocket</artifactId>\n\t\t\t\t</exclusion>\n\t\t\t</exclusions>\n\t\t</dependency>\n\n\t\t<dependency>\n\t\t\t<groupId>org.apache.tomcat.experimental</groupId>\n\t\t\t<artifactId>tomcat-embed-programmatic</artifactId>\n\t\t\t<version>10.1.19</version>\n\t\t</dependency>\n\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-test</artifactId>\n\t\t\t<scope>test</scope>\n\t\t</dependency>\n\t</dependencies>\n\n\t<build>\n\t\t<plugins>\n\t\t\t<plugin>\n\t\t\t\t<artifactId>maven-compiler-plugin</artifactId>\n\t\t\t\t<groupId>org.apache.maven.plugins</groupId>\n\t\t\t\t<configuration>\n\t\t\t\t\t<source>${maven.compiler.source}</source>\n\t\t\t\t\t<target>${maven.compiler.target}</target>\n\t\t\t\t\t<encoding>${project.build.sourceEncoding}</encoding>\n\t\t\t\t</configuration>\n\t\t\t</plugin>\n\t\t\t<plugin>\n\t\t\t\t<groupId>org.apache.maven.plugins</groupId>\n\t\t\t\t<artifactId>maven-install-plugin</artifactId>\n\t\t\t</plugin>\n\t\t\t<plugin>\n\t\t\t\t<groupId>org.graalvm.buildtools</groupId>\n\t\t\t\t<artifactId>native-maven-plugin</artifactId>\n\t\t\t\t<configuration>\n\t\t\t\t\t<imageName>native-image-demo</imageName>\n\t\t\t\t</configuration>\n\t\t\t</plugin>\n\t\t\t<plugin>\n\t\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t\t<artifactId>spring-boot-maven-plugin</artifactId>\n\t\t\t\t<executions>\n\t\t\t\t\t<execution>\n\t\t\t\t\t\t<goals>\n\t\t\t\t\t\t\t<goal>repackage</goal>\n\t\t\t\t\t\t</goals>\n\t\t\t\t\t</execution>\n\t\t\t\t</executions>\n\t\t\t\t<configuration>\n\t\t\t\t\t<mainClass>com.light.nativeimage.NativeImageApplication</mainClass>\n\t\t\t\t</configuration>\n\t\t\t</plugin>\n\t\t</plugins>\n\t</build>\n\n</project>\n\n'})}),"\n",(0,a.jsxs)(n.p,{children:["\u8fd9\u91cc\u628aMaven\u7684\u6240\u6709\u63d2\u4ef6\u90fd\u63d0\u5347\u5230\u5f53\u524d\u6700\u65b0\u7248\u672c\uff0c\u539f\u751f\u955c\u50cf\u6253\u5305\u7684\u5173\u952e\u63d2\u4ef6\u662f",(0,a.jsx)(n.code,{children:"native-maven-plugin"}),"\uff0c\u6b64\u63d2\u4ef6\u662f\u8ddf\u968f",(0,a.jsx)(n.code,{children:"spring-boot-starter-parent"}),"\u8fdb\u884c\u7248\u672c\u7ba1\u7406\uff0c\u8fd9\u91cc\u65e0\u987b\u6307\u5b9a\u63d2\u4ef6\u7684\u7248\u672c\u3002\u53e6\u5916\uff0c",(0,a.jsx)(n.code,{children:"tomcat-embed-programmatic"})," \u662f\u4e00\u4e2a\u5b9e\u9a8c\u6027\u4f9d\u8d56\uff0c\u53ef\u4ee5\u964d\u4f4e\u5d4c\u5165\u5f0fTomcat\u7684\u5185\u5b58\u4f7f\u7528\uff0c\u5728\u751f\u4ea7\u4e2d\u5e94\u7528\u65f6\u5019\u53ef\u4ee5\u6682\u4e0d\u542f\u7528\u6b64\u7279\u6027\u3002"]}),"\n",(0,a.jsx)(n.h3,{id:"2-\u542f\u52a8\u7c7b-comlightnativeimagenativeimageapplication",children:"2. \u542f\u52a8\u7c7b com.light.nativeimage.NativeImageApplication"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package com.light.nativeimage;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@SpringBootApplication\npublic class NativeImageApplication {\n\n\tpublic static void main(String[] args) {\n\t\tSpringApplication.run(NativeImageApplication.class, args);\n\t}\n\n\t@RequestMapping(path = "/")\n\tpublic ResponseEntity<String> index() {\n\t\treturn ResponseEntity.ok("index");\n\t}\n}\n\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u4e09\u6784\u5efa\u6d4b\u8bd5\u4e0e\u53d1\u5e03\u5728wsl-ubuntu\u6267\u884c",children:"\u4e09\u3001\u6784\u5efa\u3001\u6d4b\u8bd5\u4e0e\u53d1\u5e03(\u5728WSL Ubuntu\u6267\u884c)"}),"\n",(0,a.jsx)(n.p,{children:"\u4e09\u4e2a\u64cd\u4f5c\u7684Maven\u547d\u4ee4\u5206\u522b\u662f\uff1a"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\u6784\u5efa\uff1a",(0,a.jsx)(n.code,{children:"mvn -Pnative native:compile"})]}),"\n",(0,a.jsxs)(n.li,{children:["\u6d4b\u8bd5\uff1a",(0,a.jsx)(n.code,{children:"mvn -PnativeTest test"})]}),"\n",(0,a.jsxs)(n.li,{children:["\u53d1\u5e03\uff1a",(0,a.jsx)(n.code,{children:"mvn -Pnative spring-boot:build-image"}),"\uff0c\u6ce8\u610f\u6b64\u547d\u4ee4\u4f1a\u6253\u5305\u955c\u50cf\u5e76\u4e14\u53d1\u5e03\u5230Docker\u7684\u5b98\u65b9\u4ed3\u5e93\u4e2d"]}),"\n"]}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["\u867d\u7136 ",(0,a.jsx)(n.code,{children:"native:compile"})," \u547d\u4ee4\u8868\u9762\u610f\u4e49\u662f\u7f16\u8bd1\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u5b83\u5c31\u662f\u6784\u5efa\u539f\u751f\u955c\u50cf\u7684\u547d\u4ee4"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u6267\u884c\u6784\u5efa\u6d41\u7a0b\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"mvn -Pnative native:compile -Dmaven.test.skip=true\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u6784\u5efa\u7ed3\u679c\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"[INFO] --- native:0.9.28:compile (default-cli) @ native-image-demo ---\n[INFO] Found GraalVM installation from PATH variable.\n[INFO] [graalvm reachability metadata repository for ch.qos.logback:logback-classic:1.4.14]: Configuration directory not found. Trying latest version.\n[INFO] [graalvm reachability metadata repository for ch.qos.logback:logback-classic:1.4.14]: Configuration directory is ch.qos.logback/logback-classic/1.4.1\n[INFO] [graalvm reachability metadata repository for com.fasterxml.jackson.core:jackson-databind:2.15.4]: Configuration directory not found. Trying latest version.\n[INFO] [graalvm reachability metadata repository for com.fasterxml.jackson.core:jackson-databind:2.15.4]: Configuration directory is com.fasterxml.jackson.core/jackson-databind/2.15.2\n[WARNING] Properties file at 'jar:file:///home/light/.m2/repository/org/apache/tomcat/experimental/tomcat-embed-programmatic/10.1.19/tomcat-embed-programmatic-10.1.19.jar!/META-INF/native-image/org.apache.tomcat.embed/tomcat-embed-programmatic/native-image.properties' does not match the recommended 'META-INF/native-image/org.apache.tomcat.experimental/tomcat-embed-programmatic/native-image.properties' layout.\n[INFO] Executing: /home/light/.sdkman/candidates/java/current/bin/native-image -cp /home/light/native-image/native-image-demo/target/classes:/home/light/.m2/repository/org/springframework/boot/spring-boot-starter-web/3.2.4/spring-boot-starter-web-3.2.4.jar:/home/light/.m2/repository/org/springframework/boot/spring-boot-starter/3.2.4/spring-boot-starter-3.2.4.jar:/home/light/.m2/repository/org/springframework/boot/spring-boot/3.2.4/spring-boot-3.2.4.jar:/home/light/.m2/repository/org/springframework/boot/spring-boot-autoconfigure/3.2.4/spring-boot-autoconfigure-3.2.4.jar:/home/light/.m2/repository/org/springframework/boot/spring-boot-starter-logging/3.2.4/spring-boot-starter-logging-3.2.4.jar:/home/light/.m2/repository/ch/qos/logback/logback-classic/1.4.14/logback-classic-1.4.14.jar:/home/light/.m2/repository/ch/qos/logback/logback-core/1.4.14/logback-core-1.4.14.jar:/home/light/.m2/repository/org/apache/logging/log4j/log4j-to-slf4j/2.21.1/log4j-to-slf4j-2.21.1.jar:/home/light/.m2/repository/org/apache/logging/log4j/log4j-api/2.21.1/log4j-api-2.21.1.jar:/home/light/.m2/repository/org/slf4j/jul-to-slf4j/2.0.12/jul-to-slf4j-2.0.12.jar:/home/light/.m2/repository/jakarta/annotation/jakarta.annotation-api/2.1.1/jakarta.annotation-api-2.1.1.jar:/home/light/.m2/repository/org/yaml/snakeyaml/2.2/snakeyaml-2.2.jar:/home/light/.m2/repository/org/springframework/boot/spring-boot-starter-json/3.2.4/spring-boot-starter-json-3.2.4.jar:/home/light/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.15.4/jackson-databind-2.15.4.jar:/home/light/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.15.4/jackson-annotations-2.15.4.jar:/home/light/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.15.4/jackson-core-2.15.4.jar:/home/light/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jdk8/2.15.4/jackson-datatype-jdk8-2.15.4.jar:/home/light/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.15.4/jackson-datatype-jsr310-2.15.4.jar:/home/light/.m2/repository/com/fasterxml/jackson/module/jackson-module-parameter-names/2.15.4/jackson-module-parameter-names-2.15.4.jar:/home/light/.m2/repository/org/springframework/boot/spring-boot-starter-tomcat/3.2.4/spring-boot-starter-tomcat-3.2.4.jar:/home/light/.m2/repository/org/apache/tomcat/embed/tomcat-embed-el/10.1.19/tomcat-embed-el-10.1.19.jar:/home/light/.m2/repository/org/springframework/spring-web/6.1.5/spring-web-6.1.5.jar:/home/light/.m2/repository/org/springframework/spring-beans/6.1.5/spring-beans-6.1.5.jar:/home/light/.m2/repository/io/micrometer/micrometer-observation/1.12.4/micrometer-observation-1.12.4.jar:/home/light/.m2/repository/io/micrometer/micrometer-commons/1.12.4/micrometer-commons-1.12.4.jar:/home/light/.m2/repository/org/springframework/spring-webmvc/6.1.5/spring-webmvc-6.1.5.jar:/home/light/.m2/repository/org/springframework/spring-aop/6.1.5/spring-aop-6.1.5.jar:/home/light/.m2/repository/org/springframework/spring-context/6.1.5/spring-context-6.1.5.jar:/home/light/.m2/repository/org/springframework/spring-expression/6.1.5/spring-expression-6.1.5.jar:/home/light/.m2/repository/org/apache/tomcat/experimental/tomcat-embed-programmatic/10.1.19/tomcat-embed-programmatic-10.1.19.jar:/home/light/.m2/repository/org/slf4j/slf4j-api/2.0.12/slf4j-api-2.0.12.jar:/home/light/.m2/repository/org/springframework/spring-core/6.1.5/spring-core-6.1.5.jar:/home/light/.m2/repository/org/springframework/spring-jcl/6.1.5/spring-jcl-6.1.5.jar --no-fallback -o /home/light/native-image/native-image-demo/target/native-image-demo -H:ConfigurationFileDirectories=/home/light/native-image/native-image-demo/target/graalvm-reachability-metadata/5bb38a8addd4b99611ab251c3c0db9044a99ab58/com.fasterxml.jackson.core/jackson-databind/2.15.2,/home/light/native-image/native-image-demo/target/graalvm-reachability-metadata/5bb38a8addd4b99611ab251c3c0db9044a99ab58/ch.qos.logback/logback-classic/1.4.1\nWarning: The option '-H:ResourceConfigurationResources=META-INF/native-image/org.apache.tomcat.embed/tomcat-embed-programmatic/tomcat-resource.json' is experimental and must be enabled via '-H:+UnlockExperimentalVMOptions' in the future.\nWarning: The option '-H:ReflectionConfigurationResources=META-INF/native-image/org.apache.tomcat.embed/tomcat-embed-programmatic/tomcat-reflection.json' is experimental and must be enabled via '-H:+UnlockExperimentalVMOptions' in the future.\nWarning: The option '-H:ReflectionConfigurationResources=META-INF/native-image/org.apache.tomcat.embed/tomcat-embed-el/tomcat-reflection.json' is experimental and must be enabled via '-H:+UnlockExperimentalVMOptions' in the future.\nWarning: The option '-H:ResourceConfigurationResources=META-INF/native-image/org.apache.tomcat.embed/tomcat-embed-el/tomcat-resource.json' is experimental and must be enabled via '-H:+UnlockExperimentalVMOptions' in the future.\nWarning: Please re-evaluate whether any experimental option is required, and either remove or unlock it. The build output lists all active experimental options, including where they come from and possible alternatives. If you think an experimental option should be considered as stable, please file an issue.\n========================================================================================================================\nGraalVM Native Image: Generating 'native-image-demo' (executable)...\n========================================================================================================================\n[1/8] Initializing...                                                                                    (3.7s @ 0.17GB)\n Java version: 21.0.2+14-LTS, vendor version: Liberica-NIK-23.1.2-1\n Graal compiler: optimization level: 2, target machine: x86-64-v3\n C compiler: gcc (linux, x86_64, 11.4.0)\n Garbage collector: Serial GC (max heap size: 80% of RAM)\n 2 user-specific feature(s):\n - com.oracle.svm.thirdparty.gson.GsonFeature\n - org.springframework.aot.nativex.feature.PreComputeFieldFeature\n------------------------------------------------------------------------------------------------------------------------\n 2 experimental option(s) unlocked:\n - '-H:ResourceConfigurationResources' (origin(s): 'META-INF/native-image/org.apache.tomcat.embed/tomcat-embed-el/native-image.properties' in 'file:///home/light/.m2/repository/org/apache/tomcat/embed/tomcat-embed-el/10.1.19/tomcat-embed-el-10.1.19.jar', 'META-INF/native-image/org.apache.tomcat.embed/tomcat-embed-programmatic/native-image.properties' in 'file:///home/light/.m2/repository/org/apache/tomcat/experimental/tomcat-embed-programmatic/10.1.19/tomcat-embed-programmatic-10.1.19.jar')\n - '-H:ReflectionConfigurationResources' (origin(s): 'META-INF/native-image/org.apache.tomcat.embed/tomcat-embed-el/native-image.properties' in 'file:///home/light/.m2/repository/org/apache/tomcat/embed/tomcat-embed-el/10.1.19/tomcat-embed-el-10.1.19.jar', 'META-INF/native-image/org.apache.tomcat.embed/tomcat-embed-programmatic/native-image.properties' in 'file:///home/light/.m2/repository/org/apache/tomcat/experimental/tomcat-embed-programmatic/10.1.19/tomcat-embed-programmatic-10.1.19.jar')\n------------------------------------------------------------------------------------------------------------------------\nBuild resources:\n - 8.84GB of memory (75.6% of 11.69GB system memory, determined at start)\n - 20 thread(s) (100.0% of 20 available processor(s), determined at start)\nSLF4J(W): No SLF4J providers were found.\nSLF4J(W): Defaulting to no-operation (NOP) logger implementation\nSLF4J(W): See https://www.slf4j.org/codes.html#noProviders for further details.\n[2/8] Performing analysis...  [******]                                                                 (126.9s @ 2.36GB)\nGC warning: 91.0s spent in 25 GCs during the last stage, taking up 71.60% of the time.\n            Please ensure more than 4.80GB of memory is available for Native Image\n            to reduce GC overhead and improve image build time.\n   16,213 reachable types   (89.3% of   18,150 total)\n   24,547 reachable fields  (64.6% of   37,984 total)\n   77,251 reachable methods (62.0% of  124,676 total)\n    5,127 types,   544 fields, and 5,506 methods registered for reflection\n       62 types,    63 fields, and    55 methods registered for JNI access\n        4 native libraries: dl, pthread, rt, z\n[3/8] Building universe...                                                                               (4.5s @ 2.30GB)\n[4/8] Parsing methods...      [**]                                                                       (3.4s @ 1.85GB)\n[5/8] Inlining methods...     [****]                                                                    (11.6s @ 1.44GB)\n[6/8] Compiling methods...    [*******]                                                                 (53.6s @ 3.05GB)\n[7/8] Layouting methods...    [*******]                                                                 (50.0s @ 1.40GB)\nGC warning: 45.8s spent in 2 GCs during the last stage, taking up 91.68% of the time.\n            Please ensure more than 5.19GB of memory is available for Native Image\n            to reduce GC overhead and improve image build time.\n[8/8] Creating image...       [*********]                                                               (86.4s @ 2.08GB)\n  37.01MB (47.35%) for code area:    49,258 compilation units\n  38.32MB (49.03%) for image heap:  402,774 objects and 298 resources\n   2.83MB ( 3.62%) for other data\n  78.16MB in total\n------------------------------------------------------------------------------------------------------------------------\nTop 10 origins of code area:                                Top 10 object types in image heap:\n  13.94MB java.base                                           11.16MB byte[] for code metadata\n   3.72MB java.xml                                             5.56MB byte[] for java.lang.String\n   3.39MB tomcat-embed-programmatic-10.1.19.jar                3.87MB java.lang.Class\n   1.99MB jackson-databind-2.15.4.jar                          3.77MB java.lang.String\n   1.53MB spring-core-6.1.5.jar                                1.87MB byte[] for embedded resources\n   1.47MB svm.jar (Native Image)                               1.36MB com.oracle.svm.core.hub.DynamicHubCompanion\n   1.38MB spring-boot-3.2.4.jar                              991.58kB byte[] for reflection metadata\n 938.27kB spring-beans-6.1.5.jar                             937.96kB byte[] for general heap data\n 927.88kB spring-web-6.1.5.jar                               779.31kB java.lang.String[]\n 884.53kB spring-webmvc-6.1.5.jar                            608.72kB java.util.HashMap$Node\n   6.57MB for 67 more packages                                 7.49MB for 3514 more object types\nWarning: The log4j library has been detected, but the version is unavailable. Due to Log4Shell, please ensure log4j is at version 2.17.1 or later.\n------------------------------------------------------------------------------------------------------------------------\nRecommendations:\n INIT: Adopt '--strict-image-heap' to prepare for the next GraalVM release.\n HEAP: Set max heap for improved and more predictable memory usage.\n CPU:  Enable more CPU features with '-march=native' for improved performance.\n------------------------------------------------------------------------------------------------------------------------\n                       155.9s (45.7% of total time) in 62 GCs | Peak RSS: 5.24GB | CPU load: 8.13\n------------------------------------------------------------------------------------------------------------------------\nProduced artifacts:\n /home/light/native-image/native-image-demo/target/native-image-demo (executable)\n========================================================================================================================\nFinished generating 'native-image-demo' in 5m 41s.\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  09:03 min\n[INFO] Finished at: 2024-04-08T11:53:25+08:00\n[INFO] ------------------------------------------------------------------------\n"})}),"\n",(0,a.jsx)(n.p,{children:"target\u76ee\u5f55\u7ed3\u679c\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"tree -L 1 ./target/\n\n./target/\n\u251c\u2500\u2500 classes\n\u251c\u2500\u2500 generated-sources\n\u251c\u2500\u2500 graalvm-reachability-metadata\n\u251c\u2500\u2500 maven-archiver\n\u251c\u2500\u2500 maven-status\n\u251c\u2500\u2500 native-image-demo\n\u251c\u2500\u2500 native-image-demo-0.0.1-SNAPSHOT.jar\n\u251c\u2500\u2500 native-image-demo-0.0.1-SNAPSHOT.jar.original\n\u2514\u2500\u2500 spring-aot\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u5176\u4e2d\u8fd9\u4e2a\u4e0d\u5e26",(0,a.jsx)(n.code,{children:".jar"}),"\u540e\u7f00\u7684\u5c31\u662f\u6700\u7ec8\u7684\u539f\u751f\u955c\u50cf\uff0c\u5e76\u4e14Native Image\u662f\u4e0d\u652f\u6301\u8de8\u5e73\u53f0\u7684\uff0c\u5b83\u53ea\u80fd\u5728ARM\u67b6\u6784\u7684macOS\u4e2d\u8fd0\u884c\uff08\u53d7\u9650\u4e8e\u7b14\u8005\u7684\u7f16\u8bd1\u73af\u5883\uff09\u3002\u53ef\u4ee5\u53d1\u73b0\u5b83\uff08\u89c1\u4e0a\u56fe\u4e2d\u7684",(0,a.jsx)(n.code,{children:"target/native-image-demo"}),"\uff0c\u5b83\u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6267\u884c\u6587\u4ef6\uff09\u7684\u4f53\u79ef\u6bd4",(0,a.jsx)(n.code,{children:"executable jar"}),"\u5927\u597d\u51e0\u500d\u3002\u53c2\u7167SpringBoot\u7684\u5b98\u65b9\u6587\u6863\uff0c\u7ecf\u8fc7AOT\u7f16\u8bd1\u7684SpringBoot\u5e94\u7528\u4f1a\u751f\u6210\u4e0b\u9762\u7684\u6587\u4ef6\uff1a"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Java\u6e90\u4ee3\u7801"}),"\n",(0,a.jsx)(n.li,{children:"\u5b57\u8282\u7801\uff08\u4f8b\u5982\u52a8\u6001\u4ee3\u7406\u7f16\u8bd1\u540e\u7684\u4ea7\u7269\u7b49\uff09"}),"\n",(0,a.jsxs)(n.li,{children:["GraalVM\u8bc6\u522b\u7684\u63d0\u793a\u6587\u4ef6\uff1a","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u8d44\u6e90\u63d0\u793a\u6587\u4ef6\uff08resource-config.json\uff09"}),"\n",(0,a.jsx)(n.li,{children:"\u53cd\u5c04\u63d0\u793a\u6587\u4ef6\uff08reflect-config.json\uff09"}),"\n",(0,a.jsx)(n.li,{children:"\u5e8f\u5217\u5316\u63d0\u793a\u6587\u4ef6\uff08serialization-config.json\uff09"}),"\n",(0,a.jsx)(n.li,{children:"Java\uff08\u52a8\u6001\uff09\u4ee3\u7406\u63d0\u793a\u6587\u4ef6\uff08proxy-config.json\uff09"}),"\n",(0,a.jsx)(n.li,{children:"JNI\u63d0\u793a\u6587\u4ef6\uff08jni-config.json\uff09"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"tree ./spring-aot/main/resources/\n\n./spring-aot/main/resources/\n\u2514\u2500\u2500 META-INF\n    \u2514\u2500\u2500 native-image\n        \u2514\u2500\u2500 com.light\n            \u2514\u2500\u2500 native-image-demo\n                \u251c\u2500\u2500 native-image.properties\n                \u251c\u2500\u2500 reflect-config.json\n                \u2514\u2500\u2500 resource-config.json\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u8fd9\u91cc\u7684\u8f93\u51fa\u975e\u6267\u884c\u5305\u4ea7\u7269\u57fa\u672c\u90fd\u5728",(0,a.jsx)(n.code,{children:"target/spring-aot"}),"\u76ee\u5f55\u4e0b\uff0c\u5176\u4ed6\u975eSpring\u6216\u8005\u9879\u76ee\u6e90\u4ee3\u7801\u76f8\u5173\u7684\u4ea7\u7269\u8f93\u51fa\u5230",(0,a.jsx)(n.code,{children:"graalvm-reachability-metadata"}),"\u76ee\u5f55\u4e2d\u3002\u6700\u540e\u53ef\u4ee5\u9a8c\u8bc1\u4e00\u4e0b\u4ea7\u51fa\u7684Native Image\uff1a"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"./target/native-image-demo\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.2.4)\n\n2024-04-08T11:54:49.344+08:00  INFO 2944 --- [native-image-demo] [           main] c.l.nativeimage.NativeImageApplication   : Starting AOT-processed NativeImageApplication using Java 21.0.2 with PID 2944 (/home/light/native-image/native-image-demo/target/native-image-demo started by light in /home/light/native-image/native-image-demo)\n2024-04-08T11:54:49.344+08:00  INFO 2944 --- [native-image-demo] [           main] c.l.nativeimage.NativeImageApplication   : No active profile set, falling back to 1 default profile: \"default\"\n2024-04-08T11:54:49.351+08:00  INFO 2944 --- [native-image-demo] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)\n2024-04-08T11:54:49.351+08:00  INFO 2944 --- [native-image-demo] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2024-04-08T11:54:49.351+08:00  INFO 2944 --- [native-image-demo] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]\n2024-04-08T11:54:49.355+08:00  INFO 2944 --- [native-image-demo] [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2024-04-08T11:54:49.355+08:00  INFO 2944 --- [native-image-demo] [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 11 ms\n2024-04-08T11:54:49.371+08:00  INFO 2944 --- [native-image-demo] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''\n2024-04-08T11:54:49.371+08:00  INFO 2944 --- [native-image-demo] [           main] c.l.nativeimage.NativeImageApplication   : Started NativeImageApplication in 0.034 seconds (process running for 0.037)\n\n\n# \u6d4b\u8bd5\u63a5\u53e3\ncurl -X GET 'http://localhost:8080/'\nindex\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u53ef\u4ee5\u770b\u5230\u542f\u52a8\u901f\u5ea6\u8fbe\u5230\u60ca\u4eba\u7684\u6beb\u79d2\u7ea7\u522b\uff0c\u5982\u679c\u5e94\u7528\u5728\u751f\u4ea7\u4e2d\u5e94\u8be5\u53ef\u4ee5\u5168\u5929\u5019\u8fd1\u4e4e\u65e0\u635f\u53d1\u5e03\u3002\u5f53\u7136\uff0c\u7406\u8bba\u4e0aNative Image\u6027\u80fd\u4e5f\u4f1a\u5927\u5e45\u5ea6\u63d0\u5347\uff0c\u4f46\u662f\u9650\u4e8e\u7bc7\u5e45\u8fd9\u91cc\u6682\u65f6\u4e0d\u8fdb\u884c\u6027\u80fd\u6d4b\u8bd5\u3002"}),"\n",(0,a.jsx)(n.h2,{id:"\u56dbwindows\u6253\u5305native-image",children:"\u56db\u3001Windows\u6253\u5305Native Image"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://www.graalvm.org/latest/docs/getting-started/windows/",children:"Installation on Windows Platforms"})}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["\u5bf9\u4e8eWindows\u7cfb\u7edf\uff0c\u9700\u8981\u5b89\u88c5",(0,a.jsx)(n.a,{href:"https://github.com/graalvm/graalvm-ce-builds/releases",children:"GraalVM JDK"}),"\u548c",(0,a.jsx)(n.a,{href:"https://visualstudio.microsoft.com/zh-hans/",children:"Visual Studio"})]}),"\n",(0,a.jsx)(n.h3,{id:"1-\u5b89\u88c5-graalvm-sdk",children:"1. \u5b89\u88c5 GraalVM SDK"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["\u4e0b\u8f7d",(0,a.jsx)(n.a,{href:"https://github.com/graalvm/graalvm-ce-builds/releases",children:"GraalVM Openjdk 21"}),"\u5b89\u88c5\u5305"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"\u89e3\u538b\u5230\u6307\u5b9a\u76ee\u5f55\u5e76\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"JAVA_HOME=D:/Develop/jdk/graalvm-openjdk-21\nGRAALVM_HOME=D:/Develop/jdk/graalvm-openjdk-21\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"\u6d4b\u8bd5"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:'PS D:\\Workspace\\Github\\sas-sample> java -version\nopenjdk version "21.0.2" 2024-01-16\nOpenJDK Runtime Environment GraalVM CE 21.0.2+13.1 (build 21.0.2+13-jvmci-23.1-b30)                  \nOpenJDK 64-Bit Server VM GraalVM CE 21.0.2+13.1 (build 21.0.2+13-jvmci-23.1-b30, mixed mode, sharing)\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"2-\u5b89\u88c5-visual-studio",children:"2. \u5b89\u88c5 Visual Studio"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["\u4e0b\u8f7d",(0,a.jsx)(n.a,{href:"https://aka.ms/vs/17/release/vs_BuildTools.exe",children:"Visual Studio BuildTools"}),"  ",(0,a.jsx)(n.a,{href:"https://visualstudio.microsoft.com/zh-hans/",children:"Visual Studio"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://visualstudio.microsoft.com/thank-you-downloading-visual-studio/?sku=BuildTools&rel=16",children:"VS 2019 BuildTools"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://aka.ms/vs/17/release/vs_BuildTools.exe",children:"VS 2022 BuildTools"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://visualstudio.microsoft.com/zh-hans/",children:"Visual Studio"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"\u53cc\u51fb\u5b89\u88c5 Visual Studio BuildTools"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["\u5728\u4e3b\u7a97\u53e3\u52fe\u9009 ",(0,a.jsx)(n.code,{children:"Desktop development with C++"}),"\uff0c\u5728\u4fa7\u8fb9\u680f\u52fe\u9009 ",(0,a.jsx)(n.code,{children:"Windows 10 SDK"}),"\uff0c\u70b9\u51fb\u5b89\u88c5"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["\u91cd\u542f\u7535\u8111\uff0c\u6253\u5f00 ",(0,a.jsx)(n.code,{children:"Visual Studio Installer"}),"\uff0c\u5728 ",(0,a.jsx)(n.code,{children:"Installed"})," Tab\u9875\u70b9\u51fb ",(0,a.jsx)(n.code,{children:"Modify"}),"\uff0c"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["\u9009\u62e9 ",(0,a.jsx)(n.code,{children:"Individual Components"}),"\uff0c\u6eda\u52a8\u6eda\u8f6e\u5230\u4e0b\u9762\uff0c\u786e\u8ba4",(0,a.jsx)(n.code,{children:"Windows 10 SDK"}),"\u5df2\u5b89\u88c5\uff0c\u5e76\u786e\u8ba4 ",(0,a.jsx)(n.code,{children:"Build Tools"})," \u5df2\u5b89\u88c5"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["\u9009\u62e9 ",(0,a.jsx)(n.code,{children:"Language"}),"\uff0c\u53bb\u6389\u4e2d\u6587\uff0c\u52fe\u9009\u82f1\u6587"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"\u914d\u7f6e\u73af\u5883\u53d8\u91cf"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"MSVC = C:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\\VC\\Tools\\MSVC\\14.39.33519\n\nWK10_INCLUDE = C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.20348.0\nWK10_LIB = C:\\Program Files (x86)\\Windows Kits\\10\\Lib\\10.0.20348.0\n \n## \u53d8\u91cf\u503c\u5fc5\u987b\u4e3aINCLUDE\u548cLIB\nINCLUDE = %WK10_INCLUDE%\\ucrt;%WK10_INCLUDE%\\um;%WK10_INCLUDE%\\shared;%MSVC%\\include\nLIB = %WK10_LIB%\\um\\x64;%WK10_LIB%\\ucrt\\x64;%MSVC%\\lib\\x64\n \n \n# \u6dfb\u52a0path\u4e2d\u6307\u5b9a MSVC cl.exe\u8def\u5f84\uff08X86\u67b6\u6784\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c32\u4f4d\uff0c\u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9009\u62e9\uff09\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\\VC\\Tools\\MSVC\\14.39.33519\\bin\\Hostx86\\x86\n \n# \u6dfb\u52a0path\u4e2d\u6307\u5b9a MSVC cl.exe\u8def\u5f84\uff08X64\u67b6\u6784\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c64\u4f4d\uff0c\u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9009\u62e9\uff09\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\\VC\\Tools\\MSVC\\14.39.33519\\bin\\Hostx64\\x64\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"3-\u6d4b\u8bd5",children:"3. \u6d4b\u8bd5"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"mvn -Pnative native:compile -Dmaven.test.skip=true\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"[INFO] --- native-maven-plugin:0.9.28:compile (default-cli) @ native-image-demo ---\n[INFO] Found GraalVM installation from GRAALVM_HOME variable.\n[INFO] [graalvm reachability metadata repository for ch.qos.logback:logback-classic:1.4.14]: Configuration directory not found. Trying latest version.\n[INFO] [graalvm reachability metadata repository for ch.qos.logback:logback-classic:1.4.14]: Configuration directory is ch.qos.logback\\logback-classic\\1.4.1\n[INFO] [graalvm reachability metadata repository for com.fasterxml.jackson.core:jackson-databind:2.15.4]: Configuration directory not found. Trying latest version.\n[INFO] [graalvm reachability metadata repository for com.fasterxml.jackson.core:jackson-databind:2.15.4]: Configuration directory is com.fasterxml.jackson.core\\jackson-databind\\2.1\n5.2\n[WARNING] Properties file at 'jar:file:///D:/Develop/repository/org/apache/tomcat/experimental/tomcat-embed-programmatic/10.1.19/tomcat-embed-programmatic-10.1.19.jar!/META-INF/nat\nive-image/org.apache.tomcat.embed/tomcat-embed-programmatic/native-image.properties' does not match the recommended 'META-INF/native-image/org.apache.tomcat.experimental/tomcat-emb\ned-programmatic/native-image.properties' layout.\n[INFO] Executing: D:\\Develop\\jdk\\graalvm-openjdk-21\\bin\\native-image.cmd @target\\tmp\\native-image-17407776575462253203.args\nWarning: The option '-H:ResourceConfigurationResources=META-INF/native-image/org.apache.tomcat.embed/tomcat-embed-programmatic/tomcat-resource.json' is experimental and must be ena\nbled via '-H:+UnlockExperimentalVMOptions' in the future.\nWarning: The option '-H:ReflectionConfigurationResources=META-INF/native-image/org.apache.tomcat.embed/tomcat-embed-programmatic/tomcat-reflection.json' is experimental and must be\n enabled via '-H:+UnlockExperimentalVMOptions' in the future.\nWarning: The option '-H:ReflectionConfigurationResources=META-INF/native-image/org.apache.tomcat.embed/tomcat-embed-el/tomcat-reflection.json' is experimental and must be enabled v\nia '-H:+UnlockExperimentalVMOptions' in the future.\nWarning: The option '-H:ResourceConfigurationResources=META-INF/native-image/org.apache.tomcat.embed/tomcat-embed-el/tomcat-resource.json' is experimental and must be enabled via '\n-H:+UnlockExperimentalVMOptions' in the future.\nWarning: Please re-evaluate whether any experimental option is required, and either remove or unlock it. The build output lists all active experimental options, including where the\ny come from and possible alternatives. If you think an experimental option should be considered as stable, please file an issue.\n========================================================================================================================\nGraalVM Native Image: Generating 'native-image-demo' (executable)...\n========================================================================================================================\nFor detailed information and explanations on the build output, visit:\nhttps://github.com/oracle/graal/blob/master/docs/reference-manual/native-image/BuildOutput.md\n------------------------------------------------------------------------------------------------------------------------\n[1/8] Initializing...                                                                                    (5.7s @ 0.12GB)\n Java version: 21.0.2+13, vendor version: GraalVM CE 21.0.2+13.1\n Graal compiler: optimization level: 2, target machine: x86-64-v3\n C compiler: cl.exe (microsoft, x64, 19.39.33523)\n Garbage collector: Serial GC (max heap size: 80% of RAM)\n 2 user-specific feature(s):\n - com.oracle.svm.thirdparty.gson.GsonFeature\n - org.springframework.aot.nativex.feature.PreComputeFieldFeature\n------------------------------------------------------------------------------------------------------------------------\n 2 experimental option(s) unlocked:\n - '-H:ResourceConfigurationResources' (origin(s): 'META-INF\\native-image\\org.apache.tomcat.embed\\tomcat-embed-el\\native-image.properties' in 'file:///D:/Develop/repository/org/apa\nche/tomcat/embed/tomcat-embed-el/10.1.19/tomcat-embed-el-10.1.19.jar', 'META-INF\\native-image\\org.apache.tomcat.embed\\tomcat-embed-programmatic\\native-image.properties' in 'file://\n/D:/Develop/repository/org/apache/tomcat/experimental/tomcat-embed-programmatic/10.1.19/tomcat-embed-programmatic-10.1.19.jar')\n - '-H:ReflectionConfigurationResources' (origin(s): 'META-INF\\native-image\\org.apache.tomcat.embed\\tomcat-embed-el\\native-image.properties' in 'file:///D:/Develop/repository/org/a\npache/tomcat/embed/tomcat-embed-el/10.1.19/tomcat-embed-el-10.1.19.jar', 'META-INF\\native-image\\org.apache.tomcat.embed\\tomcat-embed-programmatic\\native-image.properties' in 'file:\n///D:/Develop/repository/org/apache/tomcat/experimental/tomcat-embed-programmatic/10.1.19/tomcat-embed-programmatic-10.1.19.jar')\n------------------------------------------------------------------------------------------------------------------------\nBuild resources:\n - 11.86GB of memory (75.6% of 15.69GB system memory, determined at start)\n - 20 thread(s) (100.0% of 20 available processor(s), determined at start)\nSLF4J(W): No SLF4J providers were found.\nSLF4J(W): Defaulting to no-operation (NOP) logger implementation\nSLF4J(W): See https://www.slf4j.org/codes.html#noProviders for further details.\n[2/8] Performing analysis...  [******]                                                                  (39.8s @ 1.55GB)\n   16,163 reachable types   (89.8% of   17,994 total)\n   24,546 reachable fields  (64.8% of   37,895 total)\n   77,299 reachable methods (62.2% of  124,237 total)\n    5,182 types,   539 fields, and 5,523 methods registered for reflection\n       77 types,    58 fields, and    68 methods registered for JNI access\n        5 native libraries: crypt32, ncrypt, psapi, version, winhttp\n[3/8] Building universe...                                                                              (11.6s @ 1.59GB)\n[4/8] Parsing methods...      [**]                                                                       (4.3s @ 1.51GB)\n[5/8] Inlining methods...     [****]                                                                     (4.2s @ 0.88GB)\n[6/8] Compiling methods...    [*****]                                                                   (26.3s @ 2.23GB)\n[7/8] Layouting methods...    [***]                                                                      (7.7s @ 3.16GB)\n[8/8] Creating image...       [**]                                                                       (4.9s @ 1.58GB)\n  37.55MB (50.52%) for code area:    49,338 compilation units\n  36.35MB (48.91%) for image heap:  385,481 objects and 268 resources\n 437.30kB ( 0.57%) for other data\n  74.33MB in total\n------------------------------------------------------------------------------------------------------------------------\nTop 10 origins of code area:                                Top 10 object types in image heap:\n  14.04MB java.base                                           11.21MB byte[] for code metadata\n   3.75MB java.xml                                             5.43MB byte[] for java.lang.String\n   3.43MB tomcat-embed-programmatic-10.1.19.jar                3.86MB java.lang.Class\n   2.00MB jackson-databind-2.15.4.jar                          3.66MB java.lang.String\n   1.58MB svm.jar (Native Image)                               1.36MB com.oracle.svm.core.hub.DynamicHubCompanion\n   1.54MB spring-core-6.1.5.jar                                1.09MB byte[] for embedded resources\n   1.39MB spring-boot-3.2.4.jar                              992.34kB byte[] for reflection metadata\n 945.83kB spring-beans-6.1.5.jar                             864.41kB byte[] for general heap data\n 936.29kB spring-web-6.1.5.jar                               753.84kB java.lang.String[]\n 891.22kB spring-webmvc-6.1.5.jar                            579.38kB c.o.svm.core.hub.DynamicHub$ReflectionMetadata\n   6.76MB for 68 more packages                                 6.62MB for 3498 more object types\nWarning: The log4j library has been detected, but the version is unavailable. Due to Log4Shell, please ensure log4j is at version 2.17.1 or later.\n------------------------------------------------------------------------------------------------------------------------\nRecommendations:\n INIT: Adopt '--strict-image-heap' to prepare for the next GraalVM release.\n HEAP: Set max heap for improved and more predictable memory usage.\n CPU:  Enable more CPU features with '-march=native' for improved performance.\n------------------------------------------------------------------------------------------------------------------------\n                      26.3s (24.2% of total time) in 154 GCs | Peak RSS: 4.36GB | CPU load: 10.02\n------------------------------------------------------------------------------------------------------------------------\nProduced artifacts:\n D:\\Workspace\\Github\\native-image-demo\\target\\native-image-demo.exe (executable)\n========================================================================================================================\nFinished generating 'native-image-demo' in 1m 48s.\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  02:00 min\n[INFO] Finished at: 2024-04-08T16:52:25+08:00\n[INFO] ------------------------------------------------------------------------\n\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u67e5\u770btarget\u76ee\u5f55"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"dir .\\target\\\n\nMode                 LastWriteTime         Length Name\n----                 -------------         ------ ----\nd-----          2024/4/8     16:50                classes\nd-----          2024/4/8     16:50                generated-sources\nd-----          2024/4/8     16:50                generated-test-sources\nd-----          2024/4/8     16:50                graalvm-reachability-metadata\nd-----          2024/4/8     16:50                maven-archiver\nd-----          2024/4/8     16:50                maven-status\nd-----          2024/4/8     16:50                spring-aot\nd-----          2024/4/8     16:50                surefire-reports\nd-----          2024/4/8     16:50                test-classes\nd-----          2024/4/8     16:50                test-ids\nd-----          2024/4/8     16:50                tmp\n-a----          2024/4/8     16:50       18336361 native-image-demo-0.0.1-SNAPSHOT.jar\n-a----          2024/4/8     16:50         136578 native-image-demo-0.0.1-SNAPSHOT.jar.original\n-a----          2024/4/8     16:52       77938688 native-image-demo.exe\n\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u5c0f\u7ed3",children:"\u5c0f\u7ed3"}),"\n",(0,a.jsxs)(n.p,{children:["\u9274\u4e8eSpringBoot3.x\u7684\u6b63\u5f0f\u7248\u5df2\u7ecf\u63a8\u51fa\u4e00\u6bb5\u65f6\u95f4\uff0c\u4ece\u6587\u6863\u4e0a\u770b\uff0cNative Image\u4f7f\u7528\u7684\u6280\u672f\u5df2\u7ecf\u76f8\u5bf9\u6210\u719f\uff0c\u53ef\u4ee5\u653e\u5fc3\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u3002\u5f53\u7136\uff0cNative Image\u76ee\u524d\u8fd8\u5b58\u5728\u4e00\u4e9b\u5c40\u9650\u6027\u4f1a\u8ba9\u4e00\u4e9b\u7ec4\u4ef6\u5b8c\u5168\u65e0\u6cd5\u4f7f\u7528\u6216\u8005\u90e8\u5206\u529f\u80fd\u53d7\u9650\uff08\u53c2\u8003",(0,a.jsx)(n.a,{href:"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-with-GraalVM",children:"Spring Boot with GraalVM"}),"\uff09\uff0c\u5e0c\u671b\u8fd9\u4e9b\u95ee\u9898\u6216\u8005\u5c40\u9650\u6027\u6709\u4e00\u5929\u80fd\u591f\u7a81\u7834\u8ba9\u6240\u6709JVM\u5e94\u7528\u8fce\u6765\u4e00\u6b21\u6027\u80fd\u98de\u8dc3\u3002"]}),"\n",(0,a.jsx)(n.h2,{id:"\u5e38\u89c1\u62a5\u9519",children:"\u5e38\u89c1\u62a5\u9519"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://blog.csdn.net/lizhou828/article/details/124764765",children:"Quarkus\u521d\u4f53\u9a8c--2.9.0.Final\u7248\u672c\uff08Windows10\u7cfb\u7edf 64\u4f4d\uff09"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://blog.csdn.net/OpenGao/article/details/128273474",children:"SpringBoot3.0 Native\u6784\u5efa"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://blog.csdn.net/qq_27935091/article/details/129981470",children:"\u4f7f\u7528GraalVM native-image \u7f16\u8bd1SpringBoot3\u5168\u8fc7\u7a0b"})}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"1-\u5728windows\u4e0b\u6267\u884c\u6253\u5305\u62a5\u9519-returned-non-zero-result",children:["1. \u5728Windows\u4e0b\u6267\u884c\u6253\u5305\u62a5\u9519 ",(0,a.jsx)(n.code,{children:"returned non-zero result"})]}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Execution of D:\\Develop\\jdk\\graalvm-openjdk-21\\bin\\native-image.cmd @target\\tmp\\native-image-11336441505834086013.args returned non-zero result"})}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["\u53c2\u8003: ",(0,a.jsx)(n.a,{href:"https://blog.csdn.net/OpenGao/article/details/128273474",children:"https://blog.csdn.net/OpenGao/article/details/128273474"})]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\u4e0d\u80fd\u4f7f\u7528idea\u7684maven\u63d2\u4ef6\u8fdb\u884c\u7f16\u8bd1,\u9700\u8981\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"x86 Native Tools Command Prompt for VS 2022"}),"\u5728\u9879\u76ee\u8def\u5f84\u4e0b\u6267\u884cmaven\u64cd\u4f5c"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"mvn -Pnative native:compile\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsxs)(n.li,{children:["\u6216\u8005\u4fee\u6539 ",(0,a.jsx)(n.code,{children:"target/tmp/native-image-11336441505834086013.args"})," \u914d\u7f6e\u6587\u4ef6\uff0c\u5c06\u5176\u4e2d\u7684 ",(0,a.jsx)(n.code,{children:"\\\\"})," \u5168\u90e8\u6539\u4e3a ",(0,a.jsx)(n.code,{children:"/"}),"\uff0c\u7136\u540e\u518d\u6b21\u6267\u884c"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"D:\\Develop\\jdk\\graalvm-openjdk-21\\bin\\native-image.cmd @target\\tmp\\native-image-11336441505834086013.args\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"2-native-image-building-on-windows-currently-only-supports-target-architecture-amd64-32-bit-architecture-x86-unsupported",children:["2. ",(0,a.jsx)(n.code,{children:"Native-image building on Windows currently only supports target architecture: AMD64 (32-bit architecture x86 unsupported)"})]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Visual Studio \u9700\u8981\u8bed\u8a00\u4e3a\u82f1\u6587"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["\u53c2\u8003: ",(0,a.jsx)(n.a,{href:"https://blog.csdn.net/lizhou828/article/details/124764765",children:"https://blog.csdn.net/lizhou828/article/details/124764765"})]}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Error: Native-image building on Windows currently only supports target architecture: AMD64 (32-bit architecture x86 unsupported)\nError: To prevent native-toolchain checking provide command-line option -H:-CheckToolchain\nError: Use -H:+ReportExceptionStackTraces to print stacktrace of underlying exception"}),"\n"]}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"\u9700\u8981\u914d\u7f6eVisual Studio\u73af\u5883\u53d8\u91cf"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"MSVC = C:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\\VC\\Tools\\MSVC\\14.39.33519\n\nWK10_INCLUDE = C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.20348.0\nWK10_LIB = C:\\Program Files (x86)\\Windows Kits\\10\\Lib\\10.0.20348.0\n \n## \u53d8\u91cf\u503c\u5fc5\u987b\u4e3aINCLUDE\u548cLIB\nINCLUDE = %WK10_INCLUDE%\\ucrt;%WK10_INCLUDE%\\um;%WK10_INCLUDE%\\shared;%MSVC%\\include\nLIB = %WK10_LIB%\\um\\x64;%WK10_LIB%\\ucrt\\x64;%MSVC%\\lib\\x64\n \n \n# \u6dfb\u52a0path\u4e2d\u6307\u5b9a MSVC cl.exe\u8def\u5f84\uff08X86\u67b6\u6784\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c32\u4f4d\uff0c\u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9009\u62e9\uff09\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\\VC\\Tools\\MSVC\\14.39.33519\\bin\\Hostx86\\x86\n \n# \u6dfb\u52a0path\u4e2d\u6307\u5b9a MSVC cl.exe\u8def\u5f84\uff08X64\u67b6\u6784\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c64\u4f4d\uff0c\u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9009\u62e9\uff09\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\\VC\\Tools\\MSVC\\14.39.33519\\bin\\Hostx64\\x64\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"3-error-main-entry-point-class-xxx-neither-found-on-classpath-yyy-nor-modulepath-zzz",children:"3. Error: Main entry point class 'xxx' neither found on classpath: 'yyy' nor modulepath: 'zzz'"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"\u89c1github issue"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://github.com/graalvm/native-build-tools/issues/213",children:"https://github.com/graalvm/native-build-tools/issues/213"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://github.com/oracle/graal/issues/6127",children:"https://github.com/oracle/graal/issues/6127"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://github.com/oracle/graal/issues/7501",children:"https://github.com/oracle/graal/issues/7501"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"\u5b9e\u6d4b\u4e0d\u80fd\u4f7f\u7528execution goal compile-no-fork"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<plugin>\n\t<groupId>org.graalvm.buildtools</groupId>\n\t<artifactId>native-maven-plugin</artifactId>\n\t\x3c!--<executions>\n\t\t<execution>\n\t\t\t<id>build-native</id>\n\t\t\t<goals>\n\t\t\t\t<goal>compile-no-fork</goal>\n\t\t\t</goals>\n\t\t\t<phase>package</phase>\n\t\t</execution>\n\t</executions>--\x3e\n\t<configuration>\n\t\t<imageName>${project.artifactId}</imageName>\n\t\t<mainClass>com.light.sas.AuthApplication</mainClass>\n\t\t<skipNativeTests>true</skipNativeTests>\n\t\t<buildArgs combine.children="append">\n\t\t\t<buildArg>--no-fallback</buildArg>\n\t\t\t<buildArg>--enable-url-protocols=http</buildArg>\n\t\t\t<buildArg>--features=com.light.sas.config.natives.LambdaRegistrationFeature</buildArg>\n\t\t\t<buildArg>--initialize-at-run-time=sun.net.dns.ResolverConfigurationImpl</buildArg>\n\t\t</buildArgs>\n\t</configuration>\n</plugin>\n'})})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>s});var a=t(96540);const i={},r=a.createContext(i);function o(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);