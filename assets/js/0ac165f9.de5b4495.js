"use strict";(self.webpackChunklight_docusaurus=self.webpackChunklight_docusaurus||[]).push([[1929],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),c=p(n),g=r,m=c["".concat(o,".").concat(g)]||c[g]||u[g]||i;return n?a.createElement(m,l(l({ref:t},d),{},{components:n})):a.createElement(m,l({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=g;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[c]="string"==typeof e?e:r,l[1]=s;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},7351:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const i={},l=void 0,s={unversionedId:"redis/Distrubute-Cache-Middleware-Hazelcast-Redis-Compare",id:"redis/Distrubute-Cache-Middleware-Hazelcast-Redis-Compare",title:"Distrubute-Cache-Middleware-Hazelcast-Redis-Compare",description:"- \u5206\u5e03\u5f0f\u7f13\u5b58\u4e2d\u95f4\u4ef6\u2014\u2014Redis vs. Hazelcast",source:"@site/middleware/redis/Distrubute-Cache-Middleware-Hazelcast-Redis-Compare.md",sourceDirName:"redis",slug:"/redis/Distrubute-Cache-Middleware-Hazelcast-Redis-Compare",permalink:"/light-docusaurus/middleware/redis/Distrubute-Cache-Middleware-Hazelcast-Redis-Compare",draft:!1,editUrl:"https://github.com/lorchr/light-docusaurus/tree/main/middleware/redis/Distrubute-Cache-Middleware-Hazelcast-Redis-Compare.md",tags:[],version:"current",lastUpdatedBy:"liuhui",lastUpdatedAt:1697531923,formattedLastUpdatedAt:"2023\u5e7410\u670817\u65e5",frontMatter:{},sidebar:"middleware",previous:{title:"Build-Redis-Cluster-With-Docker-Compose",permalink:"/light-docusaurus/middleware/redis/Build-Redis-Cluster-With-Docker-Compose"},next:{title:"Feed-Stream-System",permalink:"/light-docusaurus/middleware/redis/Feed-Stream-System"}},o={},p=[{value:"\u4e3a\u4ec0\u4e48\u9700\u8981\u7f13\u5b58\uff1f",id:"\u4e3a\u4ec0\u4e48\u9700\u8981\u7f13\u5b58",level:2},{value:"\u5206\u5e03\u5f0f\u7f13\u5b58",id:"\u5206\u5e03\u5f0f\u7f13\u5b58",level:2},{value:"Hazelcast",id:"hazelcast",level:2},{value:"\u6570\u636e\u7ed3\u6784",id:"\u6570\u636e\u7ed3\u6784",level:3},{value:"\u6301\u4e45\u5316",id:"\u6301\u4e45\u5316",level:3},{value:"\u96c6\u6210",id:"\u96c6\u6210",level:3},{value:"Redis",id:"redis",level:2},{value:"\u6570\u636e\u7ed3\u6784",id:"\u6570\u636e\u7ed3\u6784-1",level:3},{value:"\u6301\u4e45\u5316",id:"\u6301\u4e45\u5316-1",level:3},{value:"\u96c6\u6210",id:"\u96c6\u6210-1",level:3},{value:"redisTemplate\u3001jedis\u3001lettuce\u3001redission\u5bf9\u6bd4",id:"redistemplatejedislettuceredission\u5bf9\u6bd4",level:2},{value:"redission",id:"redission",level:2}],d={toc:p},c="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(c,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://blog.csdn.net/Amber_yao/article/details/128644334"},"\u5206\u5e03\u5f0f\u7f13\u5b58\u4e2d\u95f4\u4ef6\u2014\u2014Redis vs. Hazelcast"))),(0,r.kt)("h2",{id:"\u4e3a\u4ec0\u4e48\u9700\u8981\u7f13\u5b58"},"\u4e3a\u4ec0\u4e48\u9700\u8981\u7f13\u5b58\uff1f"),(0,r.kt)("p",null,"\u4f7f\u7528\u7f13\u5b58\u4e3b\u8981\u662f\u4e3a\u4e86\u63d0\u5347\u7528\u6237\u4f53\u9a8c\u4ee5\u53ca\u5e94\u5bf9\u66f4\u591a\u7684\u7528\u6237\u3002\u4e3b\u8981\u6709\u4e24\u4e2a\u7528\u9014\uff1a\u9ad8\u6027\u80fd\u548c\u9ad8\u5e76\u53d1\n",(0,r.kt)("strong",{parentName:"p"},"\u9ad8\u6027\u80fd\uff1a")," \u5bf9\u4e8e\u4e00\u4e9b\u9700\u8981\u590d\u6742\u64cd\u4f5c\u8017\u65f6\u67e5\u51fa\u6765\u7684\u7ed3\u679c\uff0c\u8bbf\u95ee\u7ed3\u679c\u5c5e\u4e8e\u9ad8\u9891\u8bf7\u6c42\u6570\u636e\u4e14\u786e\u5b9a\u4e0d\u4f1a\u7ecf\u5e38\u6539\n\u53d8\uff0c\u53ef\u4ee5\u5c06\u67e5\u8be2\u51fa\u6765\u7684\u7ed3\u679c\u653e\u5728\u7f13\u5b58\u4e2d\uff0c\u64cd\u4f5c\u7f13\u5b58\u5c31\u76f8\u5f53\u4e8e\u76f4\u63a5\u64cd\u4f5c\u5185\u5b58\uff0c\u901f\u5ea6\u5f88\u5feb\uff0c\u4e0d\u8fc7\u8981\u6ce8\u610f\u4fdd\n\u6301\u6570\u636e\u5e93\u548c\u7f13\u5b58\u4e2d\u6570\u636e\u7684\u4e00\u81f4\u6027\u3002\n",(0,r.kt)("strong",{parentName:"p"},"\u9ad8\u5e76\u53d1\uff1a")," \u5f53QPS\u8f83\u9ad8\u662f\uff0c\u53ef\u4ee5\u8003\u8651\u5c06\u4e00\u90e8\u5206\u8bf7\u6c42\u76f4\u63a5\u5230\u7f13\u5b58\u800c\u4e0d\u7528\u7ecf\u8fc7\u6570\u636e\u5e93\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7684\u5e76\u53d1\u6027\u3002"),(0,r.kt)("h2",{id:"\u5206\u5e03\u5f0f\u7f13\u5b58"},"\u5206\u5e03\u5f0f\u7f13\u5b58"),(0,r.kt)("p",null,"\u5206\u5e03\u5f0f\u7f13\u5b58\u4e3b\u8981\u89e3\u51b3\u7684\u662f\u5355\u673a\u7f13\u5b58\u7684\u5bb9\u91cf\u53d7\u670d\u52a1\u5668\u9650\u5236\u5e76\u4e14\u65e0\u6cd5\u4fdd\u5b58\u901a\u7528\u7684\u4fe1\u606f\u3002\u56e0\u4e3a\uff0c\u672c\u5730\u7f13\u5b58\n\u53ea\u5728\u5f53\u524d\u670d\u52a1\u91cc\u6709\u6548\uff0c\u5982\u679c\u90e8\u7f72\u4e86\u4e24\u4e2a\u76f8\u540c\u7684\u670d\u52a1\uff0c\u4ed6\u4eec\u4e24\u8005\u4e4b\u95f4\u7684\u7f13\u5b58\u6570\u636e\u662f\u65e0\u6cd5\u5171\u540c\u7684\u3002"),(0,r.kt)("h2",{id:"hazelcast"},"Hazelcast"),(0,r.kt)("p",null,"Hazelcast \u5206\u4e3a\u5f00\u6e90\u7248\u548c\u5546\u7528\u7248\uff0c\u5f00\u6e90\u7248\u672c\u9075\u5faa Apache License 2.0 \u5f00\u6e90\u534f\u8bae\u53ef\u4ee5\u514d\u8d39\u4f7f\u7528\uff0c\u5546\u7528\n\u7248\u672c\u9700\u8981\u83b7\u53d6\u7279\u5b9a\u7684License\u3002\u4e24\u8005\u4e4b\u95f4\u6700\u5927\u7684\u533a\u522b\u5728\u4e8e:\u5546\u7528\u7248\u672c\u63d0\u4f9b\u4e86\u6570\u636e\u7684\u9ad8\u5bc6\u5ea6\u5b58\u50a8\u3002\nJVM\u4e2d\u6709\u7279\u5b9a\u7684GC\u673a\u5236\uff0c\u65e0\u8bba\u6570\u636e\u662f\u5728\u5806\u4e2d\u8fd8\u662f\u6808\u4e2d\uff0c\u53ea\u8981\u53d1\u73b0\u65e0\u6548\u5f15\u7528\u7684\u6570\u636e\u5757\uff0c\u5c31\u6709\u53ef\u80fd\u88ab\u56de\n\u6536\u3002\u800cHazelcast\u7684\u5206\u5e03\u5f0f\u6570\u636e\u90fd\u5b58\u653e\u5728JVM\u7684\u5185\u5b58\u4e2d\uff0c\u9891\u7e41\u7684\u8bfb\u5199\u6570\u636e\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684GC\u5f00\u9500\u3002\n\u4f7f\u7528\u5546\u4e1a\u7248\u7684Hazelcast\u4f1a\u62e5\u6709\u9ad8\u5bc6\u5ea6\u5b58\u50a8\u7684\u7279\u6027\uff0c\u5927\u5927\u964d\u4f4eJVM\u7684\u5185\u5b58\u5f00\u9500\uff0c\u4ece\u800c\u964d\u4f4eGC\u5f00\u9500\u3002\n\u8be6\u89e3\u53ef\u770b\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://docs.hazelcast.org/docs/3.10.4/manual/html-single/index.html#preface"},"https://docs.hazelcast.org/docs/3.10.4/manual/html-single/index.html#preface")),(0,r.kt)("h3",{id:"\u6570\u636e\u7ed3\u6784"},"\u6570\u636e\u7ed3\u6784"),(0,r.kt)("p",null,"Hazelcast\u63d0\u4f9b\u4e86\u5f88\u591a\u901a\u7528\u6570\u636e\u7ed3\u6784\u7684\u5206\u5e03\u5f0f\u5b9e\u73b0\u3002\u9488\u5bf9\u6bcf\u4e00\u79cd\u4e0d\u540c\u7684\u5ba2\u6237\u7aef\u8bed\u8a00\uff0cHazelcast\u90fd\u5c3d\u91cf\u6a21\n\u62df\u8be5\u8bed\u8a00\u539f\u751f\u63a5\u53e3\uff0cHazelcast \u63d0\u4f9b\u4e86 Map\u3001Queue\u3001MultiMap\u3001Set\u3001List\u3001Semaphore\u3001Atomic \u7b49\n\u5e38\u7528\u63a5\u53e3\u7684\u5206\u5e03\u5f0f\u5b9e\u73b0\u3002"),(0,r.kt)("h3",{id:"\u6301\u4e45\u5316"},"\u6301\u4e45\u5316"),(0,r.kt)("p",null,"Hazelcast \u4f1a\u4f7f\u7528\u54c8\u5e0c\u7b97\u6cd5\u5bf9\u6570\u636e\u8fdb\u884c\u5206\u533a\uff0c\u6bd4\u5982\u5bf9\u4e8e\u4e00\u4e2a\u7ed9\u5b9a\u7684map\u4e2d\u7684\u952e\uff0c\u6216\u8005topic\u548clist\u4e2d\u7684\u5bf9\n\u8c61\u540d\u79f0\uff0c\u5206\u533a\u5b58\u50a8\u7684\u8fc7\u7a0b\u5982\u4e0b:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5148\u5e8f\u5217\u5316\u6b64\u952e\u6216\u5bf9\u8c61\u540d\u79f0\uff0c\u5f97\u5230\u4e00\u4e2abyte\u6570\u7ec4\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u7136\u540e\u5bf9\u4e0a\u9762\u5f97\u5230\u7684byte\u6570\u7ec4\u8fdb\u884c\u54c8\u5e0c\u8fd0\u7b97\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u518d\u8fdb\u884c\u53d6\u6a21\u540e\u7684\u503c\u5373\u4e3a\u5206\u533a\u53f7\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u6700\u540e\u6bcf\u4e2a\u8282\u70b9\u7ef4\u62a4\u4e00\u4e2a\u5206\u533a\u8868\uff0c\u5b58\u50a8\u7740\u5206\u533a\u53f7\u4e0e\u8282\u70b9\u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u8fd9\u6837\u6bcf\u4e2a\u8282\u70b9\u90fd\u77e5\u9053\u5982\u4f55\u83b7\u53d6\u6570\u636e\u3002")),(0,r.kt)("h3",{id:"\u96c6\u6210"},"\u96c6\u6210"),(0,r.kt)("p",null,"Hazelcast\u7b80\u5355\u6613\u7528\uff0cHazelcast \u5b9e\u73b0\u5e76\u6269\u5c55\u4e86\u8bb8\u591a java.util.concurrent \u7ed3\u6784\uff0c\u8fd9\u4f7f\u5f97\u5b83\u975e\u5e38\u6613\u4e8e\u4f7f\u7528\u548c\n\u4e0e\u4ee3\u7801\u96c6\u6210\u3002\u5728\u673a\u5668\u4e0a\u5f00\u59cb\u4f7f\u7528 Hazelcast \u7684\u914d\u7f6e\u53ea\u9700\u8981\u5c06 Hazelcast jar \u6dfb\u52a0\u5230\u6211\u4eec\u7684\u7c7b\u8def\u5f84\u4e2d\u3002"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u6dfb\u52a0\u4f9d\u8d56\uff1a")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>com.hazelcast</groupId>\n    <artifactId>hazelcast-all</artifactId>\n    <version>3.10.1</version>\n</dependency>\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"\u914d\u7f6e\u6587\u4ef6")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"spring.session.store-type=hazelcast\nhazelcast.server.cluster.ip=127.0.0.1\nhazelcast.server.cluster.port=20000\nhazelcast.server.join.timeout=10\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"\u914d\u7f6e\u7c7b")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'import com.hazelcast.config.Config;\nimport com.hazelcast.config.EvictionPolicy;\nimport com.hazelcast.config.GroupConfig;\nimport com.hazelcast.config.JoinConfig;\nimport com.hazelcast.config.MapConfig;\nimport com.hazelcast.config.MaxSizeConfig;\nimport com.hazelcast.config.MulticastConfig;\nimport com.hazelcast.config.NetworkConfig;\nimport com.hazelcast.config.TcpIpConfig;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport java.util.List;\n\n@Configuration\npublic class HazelcastConfiguration {\n\n    @Value("${hazalcast.server.cluster.ip:127.0.0.1}")\n    private List<String> clusterIps;\n\n    @Value("${hazalcast.server.cluster.port:20000}")\n    private Integer port;\n\n    @Value("${hazalcast.server.join.timeout}")\n    private Integer timeout;\n\n    @Bean\n    public Config hazelcastConfig() {\n        // \u89e3\u51b3\u540c\u9879\u76ee\u4e0b\u4e0d\u540c\u5e93\u7684\u9879\u76ee\n        GroupConfig groupConfig = new GroupConfig("hazelGroup");\n\n        Config config = new Config()\n                .setInstanceName("hazelcast-instance")\n                .addMapConfig(new MapConfig()\n                        .setName("configuration")\n                        // MAP\u5b58\u50a8\u6761\u76ee\u7684\u6700\u5927\u503c\uff0c\u9ed8\u8ba4\u4e3a0\n                        .setMaxSizeConfig(new MaxSizeConfig(200, MaxSizeConfig.MaxSizePolicy.FREE_HEAP_SIZE))\n                        // \u7f13\u5b58\u6dd8\u6c70\u7b56\u7565 NONE LRU LFU\n                        .setEvictionPolicy(EvictionPolicy.LRU)\n                        // \u9ed8\u8ba4\u7f13\u5b58\u65f6\u95f4\uff0c\u9ed8\u8ba4\u4e3a0\n                        .setTimeToLiveSeconds(-1)\n                )\n                .setGroupConfig(groupConfig);\n\n        NetworkConfig networkConfig = config.getNetworkConfig();\n        JoinConfig joinConfig = networkConfig.getJoin();\n        MulticastConfig multicastConfig = joinConfig.getMulticastConfig();\n        TcpIpConfig tcpIpConfig = joinConfig.getTcpIpConfig();\n\n        networkConfig.setPort(port);\n\n        multicastConfig.setEnabled(false);\n        \n        tcpIpConfig.setEnabled(true);\n        tcpIpConfig.setConnectionTimeoutSeconds(timeout);\n        for (String clusterIp : clusterIps) {\n            tcpIpConfig.addMember(clusterIp);\n        }\n\n        return config;\n    }\n}\n\n')),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"\u7b80\u5355\u4f7f\u7528")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'// \u6ce8\u5165Hazelcast\u5bf9\u8c61\n@Resource\nprivate HazelcastInstance hazelcastInstance;\n\n// hazelcastInstance.getXXX \u6765\u83b7\u53d6\u6216\u521b\u5efa\u5bf9\u5e94\u7684\u6570\u636e\u7ed3\u6784\u5bf9\u8c61\nhazelcastInstance.getMap("A"); // \u83b7\u53d6\u4e00\u4e2a\u5b9e\u73b0\u4e86 java.util.Map\u63a5\u53e3\u7684IMap\u5bf9\u8c61\uff0c\u5bf9\u8c61\u540d\u4e3aA\nhazelcastInstance.getSet("B"); // \u83b7\u53d6\u4e00\u4e2a\u5b9e\u73b0\u4e86 java.util.Set\u63a5\u53e3\u7684ISet\u5bf9\u8c61\uff0c\u5bf9\u8c61\u540d\u4e3aB\n')),(0,r.kt)("h2",{id:"redis"},"Redis"),(0,r.kt)("h3",{id:"\u6570\u636e\u7ed3\u6784-1"},"\u6570\u636e\u7ed3\u6784"),(0,r.kt)("p",null,"Redis \u662f\u4e00\u4e2a\u5185\u5b58\u952e\u503ckey-value \u6570\u636e\u5e93\uff0c\u4e14\u952e\u503c\u5bf9\u6570\u636e\u4fdd\u5b58\u5728\u5185\u5b58\u4e2d\uff0c\u56e0\u6b64Redis\u57fa\u4e8e\u5185\u5b58\u7684\u6570\u636e\u64cd\u4f5c\uff0c\u5176\u6548\u7387\u9ad8\uff0c\u901f\u5ea6\u5feb\uff1b\u5176\u4e2d\uff0cKey\u662fString\u7c7b\u578b\uff0cRedis \u652f\u6301\u7684 value \u7c7b\u578b\u5305\u62ec\u4e86 String\u3001List \u3001 Hash \u3001 Set \u3001 Sorted Set \u3001BitMap\u7b49\u3002"),(0,r.kt)("h3",{id:"\u6301\u4e45\u5316-1"},"\u6301\u4e45\u5316"),(0,r.kt)("p",null,"\u4e00\u79cd\u6301\u4e45\u5316\u65b9\u5f0f\u662f\u5feb\u7167\uff08Redis DataBase\uff0cRDB\uff09\uff0c\u53e6\u4e00\u79cd\u662f\u53ea\u8ffd\u52a0\u6587\u4ef6\uff08append-only file, AOF\uff09"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5feb\u7167\u6301\u4e45\u5316\uff08\u9ed8\u8ba4\u6301\u4e45\u5316\u65b9\u5f0f\uff09\uff1a")," \u5728\u4e0d\u540c\u7684\u65f6\u95f4\u70b9\uff0c\u5c06 redis \u5b58\u50a8\u7684\u6570\u636e\u751f\u6210\u5feb\u7167\u5e76\u5b58\u50a8\u5230\u78c1\u76d8\u7b49\u4ecb\u8d28\u4e0a\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53ea\u8ffd\u52a0\u6587\u4ef6\uff1a"),"\u5f00\u542f AOF \u6301\u4e45\u5316\u540e\u6bcf\u6267\u884c\u4e00\u6761\u4f1a\u66f4\u6539 Redis \u4e2d\u7684\u6570\u636e\u7684\u547d\u4ee4\uff0cRedis \u5c31\u4f1a\u5c06\u8be5\u547d\u4ee4\u5199\u5165\u786c\u76d8\u4e2d\u7684 AOF\u6587\u4ef6\u3002\u5728\u4e0b\u6b21 redis \u91cd\u65b0\u542f\u52a8\u65f6\uff0c\u6267\u884c\u4e00\u904dAOF \u6587\u4ef6\u5c31\u53ef\u4ee5\u5b9e\u73b0\u6570\u636e\u6062\u590d\u4e86\u3002AOF \u6587\u4ef6\u7684\u4fdd\u5b58\u4f4d\u7f6e\u548c RDB \u6587\u4ef6\u7684\u4f4d\u7f6e\u76f8\u540c\uff0c\u90fd\u662f\u901a\u8fc7 dir \u53c2\u6570\u8bbe\u7f6e\u7684\uff0c\u9ed8\u8ba4\u7684\u6587\u4ef6\u540d\u662f appendonly.aof\u3002"),(0,r.kt)("p",null,"Redis 4.0 \u652f\u6301 RDB \u548c AOF \u7684\u6df7\u5408\u6301\u4e45\u5316\uff08\u9ed8\u8ba4\u5173\u95ed\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u9879aof-use-rdb-preamble \u5f00\u542f\uff09\u3002"),(0,r.kt)("h3",{id:"\u96c6\u6210-1"},"\u96c6\u6210"),(0,r.kt)("p",null,"\u96c6\u6210\u65b9\u5f0f\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u662f\u96c6\u6210redis\u5b98\u65b9\u63a8\u8350\u7684jredis\u5ba2\u6237\u7aef;")),(0,r.kt)("p",null,"\u96c6\u6210\u65b9\u6cd5\u53c2\u8003\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://blog.csdn.net/weixin_45239670/article/details/113185684"},"https://blog.csdn.net/weixin_45239670/article/details/113185684")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"springboot \u81ea\u5e26\u7684redisTemplate")),(0,r.kt)("p",null,"\u6dfb\u52a0\u4f9d\u8d56\uff1a"),(0,r.kt)("p",null,"\u96c6\u6210jedis\u5ba2\u6237\u7aef"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>redis.clients</groupId>\n    <artifactId>jedis</artifactId>\n    <version>3.3.0</version>\n</dependency>\n")),(0,r.kt)("p",null,"\u4f7f\u7528springboot \u81ea\u5e26\u7684"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-data-redis</artifactId>\n</dependency>\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"\u914d\u7f6e\u6587\u4ef6")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"spring.data.redis.cluster.nodes=\nspring.data.redis.cluster.max-redirects=3\nspring.data.redis.database=1\nspring.data.redis.password=\nspring.data.redis.jedis.pool.min-idle=8\nspring.data.redis.jedis.pool.max-idle=12\nspring.data.redis.jedis.pool.max-active=1000\nspring.data.redis.jedis.pool.max-wait=2000\n")),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"\u5de5\u5177\u7c7b")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public class RedisUtil {\n\n    @Resource\n    private RedisTempalte<String, Object> redisTemplate;\n\n    public Object get(String key) {\n        return redisTemplate.opsForValue().get(key);\n    }\n\n\n     public void set(String key, Object value) {\n        return redisTemplate.opsForValue().set(key, value);\n    }\n}\n")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null},"\u6301\u4e45\u6027"),(0,r.kt)("th",{parentName:"tr",align:null},"\u4e00\u81f4\u6027"),(0,r.kt)("th",{parentName:"tr",align:null},"\u5b9e\u73b0\u8bed\u8a00"),(0,r.kt)("th",{parentName:"tr",align:null},"API"),(0,r.kt)("th",{parentName:"tr",align:null},"\u67e5\u8be2\u65b9\u6cd5"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Hazelcast"),(0,r.kt)("td",{parentName:"tr",align:null},"\u7528\u6237\u5b9a\u4e49\u7684MapStore\uff0c\u53ef\u4ee5\u662f\u6301\u4e45\u7684"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5f3a\u4e00\u81f4\u6027"),(0,r.kt)("td",{parentName:"tr",align:null},"Java"),(0,r.kt)("td",{parentName:"tr",align:null},"HTTP\u3001Java\u3001C#\u548c\u4efb\u4f55Memcache\u5ba2\u6237\u7aef"),(0,r.kt)("td",{parentName:"tr",align:null},"Get, MapReduce")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Redis"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5feb\u7167\u6301\u4e45\u5316\u548c\u53ea\u8ffd\u52a0\u6587\u4ef6\uff0c\u4e24\u8005\u53ef\u4ee5\u7ec4\u5408"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6700\u7ec8\u4e00\u81f4\u6027"),(0,r.kt)("td",{parentName:"tr",align:null},"C"),(0,r.kt)("td",{parentName:"tr",align:null},"Java, C, C#, Ruby, Perl, Scala"),(0,r.kt)("td",{parentName:"tr",align:null},"Get\uff08\u4e5f\u53d6\u51b3\u4e8e\u503c\u7ed3\u6784\uff09")))),(0,r.kt)("p",null,"Redis\u548cHazelcast \u6027\u80fd\u5bf9\u6bd4\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://hazelcast.com/blog/hazelcast-responds-to-redis-labs-benchmark/"},"https://hazelcast.com/blog/hazelcast-responds-to-redis-labs-benchmark/")," \uff08\u7531Hazelcast\u5b98\u7f51\u63d0\u4f9b\uff0c\u53ef\u80fd\u4e0d\u591f\u5ba2\u89c2\uff09"),(0,r.kt)("h2",{id:"redistemplatejedislettuceredission\u5bf9\u6bd4"},"redisTemplate\u3001jedis\u3001lettuce\u3001redission\u5bf9\u6bd4"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"redisTemplate\u662f\u57fa\u4e8e\u67d0\u4e2a\u5177\u4f53\u5b9e\u73b0\u7684\u518d\u5c01\u88c5\uff0c\u6bd4\u5982\u8bf4springBoot1.x\u65f6\uff0c\u5177\u4f53\u5b9e\u73b0\u662fjedis\uff1b\u800c\u5230\u4e86springBoot2.x\u65f6\uff0c\u5177\u4f53\u5b9e\u73b0\u53d8\u6210\u4e86lettuce\u3002\u5c01\u88c5\u7684\u597d\u5904\u5c31\u662f\u9690\u85cf\u4e86\u5177\u4f53\u7684\u5b9e\u73b0\uff0c\u4f7f\u8c03\u7528\u66f4\u7b80\u5355\uff0c\u4f46\u662f\u6709\u4eba\u6d4b\u8bd5\u8fc7jedis\u6548\u7387\u898110-30\u500d\u7684\u9ad8\u4e8eredisTemplate\u7684\u6267\u884c\u6548\u7387\uff0c\u6240\u4ee5\u5355\u4ece\u6267\u884c\u6548\u7387\u4e0a\u6765\u8bb2\uff0cjedis\u5b8c\u7206redisTemplate\u3002redisTemplate\u7684\u597d\u5904\u5c31\u662f\u57fa\u4e8espringBoot\u81ea\u52a8\u88c5\u914d\u7684\u539f\u7406\uff0c\u4f7f\u5f97\u6574\u5408redis\u65f6\u6bd4\u8f83\u7b80\u5355\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"jedis\u4f5c\u4e3a\u8001\u724c\u7684redis\u5ba2\u6237\u7aef\uff0c\u91c7\u7528\u540c\u6b65\u963b\u585e\u5f0fIO\uff0c\u91c7\u7528\u7ebf\u7a0b\u6c60\u65f6\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\u3002\u4f18\u70b9\u662f\u7b80\u5355\u3001\u7075\u6d3b\u3001api\u5168\u9762\uff0c\u7f3a\u70b9\u662f\u67d0\u4e9bredis\u9ad8\u7ea7\u529f\u80fd\u9700\u8981\u81ea\u5df1\u5c01\u88c5\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"lettuce\u4f5c\u4e3a\u65b0\u5f0f\u7684redis\u5ba2\u6237\u7aef\uff0c\u57fa\u4e8enetty\u91c7\u7528\u5f02\u6b65\u975e\u963b\u585e\u5f0fIO\uff0c\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff0c\u4f18\u70b9\u662f\u63d0\u4f9b\u4e86\u5f88\u591aredis\u9ad8\u7ea7\u529f\u80fd\uff0c\u4f8b\u5982\u96c6\u7fa4\u3001\u54e8\u5175\u3001\u7ba1\u9053\u7b49\uff0c\u7f3a\u70b9\u662fapi\u62bd\u8c61\uff0c\u5b66\u4e60\u6210\u672c\u9ad8\u3002lettuce\u597d\u662f\u597d\uff0c\u4f46\u662fjedis\u6bd4\u4ed6\u751f\u5f97\u65e9\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"redission\u4f5c\u4e3aredis\u7684\u5206\u5e03\u5f0f\u5ba2\u6237\u7aef\uff0c\u540c\u6837\u57fa\u4e8enetty\u91c7\u7528\u5f02\u6b65\u975e\u963b\u585e\u5f0fIO\uff0c\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff0c\u4f18\u70b9\u662f\u63d0\u4f9b\u4e86\u5f88\u591aredis\u7684\u5206\u5e03\u5f0f\u64cd\u4f5c\u548c\u9ad8\u7ea7\u529f\u80fd\uff0c\u7f3a\u70b9\u662fapi\u62bd\u8c61\uff0c\u5b66\u4e60\u6210\u672c\u9ad8\u3002"))),(0,r.kt)("p",null,"\u603b\u7ed3\uff1a\u5355\u673a\u5e76\u53d1\u91cf\u4f4e\u65f6\u4f18\u5148\u9009\u62e9jedis\uff0c\u5206\u5e03\u5f0f\u9ad8\u5e76\u53d1\u65f6\u4f18\u5148\u9009\u62e9redission\u3002"),(0,r.kt)("p",null,"\u56e0\u4e3ahazelcast \u7684\u5206\u5e03\u5f0f\u7279\u6027\uff0c\u4ee5\u53caredission \u7684\u7ed3\u6784\u4e0ehazelcast\u76f8\u4f3c \u56e0\u6b64\u4f7f\u7528redission"),(0,r.kt)("h2",{id:"redission"},"redission"),(0,r.kt)("p",null,"\u6dfb\u52a0\u4f9d\u8d56"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>org.redisson</groupId>\n    <artifactId>redisson</artifactId>\n    <version>3.14.1</version>\n</dependency>\n")),(0,r.kt)("p",null,"\u914d\u7f6e\u7c7b \u53ef\u53c2\u8003\u5b98\u65b9\u6587\u6863\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://github.com/redisson/redisson/wiki/%E7%9B%AE%E5%BD%95"},"https://github.com/redisson/redisson/wiki/%E7%9B%AE%E5%BD%95")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Configuration\npublic class RedissonConfiguration {\n\n    @Bean\n    public RedissonClient redissonClient(RedisProperties redisProperties) {\n        RedisProperties.Cluster cluster = redisProperties.getCluster();\n        String password = redisProperties.getPassword();\n\n        Config config = new Config();\n        if(Objects.isNull(cluster)) {\n            String[] redisUrls = cluster.getNodes().stream().map(node -> String.format("redis://%s", node)).toArray(String[]::new);\n            ClusterServersConfig clusterServersConfig = config.useClusterServers().addNodeAddress(redisUrls);\n            if(StringUtils.isNotBlank(password)) {\n                clusterServersConfig.setPassword(password);\n            }\n        } else {\n            String redisUrl = String.format("redis://%s", redisProperties.getHost(), redisProperties.getPort());\n            SingleServerConfig singleServerConfig = config.useSingleServer().setAddress(redisUrl);\n            if(StringUtils.isNotBlank(password)) {\n                singleServerConfig.setPassword(password);\n            }\n        }\n        return Redissson.create(config);\n    }\n}\n')),(0,r.kt)("p",null,"Redisson\u7684\u5206\u5e03\u5f0f\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"RMapCache")," Java\u5bf9\u8c61\u5728\u57fa\u4e8eRMap\u7684\u524d\u63d0\u4e0b\u5b9e\u73b0\u4e86\u9488\u5bf9\u5355\u4e2a\u5143\u7d20\u7684\u6dd8\u6c70\u673a\u5236\u3002\u540c\u65f6\u4ecd\u7136\u4fdd\u7559\u4e86\u5143\u7d20\u7684\u63d2\u5165\u987a\u5e8f\u3002\u6620\u5c04\u7f13\u5b58(MapCache)\u5b83\u80fd\u591f\u4fdd\u7559\u63d2\u5165\u5143\u7d20\u7684\u987a\u5e8f\uff0c\u5e76\u4e14\u53ef\u4ee5\u6307\u660e\u6bcf\u4e2a\u5143\u7d20\u7684\u8fc7\u671f\u65f6\u95f4\uff08\u4e13\u4e1a\u4e00\u70b9\u53eb\u5143\u7d20\u6dd8\u6c70\u673a\u5236\uff09\u3002\u53e6\u5916\u8fd8\u4e3a\u6bcf\u4e2a\u5143\u7d20\u63d0\u4f9b\u4e86\u76d1\u542c\u5668\uff0c\u63d0\u4f9b\u4e864\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u76d1\u542c\u5668\u3002\u6709\uff1a\u6dfb\u52a0\u3001\u8fc7\u671f\u3001\u5220\u9664\u3001\u66f4\u65b0\u56db\u5927\u4e8b\u4ef6\u3002"))}u.isMDXComponent=!0}}]);