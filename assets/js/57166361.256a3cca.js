"use strict";(self.webpackChunklight_docusaurus=self.webpackChunklight_docusaurus||[]).push([[72740],{28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>c});var s=t(96540);const l={},o=s.createContext(l);function a(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),s.createElement(o.Provider,{value:n},e.children)}},36195:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>i});const s=JSON.parse('{"id":"zh-cn/k8s/K8s-Commands","title":"K8s-Commands","description":"- k8s \u64cd\u4f5c\u547d\u4ee4 \u5408\u96c6List","source":"@site/docs/zh-cn/k8s/4-K8s-Commands.md","sourceDirName":"zh-cn/k8s","slug":"/zh-cn/k8s/K8s-Commands","permalink":"/docs/zh-cn/k8s/K8s-Commands","draft":false,"unlisted":false,"editUrl":"https://github.com/lorchr/light-docusaurus/tree/main/docs/zh-cn/k8s/4-K8s-Commands.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"troch","previous":{"title":"Build-K8s-Offline-With-RKE2","permalink":"/docs/zh-cn/k8s/Build-K8s-Offline-With-RKE2"},"next":{"title":"Build-K8s-Multi-Master-Cluster","permalink":"/docs/zh-cn/k8s/Build-K8s-Multi-Master-Cluster"}}');var l=t(74848),o=t(28453);const a={},c=void 0,d={},i=[{value:"\u4e00\u3001K8S\u6700\u5e38\u7528\u547d\u4ee4\u5982\u4e0b\uff1a",id:"\u4e00k8s\u6700\u5e38\u7528\u547d\u4ee4\u5982\u4e0b",level:2},{value:"\u4e8c\u3001k8s\u64cd\u4f5c\u547d\u4ee4\u8be6\u89e3\uff1a",id:"\u4e8ck8s\u64cd\u4f5c\u547d\u4ee4\u8be6\u89e3",level:2},{value:"1\u3001\u57fa\u7840\u64cd\u4f5c\u547d\u4ee4",id:"1\u57fa\u7840\u64cd\u4f5c\u547d\u4ee4",level:3},{value:"2\u3001\u8d44\u6e90\u76f8\u5173",id:"2\u8d44\u6e90\u76f8\u5173",level:3},{value:"3\u3001\u96c6\u7fa4\u76f8\u5173",id:"3\u96c6\u7fa4\u76f8\u5173",level:3},{value:"4\u3001Daemonsets \u76f8\u5173",id:"4daemonsets-\u76f8\u5173",level:3},{value:"5\u3001Deployments\u76f8\u5173",id:"5deployments\u76f8\u5173",level:3},{value:"6\u3001\u4e8b\u4ef6\u76f8\u5173",id:"6\u4e8b\u4ef6\u76f8\u5173",level:3},{value:"7\u3001\u65e5\u5fd7\u76f8\u5173",id:"7\u65e5\u5fd7\u76f8\u5173",level:3},{value:"8\u3001Namespace \u76f8\u5173",id:"8namespace-\u76f8\u5173",level:3},{value:"9\u3001Nodes \u76f8\u5173",id:"9nodes-\u76f8\u5173",level:3},{value:"10\u3001Pods \u64cd\u4f5c\u76f8\u5173",id:"10pods-\u64cd\u4f5c\u76f8\u5173",level:3},{value:"11\u3001Replication Controller \u76f8\u5173",id:"11replication-controller-\u76f8\u5173",level:3},{value:"12\u3001ReplicaSets \u76f8\u5173",id:"12replicasets-\u76f8\u5173",level:3},{value:"13\u3001Sercrets \u76f8\u5173",id:"13sercrets-\u76f8\u5173",level:3},{value:"14\u3001Services \u76f8\u5173",id:"14services-\u76f8\u5173",level:3},{value:"15\u3001Service Account\u76f8\u5173",id:"15service-account\u76f8\u5173",level:3},{value:"16\u3001StatefulSets \u76f8\u5173",id:"16statefulsets-\u76f8\u5173",level:3}];function r(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://www.cnblogs.com/kangao/p/17526694.html",children:"k8s \u64cd\u4f5c\u547d\u4ee4 \u5408\u96c6List"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u4e00k8s\u6700\u5e38\u7528\u547d\u4ee4\u5982\u4e0b",children:"\u4e00\u3001K8S\u6700\u5e38\u7528\u547d\u4ee4\u5982\u4e0b\uff1a"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\u83b7\u53d6pod\u4fe1\u606f\uff1a",(0,l.jsx)(n.code,{children:"kubectl get pod"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u67e5\u770b\u6307\u5b9apod\u7684\u65e5\u5fd7\u4fe1\u606f\uff1a",(0,l.jsx)(n.code,{children:"kubectl logs -f --tail(\u6700\u540e\u591a\u5c11\u884c) 500 podName(pod\u540d)"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u67e5\u770bpod\u7684\u63cf\u8ff0\u4fe1\u606f\uff1a",(0,l.jsx)(n.code,{children:"kubectl describe pod podName"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u67e5\u770b\u8282\u70b9\u4fe1\u606f\uff1a",(0,l.jsx)(n.code,{children:"kubectl get nodes"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u67e5\u770bpod\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4ee5yaml\u6216\u8005json\u683c\u5f0f\u5c55\u793a\uff1a",(0,l.jsx)(n.code,{children:"kubectl get pods -o yaml"}),"\u3001",(0,l.jsx)(n.code,{children:"kubectl get pods -o json"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u67e5\u770b\u6240\u6709\u540d\u79f0\u7a7a\u95f4\u7684pod\uff1a",(0,l.jsx)(n.code,{children:"kubectl get pod -A"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u67e5\u770b\u6307\u5b9apod\u7684\u73af\u5883\u53d8\u91cf\uff1a",(0,l.jsx)(n.code,{children:"kubectl exec podName env"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u67e5\u770b\u6240\u6709\u7684service\u4fe1\u606f\uff1a",(0,l.jsx)(n.code,{children:"kubectl get svc -A"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u67e5\u770b\u96c6\u7fa4\u8d44\u6e90\uff08ComponentStatuses\uff09\u4fe1\u606f\uff1a",(0,l.jsx)(n.code,{children:"kubectl get cs"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u67e5\u770b\u6240\u6709\u540d\u79f0\u7a7a\u95f4\uff1a",(0,l.jsx)(n.code,{children:"kubectl get ns"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u67e5\u770b\u96c6\u7fa4\u4fe1\u606f\uff1a",(0,l.jsx)(n.code,{children:"kubectl cluster-info"})," \u3001",(0,l.jsx)(n.code,{children:"kubectl cluster-info dump"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u8fdb\u5165pod\u5bb9\u5668\uff1a",(0,l.jsx)(n.code,{children:"kubectl exec -it podName -n nsName /bin/sh"})," \u3001",(0,l.jsx)(n.code,{children:"kubectl exec -it podName -n nsName /bin/bash"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u5220\u9664\u6307\u5b9a\u7684pod\uff1a",(0,l.jsx)(n.code,{children:"kubectl delete pod podName"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u5220\u9664\u6307\u5b9a\u547d\u540d\u7a7a\u95f4\u7684pod\uff1a",(0,l.jsx)(n.code,{children:"kubectl delete pod -n test podName"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u7f16\u8f91\u8d44\u6e90\uff1a",(0,l.jsx)(n.code,{children:"kubectl edit pod podName"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u83b7\u53d6pod\u8be6\u7ec6\u4fe1\u606f\uff1a",(0,l.jsx)(n.code,{children:"kubectl get pod -o wide"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u4e8ck8s\u64cd\u4f5c\u547d\u4ee4\u8be6\u89e3",children:"\u4e8c\u3001k8s\u64cd\u4f5c\u547d\u4ee4\u8be6\u89e3\uff1a"}),"\n",(0,l.jsx)(n.h3,{id:"1\u57fa\u7840\u64cd\u4f5c\u547d\u4ee4",children:"1\u3001\u57fa\u7840\u64cd\u4f5c\u547d\u4ee4"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"alias k=kubectl echo 'alias k=kubectl' >>~/.bashrc\nkubectl get pods -o=json\nkubectl get pods -o=yaml\nkubectl get pods -o=wide\nkubectl get pods -n=<namespace_name>\nkubectl create -f ./\nkubectl logs -l name=\n"})}),"\n",(0,l.jsx)(n.h3,{id:"2\u8d44\u6e90\u76f8\u5173",children:"2\u3001\u8d44\u6e90\u76f8\u5173"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# Create objects.\nkubectl create -f k8s.yaml\n\n# Create objects in all manifest files in a directory.\nkubectl create -f .\n\n# Create objects from a URL.\nkubectl create -f <'url'> \n\n# Delete an object.\nkubectl delete -f k8s.yaml\n"})}),"\n",(0,l.jsx)(n.h3,{id:"3\u96c6\u7fa4\u76f8\u5173",children:"3\u3001\u96c6\u7fa4\u76f8\u5173"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# Display endpoint information about the master and services in the cluster.\nkubectl cluster-info \n\n# Display the Kubernetes version running on the client and server.\nkubectl version \n\n# Get the configuration of the cluster.\nkubectl config view \n\n# Get a list of users.\nkubectl config view -o jsonpath='{.users[*].name}' \n\n# Display the current context.\nkubectl config current-context \n\n# Display a list of contexts.\nkubectl config get-contexts \n\n# Set the default context.\nkubectl config use-context \n\n# List the API resources that are available.\nkubectl api-resources\n\n# List the API versions that are available. kubectl get all --all-namespaces\nkubectl api-versions \n"})}),"\n",(0,l.jsx)(n.h3,{id:"4daemonsets-\u76f8\u5173",children:"4\u3001Daemonsets \u76f8\u5173"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# List one or more daemonsets.\nkubectl get daemonset \n\n# Edit and update the definition of one or more daemonset.\nkubectl edit daemonset <daemonset_name> \n\n# Delete a daemonset.\nkubectl delete daemonset <daemonset_name> \n\n# Create a new daemonset.\nkubectl create daemonset <daemonset_name> \n\n# Manage the rollout of a daemonset.\nkubectl rollout daemonset \n\n# Display the detailed state of daemonsets within a namespace.\nkubectl describe ds <daemonset_name> -n <namespace_name> \n"})}),"\n",(0,l.jsx)(n.h3,{id:"5deployments\u76f8\u5173",children:"5\u3001Deployments\u76f8\u5173"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# List one or more deployments.\nkubectl get deployment \n\n# Display the detailed state of one or more deployments.\nkubectl describe deployment <deployment_name> \n\n# Edit and update the definition of one or more deployments on the server.\nkubectl edit deployment <deployment_name> \n\n# Create a new deployment.\nkubectl create deployment <deployment_name> \n\n# Delete deployments.\nkubectl delete deployment <deployment_name> \n\n# See the rollout status of a deployment.\nkubectl rollout status deployment <deployment_name> \n\n# Perform a rolling update (K8S default), set the image of the container to a new version for a particular deployment.\nkubectl set image deployment/ =image: \n\n# Rollback a previous deployment.\nkubectl rollout undo deployment/ \n\n# Perform a replace deployment \u2014 Force replace, delete and then re-create the resource.\nkubectl replace --force -f \n"})}),"\n",(0,l.jsx)(n.h3,{id:"6\u4e8b\u4ef6\u76f8\u5173",children:"6\u3001\u4e8b\u4ef6\u76f8\u5173"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# List recent events for all resources in the system.\nkubectl get events\n\n# List Warnings only.\nkubectl get events \u2013field-selector type=Warning \n\n# List events sorted by timestamp.\nkubectl get events --sort-by=.metadata.creationTimestamp \n\n# List events but exclude Pod events.\nkubectl get events --field-selector involvedObject.kind!=Pod \n\n# Pull events for a single node with a specific name.\nkubectl get events --field-selector involvedObject.kind=Node, involvedObject.name=<node_name>\n\n# Filter out normal events from a list of events.\nkubectl get events --field-selector type!=Normal \n"})}),"\n",(0,l.jsx)(n.h3,{id:"7\u65e5\u5fd7\u76f8\u5173",children:"7\u3001\u65e5\u5fd7\u76f8\u5173"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# Print the logs for a pod.\nkubectl logs <pod_name> \n\n# Print the logs for the last 6 hours for a pod.\nkubectl logs --since=6h <pod_name> \n\n# Get the most recent 50 lines of logs.\nkubectl logs --tail=50 <pod_name> \n\n# Get logs from a service and optionally select which container.\nkubectl logs -f <service_name> [-c <$container>] \n\n# Print the logs for a pod and follow new logs.\nkubectl logs -f <pod_name> \n\n# Print the logs for a container in a pod.\nkubectl logs -c <container_name> <pod_name> \n\n# Output the logs for a pod into a file named \u2018pod.log'.\nkubectl logs <pod_name> pod.log \n\n# View the logs for a previously failed pod.\nkubectl logs --previous <pod_name> \n"})}),"\n",(0,l.jsx)(n.h3,{id:"8namespace-\u76f8\u5173",children:"8\u3001Namespace \u76f8\u5173"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# Create a namespace.\nkubectl create namespace <namespace_name> \n\n# List one or more namespaces.\nkubectl get namespace <namespace_name> \n\n# Display the detailed state of one or more namespaces.\nkubectl describe namespace <namespace_name> \n\n# Delete a namespace.\nkubectl delete namespace <namespace_name> \n\n# Edit and update the definition of a namespace.\nkubectl edit namespace <namespace_name> \n\n# Display Resource (CPU/Memory/Storage) usage for a namespace.\nkubectl top namespace <namespace_name> \n"})}),"\n",(0,l.jsx)(n.h3,{id:"9nodes-\u76f8\u5173",children:"9\u3001Nodes \u76f8\u5173"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# Update the taints on one or more nodes.\nkubectl taint node <node_name> \n\n# List one or more nodes.\nkubectl get node \n\n# Delete a node or multiple nodes.\nkubectl delete node <node_name> \n\n# Display Resource usage (CPU/Memory/Storage) for nodes.\nkubectl top node <node_name> \n\n# Pods running on a node.\nkubectl get pods -o wide | grep <node_name> \n\n# Annotate a node.\nkubectl annotate node <node_name> \n\n# Mark a node as unschedulable.\nkubectl cordon node <node_name> \n\n# Mark node as schedulable.\nkubectl uncordon node <node_name> \n\n# Drain a node in preparation for maintenance.\nkubectl drain node <node_name> \n\n# Add or update the labels of one or more nodes.\nkubectl label node \n"})}),"\n",(0,l.jsx)(n.h3,{id:"10pods-\u64cd\u4f5c\u76f8\u5173",children:"10\u3001Pods \u64cd\u4f5c\u76f8\u5173"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# List one or more pods.\nkubectl get pod \n\n# List pods Sorted by Restart Count.\nkubectl get pods --sort-by='.status.containerStatuses[0].restartCount' \n\n# Get all running pods in the namespace.\nkubectl get pods --field-selector=status.phase=Running \n\n# Delete a pod.\nkubectl delete pod <pod_name> \n\n# Display the detailed state of a pods.\nkubectl describe pod <pod_name> \n\n# Create a pod.\nkubectl create pod <pod_name> \n\n# Execute a command against a container in a pod. Read more: Using Kubectl Exec: Connect to Your Kubernetes Containers\nkubectl exec <pod_name> -c <container_name> \n\n# Get an interactive shell on a single-container pod.\nkubectl exec -it <pod_name> /bin/sh \n\n# Display Resource usage (CPU/Memory/Storage) for pods.\nkubectl top pod \n\n# Add or update the annotations of a pod.\nkubectl annotate pod <pod_name>\n\n# Add or update the label of a pod.\nkubectl label pods <pod_name> new-label= \n\n# Get pods and show labels.\nkubectl get pods --show-labels \n\n# Listen on a port on the local machine and forward to a port on a specified pod.\nkubectl port-forward : \n"})}),"\n",(0,l.jsx)(n.h3,{id:"11replication-controller-\u76f8\u5173",children:"11\u3001Replication Controller \u76f8\u5173"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# List the replication controllers.\nkubectl get rc\n\n# List the replication controllers by namespace.\nkubectl get rc --namespace=<namespace_name>\n"})}),"\n",(0,l.jsx)(n.h3,{id:"12replicasets-\u76f8\u5173",children:"12\u3001ReplicaSets \u76f8\u5173"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# List ReplicaSets.\nkubectl get replicasets \n\n# Display the detailed state of one or more ReplicaSets.\nkubectl describe replicasets <replicaset_name> \n\n# Scale a ReplicaSet.\nkubectl scale --replicas=[x] \n"})}),"\n",(0,l.jsx)(n.h3,{id:"13sercrets-\u76f8\u5173",children:"13\u3001Sercrets \u76f8\u5173"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# Create a secret.\nkubectl create secret \n\n# List secrets.\nkubectl get secrets \n\n# List details about secrets.\nkubectl describe secrets \n\n# Delete a secret.\nkubectl delete secret <secret_name> \n"})}),"\n",(0,l.jsx)(n.h3,{id:"14services-\u76f8\u5173",children:"14\u3001Services \u76f8\u5173"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# List one or more services.\nkubectl get services \n\n# Display the detailed state of a service.\nkubectl describe services \n\n# Expose a replication controller, service, deployment, or pod as a new Kubernetes service.\nkubectl expose deployment [deployment_name] \n\n# Edit and update the definition of one or more services\nkubectl edit services \n"})}),"\n",(0,l.jsx)(n.h3,{id:"15service-account\u76f8\u5173",children:"15\u3001Service Account\u76f8\u5173"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# List service accounts.\nkubectl get serviceaccounts \n\n# Display the detailed state of one or more service accounts.\nkubectl describe serviceaccounts \n\n# Replace a service account.\nkubectl replace serviceaccount \n\n# Delete a service account\nkubectl delete serviceaccount <service_account_name> \n"})}),"\n",(0,l.jsx)(n.h3,{id:"16statefulsets-\u76f8\u5173",children:"16\u3001StatefulSets \u76f8\u5173"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# List StatefulSet\nkubectl get statefulset \n\n# Delete StatefulSet only (not pods).\nkubectl delete statefulset/[stateful_set_name] --cascade=false \n"})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(r,{...e})}):r(e)}}}]);