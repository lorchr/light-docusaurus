"use strict";(self.webpackChunklight_docusaurus=self.webpackChunklight_docusaurus||[]).push([[24070],{28453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>s});var d=n(96540);const c={},l=d.createContext(c);function i(e){const r=d.useContext(l);return d.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function s(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),d.createElement(l.Provider,{value:r},e.children)}},38911:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>s,default:()=>t,frontMatter:()=>i,metadata:()=>d,toc:()=>h});const d=JSON.parse('{"id":"elastic/ES-Usage-Advice","title":"ES-Usage-Advice","description":"- \u4e00\u53e3\u6c14\u770b\u5b8c43\u4e2a\u5173\u4e8e ElasticSearch \u7684\u4f7f\u7528\u5efa\u8bae","source":"@site/middleware/elastic/2-ES-Usage-Advice.md","sourceDirName":"elastic","slug":"/elastic/ES-Usage-Advice","permalink":"/middleware/elastic/ES-Usage-Advice","draft":false,"unlisted":false,"editUrl":"https://github.com/lorchr/light-docusaurus/tree/main/middleware/elastic/2-ES-Usage-Advice.md","tags":[],"version":"current","lastUpdatedBy":"Lorchr","lastUpdatedAt":1746800534000,"sidebarPosition":2,"frontMatter":{}}');var c=n(74848),l=n(28453);const i={},s=void 0,o={},h=[{value:"\u4e00\u3001\u524d\u8a00",id:"\u4e00\u524d\u8a00",level:2},{value:"\u4e8c\u3001\u67e5\u8be2\u76f8\u5173",id:"\u4e8c\u67e5\u8be2\u76f8\u5173",level:2},{value:"1. \u5145\u5206\u5229\u7528\u7f13\u5b58",id:"1-\u5145\u5206\u5229\u7528\u7f13\u5b58",level:3},{value:"\u5206\u7247\u67e5\u8be2\u7f13\u5b58\uff08Shard Request Cache\uff09",id:"\u5206\u7247\u67e5\u8be2\u7f13\u5b58shard-request-cache",level:4},{value:"1. \u4f7f\u7528\u8fc7\u6ee4\u5668\u4e0a\u4e0b\u6587\uff08<code>Filter</code>\uff09\u66ff\u4ee3\u67e5\u8be2\u4e0a\u4e0b\u6587\uff08<code>Query</code>\uff09\u3002",id:"1-\u4f7f\u7528\u8fc7\u6ee4\u5668\u4e0a\u4e0b\u6587filter\u66ff\u4ee3\u67e5\u8be2\u4e0a\u4e0b\u6587query",level:4},{value:"2. \u53ea\u5173\u6ce8\u805a\u5408\u7ed3\u679c\u800c\u4e0d\u5173\u6ce8\u6587\u6863\u7ec6\u8282\u65f6\uff0c<code>Size</code> \u8bbe\u7f6e\u4e3a 0 \u5229\u7528\u5206\u7247\u67e5\u8be2\u7f13\u5b58\u3002",id:"2-\u53ea\u5173\u6ce8\u805a\u5408\u7ed3\u679c\u800c\u4e0d\u5173\u6ce8\u6587\u6863\u7ec6\u8282\u65f6size-\u8bbe\u7f6e\u4e3a-0-\u5229\u7528\u5206\u7247\u67e5\u8be2\u7f13\u5b58",level:4},{value:"3. \u65e5\u671f\u8303\u56f4\u67e5\u8be2\u4f7f\u7528\u7edd\u5bf9\u65f6\u95f4\u503c\u3002",id:"3-\u65e5\u671f\u8303\u56f4\u67e5\u8be2\u4f7f\u7528\u7edd\u5bf9\u65f6\u95f4\u503c",level:4},{value:"2. \u805a\u5408\u67e5\u8be2",id:"2-\u805a\u5408\u67e5\u8be2",level:3},{value:"4. \u907f\u514d\u591a\u5c42\u805a\u5408\u5d4c\u5957\u67e5\u8be2\u3002",id:"4-\u907f\u514d\u591a\u5c42\u805a\u5408\u5d4c\u5957\u67e5\u8be2",level:4},{value:"5. \u5d4c\u5957\u67e5\u8be2\u5efa\u8bae\u4f7f\u7528 Composite \u805a\u5408\u67e5\u8be2\u65b9\u5f0f\u3002",id:"5-\u5d4c\u5957\u67e5\u8be2\u5efa\u8bae\u4f7f\u7528-composite-\u805a\u5408\u67e5\u8be2\u65b9\u5f0f",level:4},{value:"6. \u907f\u514d\u5927\u805a\u5408\u67e5\u8be2\u3002",id:"6-\u907f\u514d\u5927\u805a\u5408\u67e5\u8be2",level:4},{value:"7. \u9ad8\u57fa\u6570\u573a\u666f\u5d4c\u5957\u805a\u5408\u67e5\u8be2\u5efa\u8bae\u4f7f\u7528 BFS \u641c\u7d22\u3002",id:"7-\u9ad8\u57fa\u6570\u573a\u666f\u5d4c\u5957\u805a\u5408\u67e5\u8be2\u5efa\u8bae\u4f7f\u7528-bfs-\u641c\u7d22",level:4},{value:"8. \u907f\u514d\u5bf9 text \u5b57\u6bb5\u7c7b\u578b\u4f7f\u7528\u805a\u5408\u67e5\u8be2\u3002",id:"8-\u907f\u514d\u5bf9-text-\u5b57\u6bb5\u7c7b\u578b\u4f7f\u7528\u805a\u5408\u67e5\u8be2",level:4},{value:"9. \u4e0d\u5efa\u8bae\u4f7f\u7528 bucket_sort \u8fdb\u884c\u805a\u5408\u6df1\u5206\u9875\u67e5\u8be2\u3002",id:"9-\u4e0d\u5efa\u8bae\u4f7f\u7528-bucket_sort-\u8fdb\u884c\u805a\u5408\u6df1\u5206\u9875\u67e5\u8be2",level:4},{value:"3. \u5206\u9875",id:"3-\u5206\u9875",level:3},{value:"10. \u907f\u514d\u4f7f\u7528 <code>from+size</code> \u65b9\u5f0f\u3002",id:"10-\u907f\u514d\u4f7f\u7528-fromsize-\u65b9\u5f0f",level:4},{value:"11. \u907f\u514d\u9ad8\u5b9e\u65f6\u6027&amp;\u5927\u7ed3\u679c\u96c6\u573a\u666f\u4f7f\u7528 <code>Scroll</code> \u65b9\u5f0f\u3002",id:"11-\u907f\u514d\u9ad8\u5b9e\u65f6\u6027\u5927\u7ed3\u679c\u96c6\u573a\u666f\u4f7f\u7528-scroll-\u65b9\u5f0f",level:4},{value:"12. <code>SearchAfter</code> \u5206\u9875<code>/Scroll ID/</code> \u904d\u5386\u7d22\u5f15\u4e2d\u7684\u6570\u636e\u6307\u5b9a <code>Sort</code> \u5b57\u6bb5\u8981\u4fdd\u8bc1\u552f\u4e00\u6027\uff0c\u5426\u5219\u4f1a\u9020\u6210\u5206\u9875/\u904d\u5386\u6570\u636e\u4e0d\u5b8c\u6574\u6216\u91cd\u590d\u3002",id:"12-searchafter-\u5206\u9875scroll-id-\u904d\u5386\u7d22\u5f15\u4e2d\u7684\u6570\u636e\u6307\u5b9a-sort-\u5b57\u6bb5\u8981\u4fdd\u8bc1\u552f\u4e00\u6027\u5426\u5219\u4f1a\u9020\u6210\u5206\u9875\u904d\u5386\u6570\u636e\u4e0d\u5b8c\u6574\u6216\u91cd\u590d",level:4},{value:"13. \u5efa\u8bae\u6307\u5b9a\u4e1a\u52a1\u5b57\u6bb5\u6392\u5e8f\uff0c\u4e0d\u8981\u91c7\u7528\u9ed8\u8ba4\u6253\u5206\u6392\u5e8f\u3002",id:"13-\u5efa\u8bae\u6307\u5b9a\u4e1a\u52a1\u5b57\u6bb5\u6392\u5e8f\u4e0d\u8981\u91c7\u7528\u9ed8\u8ba4\u6253\u5206\u6392\u5e8f",level:4},{value:"14. <code>Scroll</code> \u67e5\u8be2\u786e\u4fdd\u663e\u5f0f\u8c03\u7528 <code>clearScroll()</code> \u65b9\u6cd5\u6e05\u9664 <code>Scroll ID</code>\u3002",id:"14-scroll-\u67e5\u8be2\u786e\u4fdd\u663e\u5f0f\u8c03\u7528-clearscroll-\u65b9\u6cd5\u6e05\u9664-scroll-id",level:4},{value:"4. \u5176\u4ed6",id:"4-\u5176\u4ed6",level:3},{value:"15. \u6ce8\u610f <code>Must</code> \u548c <code>Should</code> \u540c\u65f6\u51fa\u73b0\u5728\u8bed\u53e5\u91cc\u7684\u65f6\u5019\uff0c<code>Should</code> \u4f1a\u5931\u6548\uff1b\u6ce8\u610f <code>Must</code> \u548c <code>Should</code> \u540c\u65f6\u51fa\u73b0\u5728\u540c\u4e00\u5c42\u7ea7\u7684 <code>bool</code> <code>\u67e5\u8be2\u65f6\uff0cShould</code> \u67e5\u8be2\u4f1a\u5931\u6548\u3002",id:"15-\u6ce8\u610f-must-\u548c-should-\u540c\u65f6\u51fa\u73b0\u5728\u8bed\u53e5\u91cc\u7684\u65f6\u5019should-\u4f1a\u5931\u6548\u6ce8\u610f-must-\u548c-should-\u540c\u65f6\u51fa\u73b0\u5728\u540c\u4e00\u5c42\u7ea7\u7684-bool-\u67e5\u8be2\u65f6should-\u67e5\u8be2\u4f1a\u5931\u6548",level:4},{value:"16. \u907f\u514d\u67e5\u8be2 <code>indexName-*</code>\u3002",id:"16-\u907f\u514d\u67e5\u8be2-indexname-",level:4},{value:"17. \u811a\u672c\u4f7f\u7528 <code>Stored</code> \u65b9\u5f0f\uff0c\u907f\u514d\u4f7f\u7528 <code>Inline</code> \u65b9\u5f0f\u3002",id:"17-\u811a\u672c\u4f7f\u7528-stored-\u65b9\u5f0f\u907f\u514d\u4f7f\u7528-inline-\u65b9\u5f0f",level:4},{value:"18. \u907f\u514d\u4f7f\u7528 <code>_all</code> \u5b57\u6bb5\u3002",id:"18-\u907f\u514d\u4f7f\u7528-_all-\u5b57\u6bb5",level:4},{value:"19. \u5efa\u8bae\u7528 Get \u67e5\u8be2\u66ff\u6362 Search \u67e5\u8be2\u3002",id:"19-\u5efa\u8bae\u7528-get-\u67e5\u8be2\u66ff\u6362-search-\u67e5\u8be2",level:4},{value:"20. \u907f\u514d\u8fdb\u884c\u591a\u7d22\u5f15\u67e5\u8be2\u3002",id:"20-\u907f\u514d\u8fdb\u884c\u591a\u7d22\u5f15\u67e5\u8be2",level:4},{value:"21. \u907f\u514d\u5355\u6b21\u53ec\u56de\u5927\u91cf\u6570\u636e\uff0c\u5efa\u8bae\u4f7f\u7528 <code>_source_includes</code> \u548c <code>_source_excludes</code> \u53c2\u6570\u6765\u5305\u542b\u6216\u6392\u9664\u5b57\u6bb5\u3002",id:"21-\u907f\u514d\u5355\u6b21\u53ec\u56de\u5927\u91cf\u6570\u636e\u5efa\u8bae\u4f7f\u7528-_source_includes-\u548c-_source_excludes-\u53c2\u6570\u6765\u5305\u542b\u6216\u6392\u9664\u5b57\u6bb5",level:4},{value:"22. \u907f\u514d\u4f7f\u7528 <code>Wildcard</code> \u8fdb\u884c\u4e2d\u7f00\u6a21\u7cca\u67e5\u8be2\u3002",id:"22-\u907f\u514d\u4f7f\u7528-wildcard-\u8fdb\u884c\u4e2d\u7f00\u6a21\u7cca\u67e5\u8be2",level:4},{value:"23. \u907f\u514d\u4f7f\u7528 <code>Scripting</code>\u3002",id:"23-\u907f\u514d\u4f7f\u7528-scripting",level:4},{value:"24. \u907f\u514d\u4f7f\u7528\u811a\u672c\u67e5\u8be2\uff08<code>Script Query</code>\uff09\u8ba1\u7b97\u52a8\u6001\u5b57\u6bb5\uff0c\u5efa\u8bae\u5728\u7d22\u5f15\u65f6\u8ba1\u7b97\u5e76\u5728\u6587\u6863\u4e2d\u6dfb\u52a0\u8be5\u5b57\u6bb5\u3002",id:"24-\u907f\u514d\u4f7f\u7528\u811a\u672c\u67e5\u8be2script-query\u8ba1\u7b97\u52a8\u6001\u5b57\u6bb5\u5efa\u8bae\u5728\u7d22\u5f15\u65f6\u8ba1\u7b97\u5e76\u5728\u6587\u6863\u4e2d\u6dfb\u52a0\u8be5\u5b57\u6bb5",level:4},{value:"\u4e09\u3001\u5199\u5165\u76f8\u5173",id:"\u4e09\u5199\u5165\u76f8\u5173",level:2},{value:"25. \u907f\u514d\u4ee3\u7801\u4e2d\u6216\u624b\u5de5\u76f4\u63a5 <code>Refresh</code> \u64cd\u4f5c\u3002",id:"25-\u907f\u514d\u4ee3\u7801\u4e2d\u6216\u624b\u5de5\u76f4\u63a5-refresh-\u64cd\u4f5c",level:4},{value:"26. \u907f\u514d\u5355\u4e2a\u6587\u6863\u8fc7\u5927\u3002",id:"26-\u907f\u514d\u5355\u4e2a\u6587\u6863\u8fc7\u5927",level:4},{value:"27. \u5199\u5165\u6570\u636e\u4e0d\u6307\u5b9a Doc_ID\uff0c\u8ba9 ES \u81ea\u52a8\u751f\u6210\u3002",id:"27-\u5199\u5165\u6570\u636e\u4e0d\u6307\u5b9a-doc_id\u8ba9-es-\u81ea\u52a8\u751f\u6210",level:4},{value:"28. \u5408\u7406\u4f7f\u7528 <code>Bulk API</code> \u6279\u91cf\u5199\u3002",id:"28-\u5408\u7406\u4f7f\u7528-bulk-api-\u6279\u91cf\u5199",level:4},{value:"29. \u811a\u672c\u5237\u5927\u91cf\u6570\u636e\uff0c\u5199\u5165\u524d\u8c03\u5927 <code>Refresh Interval</code>\uff0c\u4e0d\u5efa\u8bae\u5c06\u526f\u672c\u5206\u7247\u4e3a 0\uff0c\u5f85\u5199\u5165\u5b8c\u6210\u540e\u518d\u8c03\u56de\u6765\u3002",id:"29-\u811a\u672c\u5237\u5927\u91cf\u6570\u636e\u5199\u5165\u524d\u8c03\u5927-refresh-interval\u4e0d\u5efa\u8bae\u5c06\u526f\u672c\u5206\u7247\u4e3a-0\u5f85\u5199\u5165\u5b8c\u6210\u540e\u518d\u8c03\u56de\u6765",level:4},{value:"\u56db\u3001\u7d22\u5f15\u521b\u5efa",id:"\u56db\u7d22\u5f15\u521b\u5efa",level:2},{value:"1. \u5206\u7247",id:"1-\u5206\u7247",level:3},{value:"30. \u526f\u672c\u5206\u7247\u6570\u5927\u4e8e\u7b49\u4e8e 1\u3002",id:"30-\u526f\u672c\u5206\u7247\u6570\u5927\u4e8e\u7b49\u4e8e-1",level:4},{value:"31. \u5b98\u65b9\u5efa\u8bae\u5355\u5206\u7247\u9650\u5236\u6700\u5927\u6570\u636e\u6761\u6570\u4e0d\u8d85\u8fc7 2^32 - 1\u3002",id:"31-\u5b98\u65b9\u5efa\u8bae\u5355\u5206\u7247\u9650\u5236\u6700\u5927\u6570\u636e\u6761\u6570\u4e0d\u8d85\u8fc7-232---1",level:4},{value:"32. \u7d22\u5f15\u4e3b\u5206\u7247\u6570\u91cf\u4e0d\u8981\u8bbe\u7f6e\u8fc7\u5927\u3002",id:"32-\u7d22\u5f15\u4e3b\u5206\u7247\u6570\u91cf\u4e0d\u8981\u8bbe\u7f6e\u8fc7\u5927",level:4},{value:"33. \u5355\u4e2a\u5206\u7247\u6570\u636e\u91cf\u4e0d\u8981\u8d85\u8fc7 50GB\u3002",id:"33-\u5355\u4e2a\u5206\u7247\u6570\u636e\u91cf\u4e0d\u8981\u8d85\u8fc7-50gb",level:4},{value:"2. Mapping\u8bbe\u8ba1",id:"2-mapping\u8bbe\u8ba1",level:3},{value:"34. \u907f\u514d\u4f7f\u7528\u5b57\u6bb5\u52a8\u6001\u6620\u5c04\u529f\u80fd\uff0c\u6307\u5b9a\u5177\u4f53\u5b57\u6bb5\u7c7b\u578b\uff0c\u5b50\u7c7b\u578b\uff08\u82e5\u9700\u8981\uff09\uff0c\u5206\u8bcd\u5668\uff08\u7279\u522b\u6709\u573a\u666f\u9700\u8981\uff09\u3002",id:"34-\u907f\u514d\u4f7f\u7528\u5b57\u6bb5\u52a8\u6001\u6620\u5c04\u529f\u80fd\u6307\u5b9a\u5177\u4f53\u5b57\u6bb5\u7c7b\u578b\u5b50\u7c7b\u578b\u82e5\u9700\u8981\u5206\u8bcd\u5668\u7279\u522b\u6709\u573a\u666f\u9700\u8981",level:4},{value:"35. \u5bf9\u4e8e\u4e0d\u9700\u8981\u5206\u8bcd\u7684\u5b57\u7b26\u4e32\u5b57\u6bb5\uff0c\u4f7f\u7528 <code>Keyword</code> \u7c7b\u578b\u800c\u4e0d\u662f <code>Text</code> \u7c7b\u578b\u3002",id:"35-\u5bf9\u4e8e\u4e0d\u9700\u8981\u5206\u8bcd\u7684\u5b57\u7b26\u4e32\u5b57\u6bb5\u4f7f\u7528-keyword-\u7c7b\u578b\u800c\u4e0d\u662f-text-\u7c7b\u578b",level:4},{value:"36. ES \u9ed8\u8ba4\u5b57\u6bb5\u4e2a\u6570\u6700\u5927 1000\uff0c\u5efa\u8bae\u4e0d\u8981\u8d85\u8fc7 100\u3002",id:"36-es-\u9ed8\u8ba4\u5b57\u6bb5\u4e2a\u6570\u6700\u5927-1000\u5efa\u8bae\u4e0d\u8981\u8d85\u8fc7-100",level:4},{value:"37. \u5bf9\u4e8e\u4e0d\u7d22\u5f15\u5b57\u6bb5\uff0c<code>Index</code> \u5c5e\u6027\u8bbe\u7f6e\u4e3a <code>False</code>\u3002",id:"37-\u5bf9\u4e8e\u4e0d\u7d22\u5f15\u5b57\u6bb5index-\u5c5e\u6027\u8bbe\u7f6e\u4e3a-false",level:4},{value:"38. \u907f\u514d\u4f7f\u7528 <code>Nested</code> \u6216 <code>Parent/Child</code>\u3002",id:"38-\u907f\u514d\u4f7f\u7528-nested-\u6216-parentchild",level:4},{value:"39. \u907f\u514d\u4f7f\u7528 Norms\u3002",id:"39-\u907f\u514d\u4f7f\u7528-norms",level:4},{value:"40. \u5bf9\u4e0d\u9700\u8981\u8fdb\u884c\u805a\u5408/\u6392\u5e8f\u7684\u5b57\u6bb5\u7981\u7528\u5217\u5b58 <code>Doc_Values</code>\u3002",id:"40-\u5bf9\u4e0d\u9700\u8981\u8fdb\u884c\u805a\u5408\u6392\u5e8f\u7684\u5b57\u6bb5\u7981\u7528\u5217\u5b58-doc_values",level:4},{value:"3. Keyword\u548cNumeric\u7684\u9009\u62e9",id:"3-keyword\u548cnumeric\u7684\u9009\u62e9",level:3},{value:"41. \u5bf9\u4e8e\u6781\u5c11\u4f7f\u7528 Range \u67e5\u8be2\u7684\u6570\u5b57\u503c\uff0c\u4f7f\u7528 <code>Keyword</code> \u7c7b\u578b\u3002",id:"41-\u5bf9\u4e8e\u6781\u5c11\u4f7f\u7528-range-\u67e5\u8be2\u7684\u6570\u5b57\u503c\u4f7f\u7528-keyword-\u7c7b\u578b",level:4},{value:"42. \u5bf9\u4e8e\u6709\u9891\u7e41\u4e14\u8f83\u4e3a\u56fa\u5b9a\u7684 Range \u67e5\u8be2\u5b57\u6bb5\uff0c\u589e\u52a0 <code>Keyword</code> \u7c7b\u578b <code>Pre-Indexing</code>\u5b57\u6bb5\u3002",id:"42-\u5bf9\u4e8e\u6709\u9891\u7e41\u4e14\u8f83\u4e3a\u56fa\u5b9a\u7684-range-\u67e5\u8be2\u5b57\u6bb5\u589e\u52a0-keyword-\u7c7b\u578b-pre-indexing\u5b57\u6bb5",level:4},{value:"43. \u5bf9\u9700\u8981\u805a\u5408\u67e5\u8be2\u7684\u9ad8\u57fa\u6570 <code>Keyword</code> \u5b57\u6bb5\u542f\u7528 <code>Eager_Global_Ordinals</code>\u3002",id:"43-\u5bf9\u9700\u8981\u805a\u5408\u67e5\u8be2\u7684\u9ad8\u57fa\u6570-keyword-\u5b57\u6bb5\u542f\u7528-eager_global_ordinals",level:4},{value:"\u4e94\u3001\u603b\u7ed3",id:"\u4e94\u603b\u7ed3",level:2},{value:"\u516d\u3001\u53c2\u8003\u6587\u7ae0\uff1a",id:"\u516d\u53c2\u8003\u6587\u7ae0",level:2}];function a(e){const r={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsx)(r.li,{children:(0,c.jsx)(r.a,{href:"https://mp.weixin.qq.com/s/7H8kjUcJNoQJRqwJTyfXOw",children:"\u4e00\u53e3\u6c14\u770b\u5b8c43\u4e2a\u5173\u4e8e ElasticSearch \u7684\u4f7f\u7528\u5efa\u8bae"})}),"\n"]}),"\n",(0,c.jsx)(r.h2,{id:"\u4e00\u524d\u8a00",children:"\u4e00\u3001\u524d\u8a00"}),"\n",(0,c.jsx)(r.p,{children:"\u672c\u6587\u5206\u4eab\u4e86\u5728\u5de5\u4f5c\u4e2d\u5173\u4e8e ElasticSearch \u7684\u4e00\u4e9b\u4f7f\u7528\u5efa\u8bae\u3002\u548c\u5176\u4ed6\u66f4\u504f\u5411\u624b\u518c\u5316\u66f4\u6ce8\u91cd\u7ed3\u8bba\u7684\u6587\u7ae0\u4e0d\u540c\uff0c\u672c\u6587\u5c06\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u9610\u8ff0\u90e8\u5206\u5efa\u8bae\u80cc\u540e\u7684\u539f\u7406\u53ca\u4f7f\u7528\u59ff\u52bf\u53c2\u8003\uff0c\u907f\u514d\u6d41\u4e8e\u8868\u9762\uff0c\u53ea\u77e5\u5176\u7136\u800c\u4e0d\u77e5\u5176\u6240\u4ee5\u7136\u3002\u5982\u6709\u4e0d\u5f53\u7684\u5730\u65b9\uff0c\u6b22\u8fce\u6307\u6b63\uff01"}),"\n",(0,c.jsx)(r.h2,{id:"\u4e8c\u67e5\u8be2\u76f8\u5173",children:"\u4e8c\u3001\u67e5\u8be2\u76f8\u5173"}),"\n",(0,c.jsx)(r.h3,{id:"1-\u5145\u5206\u5229\u7528\u7f13\u5b58",children:"1. \u5145\u5206\u5229\u7528\u7f13\u5b58"}),"\n",(0,c.jsx)(r.h4,{id:"\u5206\u7247\u67e5\u8be2\u7f13\u5b58shard-request-cache",children:"\u5206\u7247\u67e5\u8be2\u7f13\u5b58\uff08Shard Request Cache\uff09"}),"\n",(0,c.jsxs)(r.p,{children:["ES \u5c42\u9762\u7684\u7f13\u5b58\u5b9e\u73b0\uff0c\u5c01\u88c5\u5728 ",(0,c.jsx)(r.code,{children:"IndicesRequestCache"})," \u7c7b\u4e2d\u3002\u7f13\u5b58\u7684 Key \u662f\u6574\u4e2a\u5ba2\u6237\u7aef\u8bf7\u6c42\uff0c\u7f13\u5b58\u5185\u5bb9\u4e3a\u5355\u4e2a\u5206\u7247\u7684\u67e5\u8be2\u7ed3\u679c\u3002\u4e3b\u8981\u4f5c\u7528\u662f\u5bf9\u805a\u5408\u7684\u7f13\u5b58\uff0c\u67e5\u8be2\u7ed3\u679c\u4e2d\u88ab\u7f13\u5b58\u7684\u5185\u5bb9\u4e3b\u8981\u5305\u62ec\uff1a",(0,c.jsx)(r.code,{children:"Aggregations"}),"\uff08\u805a\u5408\u7ed3\u679c\uff09\u3001",(0,c.jsx)(r.code,{children:"Hits.total"}),"\u3001\u4ee5\u53ca ",(0,c.jsx)(r.code,{children:"Suggestions"})," \u7b49\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u5e76\u975e\u6240\u6709\u7684\u5206\u7247\u7ea7\u67e5\u8be2\u90fd\u4f1a\u88ab\u7f13\u5b58\u3002\u53ea\u6709\u5ba2\u6237\u7aef\u67e5\u8be2\u8bf7\u6c42\u4e2d ",(0,c.jsx)(r.code,{children:"size=0"})," \u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u88ab\u7f13\u5b58\u3002\u5176\u4ed6\u4e0d\u88ab\u7f13\u5b58\u7684\u6761\u4ef6\u8fd8\u5305\u62ec ",(0,c.jsx)(r.code,{children:"Scroll"}),"\u3001\u8bbe\u7f6e\u4e86 ",(0,c.jsx)(r.code,{children:"Profile"})," \u5c5e\u6027\uff0c\u67e5\u8be2\u7c7b\u578b\u4e0d\u662f ",(0,c.jsx)(r.code,{children:"QUERY_THEN_FETCH"}),"\uff0c\u4ee5\u53ca\u8bbe\u7f6e\u4e86 ",(0,c.jsx)(r.code,{children:"requestCache=false"})," \u7b49\u3002\u53e6\u5916\u4e00\u4e9b\u5b58\u5728\u4e0d\u786e\u5b9a\u6027\u7684\u67e5\u8be2\u4f8b\u5982\uff1a\u8303\u56f4\u67e5\u8be2\u5e26\u6709 ",(0,c.jsx)(r.code,{children:"Now"}),"\uff0c\u7531\u4e8e\u5b83\u662f\u6beb\u79d2\u7ea7\u522b\u7684\uff0c\u7f13\u5b58\u4e0b\u6765\u6ca1\u6709\u610f\u4e49\uff0c\u7c7b\u4f3c\u7684\u8fd8\u6709\u5728\u811a\u672c\u67e5\u8be2\u4e2d\u4f7f\u7528\u4e86 ",(0,c.jsx)(r.code,{children:"Math.random()"})," \u7b49\u51fd\u6570\u7684\u67e5\u8be2\u4e5f\u4e0d\u4f1a\u8fdb\u884c\u7f13\u5b58\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u5f53\u6709\u65b0\u7684 ",(0,c.jsx)(r.code,{children:"Segment"})," \u5199\u5165\u5230\u5206\u7247\u540e\uff0c\u7f13\u5b58\u4f1a\u5931\u6548\uff0c\u56e0\u4e3a\u4e4b\u524d\u7684\u7f13\u5b58\u7ed3\u679c\u5df2\u7ecf\u65e0\u6cd5\u4ee3\u8868\u6574\u4e2a\u5206\u7247\u7684\u67e5\u8be2\u7ed3\u679c\u3002\u6240\u4ee5\u5206\u7247\u6bcf\u6b21 ",(0,c.jsx)(r.code,{children:"Refresh"})," \u4e4b\u540e\uff0c\u7f13\u5b58\u4f1a\u88ab\u6e05\u9664\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u8282\u70b9\u67e5\u8be2\u7f13\u5b58/\u8fc7\u6ee4\u5668\u7f13\u5b58 (",(0,c.jsx)(r.code,{children:"Node Query Cache /Filter Cache"}),")"]}),"\n",(0,c.jsxs)(r.p,{children:["Lucene \u5c42\u9762\u7684\u7f13\u5b58\u5b9e\u73b0\uff0c\u5c01\u88c5\u5728 ",(0,c.jsx)(r.code,{children:"LRUQueryCache"})," \u7c7b\u4e2d\uff0c\u9ed8\u8ba4\u5f00\u542f\u3002\u7f13\u5b58\u7684\u662f\u67d0\u4e2a ",(0,c.jsx)(r.code,{children:"Filter"})," \u5b50\u67e5\u8be2\u8bed\u53e5\u5728\u4e00\u4e2a Segment \u4e0a\u7684\u67e5\u8be2\u7ed3\u679c\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u5e76\u975e\u6240\u6709\u7684 ",(0,c.jsx)(r.code,{children:"Filter"})," \u67e5\u8be2\u90fd\u4f1a\u88ab\u7f13\u5b58\u3002\u5bf9\u4e8e\u4f53\u79ef\u8f83\u5c0f\u7684 Segment \u4e0d\u4f1a\u5efa\u7acb ",(0,c.jsx)(r.code,{children:"Query Cache"}),"\uff0c\u56e0\u4e3a\u4ed6\u4eec\u5f88\u5feb\u4f1a\u88ab\u5408\u5e76\u3002",(0,c.jsx)(r.code,{children:"Segment"})," \u7684 ",(0,c.jsx)(r.code,{children:"Doc"})," \u6570\u91cf\u9700\u8981\u5927\u4e8e ",(0,c.jsx)(r.code,{children:"10000"}),"\uff0c\u5e76\u4e14\u5360\u6574\u4e2a\u5206\u7247\u7684 3% \u4ee5\u4e0a\u624d\u4f1a\u8d70 ",(0,c.jsx)(r.code,{children:"Cache"})," \u7b56\u7565\uff08\u53c2\u8003\uff1a\u7f13\u5b58\uff09\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u5f53 ",(0,c.jsx)(r.code,{children:"Segment"})," \u5408\u5e76\u7684\u65f6\u5019\uff0c\u88ab\u5220\u9664\u7684 ",(0,c.jsx)(r.code,{children:"Segment"})," \u5176\u5173\u8054 ",(0,c.jsx)(r.code,{children:"Cache"})," \u4f1a\u5931\u6548\u3002"]}),"\n",(0,c.jsxs)(r.h4,{id:"1-\u4f7f\u7528\u8fc7\u6ee4\u5668\u4e0a\u4e0b\u6587filter\u66ff\u4ee3\u67e5\u8be2\u4e0a\u4e0b\u6587query",children:["1. \u4f7f\u7528\u8fc7\u6ee4\u5668\u4e0a\u4e0b\u6587\uff08",(0,c.jsx)(r.code,{children:"Filter"}),"\uff09\u66ff\u4ee3\u67e5\u8be2\u4e0a\u4e0b\u6587\uff08",(0,c.jsx)(r.code,{children:"Query"}),"\uff09\u3002"]}),"\n",(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsxs)(r.li,{children:["\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.code,{children:"Filter"})," \u4e0d\u4f1a\u8fdb\u884c\u6253\u5206\u64cd\u4f5c\uff0c\u800c ",(0,c.jsx)(r.code,{children:"Must"})," \u4f1a\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(r.li,{children:["\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.code,{children:"Filter"})," \u67e5\u8be2\u53ef\u4ee5\u88ab\u7f13\u5b58\uff0c\u4ece\u800c\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\u3002"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(r.p,{children:"\u6b63\u4f8b\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'  // \u521b\u5efaBoolQueryBuilder\n    BoolQueryBuilder boolQuery = QueryBuilders.boolQuery();\n\n    // \u6784\u5efa\u8fc7\u6ee4\u5668\u4e0a\u4e0b\u6587\n    boolQuery.filter(QueryBuilders.termQuery("field", "value"));\n'})}),"\n",(0,c.jsx)(r.p,{children:"\u53cd\u4f8b\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'  // \u521b\u5efaBoolQueryBuilder\n    BoolQueryBuilder boolQuery = QueryBuilders.boolQuery();\n\n    // \u6784\u5efa\u67e5\u8be2\u4e0a\u4e0b\u6587\n    boolQuery.must(QueryBuilders.termQuery("field1", "value1"));\n'})}),"\n",(0,c.jsxs)(r.h4,{id:"2-\u53ea\u5173\u6ce8\u805a\u5408\u7ed3\u679c\u800c\u4e0d\u5173\u6ce8\u6587\u6863\u7ec6\u8282\u65f6size-\u8bbe\u7f6e\u4e3a-0-\u5229\u7528\u5206\u7247\u67e5\u8be2\u7f13\u5b58",children:["2. \u53ea\u5173\u6ce8\u805a\u5408\u7ed3\u679c\u800c\u4e0d\u5173\u6ce8\u6587\u6863\u7ec6\u8282\u65f6\uff0c",(0,c.jsx)(r.code,{children:"Size"})," \u8bbe\u7f6e\u4e3a 0 \u5229\u7528\u5206\u7247\u67e5\u8be2\u7f13\u5b58\u3002"]}),"\n",(0,c.jsx)(r.p,{children:"\u53c2\u8003\u793a\u4f8b\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'    SearchSourceBuilder sourceBuilder = new SearchSourceBuilder();\n\n    // \u6dfb\u52a0\u805a\u5408\u67e5\u8be2\n    sourceBuilder.aggregation(\n        AggregationBuilders.terms("term_agg").field("field")\n            .subAggregation(AggregationBuilders.sum("sum_agg").field("field"))\n        );\n\n    // \u8bbe\u7f6esize\u4e3a0\uff0c\u53ea\u8fd4\u56de\u805a\u5408\u7ed3\u679c\u800c\u4e0d\u8fd4\u56de\u6587\u6863\n    sourceBuilder.size(0);\n'})}),"\n",(0,c.jsx)(r.h4,{id:"3-\u65e5\u671f\u8303\u56f4\u67e5\u8be2\u4f7f\u7528\u7edd\u5bf9\u65f6\u95f4\u503c",children:"3. \u65e5\u671f\u8303\u56f4\u67e5\u8be2\u4f7f\u7528\u7edd\u5bf9\u65f6\u95f4\u503c\u3002"}),"\n",(0,c.jsxs)(r.p,{children:["\u65e5\u671f\u5b57\u6bb5\u4e0a\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Now"}),"\uff0c\u4e00\u822c\u6765\u8bf4\u4e0d\u4f1a\u88ab\u7f13\u5b58\uff0c\u56e0\u4e3a\u5339\u914d\u5230\u7684\u65f6\u95f4\u4e00\u76f4\u5728\u53d8\u5316\u3002\u56e0\u6b64\uff0c \u53ef\u4ee5\u4ece\u4e1a\u52a1\u7684\u89d2\u5ea6\u6765\u8003\u8651\u662f\u5426\u4e00\u5b9a\u8981\u7528 ",(0,c.jsx)(r.code,{children:"Now"}),"\uff0c\u5c3d\u91cf\u4f7f\u7528\u7edd\u5bf9\u65f6\u95f4\u503c\uff0c\u4e0d\u9700\u8981\u89e3\u6790\u76f8\u5bf9\u65f6\u95f4\u8868\u8fbe\u5f0f\u4e14\u5229\u7528 ",(0,c.jsx)(r.code,{children:"Query Cache"})," \u80fd\u591f\u63d0\u9ad8\u67e5\u8be2\u6548\u7387\u3002\u4f8b\u5982\u65f6\u95f4\u8303\u56f4\u67e5\u8be2\u4e2d\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Now/h"}),"\uff0c\u4f7f\u7528\u5c0f\u65f6\u7ea7\u522b\u7684\u5355\u4f4d\uff0c\u53ef\u4ee5\u8ba9\u7f13\u5b58\u5728 1 \u5c0f\u65f6\u5185\u90fd\u53ef\u80fd\u88ab\u8bbf\u95ee\u5230\u3002"]}),"\n",(0,c.jsx)(r.p,{children:"\u6b63\u4f8b\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'   SearchSourceBuilder sourceBuilder = new SearchSourceBuilder();\n\n        // \u83b7\u53d6\u5f53\u524d\u65e5\u671f\u5e76\u683c\u5f0f\u5316\u4e3a\u7edd\u5bf9\u65f6\u95f4\u503c\n        LocalDateTime now = LocalDateTime.now();\n        DateTimeFormatter formatter = DateTimeFormatter.ISO_DATE;\n        String currentDate = now.format(formatter);\n\n        // \u521b\u5efa\u65e5\u671f\u8303\u56f4\u67e5\u8be2\n        sourceBuilder.query(QueryBuilders.rangeQuery("date_field")\n                .gte("2022-01-01")\n                .lte(currentDate));\n'})}),"\n",(0,c.jsx)(r.p,{children:"\u53cd\u4f8b\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:' SearchSourceBuilder sourceBuilder = new SearchSourceBuilder();\n\n        // \u521b\u5efa\u65e5\u671f\u8303\u56f4\u67e5\u8be2\uff0c\u4f7f\u7528\u76f8\u5bf9\u65f6\u95f4\u503c\n        sourceBuilder.query(QueryBuilders.rangeQuery("date_field")\n                .gte("now-7d")\n                .lte("now"));\n'})}),"\n",(0,c.jsx)(r.h3,{id:"2-\u805a\u5408\u67e5\u8be2",children:"2. \u805a\u5408\u67e5\u8be2"}),"\n",(0,c.jsx)(r.h4,{id:"4-\u907f\u514d\u591a\u5c42\u805a\u5408\u5d4c\u5957\u67e5\u8be2",children:"4. \u907f\u514d\u591a\u5c42\u805a\u5408\u5d4c\u5957\u67e5\u8be2\u3002"}),"\n",(0,c.jsx)(r.p,{children:"\u805a\u5408\u67e5\u8be2\u7684\u4e2d\u95f4\u7ed3\u679c\u548c\u6700\u7ec8\u7ed3\u679c\u90fd\u4f1a\u5728\u5185\u5b58\u4e2d\u8fdb\u884c\uff0c\u5d4c\u5957\u8fc7\u591a\uff0c\u4f1a\u5bfc\u81f4\u5185\u5b58\u8017\u5c3d\u3002"}),"\n",(0,c.jsx)(r.p,{children:"\u5982\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'  SearchSourceBuilder sourceBuilder = new SearchSourceBuilder();\n\n        // \u521b\u5efa\u4e3b\u8981\u67e5\u8be2\n        sourceBuilder.query(QueryBuilders.matchAllQuery());\n\n        // \u521b\u5efa\u7b2c\u4e00\u5c42\u805a\u5408\n        TermsAggregationBuilder termAggBuilder1 = AggregationBuilders.terms("term_agg1").field("field_name1");\n\n        // \u521b\u5efa\u7b2c\u4e8c\u5c42\u805a\u5408\n        TermsAggregationBuilder termAggBuilder2 = AggregationBuilders.terms("term_agg2").field("field_name2");\n        termAggBuilder1.subAggregation(termAggBuilder2);\n\n        // \u521b\u5efa\u7b2c\u4e09\u5c42\u805a\u5408\n        TermsAggregationBuilder termAggBuilder3 = AggregationBuilders.terms("term_agg3").field("field_name3");\n        termAggBuilder2.subAggregation(termAggBuilder3);\n\n        sourceBuilder.aggregation(termAggBuilder1);\n'})}),"\n",(0,c.jsx)(r.h4,{id:"5-\u5d4c\u5957\u67e5\u8be2\u5efa\u8bae\u4f7f\u7528-composite-\u805a\u5408\u67e5\u8be2\u65b9\u5f0f",children:"5. \u5d4c\u5957\u67e5\u8be2\u5efa\u8bae\u4f7f\u7528 Composite \u805a\u5408\u67e5\u8be2\u65b9\u5f0f\u3002"}),"\n",(0,c.jsxs)(r.p,{children:["\u5bf9\u4e8e\u5e38\u89c1\u7684 ",(0,c.jsx)(r.code,{children:"Group by A,B,C"})," \u8fd9\u79cd\u591a\u7ef4\u5ea6 ",(0,c.jsx)(r.code,{children:"Group by"})," \u67e5\u8be2\uff0c\u5d4c\u5957\u805a\u5408\u7684\u6027\u80fd\u5f88\u5dee\uff0c\u5d4c\u5957\u805a\u5408\u88ab\u8bbe\u8ba1\u4e3a\u5728\u6bcf\u4e2a\u6876\u5185\u8fdb\u884c\u6307\u6807\u8ba1\u7b97\uff0c\u5bf9\u4e8e\u5e73\u94fa\u7684 Group by \u6765\u8bf4\u6709\u5b58\u5728\u5f88\u591a\u5197\u4f59\u8ba1\u7b97\uff0c\u53e6\u5916\u5728 Meta \u5b57\u6bb5\u4e0a\u7684\u5e8f\u5217\u5316\u53cd\u5e8f\u5217\u5316\u4ee3\u4ef7\u4e5f\u975e\u5e38\u5927\uff0c\u8fd9\u7c7b ",(0,c.jsx)(r.code,{children:"Group by"})," \u66ff\u6362\u4e3a ",(0,c.jsx)(r.code,{children:"Composite"})," \u53ef\u4ee5\u5c06\u67e5\u8be2\u901f\u5ea6\u63d0\u5347 2 \u500d\u5de6\u53f3\u3002"]}),"\n",(0,c.jsx)(r.p,{children:"\u6b63\u4f8b\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:' // \u521b\u5efaComposite Aggregation\u6784\u5efa\u5668\n        CompositeAggregationBuilder compositeAggregationBuilder = AggregationBuilders\n                .composite("group_by_A_B_C")\n                .sources(\n                        AggregationBuilders.terms("group_by_A").field("fieldA.keyword"),\n                        AggregationBuilders.terms("group_by_B").field("fieldB.keyword"),\n                        AggregationBuilders.terms("group_by_C").field("fieldC.keyword")\n                );\n\n        // \u521b\u5efa\u67e5\u8be2\u6761\u4ef6\n        SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder()\n                .query(QueryBuilders.matchAllQuery())\n                .aggregation(compositeAggregationBuilder)\n                .size(0);\n'})}),"\n",(0,c.jsx)(r.p,{children:"\u53cd\u4f8b\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:' // \u521b\u5efaTerms Aggregation\u6784\u5efa\u5668\uff0c\u6309\u7167\u5b57\u6bb5A\u5206\u7ec4\n        TermsAggregationBuilder termsAggregationA = AggregationBuilders.terms("group_by_A").field("fieldA.keyword");\n\n        // \u5728\u5b57\u6bb5A\u7684\u57fa\u7840\u4e0a\u521b\u5efaTerms Aggregation\u6784\u5efa\u5668\uff0c\u6309\u7167\u5b57\u6bb5B\u5206\u7ec4\n        TermsAggregationBuilder termsAggregationB = AggregationBuilders.terms("group_by_B").field("fieldB.keyword");\n\n        // \u5728\u5b57\u6bb5B\u7684\u57fa\u7840\u4e0a\u521b\u5efaTerms Aggregation\u6784\u5efa\u5668\uff0c\u6309\u7167\u5b57\u6bb5C\u5206\u7ec4\n        TermsAggregationBuilder termsAggregationC = AggregationBuilders.terms("group_by_C").field("fieldC.keyword");\n\n        // \u5c06\u5b57\u6bb5C\u7684\u805a\u5408\u6dfb\u52a0\u5230\u5b57\u6bb5B\u7684\u805a\u5408\u4e2d\n        termsAggregationB.subAggregation(termsAggregationC);\n\n        // \u5c06\u5b57\u6bb5B\u7684\u805a\u5408\u6dfb\u52a0\u5230\u5b57\u6bb5A\u7684\u805a\u5408\u4e2d\n        termsAggregationA.subAggregation(termsAggregationB);\n\n        // \u521b\u5efa\u67e5\u8be2\u6761\u4ef6\n        SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder()\n                .query(QueryBuilders.matchAllQuery())\n                .aggregation(termsAggregationA)\n                .size(0);\n'})}),"\n",(0,c.jsx)(r.h4,{id:"6-\u907f\u514d\u5927\u805a\u5408\u67e5\u8be2",children:"6. \u907f\u514d\u5927\u805a\u5408\u67e5\u8be2\u3002"}),"\n",(0,c.jsx)(r.p,{children:"\u805a\u5408\u67e5\u8be2\u7684\u4e2d\u95f4\u7ed3\u679c\u548c\u6700\u7ec8\u7ed3\u679c\u90fd\u4f1a\u5728\u5185\u5b58\u4e2d\u8fdb\u884c\uff0c\u6570\u636e\u91cf\u592a\u5927\u4f1a\u5bfc\u81f4\u5185\u5b58\u8017\u5c3d\u3002"}),"\n",(0,c.jsx)(r.h4,{id:"7-\u9ad8\u57fa\u6570\u573a\u666f\u5d4c\u5957\u805a\u5408\u67e5\u8be2\u5efa\u8bae\u4f7f\u7528-bfs-\u641c\u7d22",children:"7. \u9ad8\u57fa\u6570\u573a\u666f\u5d4c\u5957\u805a\u5408\u67e5\u8be2\u5efa\u8bae\u4f7f\u7528 BFS \u641c\u7d22\u3002"}),"\n",(0,c.jsx)(r.p,{children:"\u805a\u5408\u662f\u5728 ES \u5185\u5b58\u5b8c\u6210\u7684\u3002\u5f53\u4e00\u4e2a\u805a\u5408\u64cd\u4f5c\u5305\u542b\u4e86\u5d4c\u5957\u7684\u805a\u5408\u64cd\u4f5c\u65f6\uff0c\u6bcf\u4e2a\u5d4c\u5957\u7684\u805a\u5408\u64cd\u4f5c\u90fd\u4f1a\u4f7f\u7528\u4e0a\u4e00\u7ea7\u805a\u5408\u64cd\u4f5c\u4e2d\u6784\u5efa\u51fa\u7684\u6876\u4f5c\u4e3a\u8f93\u5165\uff0c\u7136\u540e\u6839\u636e\u81ea\u5df1\u7684\u805a\u5408\u6761\u4ef6\u518d\u8fdb\u884c\u6876\u7684\u8fdb\u4e00\u6b65\u5206\u7ec4\u3002\u8fd9\u6837\u5bf9\u4e8e\u6bcf\u4e00\u5c42\u5d4c\u5957\uff0c\u90fd\u4f1a\u518d\u6b21\u52a8\u6001\u6784\u5efa\u4e00\u7ec4\u65b0\u7684\u805a\u5408\u6876\u3002\u5728\u9ad8\u57fa\u6570\u573a\u666f\uff0c\u5d4c\u5957\u805a\u5408\u64cd\u4f5c\u4f1a\u5bfc\u81f4\u805a\u5408\u6876\u6570\u91cf\u968f\u7740\u5d4c\u5957\u5c42\u6570\u7684\u589e\u52a0\u6307\u6570\u7ea7\u589e\u957f\uff0c\u6700\u7ec8\u7ed3\u679c\u5c31\u662f\u5360\u7528 ES \u5927\u91cf\u5185\u5b58\uff0c\u4ece\u800c\u5bfc\u81f4 OOM \u7684\u60c5\u51b5\u53d1\u751f\u3002"}),"\n",(0,c.jsx)(r.p,{children:"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cES \u4f7f\u7528 DFS\uff08\u6df1\u5ea6\u4f18\u5148\uff09\u641c\u7d22\u3002\u6df1\u5ea6\u4f18\u5148\u5148\u6784\u5efa\u5b8c\u6574\u7684\u6811\uff0c\u7136\u540e\u4fee\u526a\u65e0\u7528\u8282\u70b9\u3002BFS\uff08\u5e7f\u5ea6\u4f18\u5148\uff09\u5148\u6267\u884c\u7b2c\u4e00\u5c42\u805a\u5408\uff0c\u518d\u7ee7\u7eed\u4e0b\u4e00\u5c42\u805a\u5408\u4e4b\u524d\u4f1a\u5148\u505a\u4fee\u526a\u3002"}),"\n",(0,c.jsx)(r.p,{children:"\u5728\u805a\u5408\u67e5\u8be2\u4e2d\uff0c\u4f7f\u7528\u5e7f\u5ea6\u4f18\u5148\u7b97\u6cd5\u9700\u8981\u5728\u6bcf\u4e2a\u6876\u7ea7\u522b\u4e0a\u7f13\u5b58\u6587\u6863\u6570\u636e\uff0c\u7136\u540e\u5728\u526a\u679d\u9636\u6bb5\u540e\u5411\u5b50\u805a\u5408\u91cd\u653e\u8fd9\u4e9b\u6587\u6863\u3002\u56e0\u6b64\uff0c\u5e7f\u5ea6\u4f18\u5148\u7b97\u6cd5\u7684\u5185\u5b58\u6d88\u8017\u53d6\u51b3\u4e8e\u6bcf\u4e2a\u6876\u4e2d\u7684\u6587\u6863\u6570\u91cf\u3002\u5bf9\u4e8e\u8bb8\u591a\u805a\u5408\u67e5\u8be2\uff0c\u6bcf\u4e2a\u6876\u4e2d\u7684\u6587\u6863\u6570\u91cf\u90fd\u975e\u5e38\u5927\uff0c\u805a\u5408\u53ef\u80fd\u4f1a\u6709\u6570\u5343\u6216\u6570\u5341\u4e07\u4e2a\u6587\u6863\u3002"}),"\n",(0,c.jsx)(r.p,{children:"\u4f46\u662f\uff0c\u6709\u5927\u91cf\u6876\u4f46\u6bcf\u4e2a\u6876\u4e2d\u6587\u6863\u6570\u91cf\u76f8\u5bf9\u8f83\u5c11\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528\u5e7f\u5ea6\u4f18\u5148\u7b97\u6cd5\u80fd\u66f4\u52a0\u9ad8\u6548\u5730\u5229\u7528\u5185\u5b58\u8d44\u6e90\uff0c\u800c\u4e14\u53ef\u4ee5\u8ba9\u6211\u4eec\u6784\u5efa\u66f4\u52a0\u590d\u6742\u7684\u805a\u5408\u67e5\u8be2\u3002\u867d\u7136\u53ef\u80fd\u4f1a\u4ea7\u751f\u5927\u91cf\u7684\u6876\uff0c\u4f46\u6bcf\u4e2a\u6876\u4e2d\u53ea\u6709\u76f8\u5bf9\u8f83\u5c11\u7684\u6587\u6863\uff0c\u56e0\u6b64\u4f7f\u7528\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u7b97\u6cd5\u53ef\u4ee5\u66f4\u52a0\u8282\u7ea6\u5185\u5b58\u3002"}),"\n",(0,c.jsx)(r.p,{children:"\u53c2\u8003\u793a\u4f8b\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'searchSourceBuilder.aggregation(\n        AggregationBuilders.terms("brandIds")\n                .collectMode(Aggregator.SubAggCollectionMode.BREADTH_FIRST)\n                .field("brandId")\n                .size(2000)\n                .order(BucketOrder.key(true))\n);\n'})}),"\n",(0,c.jsx)(r.h4,{id:"8-\u907f\u514d\u5bf9-text-\u5b57\u6bb5\u7c7b\u578b\u4f7f\u7528\u805a\u5408\u67e5\u8be2",children:"8. \u907f\u514d\u5bf9 text \u5b57\u6bb5\u7c7b\u578b\u4f7f\u7528\u805a\u5408\u67e5\u8be2\u3002"}),"\n",(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsxs)(r.li,{children:["text \u7684 ",(0,c.jsx)(r.code,{children:"Fielddata"})," \u4f1a\u52a0\u5927\u5bf9\u5185\u5b58\u7684\u5360\u7528\uff0c\u5982\u6709\u9700\u6c42\u4f7f\u7528\uff0c\u5efa\u8bae\u4f7f\u7528 Keyword\u3002"]}),"\n"]}),"\n",(0,c.jsx)(r.h4,{id:"9-\u4e0d\u5efa\u8bae\u4f7f\u7528-bucket_sort-\u8fdb\u884c\u805a\u5408\u6df1\u5206\u9875\u67e5\u8be2",children:"9. \u4e0d\u5efa\u8bae\u4f7f\u7528 bucket_sort \u8fdb\u884c\u805a\u5408\u6df1\u5206\u9875\u67e5\u8be2\u3002"}),"\n",(0,c.jsxs)(r.p,{children:["ES \u7684\u9ad8 ",(0,c.jsx)(r.code,{children:"Cardinality"})," \u805a\u5408\u67e5\u8be2\u975e\u5e38\u6d88\u8017\u5185\u5b58\uff0c\u8d85\u8fc7\u767e\u4e07\u57fa\u6570\u7684\u805a\u5408\u5f88\u5bb9\u6613\u5bfc\u81f4\u8282\u70b9\u5185\u5b58\u4e0d\u591f\u7528\u4ee5\u81f3 OOM\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.code,{children:"bucket_sort"})," \u4f7f\u7528\u6876\u6392\u5e8f\u7b97\u6cd5\uff0c\u6027\u80fd\u95ee\u9898\u4e3b\u8981\u662f\u7531\u4e8e\u5b83\u9700\u8981\u5728\u5185\u5b58\u4e2d\u7f13\u5b58\u6240\u6709\u7684\u6587\u6863\u548c\u805a\u5408\u6876\uff0c\u7136\u540e\u624d\u80fd\u8fdb\u884c\u6392\u5e8f\u548c\u5206\u9875\uff0c\u968f\u7740\u6587\u6863\u6570\u91cf\u589e\u591a\u548c\u5206\u9875\u6df1\u5ea6\u589e\u52a0\uff0c\u6027\u80fd\u4f1a\u9010\u6e10\u53d8\u5dee\uff0c\u6709\u6df1\u5206\u9875\u95ee\u9898\u3002\u56e0\u4e3a\u6876\u6392\u5e8f\u9700\u8981\u5bf9\u6240\u6709\u6587\u6863\u8fdb\u884c\u6574\u4f53\u6392\u5e8f\uff0c\u6240\u4ee5\u5b83\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f ",(0,c.jsx)(r.code,{children:"O(NlogN)"}),"\uff0c\u5176\u4e2d N \u662f\u6587\u6863\u603b\u6570\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u76ee\u524dElasticsearch\u652f\u6301\u805a\u5408\u5206\u9875\uff08\u6eda\u52a8\u805a\u5408\uff09\u7684\u76ee\u524d\u53ea\u6709\u590d\u5408\u805a\u5408(",(0,c.jsx)(r.code,{children:"Composite Aggregation"}),")\u4e00\u79cd\u3002\u6eda\u52a8\u7684\u65b9\u5f0f\u7c7b\u4f3c\u4e8e",(0,c.jsx)(r.code,{children:"SearchAfter"}),"\u3002\u805a\u5408\u65f6\u6307\u5b9a\u4e00\u4e2a\u590d\u5408\u952e\uff0c\u7136\u540e\u6bcf\u4e2a\u5206\u7247\u90fd\u6309\u7167\u8fd9\u4e2a\u590d\u5408\u952e\u8fdb\u884c\u6392\u5e8f\u548c\u805a\u5408\uff0c\u4e0d\u9700\u8981\u5728\u5185\u5b58\u4e2d\u7f13\u5b58\u6240\u6709\u6587\u6863\u548c\u6876\uff0c\u800c\u662f\u53ef\u4ee5\u6bcf\u6b21\u8fd4\u56de\u4e00\u9875\u7684\u6570\u636e\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u53cd\u4f8b\uff1a\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"bucket_sort"})," \u6df1\u5206\u9875 RT \u8fbe\u5230 ",(0,c.jsx)(r.code,{children:"5000ms+"})]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:' SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder();\n  BoolQueryBuilder boolQuery = QueryBuilders.boolQuery();\n  boolQuery.filter(QueryBuilders.termQuery(EsNewApplyDocumentFields.IS_DEL, 0));\n  TermsAggregationBuilder termsAggregationBuilder = AggregationBuilders.terms("spuIdAgg").field("spuId").order(BucketOrder.key(false)).size(pageNum*pageSize);\n  termsAggregationBuilder.subAggregation(new BucketSortPipelineAggregationBuilder("spuBucket",null).from((pageNum-1)*pageSize).size(pageSize));  searchSourceBuilder.query(boolQuery).aggregation(termsAggregationBuilder).size(0);\n'})}),"\n",(0,c.jsxs)(r.p,{children:["\u6b63\u4f8b\uff1a\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Composite Aggregation"})," \u4f18\u5316\u540e\u6df1\u5206\u9875\u67e5\u8be2\uff1a423ms"]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'  SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder();\n        BoolQueryBuilder boolQuery = QueryBuilders.boolQuery();\n        boolQuery.filter(QueryBuilders.termQuery(EsNewApplyDocumentFields.IS_DEL, 0));\n        CompositeAggregationBuilder compositeBuilder = new CompositeAggregationBuilder(\n                "spuIdAgg",\n                Collections.singletonList(new TermsValuesSourceBuilder("spuId").field("spuId").order("desc"))\n        ).aggregateAfter(ImmutableMap.of("spuId", "603030")).size(20);\n        searchSourceBuilder.query(boolQuery).aggregation(compositeBuilder).aggregation(totalAgg).size(0);\n'})}),"\n",(0,c.jsx)(r.h3,{id:"3-\u5206\u9875",children:"3. \u5206\u9875"}),"\n",(0,c.jsxs)(r.h4,{id:"10-\u907f\u514d\u4f7f\u7528-fromsize-\u65b9\u5f0f",children:["10. \u907f\u514d\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"from+size"})," \u65b9\u5f0f\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["ES \u4e2d\u6df1\u5ea6\u7ffb\u9875\u6392\u5e8f\u7684\u82b1\u8d39\u4f1a\u968f\u7740\u5206\u9875\u7684\u6df1\u5ea6\u800c\u6210\u500d\u589e\u957f\uff0c\u5206\u9875\u641c\u7d22\u4e0d\u4f1a\u5355\u72ec ",(0,c.jsx)(r.code,{children:"Cache"}),"\u3002\u6bcf\u6b21\u5206\u9875\u7684\u8bf7\u6c42\u90fd\u662f\u4e00\u6b21\u91cd\u65b0\u641c\u7d22\u7684\u8fc7\u7a0b\uff0c\u800c\u4e0d\u662f\u4ece\u7b2c\u4e00\u6b21\u641c\u7d22\u7684\u7ed3\u679c\u4e2d\u83b7\u53d6\u3002\u5982\u679c\u6570\u636e\u7279\u522b\u5927\u5bf9 CPU \u548c\u5185\u5b58\u7684\u6d88\u8017\u4f1a\u975e\u5e38\u5de8\u5927\u751a\u81f3\u4f1a\u5bfc\u81f4 OOM\u3002"]}),"\n",(0,c.jsxs)(r.h4,{id:"11-\u907f\u514d\u9ad8\u5b9e\u65f6\u6027\u5927\u7ed3\u679c\u96c6\u573a\u666f\u4f7f\u7528-scroll-\u65b9\u5f0f",children:["11. \u907f\u514d\u9ad8\u5b9e\u65f6\u6027&\u5927\u7ed3\u679c\u96c6\u573a\u666f\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Scroll"})," \u65b9\u5f0f\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u57fa\u4e8e\u5feb\u7167\u7684\u4e0a\u4e0b\u6587\u3002\u5b9e\u65f6\u6027\u9ad8\u7684\u4e1a\u52a1\u573a\u666f\u4e0d\u5efa\u8bae\u4f7f\u7528\u3002\u5927\u7ed3\u679c\u96c6\u573a\u666f\u5c06\u751f\u6210\u5927\u91cfScroll \u4e0a\u4e0b\u6587\uff0c\u53ef\u80fd\u5bfc\u81f4\u5185\u5b58\u6d88\u8017\u8fc7\u5927\uff0c\u5efa\u8bae\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"SearcheAfter"})," \u65b9\u5f0f\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u601d\u8003\uff1a\u5bf9\u4e8e ",(0,c.jsx)(r.code,{children:"Scroll"})," \u548c ",(0,c.jsx)(r.code,{children:"SearchAfter"})," \u7684\u9009\u7528\u600e\u4e48\u770b\uff1f\u4e24\u8005\u5206\u522b\u9002\u7528\u4e8e\u54ea\u79cd\u573a\u666f\uff1f",(0,c.jsx)(r.code,{children:"SearchAfter"})," \u53ef\u4ee5\u5b8c\u5168\u66ff\u4ee3 ",(0,c.jsx)(r.code,{children:"Scroll"})," \u5417\uff1f"]}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.code,{children:"Scroll"})," \u7ef4\u62a4\u4e00\u4efd\u5f53\u524d\u7d22\u5f15\u6bb5\u7684\u5feb\u7167\uff0c\u9002\u7528\u4e8e\u975e\u5b9e\u65f6\u6eda\u52a8\u904d\u5386\u5168\u91cf\u6570\u636e\u67e5\u8be2\uff0c\u4f46\u5927\u91cf",(0,c.jsx)(r.code,{children:"Contexts"})," \u5360\u7528\u5806\u5185\u5b58\u7684\u4ee3\u4ef7\u8f83\u9ad8\uff1b7.10 \u5f15\u5165\u7684\u65b0\u7279\u6027 ",(0,c.jsx)(r.code,{children:"Search After + PIT"}),"\uff0c\u67e5\u8be2\u672c\u8d28\u662f\u5229\u7528\u524d\u5411\u9875\u9762\u7684\u4e00\u7ec4\u6392\u5e8f\u4e4b\u68c0\u7d22\u5339\u914d\u4e0b\u4e00\u9875\uff0c\u4ece\u800c\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027\uff1b8.10 \u5b98\u65b9\u6587\u6863\u660e\u786e\u6307\u51fa\u4e0d\u518d\u5efa\u8bae\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Scroll API"})," \u8fdb\u884c\u6df1\u5206\u9875\u3002\u5982\u679c\u5206\u9875\u68c0\u7d22\u8d85\u8fc7 ",(0,c.jsx)(r.code,{children:"Top10000+"})," \u63a8\u8350\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"PIT + Search After"}),"\u3002"]}),"\n",(0,c.jsxs)(r.h4,{id:"12-searchafter-\u5206\u9875scroll-id-\u904d\u5386\u7d22\u5f15\u4e2d\u7684\u6570\u636e\u6307\u5b9a-sort-\u5b57\u6bb5\u8981\u4fdd\u8bc1\u552f\u4e00\u6027\u5426\u5219\u4f1a\u9020\u6210\u5206\u9875\u904d\u5386\u6570\u636e\u4e0d\u5b8c\u6574\u6216\u91cd\u590d",children:["12. ",(0,c.jsx)(r.code,{children:"SearchAfter"})," \u5206\u9875",(0,c.jsx)(r.code,{children:"/Scroll ID/"})," \u904d\u5386\u7d22\u5f15\u4e2d\u7684\u6570\u636e\u6307\u5b9a ",(0,c.jsx)(r.code,{children:"Sort"})," \u5b57\u6bb5\u8981\u4fdd\u8bc1\u552f\u4e00\u6027\uff0c\u5426\u5219\u4f1a\u9020\u6210\u5206\u9875/\u904d\u5386\u6570\u636e\u4e0d\u5b8c\u6574\u6216\u91cd\u590d\u3002"]}),"\n",(0,c.jsx)(r.h4,{id:"13-\u5efa\u8bae\u6307\u5b9a\u4e1a\u52a1\u5b57\u6bb5\u6392\u5e8f\u4e0d\u8981\u91c7\u7528\u9ed8\u8ba4\u6253\u5206\u6392\u5e8f",children:"13. \u5efa\u8bae\u6307\u5b9a\u4e1a\u52a1\u5b57\u6bb5\u6392\u5e8f\uff0c\u4e0d\u8981\u91c7\u7528\u9ed8\u8ba4\u6253\u5206\u6392\u5e8f\u3002"}),"\n",(0,c.jsxs)(r.p,{children:["ES \u9ed8\u8ba4\u4f7f\u7528",(0,c.jsx)(r.code,{children:"_score"}),"\u5b57\u6bb5\u6309\u8bc4\u5206\u6392\u5e8f\u3002\u5982\u5728\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Scroll API"})," \u83b7\u53d6\u6570\u636e\u65f6\uff0c\u5982\u679c\u6ca1\u6709\u7279\u6b8a\u7684\u6392\u5e8f\u9700\u6c42\uff0c\u63a8\u8350\u4f7f\u7528",(0,c.jsx)(r.code,{children:'"sort":"_doc"'}),"\u8ba9 ES \u6309\u7d22\u5f15\u987a\u5e8f\u8fd4\u56de\u547d\u4e2d\u6587\u6863\uff0c\u53ef\u4ee5\u8282\u7701\u6392\u5e8f\u5f00\u9500\u3002\u539f\u56e0\u5982\u4e0b\uff1a"]}),"\n",(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsx)(r.li,{children:"\u4f7f\u7528\u975e\u6587\u6863 ID \u6392\u5e8f\uff0c\u4f1a\u5bfc\u81f4\u6bcf\u6b21\u67e5\u8be2 ES \u9700\u8981\u5728\u6bcf\u4e2a\u5206\u7247\u8bb0\u4f4f\u4e0a\u6b21\u8fd4\u56de\u7684\u6700\u540e\u4e00\u4e2a\u6587\u6863\uff0c\u7136\u540e\u4e0b\u6b21\u67e5\u8be2\u4e2d\u4f1a\u5bf9\u4e4b\u524d\u5df2\u7ecf\u8fd4\u56de\u7684\u6587\u6863\u8fdb\u884c\u5ffd\u7565\u8fc7\u6ee4\uff0c\u540c\u65f6\u5728\u534f\u8c03\u8282\u70b9\u8fdb\u884c\u6392\u5e8f\u64cd\u4f5c\u3002\u6587\u6863 ID \u6392\u5e8f\u5219\u4e0d\u9700\u8981\u4e0a\u8ff0\u64cd\u4f5c\u3002"}),"\n"]}),"\n",(0,c.jsxs)(r.blockquote,{children:["\n",(0,c.jsx)(r.p,{children:"The way sorted scroll works s that elasticsearch remembers the last returned document on everyshard. Then when you ask for the next page, all documents that match your query and comparebetter than this last returned document are ignored.\nThis explains why sorted scroll is less efficient than scan scroll, since scan can just go back towhere it had stopped before, collect $(page_size) documents and return. ln contrast, sorted scrollneeds to visit all matching documents for every page."}),"\n"]}),"\n",(0,c.jsx)(r.p,{children:"\u5bf9\u4e8e\u6587\u6863 ID \u6392\u5e8f\uff0cES \u5185\u90e8\u8fdb\u884c\u4e86\u7279\u6b8a\u4f18\u5316\uff0c\u6027\u80fd\u8868\u73b0\u66f4\u4f18\u3002"}),"\n",(0,c.jsxs)(r.blockquote,{children:["\n",(0,c.jsx)(r.p,{children:"Scroll requests have optimizations that make them faster when the sort order is_doc , lf you wantto iterate over all documents regardless of the order, this is the most efficient option:"}),"\n"]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'GET /_search?scroll=1m\n{\n   "sort":[\n        "_doc"\n   ]\n}\n'})}),"\n",(0,c.jsxs)(r.h4,{id:"14-scroll-\u67e5\u8be2\u786e\u4fdd\u663e\u5f0f\u8c03\u7528-clearscroll-\u65b9\u6cd5\u6e05\u9664-scroll-id",children:["14. ",(0,c.jsx)(r.code,{children:"Scroll"})," \u67e5\u8be2\u786e\u4fdd\u663e\u5f0f\u8c03\u7528 ",(0,c.jsx)(r.code,{children:"clearScroll()"})," \u65b9\u6cd5\u6e05\u9664 ",(0,c.jsx)(r.code,{children:"Scroll ID"}),"\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u5426\u5219\u4f1a\u5bfc\u81f4 ES \u5728\u8fc7\u671f\u65f6\u95f4\u524d\u65e0\u6cd5\u91ca\u653e ",(0,c.jsx)(r.code,{children:"Scroll"})," \u7ed3\u679c\u96c6\u5360\u7528\u7684\u5185\u5b58\u8d44\u6e90\uff0c\u540c\u65f6\u4e5f\u4f1a\u5360\u7528\u9ed8\u8ba4 3000 \u4e2a ",(0,c.jsx)(r.code,{children:"Scroll"})," \u67e5\u8be2\u7684\u5bb9\u91cf\uff0c\u5bfc\u81f4 ",(0,c.jsx)(r.code,{children:"too many scroll ID"})," \u7684\u67e5\u8be2\u62d2\u7edd\u62a5\u9519\uff0c\u5f71\u54cd\u4e1a\u52a1\u3002"]}),"\n",(0,c.jsx)(r.h3,{id:"4-\u5176\u4ed6",children:"4. \u5176\u4ed6"}),"\n",(0,c.jsxs)(r.h4,{id:"15-\u6ce8\u610f-must-\u548c-should-\u540c\u65f6\u51fa\u73b0\u5728\u8bed\u53e5\u91cc\u7684\u65f6\u5019should-\u4f1a\u5931\u6548\u6ce8\u610f-must-\u548c-should-\u540c\u65f6\u51fa\u73b0\u5728\u540c\u4e00\u5c42\u7ea7\u7684-bool-\u67e5\u8be2\u65f6should-\u67e5\u8be2\u4f1a\u5931\u6548",children:["15. \u6ce8\u610f ",(0,c.jsx)(r.code,{children:"Must"})," \u548c ",(0,c.jsx)(r.code,{children:"Should"})," \u540c\u65f6\u51fa\u73b0\u5728\u8bed\u53e5\u91cc\u7684\u65f6\u5019\uff0c",(0,c.jsx)(r.code,{children:"Should"})," \u4f1a\u5931\u6548\uff1b\u6ce8\u610f ",(0,c.jsx)(r.code,{children:"Must"})," \u548c ",(0,c.jsx)(r.code,{children:"Should"})," \u540c\u65f6\u51fa\u73b0\u5728\u540c\u4e00\u5c42\u7ea7\u7684 ",(0,c.jsx)(r.code,{children:"bool"})," ",(0,c.jsx)(r.code,{children:"\u67e5\u8be2\u65f6\uff0cShould"})," \u67e5\u8be2\u4f1a\u5931\u6548\u3002"]}),"\n",(0,c.jsx)(r.p,{children:"\u6b63\u4f8b\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'{"query":{ "bool":{\n            "must":[\n                {"bool":{\n                        "must":[\n                            {\n                                "term":{\n                                    "status.keyword":"1"\n                           } }]}},\n                {"bool":{\n                        "should":[\n                            {"term":{\n                                    "tag.keyword":"1"\n  } } ] }}]}}}\n'})}),"\n",(0,c.jsx)(r.p,{children:"\u53cd\u4f8b\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'{"query":{\n        "bool":{\n            "must":[\n                {\n                    "term":{\n                        "status.keyword":"1"\n                    }}],\n            "should":[\n                {\n                    "term":{\n                        "tag.keyword":"1"\n                    }\n   }]}}}\n'})}),"\n",(0,c.jsxs)(r.h4,{id:"16-\u907f\u514d\u67e5\u8be2-indexname-",children:["16. \u907f\u514d\u67e5\u8be2 ",(0,c.jsx)(r.code,{children:"indexName-*"}),"\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u56e0\u4e3a Elasticsearch \u4e2d\u7684\u7d22\u5f15\u540d\u79f0\u662f\u5168\u5c40\u53ef\u89c1\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u6240\u6709\u7d22\u5f15\u7684\u65b9\u5f0f\u6765\u679a\u4e3e\u67d0\u4e2a\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u7d22\u5f15\u540d\u79f0\u3002\u53ef\u4ee5\u901a\u8fc7\u5728 Elasticsearch \u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e ",(0,c.jsx)(r.code,{children:"action.destructive_requires_name"})," \u53c2\u6570\u6765\u7981\u6b62\u67e5\u8be2 ",(0,c.jsx)(r.code,{children:"indexName-*"}),"\u3002"]}),"\n",(0,c.jsxs)(r.h4,{id:"17-\u811a\u672c\u4f7f\u7528-stored-\u65b9\u5f0f\u907f\u514d\u4f7f\u7528-inline-\u65b9\u5f0f",children:["17. \u811a\u672c\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Stored"})," \u65b9\u5f0f\uff0c\u907f\u514d\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Inline"})," \u65b9\u5f0f\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u5bf9\u4e8e\u56fa\u5b9a\u7ed3\u6784\u7684 ",(0,c.jsx)(r.code,{children:"Script"}),"\uff0c\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Stored"})," \u65b9\u5f0f\uff0c\u628a\u811a\u672c\u901a\u8fc7 Kibana \u5b58\u5165 ES \u96c6\u7fa4\uff0c\u964d\u4f4e\u91cd\u590d\u7f16\u8bd1\u811a\u672c\u5e26\u6765\u7684\u6027\u80fd\u635f\u8017\u3002"]}),"\n",(0,c.jsx)(r.p,{children:"\u6b63\u4f8b\uff1a"}),"\n",(0,c.jsxs)(r.p,{children:["\u7b2c1\u6b65\uff1a\u901a\u8fc7",(0,c.jsx)(r.code,{children:"stored"}),"\u65b9\u5f0f\uff0c\u5efascript\u6a21\u7248\uff1a"]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'POST _script/activity_discount_price\n{\n  "script":{\n        "lang":"painless",\n        "source":"doc.xxx.value * params.discount"\n  }\n}\n'})}),"\n",(0,c.jsxs)(r.p,{children:["\u7b2c2\u6b65\uff1a\u8c03\u7528script\u811a\u672c\u6a21\u7248\uff1a",(0,c.jsx)(r.code,{children:"cal_activity_discount"})]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'GET index/_search\n{\n  "script_fields": {\n    "discount_price": {\n      "script": {\n           "id": "activity_discount_price",\n           "params":{\n               "discount": 0.8\n           }\n}}}}\n'})}),"\n",(0,c.jsx)(r.p,{children:"\u53cd\u4f8b\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'//\u76f4\u63a5inline\u65b9\u5f0f\uff0c\u8bf7\u6c42\u4e2d\u4f20\u5165\u811a\u672c\uff1a\nGET index/_search\n{\n  "script_fields": {\n    "activity_discount_price": {\n      "script": {\n           "source":"doc.xxx.value * 0.8"\n      }\n    }\n  }\n}\n'})}),"\n",(0,c.jsxs)(r.h4,{id:"18-\u907f\u514d\u4f7f\u7528-_all-\u5b57\u6bb5",children:["18. \u907f\u514d\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"_all"})," \u5b57\u6bb5\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.code,{children:"_all"})," \u5b57\u6bb5\u5305\u542b\u4e86\u6240\u6709\u7684\u7d22\u5f15\u5b57\u6bb5\uff0c\u5982\u679c\u6ca1\u6709\u83b7\u53d6\u539f\u59cb\u6587\u6863\u6570\u636e\u7684\u9700\u6c42\uff0c\u53ef\u901a\u8fc7\u8bbe\u7f6e",(0,c.jsx)(r.code,{children:"Includes"}),"\u3001",(0,c.jsx)(r.code,{children:"Excludes"})," \u5c5e\u6027\u6765\u5b9a\u4e49\u653e\u5165",(0,c.jsx)(r.code,{children:" _source"})," \u7684\u5b57\u6bb5\u3002",(0,c.jsx)(r.code,{children:"_all"})," \u9ed8\u8ba4\u5c06\u5199\u5165\u7684\u5b57\u6bb5\u62fc\u63a5\u6210\u4e00\u4e2a\u5927\u7684\u5b57\u7b26\u4e32\uff0c\u5e76\u5bf9\u8be5\u5b57\u6bb5\u8fdb\u884c\u5206\u8bcd\uff0c\u7528\u4e8e\u652f\u6301\u6574\u4e2a Doc \u7684\u5168\u6587\u68c0\u7d22\uff0c",(0,c.jsx)(r.code,{children:"_all"}),"\u5b57\u6bb5\u5728\u67e5\u8be2\u65f6\u5360\u7528\u66f4\u591a\u7684 CPU\uff0c\u540c\u65f6\u5360\u7528\u66f4\u591a\u7684\u78c1\u76d8\u5b58\u50a8\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u4e3a ",(0,c.jsx)(r.code,{children:"false"}),"\uff0c\u4e0d\u5efa\u8bae\u5f00\u542f\u8be5\u5b57\u6bb5\u548c\u4f7f\u7528\u3002"]}),"\n",(0,c.jsx)(r.h4,{id:"19-\u5efa\u8bae\u7528-get-\u67e5\u8be2\u66ff\u6362-search-\u67e5\u8be2",children:"19. \u5efa\u8bae\u7528 Get \u67e5\u8be2\u66ff\u6362 Search \u67e5\u8be2\u3002"}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.code,{children:"GET/MGET"})," \u76f4\u63a5\u6839\u636e\u6587\u6863 ",(0,c.jsx)(r.code,{children:"ID"})," \u4ece\u6b63\u6392\u7d22\u5f15\u4e2d\u83b7\u53d6\u5185\u5bb9\u3002",(0,c.jsx)(r.code,{children:"Search"})," \u4e0d\u6307\u5b9a",(0,c.jsx)(r.code,{children:"_id"}),"\uff0c\u6839\u636e\u5173\u952e\u8bcd\u4ece\u5012\u6392\u7d22\u5f15\u4e2d\u83b7\u53d6\u5185\u5bb9\u3002"]}),"\n",(0,c.jsx)(r.h4,{id:"20-\u907f\u514d\u8fdb\u884c\u591a\u7d22\u5f15\u67e5\u8be2",children:"20. \u907f\u514d\u8fdb\u884c\u591a\u7d22\u5f15\u67e5\u8be2\u3002"}),"\n",(0,c.jsx)(r.p,{children:"\u53cd\u4f8b\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'GET /index1,index2,index3/_search\n{\n  "query": {\n    "match_all": {}\n  }\n}\n'})}),"\n",(0,c.jsxs)(r.h4,{id:"21-\u907f\u514d\u5355\u6b21\u53ec\u56de\u5927\u91cf\u6570\u636e\u5efa\u8bae\u4f7f\u7528-_source_includes-\u548c-_source_excludes-\u53c2\u6570\u6765\u5305\u542b\u6216\u6392\u9664\u5b57\u6bb5",children:["21. \u907f\u514d\u5355\u6b21\u53ec\u56de\u5927\u91cf\u6570\u636e\uff0c\u5efa\u8bae\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"_source_includes"})," \u548c ",(0,c.jsx)(r.code,{children:"_source_excludes"})," \u53c2\u6570\u6765\u5305\u542b\u6216\u6392\u9664\u5b57\u6bb5\u3002"]}),"\n",(0,c.jsx)(r.p,{children:"\u5927\u578b\u6587\u6863\u5c24\u5176\u6709\u7528\uff0c\u90e8\u5206\u5b57\u6bb5\u68c0\u7d22\u53ef\u4ee5\u8282\u7701\u7f51\u7edc\u5f00\u9500\u3002"}),"\n",(0,c.jsx)(r.p,{children:"\u53c2\u8003\u793a\u4f8b\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'// \u521b\u5efaSearchSourceBuilder\uff0c\u5e76\u8bbe\u7f6e\u67e5\u8be2\u6761\u4ef6\n        SearchSourceBuilder sourceBuilder = new SearchSourceBuilder();\n        sourceBuilder.query(QueryBuilders.matchAllQuery());\n\n        // \u8bbe\u7f6e\u8981\u5305\u542b\u7684\u5b57\u6bb5\n        String[] includes = {"field1", "field2"};\n        sourceBuilder.fetchSource(includes, Strings.EMPTY_ARRAY);\n\n        // \u8bbe\u7f6e\u8981\u6392\u9664\u7684\u5b57\u6bb5\n        String[] excludes = {"field3"};\n        sourceBuilder.fetchSource(Strings.EMPTY_ARRAY, excludes);\n'})}),"\n",(0,c.jsxs)(r.h4,{id:"22-\u907f\u514d\u4f7f\u7528-wildcard-\u8fdb\u884c\u4e2d\u7f00\u6a21\u7cca\u67e5\u8be2",children:["22. \u907f\u514d\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Wildcard"})," \u8fdb\u884c\u4e2d\u7f00\u6a21\u7cca\u67e5\u8be2\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["ES \u5b98\u65b9\u6587\u6863\u5e76\u4e0d\u63a8\u8350\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Wildcard"})," \u6765\u8fdb\u884c\u4e2d\u7f00\u6a21\u7cca\u7684\u67e5\u8be2\uff0c\u539f\u56e0\u5728\u4e8e ES \u5185\u90e8\u4e3a\u4e86\u52a0\u901f\u8fd9\u79cd\u5e26\u6709\u901a\u914d\u7b26\u67e5\u8be2\uff0c\u4f1a\u5c06\u8f93\u5165\u7684\u5b57\u7b26\u4e32 ",(0,c.jsx)(r.code,{children:"Pattern"})," \u6784\u5efa\u6210\u4e00\u4e2a DFA (",(0,c.jsx)(r.code,{children:"Deterministic Finite Automaton"}),")\uff0c\u800c\u5e26\u6709\u901a\u914d\u7b26\u7684 ",(0,c.jsx)(r.code,{children:"Pattern"})," \u6784\u9020\u51fa\u6765\u7684 DFA \u53ef\u80fd\u4f1a\u5f88\u590d\u6742\uff0c\u5f00\u9500\u5f88\u5927\u3002"]}),"\n",(0,c.jsxs)(r.blockquote,{children:["\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.code,{children:"wildcard"})," \u548c ",(0,c.jsx)(r.code,{children:"regexp"})," \u67e5\u8be2\u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0e ",(0,c.jsx)(r.code,{children:"prefix"})," \u67e5\u8be2\u5b8c\u5168\u4e00\u6837\uff0c\u5b83\u4eec\u4e5f\u9700\u8981\u626b\u63cf\u5012\u6392\u7d22\u5f15\u4e2d\u7684\u8bcd\u5217\u8868\u624d\u80fd\u627e\u5230\u6240\u6709\u5339\u914d\u7684\u8bcd\uff0c\u7136\u540e\u4f9d\u6b21\u83b7\u53d6\u6bcf\u4e2a\u8bcd\u76f8\u5173\u7684\u6587\u6863ID\uff0c\u4e0e ",(0,c.jsx)(r.code,{children:"prefx"})," \u67e5\u8be2\u7684\u552f\u4e00\u4e0d\u540c\u662f:\u5b83\u4eec\u80fd\u652f\u6301\u66f4\u4e3a\u590d\u6742\u7684\u5339\u914d\u6a21\u5f0f"]}),"\n",(0,c.jsxs)(r.p,{children:["\u8fd9\u4e5f\u610f\u5473\u7740\u9700\u8981\u540c\u6837\u6ce8\u610f\u524d\u7f00\u67e5\u8be2\u5b58\u5728\u6027\u80fd\u95ee\u9898\uff0c\u5bf9\u6709\u5f88\u591a\u552f\u4e00\u8bcd\u7684\u5b57\u6bb5\u6267\u884c\u8fd9\u4e9b\u67e5\u8be2\u53ef\u80fd\u4f1a\u6d88\u8017\u975e\u5e38\u591a\u7684\u8d44\u6e90\uff0c\u6240\u4ee5\u8981\u907f\u514d\u4f7f\u7528\u5de6\u901a\u914d\u8fd9\u6837\u7684\u6a21\u5f0f\u5339\u914d (\u5982: ",(0,c.jsx)(r.code,{children:"*foo"}),"\u6216 ",(0,c.jsx)(r.code,{children:"*foo"})," \u8fd9\u6837\u7684\u6b63\u5219\u5f0f)\u3002"]}),"\n",(0,c.jsx)(r.p,{children:"\u6570\u636e\u5728\u7d22\u5f15\u65f6\u7684\u9884\u5904\u7406\u6709\u52a9\u4e8e\u63d0\u9ad8\u524d\u7f00\u5339\u914d\u7684\u6548\u7387\uff0c\u800c\u901a\u914d\u7b26\u548c\u6b63\u5219\u8868\u8fbe\u5f0f\u67e5\u8be2\u53ea\u80fd\u5728\u67e5\u8be2\u65f6\u5b8c\u6210\uff0c\u5c3d\u7ba1\u8fd9\u4e9b\u67e5\u8be2\u6709\u5176\u5e94\u7528\u573a\u666f\uff0c\u4f46\u4f7f\u7528\u4ecd\u9700\u8c28\u614e\u3002"}),"\n"]}),"\n",(0,c.jsxs)(r.p,{children:["\u5efa\u8bae\u4f7f\u7528 ES \u5b98\u65b9\u5728 7.9 \u63a8\u51fa\u7684\u4e00\u79cd\u4e13\u95e8\u7528\u6765\u89e3\u51b3\u6a21\u7cca\u67e5\u8be2\u6162\u7684 ",(0,c.jsx)(r.code,{children:"Wildcard"})," \u5b57\u6bb5\u7c7b\u578b\u3002\u4e0e ",(0,c.jsx)(r.code,{children:"Text"})," \u5b57\u6bb5\u76f8\u6bd4\uff0c\u5b83\u4e0d\u4f1a\u5c06\u6587\u672c\u770b\u4f5c\u662f\u6807\u70b9\u7b26\u53f7\u5206\u5272\u7684\u5355\u8bcd\u96c6\u5408\uff1b\u4e0e ",(0,c.jsx)(r.code,{children:"Keyword"})," \u5b57\u6bb5\u6bd4\uff0c\u5b83\u5728\u4e2d\u7f00\u641c\u7d22\u573a\u666f\u4e0b\u5177\u6709\u65e0\u4e0e\u4f26\u6bd4\u7684\u67e5\u8be2\u901f\u5ea6\uff0c\u4e14\u5bf9\u8f93\u5165\u6ca1\u6709\u5927\u5c0f\u9650\u5236\uff0c\u8fd9\u662f ",(0,c.jsx)(r.code,{children:"Keyword"})," \u7c7b\u578b\u65e0\u6cd5\u76f8\u6bd4\u7684\u3002"]}),"\n",(0,c.jsxs)(r.h4,{id:"23-\u907f\u514d\u4f7f\u7528-scripting",children:["23. \u907f\u514d\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Scripting"}),"\u3002"]}),"\n",(0,c.jsx)(r.p,{children:"Painless \u811a\u672c\u8bed\u8a00\u8bed\u6cd5\u76f8\u5bf9\u7b80\u5355\uff0c\u7075\u6d3b\u5ea6\u9ad8\uff0c\u5b89\u5168\u6027\u9ad8\uff0c\u6027\u80fd\u9ad8\uff08\u76f8\u5bf9\u4e8e\u5176\u4ed6\u811a\u672c\uff0c\u4f46\u662f\u5176\u6027\u80fd\u6bd4 DSL \u8981\u4f4e\uff09\u3002\u4e0d\u9002\u7528\u4e8e\u975e\u590d\u6742\u4e1a\u52a1\uff0c\u4e00\u822c DSL \u80fd\u89e3\u51b3\u5927\u90e8\u5206\u7684\u95ee\u9898\uff0c\u89e3\u51b3\u4e0d\u4e86\u7684\u7528\u7c7b\u4f3c Painless \u7b49\u811a\u672c\u8bed\u8a00\u3002\u4e3b\u8981\u6027\u80fd\u5f71\u54cd\u5982\u4e0b\uff1a\u5355\u6b21\u67e5\u8be2\u6216\u66f4\u65b0\u8017\u65f6\u589e\u52a0\uff0c\u811a\u672c\u7684\u6267\u884c\u65f6\u95f4\u76f8\u6bd4\u4e8e\u5176\u4ed6\u67e5\u8be2\u548c\u66f4\u65b0\u64cd\u4f5c\u53ef\u80fd\u4f1a\u66f4\u957f\uff0c\u56e0\u4e3a\u5728\u6267\u884c\u811a\u672c\u4e4b\u524d\u9700\u8981\u5bf9\u5176\u8fdb\u884c\u8bcd\u6cd5\u5206\u6790\u3001\u8bed\u6cd5\u5206\u6790\u548c\u4ee3\u7801\u7f16\u8bd1\u7b49\u9884\u5904\u7406\u5de5\u4f5c\u3002"}),"\n",(0,c.jsxs)(r.h4,{id:"24-\u907f\u514d\u4f7f\u7528\u811a\u672c\u67e5\u8be2script-query\u8ba1\u7b97\u52a8\u6001\u5b57\u6bb5\u5efa\u8bae\u5728\u7d22\u5f15\u65f6\u8ba1\u7b97\u5e76\u5728\u6587\u6863\u4e2d\u6dfb\u52a0\u8be5\u5b57\u6bb5",children:["24. \u907f\u514d\u4f7f\u7528\u811a\u672c\u67e5\u8be2\uff08",(0,c.jsx)(r.code,{children:"Script Query"}),"\uff09\u8ba1\u7b97\u52a8\u6001\u5b57\u6bb5\uff0c\u5efa\u8bae\u5728\u7d22\u5f15\u65f6\u8ba1\u7b97\u5e76\u5728\u6587\u6863\u4e2d\u6dfb\u52a0\u8be5\u5b57\u6bb5\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u4f8b\u5982\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u5305\u542b\u5927\u91cf\u7528\u6237\u4fe1\u606f\u7684\u7d22\u5f15\uff0c\u6211\u4eec\u9700\u8981\u67e5\u8be2\u4ee5",(0,c.jsx)(r.code,{children:'"1234"'}),"\u5f00\u5934\u7684\u6240\u6709\u7528\u6237\u3002\u8fd0\u884c\u4e00\u4e2a\u811a\u672c\u67e5\u8be2\u5982",(0,c.jsx)(r.code,{children:"\"source\": \"doc['num'].value.startsWith('1234')\""}),"\u3002\u8fd9\u4e2a\u67e5\u8be2\u975e\u5e38\u8017\u8d39\u8d44\u6e90\uff0c\u7d22\u5f15\u65f6\u8003\u8651\u6dfb\u52a0",(0,c.jsx)(r.code,{children:"num_prefix"}),"\u7684",(0,c.jsx)(r.code,{children:"keyword"}),"\u5b57\u6bb5\uff0c\u7136\u540e\u67e5\u8be2",(0,c.jsx)(r.code,{children:'"name_prefix": "1234"'}),"\u3002"]}),"\n",(0,c.jsx)(r.h2,{id:"\u4e09\u5199\u5165\u76f8\u5173",children:"\u4e09\u3001\u5199\u5165\u76f8\u5173"}),"\n",(0,c.jsxs)(r.h4,{id:"25-\u907f\u514d\u4ee3\u7801\u4e2d\u6216\u624b\u5de5\u76f4\u63a5-refresh-\u64cd\u4f5c",children:["25. \u907f\u514d\u4ee3\u7801\u4e2d\u6216\u624b\u5de5\u76f4\u63a5 ",(0,c.jsx)(r.code,{children:"Refresh"})," \u64cd\u4f5c\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u5408\u7406\u8bbe\u7f6e\u7d22\u5f15 ",(0,c.jsx)(r.code,{children:"Settings/Refresh_Interval"})," \u65f6\u95f4\uff0c\u901a\u8fc7\u7cfb\u7edf\u5b8c\u6210 ",(0,c.jsx)(r.code,{children:"Refresh"})," \u52a8\u4f5c\u3002"]}),"\n",(0,c.jsx)(r.h4,{id:"26-\u907f\u514d\u5355\u4e2a\u6587\u6863\u8fc7\u5927",children:"26. \u907f\u514d\u5355\u4e2a\u6587\u6863\u8fc7\u5927\u3002"}),"\n",(0,c.jsxs)(r.p,{children:["\u9274\u4e8e\u9ed8\u8ba4 ",(0,c.jsx)(r.code,{children:"http.max_content_length"})," \u8bbe\u7f6e\u4e3a ",(0,c.jsx)(r.code,{children:"100MB"}),"\uff0cElasticsearch \u5c06\u62d2\u7edd\u7d22\u5f15\u4efb\u4f55\u5927\u4e8e\u8be5\u503c\u7684\u6587\u6863\u3002"]}),"\n",(0,c.jsx)(r.h4,{id:"27-\u5199\u5165\u6570\u636e\u4e0d\u6307\u5b9a-doc_id\u8ba9-es-\u81ea\u52a8\u751f\u6210",children:"27. \u5199\u5165\u6570\u636e\u4e0d\u6307\u5b9a Doc_ID\uff0c\u8ba9 ES \u81ea\u52a8\u751f\u6210\u3002"}),"\n",(0,c.jsx)(r.p,{children:"\u7d22\u5f15\u5177\u6709\u663e\u5f0f ID \u7684\u6587\u6863\u65f6 ES \u5728\u5199\u5165\u8fc7\u7a0b\u4e2d\u4f1a\u591a\u4e00\u6b65\u5224\u65ad\u7684\u8fc7\u7a0b\uff0c\u5373\u68c0\u67e5\u5177\u6709\u76f8\u540cID \u7684\u6587\u6863\u662f\u5426\u5df2\u7ecf\u5b58\u5728\u4e8e\u76f8\u540c\u7684\u5206\u7247\u4e2d\uff0c\u968f\u7740\u7d22\u5f15\u589e\u957f\u800c\u53d8\u5f97\u66f4\u52a0\u6602\u8d35\u3002"}),"\n",(0,c.jsxs)(r.h4,{id:"28-\u5408\u7406\u4f7f\u7528-bulk-api-\u6279\u91cf\u5199",children:["28. \u5408\u7406\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Bulk API"})," \u6279\u91cf\u5199\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u5927\u6570\u636e\u91cf\u5199\u5165\u65f6\u53ef\u4ee5\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Bulk"}),"\uff0c\u4f46\u662f\u8bf7\u6c42\u54cd\u5e94\u7684\u8017\u65f6\u4f1a\u589e\u52a0\uff0c\u5373\u4f7f\u8fde\u63a5\u65ad\u5f00\uff0cES \u96c6\u7fa4\u5185\u90e8\u4e5f\u4ecd\u7136\u5728\u6267\u884c\u3002\u9ad8\u901f\u5927\u6279\u91cf\u6570\u636e\u5199\u5165\u65f6\uff0c\u53ef\u80fd\u9020\u6210\u96c6\u7fa4\u77ed\u65f6\u95f4\u5185\u54cd\u5e94\u7f13\u6162\u751a\u81f3\u5047\u6b7b\u7684\u7684\u60c5\u51b5\u3002"]}),"\n",(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsxs)(r.li,{children:["\n",(0,c.jsxs)(r.p,{children:["\u53ef\u4ee5\u901a\u8fc7\u6027\u80fd\u6d4b\u8bd5\u786e\u5b9a\u6700\u4f73\u6570\u91cf\uff0c\u5b98\u65b9\u5efa\u8bae\u5927\u7ea6 ",(0,c.jsx)(r.code,{children:"5-15mb"}),"\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(r.li,{children:["\n",(0,c.jsxs)(r.p,{children:["\u8d85\u65f6\u65f6\u95f4\u9700\u8981\u8db3\u591f\u957f\uff0c\u5efa\u8bae ",(0,c.jsx)(r.code,{children:"60s"})," \u4ee5\u4e0a\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(r.li,{children:["\n",(0,c.jsx)(r.p,{children:"\u5199\u5165\u7aef\u5c3d\u91cf\u5c06\u6570\u636e\u8f6e\u8be2\u6253\u5230\u4e0d\u540c\u8282\u70b9\u4e0a\u3002"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(r.h4,{id:"29-\u811a\u672c\u5237\u5927\u91cf\u6570\u636e\u5199\u5165\u524d\u8c03\u5927-refresh-interval\u4e0d\u5efa\u8bae\u5c06\u526f\u672c\u5206\u7247\u4e3a-0\u5f85\u5199\u5165\u5b8c\u6210\u540e\u518d\u8c03\u56de\u6765",children:["29. \u811a\u672c\u5237\u5927\u91cf\u6570\u636e\uff0c\u5199\u5165\u524d\u8c03\u5927 ",(0,c.jsx)(r.code,{children:"Refresh Interval"}),"\uff0c\u4e0d\u5efa\u8bae\u5c06\u526f\u672c\u5206\u7247\u4e3a 0\uff0c\u5f85\u5199\u5165\u5b8c\u6210\u540e\u518d\u8c03\u56de\u6765\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u526f\u672c\u5206\u7247\u91cd\u65b0\u52a0\u5165\u8282\u70b9\u4f1a\u89e6\u53d1\u526f\u5206\u7247\u6062\u590d ",(0,c.jsx)(r.code,{children:"Recovery"})," \u6d41\u7a0b\uff0c\u5982\u679c\u662f\u5927\u5206\u7247\u4f1a\u5f71\u54cd\u96c6\u7fa4\u6027\u80fd\u3002"]}),"\n",(0,c.jsx)(r.h2,{id:"\u56db\u7d22\u5f15\u521b\u5efa",children:"\u56db\u3001\u7d22\u5f15\u521b\u5efa"}),"\n",(0,c.jsx)(r.h3,{id:"1-\u5206\u7247",children:"1. \u5206\u7247"}),"\n",(0,c.jsx)(r.h4,{id:"30-\u526f\u672c\u5206\u7247\u6570\u5927\u4e8e\u7b49\u4e8e-1",children:"30. \u526f\u672c\u5206\u7247\u6570\u5927\u4e8e\u7b49\u4e8e 1\u3002"}),"\n",(0,c.jsx)(r.p,{children:"\u9ad8\u53ef\u7528\u6027\u4fdd\u8bc1\u3002\u589e\u52a0\u526f\u672c\u6570\u53ef\u4ee5\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u63d0\u9ad8\u641c\u7d22\u6027\u80fd\uff1b\u4f46\u4f1a\u964d\u4f4e\u5199\u5165\u6027\u80fd\uff0c\u5efa\u8bae\u6bcf\u4e2a\u4e3b\u5206\u7247\u5bf9\u5e94 1-2 \u4e2a\u526f\u672c\u5206\u7247\u5373\u53ef\u3002"}),"\n",(0,c.jsx)(r.h4,{id:"31-\u5b98\u65b9\u5efa\u8bae\u5355\u5206\u7247\u9650\u5236\u6700\u5927\u6570\u636e\u6761\u6570\u4e0d\u8d85\u8fc7-232---1",children:"31. \u5b98\u65b9\u5efa\u8bae\u5355\u5206\u7247\u9650\u5236\u6700\u5927\u6570\u636e\u6761\u6570\u4e0d\u8d85\u8fc7 2^32 - 1\u3002"}),"\n",(0,c.jsx)(r.h4,{id:"32-\u7d22\u5f15\u4e3b\u5206\u7247\u6570\u91cf\u4e0d\u8981\u8bbe\u7f6e\u8fc7\u5927",children:"32. \u7d22\u5f15\u4e3b\u5206\u7247\u6570\u91cf\u4e0d\u8981\u8bbe\u7f6e\u8fc7\u5927\u3002"}),"\n",(0,c.jsx)(r.p,{children:"ES \u521b\u5efa\u597d\u7d22\u5f15\u540e\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u4e0d\u518d\u52a8\u6001\u8c03\u6574\u4e3b\u5206\u7247\u6570\u91cf\u3002"}),"\n",(0,c.jsx)(r.p,{children:"\u6bcf\u4e2a\u5206\u7247\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a Lucene \u7d22\u5f15\uff0c\u56e0\u6b64\u4f1a\u6d88\u8017\u76f8\u5e94\u7684\u6587\u4ef6\u53e5\u67c4\u3001\u5185\u5b58\u548c CPU \u8d44\u6e90\u3002"}),"\n",(0,c.jsx)(r.p,{children:"ES \u4f7f\u7528\u8bcd\u9891\u7edf\u8ba1\u6765\u8ba1\u7b97\u76f8\u5173\u6027\uff0c\u5f53\u7136\u8fd9\u4e9b\u7edf\u8ba1\u4e5f\u4f1a\u5206\u914d\u5230\u5404\u4e2a\u5206\u7247\u4e0a\uff0c\u5982\u679c\u5728\u5927\u91cf\u5206\u7247\u4e0a\u53ea\u7ef4\u62a4\u4e86\u5f88\u5c11\u7684\u6570\u636e\uff0c\u5219\u5c06\u5bfc\u81f4\u6700\u7ec8\u7684\u6587\u6863\u76f8\u5173\u6027\u8f83\u5dee\u3002"}),"\n",(0,c.jsx)(r.p,{children:"\u4e00\u822c\u6765\u8bf4\uff0c\u6211\u4eec\u9075\u5faa\u4e00\u4e9b\u539f\u5219\uff1a"}),"\n",(0,c.jsxs)(r.ol,{children:["\n",(0,c.jsxs)(r.li,{children:["\n",(0,c.jsx)(r.p,{children:"\u8bfb\u573a\u666f\u8f83\u591a\u5219\u53ef\u4ee5\u8bbe\u7f6e\u5c11\u4e00\u70b9\uff0c\u5199\u573a\u666f\u5219\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e00\u4e9b\u3002"}),"\n"]}),"\n",(0,c.jsxs)(r.li,{children:["\n",(0,c.jsx)(r.p,{children:"\u63a7\u5236\u6bcf\u4e2a\u5206\u7247\u5360\u7528\u7684\u786c\u76d8\u5bb9\u91cf\u4e0d\u8d85\u8fc7ES\u7684\u6700\u5927 JVM \u7684\u5806\u7a7a\u95f4\u8bbe\u7f6e\uff0832G\uff09\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u7d22\u5f15\u7684\u603b\u5bb9\u91cf\u5728 200G \u5de6\u53f3\uff0c\u90a3\u5206\u7247\u5927\u5c0f\u5728 7-8 \u4e2a\u5de6\u53f3\u5373\u53ef\u3002"}),"\n"]}),"\n",(0,c.jsxs)(r.li,{children:["\n",(0,c.jsx)(r.p,{children:"\u8003\u8651\u4e00\u4e0b Node \u6570\u91cf\uff0c\u4e00\u822c\u4e00\u4e2a\u8282\u70b9\u5bf9\u5e94\u4e00\u53f0\u7269\u7406\u673a\uff0c\u5982\u679c\u5206\u7247\u6570\u8fdc\u5927\u4e8e\u8282\u70b9\u6570\uff0c\u5219\u4e00\u4e2a\u8282\u70b9\u4e0a\u5b58\u5728\u591a\u4e2a\u5206\u7247\uff0c\u4e00\u65e6\u8be5\u8282\u70b9\u6545\u969c\uff0c\u5373\u4f7f\u4fdd\u6301\u4e861\u4e2a\u4ee5\u4e0a\u7684\u526f\u672c\uff0c\u540c\u6837\u6709\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u4e22\u5931\uff0c\u96c6\u7fa4\u65e0\u6cd5\u6062\u590d\u3002\u6240\u4ee5\uff0c \u4e00\u822c\u90fd\u8bbe\u7f6e\u5206\u7247\u6570\u4e0d\u8d85\u8fc7\u8282\u70b9\u6570\u7684 3 \u500d\u3002"}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(r.h4,{id:"33-\u5355\u4e2a\u5206\u7247\u6570\u636e\u91cf\u4e0d\u8981\u8d85\u8fc7-50gb",children:"33. \u5355\u4e2a\u5206\u7247\u6570\u636e\u91cf\u4e0d\u8981\u8d85\u8fc7 50GB\u3002"}),"\n",(0,c.jsx)(r.p,{children:"\u5355\u4e2a\u7d22\u5f15\u7684\u89c4\u6a21\u63a7\u5236\u5728 1TB \u4ee5\u5185\uff0c\u5355\u4e2a\u5206\u7247\u5927\u5c0f\u63a7\u5236\u5728 30 ~ 50GB \uff0cDocs \u6570\u63a7\u5236\u5728 10 \u4ebf\u5185\uff0c\u5982\u679c\u8d85\u8fc7\u5efa\u8bae\u6eda\u52a8\u3002"}),"\n",(0,c.jsx)(r.h3,{id:"2-mapping\u8bbe\u8ba1",children:"2. Mapping\u8bbe\u8ba1"}),"\n",(0,c.jsx)(r.h4,{id:"34-\u907f\u514d\u4f7f\u7528\u5b57\u6bb5\u52a8\u6001\u6620\u5c04\u529f\u80fd\u6307\u5b9a\u5177\u4f53\u5b57\u6bb5\u7c7b\u578b\u5b50\u7c7b\u578b\u82e5\u9700\u8981\u5206\u8bcd\u5668\u7279\u522b\u6709\u573a\u666f\u9700\u8981",children:"34. \u907f\u514d\u4f7f\u7528\u5b57\u6bb5\u52a8\u6001\u6620\u5c04\u529f\u80fd\uff0c\u6307\u5b9a\u5177\u4f53\u5b57\u6bb5\u7c7b\u578b\uff0c\u5b50\u7c7b\u578b\uff08\u82e5\u9700\u8981\uff09\uff0c\u5206\u8bcd\u5668\uff08\u7279\u522b\u6709\u573a\u666f\u9700\u8981\uff09\u3002"}),"\n",(0,c.jsxs)(r.h4,{id:"35-\u5bf9\u4e8e\u4e0d\u9700\u8981\u5206\u8bcd\u7684\u5b57\u7b26\u4e32\u5b57\u6bb5\u4f7f\u7528-keyword-\u7c7b\u578b\u800c\u4e0d\u662f-text-\u7c7b\u578b",children:["35. \u5bf9\u4e8e\u4e0d\u9700\u8981\u5206\u8bcd\u7684\u5b57\u7b26\u4e32\u5b57\u6bb5\uff0c\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Keyword"})," \u7c7b\u578b\u800c\u4e0d\u662f ",(0,c.jsx)(r.code,{children:"Text"})," \u7c7b\u578b\u3002"]}),"\n",(0,c.jsx)(r.h4,{id:"36-es-\u9ed8\u8ba4\u5b57\u6bb5\u4e2a\u6570\u6700\u5927-1000\u5efa\u8bae\u4e0d\u8981\u8d85\u8fc7-100",children:"36. ES \u9ed8\u8ba4\u5b57\u6bb5\u4e2a\u6570\u6700\u5927 1000\uff0c\u5efa\u8bae\u4e0d\u8981\u8d85\u8fc7 100\u3002"}),"\n",(0,c.jsxs)(r.p,{children:["\u5355\u4e2a Doc \u5728\u5efa\u7acb\u7d22\u5f15\u65f6\u7684\u8fd0\u7b97\u590d\u6742\u5ea6\uff0c\u6700\u5927\u7684\u56e0\u7d20\u4e0d\u5728\u4e8e Doc \u7684\u5b57\u8282\u6570\u6216\u8005\u8bf4\u67d0\u4e2a\u5b57\u6bb5 ",(0,c.jsx)(r.code,{children:"Value"})," \u7684\u957f\u5ea6\uff0c\u800c\u662f\u5b57\u6bb5\u7684\u6570\u91cf\u3002\u4f8b\u5982\u5728\u6ee1\u8d1f\u8f7d\u7684\u5199\u5165\u538b\u529b\u6d4b\u8bd5\u4e2d\uff0c",(0,c.jsx)(r.code,{children:"Mapping"})," \u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2a\u6709 10 \u4e2a\u5b57\u6bb5\uff0c200 \u5b57\u8282\u7684 Doc\uff0c \u901a\u8fc7\u589e\u52a0\u67d0\u4e9b\u5b57\u6bb5 ",(0,c.jsx)(r.code,{children:"Value"})," \u7684\u957f\u5ea6\u5230 500 \u5b57\u8282\uff0c\u5199\u5165 ES \u65f6\u901f\u5ea6\u4e0b\u964d\u5f88\u5c11\uff0c\u800c\u5982\u679c\u5b57\u6bb5\u6570\u589e\u52a0\u5230 20\uff0c\u5373\u4f7f\u6574\u4e2a Doc \u5b57\u8282\u6570\u6ca1\u589e\u52a0\u591a\u5c11\uff0c\u5199\u5165\u901f\u5ea6\u4e5f\u4f1a\u964d\u4f4e\u4e00\u500d\u3002"]}),"\n",(0,c.jsxs)(r.h4,{id:"37-\u5bf9\u4e8e\u4e0d\u7d22\u5f15\u5b57\u6bb5index-\u5c5e\u6027\u8bbe\u7f6e\u4e3a-false",children:["37. \u5bf9\u4e8e\u4e0d\u7d22\u5f15\u5b57\u6bb5\uff0c",(0,c.jsx)(r.code,{children:"Index"})," \u5c5e\u6027\u8bbe\u7f6e\u4e3a ",(0,c.jsx)(r.code,{children:"False"}),"\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u5728\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c",(0,c.jsx)(r.code,{children:"Title"})," \u5b57\u6bb5\u7684 ",(0,c.jsx)(r.code,{children:"Index"})," \u5c5e\u6027\u88ab\u8bbe\u7f6e\u4e3a ",(0,c.jsx)(r.code,{children:"False"}),"\uff0c\u8868\u793a\u8be5\u5b57\u6bb5\u4e0d\u4f1a\u88ab\u5305\u542b\u5728\u7d22\u5f15\u4e2d\u3002\u800c ",(0,c.jsx)(r.code,{children:"Content"})," \u5b57\u6bb5\u7684 ",(0,c.jsx)(r.code,{children:"Index"})," \u5c5e\u6027\u9ed8\u8ba4\u4e3a ",(0,c.jsx)(r.code,{children:"True"}),"\uff0c\u8868\u793a\u8be5\u5b57\u6bb5\u4f1a\u88ab\u5305\u542b\u5728\u7d22\u5f15\u4e2d\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5373\u4f7f ",(0,c.jsx)(r.code,{children:"Index"})," \u5c5e\u6027\u88ab\u8bbe\u7f6e\u4e3a ",(0,c.jsx)(r.code,{children:"False"}),"\uff0c\u8be5\u5b57\u6bb5\u4ecd\u7136\u4f1a\u88ab\u4fdd\u5b58\u5728\u6587\u6863\u4e2d\uff0c\u53ef\u4ee5\u88ab\u67e5\u8be2\u548c\u805a\u5408\u3002"]}),"\n",(0,c.jsx)(r.p,{children:"\u53c2\u8003\u793a\u4f8b\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'{\n  "mappings": {\n    "properties": {\n      "title": {\n        "type": "text",\n        "index": false\n      },\n      "content": {\n        "type": "text"\n      }\n    }\n  }\n}\n'})}),"\n",(0,c.jsxs)(r.h4,{id:"38-\u907f\u514d\u4f7f\u7528-nested-\u6216-parentchild",children:["38. \u907f\u514d\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Nested"})," \u6216 ",(0,c.jsx)(r.code,{children:"Parent/Child"}),"\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.code,{children:"Nested Query"}),"\u6162\uff0c",(0,c.jsx)(r.code,{children:"Parent/Child Query"})," \u66f4\u6162\uff0c\u9488\u5bf9 1 \u4e2a Document\uff0c\u6bcf\u4e00\u4e2a ",(0,c.jsx)(r.code,{children:"Nested Field"})," \u90fd\u4f1a\u751f\u6210\u4e00\u4e2a\u72ec\u7acb\u7684 ",(0,c.jsx)(r.code,{children:"Document"}),"\uff0c\u8fd9\u5c06\u4f7f Doc \u6570\u91cf\u5267\u589e\uff0c\u5f71\u54cd\u67e5\u8be2\u6548\u7387\u5c24\u5176\u662f JOIN \u7684\u6548\u7387\u3002\u56e0\u6b64\u80fd\u5728 ",(0,c.jsx)(r.code,{children:"Mapping"})," \u8bbe\u8ba1\u9636\u6bb5\u641e\u5b9a\u7684\uff08\u5927\u5bbd\u8868\u8bbe\u8ba1\u6216\u91c7\u7528\u6bd4\u8f83 Smart \u7684\u6570\u636e\u7ed3\u6784\uff09\uff0c\u5c31\u4e0d\u8981\u7528\u7236\u5b50\u5173\u7cfb\u7684 Mapping\u3002\u5982\u679c\u4e00\u5b9a\u8981\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Nested Fields"}),"\uff0c\u4fdd\u8bc1 ",(0,c.jsx)(r.code,{children:"Nested Fields"}),"\u5b57\u6bb5\u4e0d\u80fd\u8fc7\u591a\uff0c\u76ee\u524dES\u9ed8\u8ba4\u9650\u5236\u662f",(0,c.jsx)(r.code,{children:"Index.mapping.nested_fields.limit=50"}),"\u3002\u4e0d\u5efa\u8bae\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Nested"}),"\uff0c\u90a3\u6709\u4ec0\u4e48\u65b9\u5f0f\u6765\u89e3\u51b3 ES \u65e0\u6cd5 JOIN \u7684\u95ee\u9898\uff1f\u4e3b\u8981\u6709\u51e0\u79cd\u5b9e\u73b0\u65b9\u5f0f\uff1a"]}),"\n",(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsxs)(r.li,{children:["\n",(0,c.jsx)(r.p,{children:"\u5728\u6587\u6863\u5efa\u6a21\u4e0a\u5c3d\u53ef\u80fd\u5728\u8bbe\u8ba1\u65f6\u5c06\u4e1a\u52a1\u8f6c\u5316\u6709\u5173\u8054\u5173\u7cfb\u7684\u6587\u6863\u5f62\u5f0f\uff0c\u4f7f\u7528\u6241\u5e73\u7684\u6587\u6863\u6a21\u578b\u3002"}),"\n"]}),"\n",(0,c.jsxs)(r.li,{children:["\n",(0,c.jsx)(r.p,{children:"\u72ec\u7acb\u7d22\u5f15\u5b58\u50a8\uff0c\u5b9e\u9645\u4e1a\u52a1\u5c42\u5206\u591a\u6b21\u8bf7\u6c42\u5b9e\u73b0\u3002"}),"\n"]}),"\n",(0,c.jsxs)(r.li,{children:["\n",(0,c.jsx)(r.p,{children:"\u901a\u8fc7\u5bbd\u8868\u5197\u4f59\u5b58\u50a8\u907f\u514d\u5173\u8054\u3002"}),"\n"]}),"\n",(0,c.jsxs)(r.li,{children:["\n",(0,c.jsxs)(r.p,{children:["\u5426\u5219 ",(0,c.jsx)(r.code,{children:"Nested"})," \u548c ",(0,c.jsx)(r.code,{children:"Parent/Child"})," \u5b58\u50a8\u5bf9\u6027\u80fd\u5747\u6709\u4e00\u5b9a\u5f71\u54cd\uff0c\u7531\u4e8e ",(0,c.jsx)(r.code,{children:"Nested"})," \u66f4\u65b0\u5b50\u6587\u6863\u65f6\u9700\u8981 Reindex \u6574\u4e2a\u6587\u6863\uff0c\u6240\u4ee5\u5bf9\u5199\u5165\u6027\u80fd\u5f71\u54cd\u8f83\u5927\uff0c\u9002\u7528\u4e8e 1 \u5bf9 n\uff08n \u8f83\u5c0f\uff09\u573a\u666f\uff1b",(0,c.jsx)(r.code,{children:"Parent/Child"})," \u5b58\u50a8\u5728\u76f8\u540c ",(0,c.jsx)(r.code,{children:"Type"})," \u4e2d\uff0c\u5199\u5165\u76f8\u6bd4 ",(0,c.jsx)(r.code,{children:"Nested"})," \u6027\u80fd\u9ad8\uff0c\u7528\u4e8e 1 \u5bf9 n\uff08n \u8f83\u5927\uff09\u573a\u666f\uff0c\u4f46\u6bd4 ",(0,c.jsx)(r.code,{children:"Nested"})," \u67e5\u8be2\u66f4\u6162\uff0c\u5b98\u7f51\u8bf4\u662f 5-10 \u500d\u5de6\u53f3\u3002"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(r.h4,{id:"39-\u907f\u514d\u4f7f\u7528-norms",children:"39. \u907f\u514d\u4f7f\u7528 Norms\u3002"}),"\n",(0,c.jsxs)(r.p,{children:["Norm \u662f\u7d22\u5f15\u8bc4\u5206\u56e0\u5b50\uff0c\u5982\u679c\u4e0d\u7528\u6309\u8bc4\u5206\u5bf9\u6587\u6863\u8fdb\u884c\u6392\u5e8f\uff0c\u8bbe\u7f6e\u4e3a",(0,c.jsx)(r.code,{children:"False"}),"\u3002"]}),"\n",(0,c.jsx)(r.p,{children:"\u53c2\u8003\u793a\u4f8b\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-shell",children:'"title": {"type": "string","norms": {"enabled": false}}\n'})}),"\n",(0,c.jsxs)(r.p,{children:["\u5bf9\u4e8e Text \u7c7b\u578b\u7684\u5b57\u6bb5\u800c\u8a00\uff0c\u9ed8\u8ba4\u5f00\u542f\u4e86 ",(0,c.jsx)(r.code,{children:"Norms"}),"\uff0c\u800c ",(0,c.jsx)(r.code,{children:"Keyword"})," \u7c7b\u578b\u7684\u5b57\u6bb5\u5219\u9ed8\u8ba4\u5173\u95ed\u4e86 ",(0,c.jsx)(r.code,{children:"Norms"}),"\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u5f00\u542f ",(0,c.jsx)(r.code,{children:"Norms"})," \u4e4b\u540e\uff0c\u6bcf\u7bc7\u6587\u6863\u7684\u6bcf\u4e2a\u5b57\u6bb5\u9700\u8981\u4e00\u4e2a\u5b57\u8282\u5b58\u50a8 ",(0,c.jsx)(r.code,{children:"Norms"}),"\u3002\u5bf9\u4e8e ",(0,c.jsx)(r.code,{children:"Text"})," \u7c7b\u578b\u7684\u5b57\u6bb5\u800c\u8a00\u662f\u9ed8\u8ba4\u5f00\u542f ",(0,c.jsx)(r.code,{children:"Norms"})," \u7684\uff0c\u56e0\u6b64\u5bf9\u4e8e\u4e0d\u9700\u8981\u8bc4\u5206\u7684 Text \u7c7b\u578b\u7684\u5b57\u6bb5\uff0c\u53ef\u4ee5\u7981\u7528 ",(0,c.jsx)(r.code,{children:"Norms"}),"\u3002"]}),"\n",(0,c.jsxs)(r.h4,{id:"40-\u5bf9\u4e0d\u9700\u8981\u8fdb\u884c\u805a\u5408\u6392\u5e8f\u7684\u5b57\u6bb5\u7981\u7528\u5217\u5b58-doc_values",children:["40. \u5bf9\u4e0d\u9700\u8981\u8fdb\u884c\u805a\u5408/\u6392\u5e8f\u7684\u5b57\u6bb5\u7981\u7528\u5217\u5b58 ",(0,c.jsx)(r.code,{children:"Doc_Values"}),"\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u9762\u5411\u5217\u7684\u65b9\u5f0f\u5b58\u50a8\uff0c\u4e3b\u8981\u7528\u6237\u6392\u5e8f\u3001\u805a\u5408\u548c\u8bbf\u95ee\u811a\u672c\u4e2d\u5b57\u6bb5\u503c\u7b49\u6570\u636e\u8bbf\u95ee\u573a\u666f\u3002\u51e0\u4e4e\u6240\u6709\u5b57\u6bb5\u7c7b\u578b\u90fd\u652f\u6301 ",(0,c.jsx)(r.code,{children:"Doc_Values"}),"\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u9700\u8981\u5206\u6790\u7684\u5b57\u7b26\u4e32\u5b57\u6bb5\u9664\u5916\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u652f\u6301 ",(0,c.jsx)(r.code,{children:"Doc_Values"})," \u7684\u5b57\u6bb5\u90fd\u542f\u7528\u4e86\u8fd9\u4e2a\u529f\u80fd\u3002\u5982\u679c\u786e\u5b9a\u4e0d\u9700\u8981\u5bf9\u5b57\u6bb5\u8fdb\u884c\u6392\u5e8f\u6216\u805a\u5408\uff0c\u6216\u4ece\u811a\u672c\u8bbf\u95ee\u5b57\u6bb5\u503c\uff0c\u5219\u53ef\u4ee5\u7981\u7528\u6b64\u529f\u80fd\u4ee5\u51cf\u5c11\u5197\u4f59\u5b58\u50a8\u6210\u672c\u3002"]}),"\n",(0,c.jsx)(r.h3,{id:"3-keyword\u548cnumeric\u7684\u9009\u62e9",children:"3. Keyword\u548cNumeric\u7684\u9009\u62e9"}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.code,{children:"Keyword"})," \u7c7b\u578b\u7684\u4e3b\u8981\u7f3a\u70b9\u662f\u5728\u805a\u5408\u7684\u65f6\u5019\u9700\u8981\u6784\u5efa\u5168\u5c40\u5e8f\u6570\uff0c\u800c\u6570\u503c\u7c7b\u578b\u5219\u4e0d\u7528\u3002\u4f46\u4f4e\u57fa\u6570\u5b57\u6bb5\u901a\u5e38\u4f1a\u547d\u4e2d\u5927\u91cf\u7ed3\u679c\u96c6\uff0c\u4f8b\u5982\u6027\u522b\uff0c\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Numeric"})," \u5219\u4f1a\u5728\u6784\u5efa ",(0,c.jsx)(r.code,{children:"Bitset"})," \u4e0a\u4ea7\u751f\u5f88\u9ad8\u7684\u4ee3\u4ef7\u3002\n\u7efc\u4e0a\u6240\u8ff0\uff0c\u5728\u7c7b\u578b\u9009\u62e9\u4e0a\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u539f\u5219\uff1a"]}),"\n",(0,c.jsxs)(r.ol,{children:["\n",(0,c.jsxs)(r.li,{children:["\n",(0,c.jsxs)(r.p,{children:["\u5728\u4ec5\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u6709 Range \u67e5\u8be2\u9700\u6c42\uff0c\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Numeric"}),"\uff0c\u5426\u5219\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"KeyWord"}),"\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(r.li,{children:["\n",(0,c.jsxs)(r.p,{children:["\u5728\u4ec5\u805a\u5408\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u660e\u786e\u5b57\u6bb5\u662f\u4f4e\u57fa\u6570\u7684\uff0c\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Keyword"})," \u914d\u5408 ",(0,c.jsx)(r.code,{children:"Execution_hint:map"}),"\uff0c\u5176\u4ed6\u60c5\u51b5\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Numeric"}),"\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(r.li,{children:["\n",(0,c.jsxs)(r.p,{children:["\u5269\u4e0b Term \u67e5\u8be2+\u805a\u5408\u7684\u573a\u666f\uff0c\u9700\u8981\u7efc\u5408\u8003\u8651 ",(0,c.jsx)(r.code,{children:"Numeric"})," \u7c7b\u578b ",(0,c.jsx)(r.code,{children:"Term"})," \u67e5\u8be2\u6784\u5efa ",(0,c.jsx)(r.code,{children:"BitSet"})," \u548c ",(0,c.jsx)(r.code,{children:"Keyword"})," \u7c7b\u578b\u6784\u5efa\u5168\u5c40\u5e8f\u6570\u54ea\u4e2a\u4ee3\u4ef7\u66f4\u5927\uff0c\u9700\u8981\u770b\u5b9e\u9645\u573a\u666f\uff0c\u4f46\u662f\u76ee\u524d\u6240\u77e5\u7684\u6700\u574f\u60c5\u51b5\u4e0b\uff0c\u6784\u5efa ",(0,c.jsx)(r.code,{children:"Bitset"})," \u4f1a\u5bfc\u81f4 CPU \u8dd1\u6ee1\uff0c\u6784\u5efa\u5168\u5c40\u5e8f\u6570\u7684\u4e3b\u8981\u95ee\u9898\u662f\u5e26\u6765\u7684\u67e5\u8be2\u5ef6\u8fdf\uff0c\u4e5f\u4f1a\u7ed9 JVM \u5e26\u6765\u4e00\u4e9b\u538b\u529b\u3002"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(r.h4,{id:"41-\u5bf9\u4e8e\u6781\u5c11\u4f7f\u7528-range-\u67e5\u8be2\u7684\u6570\u5b57\u503c\u4f7f\u7528-keyword-\u7c7b\u578b",children:["41. \u5bf9\u4e8e\u6781\u5c11\u4f7f\u7528 Range \u67e5\u8be2\u7684\u6570\u5b57\u503c\uff0c\u4f7f\u7528 ",(0,c.jsx)(r.code,{children:"Keyword"})," \u7c7b\u578b\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u5e76\u975e\u6240\u6709\u6570\u503c\u6570\u636e\u90fd\u5e94\u6620\u5c04\u4e3a\u6570\u503c\u5b57\u6bb5\u6570\u636e\u7c7b\u578b\u3002Elasticsearch \u4e3a\u67e5\u8be2\u4f18\u5316\u6570\u5b57\u5b57\u6bb5\uff0c\u4f8b\u5982 ",(0,c.jsx)(r.code,{children:"Integer or long"}),"\u3002\u5982\u679c\u4e0d\u9700\u8981\u8303\u56f4\u67e5\u627e\uff0c\u5bf9\u4e8e Term \u67e5\u8be2\u800c\u8a00\uff0cKeyword \u6bd4 ",(0,c.jsx)(r.code,{children:"Integer"})," \u6027\u80fd\u66f4\u597d\u3002"]}),"\n",(0,c.jsxs)(r.h4,{id:"42-\u5bf9\u4e8e\u6709\u9891\u7e41\u4e14\u8f83\u4e3a\u56fa\u5b9a\u7684-range-\u67e5\u8be2\u5b57\u6bb5\u589e\u52a0-keyword-\u7c7b\u578b-pre-indexing\u5b57\u6bb5",children:["42. \u5bf9\u4e8e\u6709\u9891\u7e41\u4e14\u8f83\u4e3a\u56fa\u5b9a\u7684 Range \u67e5\u8be2\u5b57\u6bb5\uff0c\u589e\u52a0 ",(0,c.jsx)(r.code,{children:"Keyword"})," \u7c7b\u578b ",(0,c.jsx)(r.code,{children:"Pre-Indexing"}),"\u5b57\u6bb5\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u5982\u679c\u5bf9\u5b57\u6bb5\u7684\u5927\u591a\u6570\u67e5\u8be2\u5728\u4e00\u4e2a\u56fa\u5b9a\u7684\u8303\u56f4\u4e0a\u8fd0\u884c ",(0,c.jsx)(r.code,{children:"Range"})," \u805a\u5408\uff0c\u90a3\u4e48\u53ef\u4ee5\u589e\u52a0\u4e00\u4e2a ",(0,c.jsx)(r.code,{children:"Keyword"})," \u7c7b\u578b\u7684\u5b57\u6bb5\uff0c\u901a\u8fc7\u5c06\u8303\u56f4",(0,c.jsx)(r.code,{children:"Pre-Indexing"}),"\u5230\u7d22\u5f15\u4e2d\u5e76\u4f7f\u7528 Terms \u805a\u5408\u6765\u52a0\u5feb\u805a\u5408\u901f\u5ea6\u3002"]}),"\n",(0,c.jsxs)(r.h4,{id:"43-\u5bf9\u9700\u8981\u805a\u5408\u67e5\u8be2\u7684\u9ad8\u57fa\u6570-keyword-\u5b57\u6bb5\u542f\u7528-eager_global_ordinals",children:["43. \u5bf9\u9700\u8981\u805a\u5408\u67e5\u8be2\u7684\u9ad8\u57fa\u6570 ",(0,c.jsx)(r.code,{children:"Keyword"})," \u5b57\u6bb5\u542f\u7528 ",(0,c.jsx)(r.code,{children:"Eager_Global_Ordinals"}),"\u3002"]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-shell",children:"\u53c2\u8003\uff1aeager_global_ordinals\n"})}),"\n",(0,c.jsxs)(r.p,{children:["\u5e8f\u53f7\uff08",(0,c.jsx)(r.code,{children:"Ordinals"}),"\uff09\u7528\u4e8e\u5728 ",(0,c.jsx)(r.code,{children:"Keyword"})," \u5b57\u6bb5\u4e0a\u8fd0\u884c ",(0,c.jsx)(r.code,{children:"Terms"})," \u805a\u5408\u3002\u5e8f\u53f7\u7528\u4e00\u4e2a\u81ea\u589e\u6570\u503c\u8868\u793a\uff0cES \u7ef4\u62a4\u8fd9\u4e2a\u81ea\u589e\u6570\u5b57\u4e0e\u5b9e\u9645\u503c\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u5e76\u4e3a\u6bcf\u4e00\u6570\u503c\u5206\u914d\u4e00\u4e2a ",(0,c.jsx)(r.code,{children:"Bucket"}),"\uff0c\u6620\u5c04\u5173\u7cfb\u662f ",(0,c.jsx)(r.code,{children:"Segment"})," \u7ea7\u522b\u7684\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u4f46\u662f\u505a\u805a\u5408\u64cd\u4f5c\u65f6\u5f80\u5f80\u9700\u8981\u7ed3\u5408\u591a\u4e2a ",(0,c.jsx)(r.code,{children:"Segment"})," \u7684\u7ed3\u679c\uff0c\u800c\u6bcf\u4e2a ",(0,c.jsx)(r.code,{children:"Segment"})," \u7684 ",(0,c.jsx)(r.code,{children:"Ordinals"})," \u6620\u5c04\u5173\u7cfb\u662f\u4e0d\u4e00\u81f4\u7684\uff0c\u6240\u4ee5 ES \u4f1a\u5728\u6bcf\u4e2a\u5206\u7247\u4e0a\u521b\u5efa\u5168\u5c40\u5e8f\u53f7\uff08",(0,c.jsx)(r.code,{children:"Global Ordinals"}),"\uff09\u7ed3\u6784 \uff0c\u4e00\u4e2a\u5168\u5c40\u7edf\u4e00\u7684\u6620\u5c04\uff0c\u7ef4\u62a4\u5168\u5c40\u7684 ",(0,c.jsx)(r.code,{children:"Ordinal"})," \u4e0e\u6bcf\u4e2a ",(0,c.jsx)(r.code,{children:"Segment"})," \u7684 ",(0,c.jsx)(r.code,{children:"Ordinal"})," \u7684\u6620\u5c04\u5173\u7cfb\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c",(0,c.jsx)(r.code,{children:"Global Ordinals"})," \u9ed8\u8ba4\u662f\u5ef6\u65f6\u6784\u5efa\uff0c\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u5982 Term Aggregation \u4f7f\u7528\u5230\u65f6\u624d\u4f1a\u6784\u5efa\u3002\u56e0\u4e3a ES \u4e0d\u77e5\u9053\u54ea\u4e9b\u5b57\u6bb5\u5c06\u7528\u4e8e Terms \u805a\u5408\uff0c\u54ea\u4e9b\u5b57\u6bb5\u4e0d\u4f1a\u3002\u5bf9\u4e8e\u57fa\u6570\u5927\u7684\u5b57\u6bb5\uff0c\u6784\u5efa\u6210\u672c\u8f83\u5927\u3002"]}),"\n",(0,c.jsxs)(r.p,{children:["\u542f\u7528 ",(0,c.jsx)(r.code,{children:"eager_global_ordinals"})," \u540e\uff0cElasticsearch \u4f1a\u5728\u5206\u7247\u6784\u5efa\u65f6\u9884\u5148\u8ba1\u7b97\u51fa\u5168\u5c40\u8bcd\u9879\u8868\uff0c\u4ee5\u4fbf\u5728\u67e5\u8be2\u65f6\u80fd\u591f\u66f4\u5feb\u5730\u52a0\u8f7d\u548c\u4f7f\u7528\u3002\u4f46\u542f\u7528 ",(0,c.jsx)(r.code,{children:"eager_global_ordinals"})," \u540e\uff0c\u6bcf\u6b21\u6267\u884c ",(0,c.jsx)(r.code,{children:"Refresh"})," \u64cd\u4f5c\u90fd\u4f1a\u6784\u5efa ",(0,c.jsx)(r.code,{children:"Global Ordinals"}),"\uff0c\u76f8\u5f53\u4e8e\u628a\u641c\u7d22\u65f6\u5019\u82b1\u8d39\u7684\u6784\u5efa\u6210\u672c\u8f6c\u79fb\u5230\u5199\u5165\u65f6\uff0c\u6240\u4ee5\u4f1a\u5bf9\u5199\u5165\u6548\u7387\u6709\u4e00\u5b9a\u7684\u5f71\u54cd\uff0c\u53ef\u4ee5\u914d\u5408\u589e\u5927\u7d22\u5f15\u7684 ",(0,c.jsx)(r.code,{children:"Refresh Interval"})," \u6765\u4f7f\u7528\u3002"]}),"\n",(0,c.jsx)(r.p,{children:"\u53c2\u8003\u793a\u4f8b\uff1a"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",children:'PUT index\n{\n    "mappings": {\n        "type": { \n            "properties": {\n                "foo": {\n                    "type": "keyword",\n                    "eager_global_ordinals" : true\n                }\n            }\n        }\n    }\n}\n'})}),"\n",(0,c.jsx)(r.h2,{id:"\u4e94\u603b\u7ed3",children:"\u4e94\u3001\u603b\u7ed3"}),"\n",(0,c.jsx)(r.p,{children:"\u6700\u8fd1\u5341\u5e74\uff0cElasticsearch \u5df2\u7ecf\u6210\u4e3a\u4e86\u6700\u53d7\u6b22\u8fce\u7684\u5f00\u6e90\u68c0\u7d22\u5f15\u64ce\uff0c\u5e76\u6c89\u6dc0\u4e86\u5927\u91cf\u7684\u5b9e\u8df5\u6848\u4f8b\u53ca\u4f18\u5316\u603b\u7ed3\u3002\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u5c3d\u53ef\u80fd\u5168\u9762\u5730\u603b\u7ed3\u4e86 Elasticsearch \u65e5\u5e38\u5f00\u53d1\u4e2d\u7684\u4e00\u4e9b\u91cd\u8981\u5b9e\u8df5&\u907f\u5751\u6307\u5357\uff0c\u5e0c\u671b\u80fd\u4e3a\u5927\u5bb6\u63d0\u4f9b Elasticsearch \u4f7f\u7528\u4e0a\u7684\u4e00\u4e9b\u501f\u9274\u70b9\uff0c\u6b22\u8fce\u8ba8\u8bba\uff01"}),"\n",(0,c.jsx)(r.h2,{id:"\u516d\u53c2\u8003\u6587\u7ae0",children:"\u516d\u3001\u53c2\u8003\u6587\u7ae0\uff1a"}),"\n",(0,c.jsxs)(r.ol,{children:["\n",(0,c.jsx)(r.li,{children:"\u300aElasticsearch \u6e90\u7801\u89e3\u6790\u4e0e\u4f18\u5316\u5b9e\u6218\u300b"}),"\n",(0,c.jsx)(r.li,{children:"\u300aElasticsearch\u6743\u5a01\u6307\u5357\u300b"}),"\n",(0,c.jsx)(r.li,{children:(0,c.jsx)(r.a,{href:"https://www.easyice.cn/archives/367",children:"https://www.easyice.cn/archives/367"})}),"\n",(0,c.jsx)(r.li,{children:(0,c.jsx)(r.a,{href:"https://www.elastic.co/guide/en/elasticsearch/guide/current/filter-caching.html#_independent_query_caching",children:"https://www.elastic.co/guide/en/elasticsearch/guide/current/filter-caching.html#_independent_query_caching"})}),"\n",(0,c.jsx)(r.li,{children:(0,c.jsx)(r.a,{href:"https://www.elastic.co/guide/cn/elasticsearch/guide/current/_preventing_combinatorial_explosions.html",children:"https://www.elastic.co/guide/cn/elasticsearch/guide/current/_preventing_combinatorial_explosions.html"})}),"\n",(0,c.jsx)(r.li,{children:(0,c.jsx)(r.a,{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/eager-global-ordinals.html",children:"https://www.elastic.co/guide/en/elasticsearch/reference/current/eager-global-ordinals.html"})}),"\n"]})]})}function t(e={}){const{wrapper:r}={...(0,l.R)(),...e.components};return r?(0,c.jsx)(r,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}}}]);