"use strict";(self.webpackChunklight_docusaurus=self.webpackChunklight_docusaurus||[]).push([[23357],{89428:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>d,contentTitle:()=>t,default:()=>m,frontMatter:()=>r,metadata:()=>o,toc:()=>i});var s=l(74848),c=l(28453);const r={},t=void 0,o={id:"zh-cn/devenv/Docker-Mysql",title:"Docker-Mysql",description:"- Mysql Offical",source:"@site/docs/zh-cn/devenv/10-Docker-Mysql.md",sourceDirName:"zh-cn/devenv",slug:"/zh-cn/devenv/Docker-Mysql",permalink:"/light-docusaurus/docs/zh-cn/devenv/Docker-Mysql",draft:!1,unlisted:!1,editUrl:"https://github.com/lorchr/light-docusaurus/tree/main/docs/zh-cn/devenv/10-Docker-Mysql.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{},sidebar:"troch",previous:{title:"Maven-Mvnd",permalink:"/light-docusaurus/docs/zh-cn/devenv/Maven-Mvnd"},next:{title:"Docker-Pgsql",permalink:"/light-docusaurus/docs/zh-cn/devenv/Docker-Pgsql"}},d={},i=[{value:"1. Docker\u5b89\u88c5Mysql 5.7",id:"1-docker\u5b89\u88c5mysql-57",level:2},{value:"2. Docker\u5b89\u88c5Mysql 8.0",id:"2-docker\u5b89\u88c5mysql-80",level:2},{value:"3. \u914d\u7f6e",id:"3-\u914d\u7f6e",level:2}];function a(n){const e={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.mysql.com/",children:"Mysql Offical"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/docker-mysql-getting-started.html",children:"Mysql Offical Docker"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://hub.docker.com/_/mysql",children:"Mysql Docker"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"1-docker\u5b89\u88c5mysql-57",children:"1. Docker\u5b89\u88c5Mysql 5.7"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"# \u521b\u5efaNetwork\ndocker network create dev\n\n# \u521b\u5efa\u6570\u636e\u5377\ndocker volume create mysql_data;\n\n# \u521b\u5efa\u6587\u4ef6\u5939\nmkdir -p //d/docker/mysql/{conf,data,logs}\n\n# \u83b7\u53d6\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\ndocker run -d --env MYSQL_ROOT_PASSWORD=admin --name mysql_temp mysql:5.7 \\\n&& docker cp mysql_temp:/etc/mysql/conf.d/mysql.cnf  D:/docker/mysql/conf/mysql.cnf \\\n&& docker cp mysql_temp:/etc/mysql/mysql.conf.d/mysqld.cnf  D:/docker/mysql/conf/mysqld.cnf \\\n&& docker cp mysql_temp:/etc/mysql/conf.d/mysqldump.cnf D:/docker/mysql/conf/mysqldump.cnf \\\n&& docker cp mysql_temp:/etc/mysql/conf.d/docker.cnf D:/docker/mysql/conf/docker.cnf \\\n&& docker stop mysql_temp && docker rm mysql_temp\n\n# \u8fd0\u884c\u5bb9\u5668\ndocker run -d \\\n  --publish 3306:3306 \\\n  --volume //d/docker/mysql/data:/var/lib/mysql \\\n  --volume //d/docker/mysql/conf:/etc/mysql/conf.d \\\n  --volume //d/docker/mysql/logs:/var/log/mysql \\\n  --env MYSQL_ROOT_PASSWORD=admin \\\n  --env MYSQL_DATABASE=light \\\n  --env MYSQL_USER=light \\\n  --env MYSQL_PASSWORD=light \\\n  --net dev \\\n  --restart=on-failure:3 \\\n  --name mysql5 \\\n  mysql:5.7\n\ndocker exec -it -u root mysql5 /bin/bash\n\nmysql -u root -p\n\nSHOW DATABASES;\nUSE mysql;\nSELECT user, host, authentication_string, plugin FROM user;\nDROP USER 'light'@'%';\nCREATE USER 'light'@'%' IDENTIFIED BY 'light';\nGRANT ALL PRIVILEGES ON *.* TO 'light'@'%' WITH GRANT OPTION;\nFLUSH PRIVILEGES;\n\ndocker container restart mysql5\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Account","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"root/admin"}),"\n",(0,s.jsx)(e.li,{children:"light/light"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"2-docker\u5b89\u88c5mysql-80",children:"2. Docker\u5b89\u88c5Mysql 8.0"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"docker run -d \\\n  --publish 3308:3306 \\\n  --volume //d/docker/mysql/data:/var/lib/mysql \\\n  --volume //d/docker/mysql/conf:/etc/mysql/conf.d \\\n  --volume //d/docker/mysql/logs:/var/log/mysql \\\n  --env MYSQL_ROOT_PASSWORD=admin \\\n  --env MYSQL_DATABASE=light \\\n  --env MYSQL_USER=light \\\n  --env MYSQL_PASSWORD=light \\\n  --net dev \\\n  --restart=on-failure:3 \\\n  --name mysql8 \\\n  mysql:8.0\n\ndocker exec -it -u root mysql8 /bin/bash\n\nmysql -u root -p\n\nSHOW DATABASES;\nUSE mysql;\nSELECT user, host, authentication_string, plugin FROM user;\nDROP USER 'light'@'%';\nCREATE USER 'light'@'%' IDENTIFIED BY 'light';\nGRANT ALL PRIVILEGES ON *.* TO 'light'@'%' WITH GRANT OPTION;\nFLUSH PRIVILEGES;\n\ndocker container restart mysql8\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Account","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"root/admin"}),"\n",(0,s.jsx)(e.li,{children:"light/light"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"3-\u914d\u7f6e",children:"3. \u914d\u7f6e"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"vim /etc/mysql/conf.d/mysql.cnf\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-conf",children:"[client]\ndefault-character-set = utf8mb4\n\n[mysql]\ndefault-character-set = utf8mb4\n\n[mysqld]\ncharacter-set-client-handshake = FALSE\ncharacter-set-server = utf8mb4\ncollation-server = utf8mb4_unicode_ci\ninit_connect='SET NAMES utf8mb4'\n# \u8bbe\u7f6e\u8868\u540d\u5927\u5c0f\u5199\u654f\u611f\nlower_case_table_names=0\n"})}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"lower_case_file_system: \u5f53\u524d\u6587\u4ef6\u7cfb\u7edf\u662f\u5426\u5927\u5c0f\u5199\u654f\u611f\uff08ON-\u654f\u611f\uff0cOFF-\u4e0d\u654f\u611f\uff09\uff0c\u53ea\u8bfb\u53c2\u6570\uff0c\u65e0\u6cd5\u4fee\u6539"}),"\n",(0,s.jsxs)(e.li,{children:["lower_case_table_names: \u6b64\u53c2\u6570\u4e0d\u53ef\u4ee5\u52a8\u6001\u4fee\u6539\uff0c\u5fc5\u987b\u91cd\u542f\u6570\u636e\u5e93","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"0 \u8868\u540d\u5b58\u50a8\u533a\u5206\u5927\u5c0f\u5199\uff0c\u6bd4\u8f83\u65f6\u533a\u5206\u5927\u5c0f\u5199"}),"\n",(0,s.jsx)(e.li,{children:"1 \u8868\u540d\u5b58\u50a8\u65f6\u8f6c\u4e3a\u5c0f\u5199\uff0c\u6bd4\u8f83\u65f6\u4e0d\u533a\u5206\u5927\u5c0f\u5199"}),"\n",(0,s.jsx)(e.li,{children:"2 \u8868\u540d\u5b58\u50a8\u533a\u5206\u5927\u5c0f\u5199\uff0c\u6bd4\u8f83\u65f6\u4e3a\u8f6c\u4e3a\u5c0f\u5199"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u4fee\u6539 ",(0,s.jsx)(e.code,{children:"lower_case_table_names"})," \u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u8868\u5220\u9664\u5931\u8d25\uff0c\u6b64\u65f6\u9700\u8981\u6539\u56de\u4e4b\u524d\u7684\u914d\u7f6e\u518d\u8fdb\u884c\u5220\u9664\uff0c\u6216\u8005\u5728\u6570\u636e\u76ee\u5f55\u4f7f\u7528\u547d\u4ee4\u5220\u9664 ",(0,s.jsx)(e.code,{children:"rm-rf /database"})]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://blog.csdn.net/u012643122/article/details/125899829",children:"windows docker\u91cc\u5b89\u88c5\u5e76\u4f7f\u7528mysql\uff08\u5185\u542bmysql\u4e3b\u4ece\u642d\u5efa\uff09"})})]})}function m(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(a,{...n})}):a(n)}},28453:(n,e,l)=>{l.d(e,{R:()=>t,x:()=>o});var s=l(96540);const c={},r=s.createContext(c);function t(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:t(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);