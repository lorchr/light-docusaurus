"use strict";(self.webpackChunklight_docusaurus=self.webpackChunklight_docusaurus||[]).push([[91937],{8965:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/4-2-480e9f4d44cce711116ab947c4257f11.awebp"},13708:(e,t,n)=>{n.d(t,{A:()=>i});const i="data:;base64,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"},19745:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/4-6-95f4ae5220d211617b470064b962a733.awebp"},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>s});var i=n(96540);const r={},o=i.createContext(r);function a(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(o.Provider,{value:t},e.children)}},38127:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/4-4-01ade90a24c3ad9fc3d8e1a05eed24ae.awebp"},55322:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/4-9-823fd3b2cf316dbe4c7fb9b82ed1ccd6.awebp"},58322:(e,t,n)=>{n.d(t,{A:()=>i});const i="data:;base64,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"},66264:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/4-7-b6b42435cb3a58b5a480089ceeec0b59.awebp"},68414:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/4-5-67d44bdf6c020b24c181163195e18635.awebp"},79558:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"zh-cn/spring-authorization-server/SAS-Device-Authorization","title":"SAS-Device-Authorization","description":"- Spring Authorization Server\u5165\u95e8 (\u56db) \u81ea\u5b9a\u4e49\u8bbe\u5907\u7801\u6388\u6743","source":"@site/docs/zh-cn/spring-authorization-server/4-SAS-Device-Authorization.md","sourceDirName":"zh-cn/spring-authorization-server","slug":"/zh-cn/spring-authorization-server/SAS-Device-Authorization","permalink":"/docs/zh-cn/spring-authorization-server/SAS-Device-Authorization","draft":false,"unlisted":false,"editUrl":"https://github.com/lorchr/light-docusaurus/tree/main/docs/zh-cn/spring-authorization-server/4-SAS-Device-Authorization.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"troch","previous":{"title":"SAS-Spring-Boot-Authorization-Server-Addition","permalink":"/docs/zh-cn/spring-authorization-server/SAS-Spring-Boot-Authorization-Server-Addition"},"next":{"title":"SAS-Customize-Exception-Configurer","permalink":"/docs/zh-cn/spring-authorization-server/SAS-Customize-Exception-Configurer"}}');var r=n(74848),o=n(28453);const a={},s=void 0,c={},u=[{value:"\u4e00\u3001\u4ee3\u7801\u96c6\u6210",id:"\u4e00\u4ee3\u7801\u96c6\u6210",level:2},{value:"1. \u6dfb\u52a0DeviceClientAuthenticationToken",id:"1-\u6dfb\u52a0deviceclientauthenticationtoken",level:3},{value:"2. \u6dfb\u52a0DeviceClientAuthenticationConverter",id:"2-\u6dfb\u52a0deviceclientauthenticationconverter",level:3},{value:"3. \u6dfb\u52a0DeviceClientAuthenticationProvider",id:"3-\u6dfb\u52a0deviceclientauthenticationprovider",level:3},{value:"4. \u5728\u767b\u5f55\u9875\u9762\u540c\u8def\u5f84\u4e0b\u6dfb\u52a0device-activate.html",id:"4-\u5728\u767b\u5f55\u9875\u9762\u540c\u8def\u5f84\u4e0b\u6dfb\u52a0device-activatehtml",level:3},{value:"5. \u5728\u767b\u5f55\u9875\u9762\u540c\u8def\u5f84\u4e0b\u6dfb\u52a0device-activated.html",id:"5-\u5728\u767b\u5f55\u9875\u9762\u540c\u8def\u5f84\u4e0b\u6dfb\u52a0device-activatedhtml",level:3},{value:"6. \u590d\u5236devices.png\u81f3resources\\static\\assets\\img\u4e0b",id:"6-\u590d\u5236devicespng\u81f3resourcesstaticassetsimg\u4e0b",level:3},{value:"7. AuthorizationController\u63a5\u53e3\u6dfb\u52a0\u8f6c\u53d1\u63a5\u53e3",id:"7-authorizationcontroller\u63a5\u53e3\u6dfb\u52a0\u8f6c\u53d1\u63a5\u53e3",level:3},{value:"8. AuthorizationConfig\u6587\u4ef6\u4e2d\u6dfb\u52a0\u76f8\u5173\u914d\u7f6e\uff0c\u5c06provider\u548cconverter\u6dfb\u52a0\u81f3\u7aef\u70b9\u914d\u7f6e\u4e2d",id:"8-authorizationconfig\u6587\u4ef6\u4e2d\u6dfb\u52a0\u76f8\u5173\u914d\u7f6e\u5c06provider\u548cconverter\u6dfb\u52a0\u81f3\u7aef\u70b9\u914d\u7f6e\u4e2d",level:3},{value:"\u4e8c\u3001\u6d4b\u8bd5\u8bbe\u5907\u7801\u6d41\u7a0b",id:"\u4e8c\u6d4b\u8bd5\u8bbe\u5907\u7801\u6d41\u7a0b",level:2},{value:"1. \u8bbe\u5907\u53d1\u8d77\u6388\u6743\u8bf7\u6c42\uff0c\u643a\u5e26\u8981\u6c42\u7684\u53c2\u6570\u8bf7\u6c42<code>/oauth2/device_authorization</code>\u63a5\u53e3",id:"1-\u8bbe\u5907\u53d1\u8d77\u6388\u6743\u8bf7\u6c42\u643a\u5e26\u8981\u6c42\u7684\u53c2\u6570\u8bf7\u6c42oauth2device_authorization\u63a5\u53e3",level:3},{value:"2. \u8bbf\u95eeverification_uri\u6216\u8005verification_uri_complete",id:"2-\u8bbf\u95eeverification_uri\u6216\u8005verification_uri_complete",level:3},{value:"3. \u8f93\u5165user_code\u5e76\u63d0\u4ea4",id:"3-\u8f93\u5165user_code\u5e76\u63d0\u4ea4",level:3},{value:"4. \u91cd\u5b9a\u5411\u81f3\u7528\u6237\u6388\u6743\u786e\u8ba4\u9875\u9762",id:"4-\u91cd\u5b9a\u5411\u81f3\u7528\u6237\u6388\u6743\u786e\u8ba4\u9875\u9762",level:3},{value:"5. \u6388\u6743\u6210\u529f\u540e\u8df3\u8f6c\u81f3\u6210\u529f\u9875\u9762",id:"5-\u6388\u6743\u6210\u529f\u540e\u8df3\u8f6c\u81f3\u6210\u529f\u9875\u9762",level:3},{value:"6. \u8bbe\u5907\u53d1\u8d77\u8bf7\u6c42\u7528\u8bbe\u5907\u7801\u6362\u53d6token\uff0c\u8bf7\u6c42<code>/oauth2/token</code>\u63a5\u53e3",id:"6-\u8bbe\u5907\u53d1\u8d77\u8bf7\u6c42\u7528\u8bbe\u5907\u7801\u6362\u53d6token\u8bf7\u6c42oauth2token\u63a5\u53e3",level:3},{value:"\u4e09\u3001\u5199\u5728\u6700\u540e",id:"\u4e09\u5199\u5728\u6700\u540e",level:2}];function l(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://juejin.cn/post/7241101553712283707",children:"Spring Authorization Server\u5165\u95e8 (\u56db) \u81ea\u5b9a\u4e49\u8bbe\u5907\u7801\u6388\u6743"})}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"\u4e00\u4ee3\u7801\u96c6\u6210",children:"\u4e00\u3001\u4ee3\u7801\u96c6\u6210"}),"\n",(0,r.jsxs)(t.p,{children:["\u6dfb\u52a0\u4e00\u4e2aauthorization\u5305\uff0c\u6587\u4ef6\u90fd\u653e\u5728\u8be5\u5305\u4e0b\uff0c\u4ee3\u7801\u53c2\u8003",(0,r.jsx)(t.a,{href:"https://github.com/spring-projects/spring-authorization-server/blob/main/samples/demo-authorizationserver",children:"\u5b98\u65b9\u793a\u4f8b"})]}),"\n",(0,r.jsx)(t.h3,{id:"1-\u6dfb\u52a0deviceclientauthenticationtoken",children:"1. \u6dfb\u52a0DeviceClientAuthenticationToken"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:"package com.example.authorization;\n\nimport java.util.Map;\n\nimport org.springframework.lang.Nullable;\nimport org.springframework.security.core.Transient;\nimport org.springframework.security.oauth2.core.ClientAuthenticationMethod;\nimport org.springframework.security.oauth2.server.authorization.authentication.OAuth2ClientAuthenticationToken;\nimport org.springframework.security.oauth2.server.authorization.client.RegisteredClient;\n\n/**\n * \u8bbe\u5907\u7801\u6a21\u5f0ftoken\n *\n * @author Joe Grandja\n * @author Steve Riesenberg\n * @since 1.1\n */\n@Transient\npublic class DeviceClientAuthenticationToken extends OAuth2ClientAuthenticationToken {\n\n    public DeviceClientAuthenticationToken(String clientId, ClientAuthenticationMethod clientAuthenticationMethod,\n                                           @Nullable Object credentials, @Nullable Map<String, Object> additionalParameters) {\n        super(clientId, clientAuthenticationMethod, credentials, additionalParameters);\n    }\n\n    public DeviceClientAuthenticationToken(RegisteredClient registeredClient, ClientAuthenticationMethod clientAuthenticationMethod,\n                                           @Nullable Object credentials) {\n        super(registeredClient, clientAuthenticationMethod, credentials);\n    }\n\n}\n"})}),"\n",(0,r.jsx)(t.h3,{id:"2-\u6dfb\u52a0deviceclientauthenticationconverter",children:"2. \u6dfb\u52a0DeviceClientAuthenticationConverter"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:"package com.example.authorization;\n\nimport jakarta.servlet.http.HttpServletRequest;\n\nimport org.springframework.http.HttpMethod;\nimport org.springframework.lang.Nullable;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.oauth2.core.AuthorizationGrantType;\nimport org.springframework.security.oauth2.core.ClientAuthenticationMethod;\nimport org.springframework.security.oauth2.core.OAuth2AuthenticationException;\nimport org.springframework.security.oauth2.core.OAuth2ErrorCodes;\nimport org.springframework.security.oauth2.core.endpoint.OAuth2ParameterNames;\nimport org.springframework.security.web.authentication.AuthenticationConverter;\nimport org.springframework.security.web.util.matcher.AndRequestMatcher;\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\nimport org.springframework.security.web.util.matcher.RequestMatcher;\nimport org.springframework.util.StringUtils;\n\n/**\n * \u83b7\u53d6\u8bf7\u6c42\u4e2d\u53c2\u6570\u8f6c\u5316\u4e3aDeviceClientAuthenticationToken\n *\n * @author Joe Grandja\n * @author Steve Riesenberg\n * @since 1.1\n */\npublic final class DeviceClientAuthenticationConverter implements AuthenticationConverter {\n    private final RequestMatcher deviceAuthorizationRequestMatcher;\n    private final RequestMatcher deviceAccessTokenRequestMatcher;\n\n    public DeviceClientAuthenticationConverter(String deviceAuthorizationEndpointUri) {\n        RequestMatcher clientIdParameterMatcher = request ->\n                request.getParameter(OAuth2ParameterNames.CLIENT_ID) != null;\n        this.deviceAuthorizationRequestMatcher = new AndRequestMatcher(\n                new AntPathRequestMatcher(\n                        deviceAuthorizationEndpointUri, HttpMethod.POST.name()),\n                clientIdParameterMatcher);\n        this.deviceAccessTokenRequestMatcher = request ->\n                AuthorizationGrantType.DEVICE_CODE.getValue().equals(request.getParameter(OAuth2ParameterNames.GRANT_TYPE)) &&\n                        request.getParameter(OAuth2ParameterNames.DEVICE_CODE) != null &&\n                        request.getParameter(OAuth2ParameterNames.CLIENT_ID) != null;\n    }\n\n    @Nullable\n    @Override\n    public Authentication convert(HttpServletRequest request) {\n        if (!this.deviceAuthorizationRequestMatcher.matches(request) &&\n                !this.deviceAccessTokenRequestMatcher.matches(request)) {\n            return null;\n        }\n\n        // client_id (REQUIRED)\n        String clientId = request.getParameter(OAuth2ParameterNames.CLIENT_ID);\n        if (!StringUtils.hasText(clientId) ||\n                request.getParameterValues(OAuth2ParameterNames.CLIENT_ID).length != 1) {\n            throw new OAuth2AuthenticationException(OAuth2ErrorCodes.INVALID_REQUEST);\n        }\n\n        return new DeviceClientAuthenticationToken(clientId, ClientAuthenticationMethod.NONE, null, null);\n    }\n\n}\n"})}),"\n",(0,r.jsx)(t.h3,{id:"3-\u6dfb\u52a0deviceclientauthenticationprovider",children:"3. \u6dfb\u52a0DeviceClientAuthenticationProvider"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'package com.example.authorization;\n\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.security.authentication.AuthenticationProvider;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.AuthenticationException;\nimport org.springframework.security.oauth2.core.ClientAuthenticationMethod;\nimport org.springframework.security.oauth2.core.OAuth2AuthenticationException;\nimport org.springframework.security.oauth2.core.OAuth2Error;\nimport org.springframework.security.oauth2.core.OAuth2ErrorCodes;\nimport org.springframework.security.oauth2.core.endpoint.OAuth2ParameterNames;\nimport org.springframework.security.oauth2.server.authorization.client.RegisteredClient;\nimport org.springframework.security.oauth2.server.authorization.client.RegisteredClientRepository;\nimport org.springframework.security.oauth2.server.authorization.web.OAuth2ClientAuthenticationFilter;\n\n/**\n * \u8bbe\u5907\u7801\u8ba4\u8bc1\u63d0\u4f9b\u8005\n *\n * @author Joe Grandja\n * @author Steve Riesenberg\n * @author vains\n * @since 1.1\n * @see DeviceClientAuthenticationToken\n * @see DeviceClientAuthenticationConverter\n * @see OAuth2ClientAuthenticationFilter\n */\n@Slf4j\n@RequiredArgsConstructor\npublic final class DeviceClientAuthenticationProvider implements AuthenticationProvider {\n\n    private final RegisteredClientRepository registeredClientRepository;\n\n    /**\n     * \u5f02\u5e38\u8bf4\u660e\u5730\u5740\n     */\n    private static final String ERROR_URI = "https://datatracker.ietf.org/doc/html/rfc6749#section-3.2.1";\n\n\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n        // \u6267\u884c\u65f6\u80af\u5b9a\u662f\u8bbe\u5907\u7801\u6d41\u7a0b\n        DeviceClientAuthenticationToken deviceClientAuthentication =\n                (DeviceClientAuthenticationToken) authentication;\n\n        // \u53ea\u652f\u6301\u516c\u5171\u5ba2\u6237\u7aef\n        if (!ClientAuthenticationMethod.NONE.equals(deviceClientAuthentication.getClientAuthenticationMethod())) {\n            return null;\n        }\n\n        // \u83b7\u53d6\u5ba2\u6237\u7aefid\u5e76\u67e5\u8be2\n        String clientId = deviceClientAuthentication.getPrincipal().toString();\n        RegisteredClient registeredClient = this.registeredClientRepository.findByClientId(clientId);\n        if (registeredClient == null) {\n            throwInvalidClient(OAuth2ParameterNames.CLIENT_ID);\n        }\n\n        if (log.isTraceEnabled()) {\n            log.trace("Retrieved registered client");\n        }\n\n        // \u6821\u9a8c\u5ba2\u6237\u7aef\n        if (!registeredClient.getClientAuthenticationMethods().contains(\n                deviceClientAuthentication.getClientAuthenticationMethod())) {\n            throwInvalidClient("authentication_method");\n        }\n\n        if (log.isTraceEnabled()) {\n            log.trace("Validated device client authentication parameters");\n        }\n\n        if (log.isTraceEnabled()) {\n            log.trace("Authenticated device client");\n        }\n\n        return new DeviceClientAuthenticationToken(registeredClient,\n                deviceClientAuthentication.getClientAuthenticationMethod(), null);\n    }\n\n    @Override\n    public boolean supports(Class<?> authentication) {\n        // \u53ea\u5904\u7406\u8bbe\u5907\u7801\u8bf7\u6c42\n        return DeviceClientAuthenticationToken.class.isAssignableFrom(authentication);\n    }\n\n    private static void throwInvalidClient(String parameterName) {\n        OAuth2Error error = new OAuth2Error(\n                OAuth2ErrorCodes.INVALID_CLIENT,\n                "Device client authentication failed: " + parameterName,\n                ERROR_URI\n        );\n        throw new OAuth2AuthenticationException(error);\n    }\n\n}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"4-\u5728\u767b\u5f55\u9875\u9762\u540c\u8def\u5f84\u4e0b\u6dfb\u52a0device-activatehtml",children:"4. \u5728\u767b\u5f55\u9875\u9762\u540c\u8def\u5f84\u4e0b\u6dfb\u52a0device-activate.html"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">\n<head>\n    <meta charset="utf-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <title>Spring Authorization Server sample</title>\n    <link rel="stylesheet" href="/webjars/bootstrap/css/bootstrap.css" th:href="@{/webjars/bootstrap/css/bootstrap.css}" />\n</head>\n<body>\n<div class="container">\n    <div class="row py-5">\n        <div class="col-md-5">\n            <h2>Device Activation</h2>\n            <p>Enter the activation code to authorize the device.</p>\n            <div class="mt-5">\n                <form th:action="@{/oauth2/device_verification}" method="post">\n                    <div class="mb-3">\n                        <label for="user_code" class="form-label">Activation Code</label>\n                        <input type="text" id="user_code" name="user_code" class="form-control" required autofocus>\n                    </div>\n                    <div class="mb-3">\n                        <button type="submit" class="btn btn-primary">Submit</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n        <div class="col-md-7">\n            <img src="/assets/img/devices.png" th:src="@{/assets/img/devices.png}" class="img-responsive" alt="Devices">\n        </div>\n    </div>\n</div>\n</body>\n</html>\n'})}),"\n",(0,r.jsx)(t.h3,{id:"5-\u5728\u767b\u5f55\u9875\u9762\u540c\u8def\u5f84\u4e0b\u6dfb\u52a0device-activatedhtml",children:"5. \u5728\u767b\u5f55\u9875\u9762\u540c\u8def\u5f84\u4e0b\u6dfb\u52a0device-activated.html"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">\n<head>\n    <meta charset="utf-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <title>Spring Authorization Server sample</title>\n    <link rel="stylesheet" href="/webjars/bootstrap/css/bootstrap.css" th:href="@{/webjars/bootstrap/css/bootstrap.css}" />\n</head>\n<body>\n<div class="container">\n    <div class="row py-5">\n        <div class="col-md-5">\n            <h2 class="text-success">Success!</h2>\n            <p>\n                You have successfully activated your device.<br/>\n                Please return to your device to continue.\n            </p>\n        </div>\n        <div class="col-md-7">\n            <img src="/assets/img/devices.png" th:src="@{/assets/img/devices.png}" class="img-responsive" alt="Devices">\n        </div>\n    </div>\n</div>\n</body>\n</html>\n'})}),"\n",(0,r.jsx)(t.h3,{id:"6-\u590d\u5236devicespng\u81f3resourcesstaticassetsimg\u4e0b",children:"6. \u590d\u5236devices.png\u81f3resources\\static\\assets\\img\u4e0b"}),"\n",(0,r.jsx)(t.p,{children:"device-activate.html\u9875\u9762\u4e2d\u6709\u7528\u5230\u8be5\u56fe\u7247"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"img",src:n(58322).A+"",width:"640",height:"357"})}),"\n",(0,r.jsx)(t.h3,{id:"7-authorizationcontroller\u63a5\u53e3\u6dfb\u52a0\u8f6c\u53d1\u63a5\u53e3",children:"7. AuthorizationController\u63a5\u53e3\u6dfb\u52a0\u8f6c\u53d1\u63a5\u53e3"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'@GetMapping("/activate")\npublic String activate(@RequestParam(value = "user_code", required = false) String userCode) {\n\tif (userCode != null) {\n\t\treturn "redirect:/oauth2/device_verification?user_code=" + userCode;\n\t}\n\treturn "device-activate";\n}\n\n@GetMapping("/activated")\npublic String activated() {\n\treturn "device-activated";\n}\n\n@GetMapping(value = "/", params = "success")\npublic String success() {\n\treturn "device-activated";\n}\n'})}),"\n",(0,r.jsx)(t.p,{children:"\u5b8c\u6574\u4ee3\u7801\u5982\u4e0b"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'package com.example.controller;\n\nimport lombok.Data;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.security.oauth2.core.endpoint.OAuth2ParameterNames;\nimport org.springframework.security.oauth2.core.oidc.OidcScopes;\nimport org.springframework.security.oauth2.server.authorization.OAuth2AuthorizationConsent;\nimport org.springframework.security.oauth2.server.authorization.OAuth2AuthorizationConsentService;\nimport org.springframework.security.oauth2.server.authorization.client.RegisteredClient;\nimport org.springframework.security.oauth2.server.authorization.client.RegisteredClientRepository;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.util.StringUtils;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\n\nimport java.security.Principal;\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Map;\nimport java.util.Set;\n\n/**\n * \u8ba4\u8bc1\u670d\u52a1\u5668\u76f8\u5173\u81ea\u5b9a\u63a5\u53e3\n *\n * @author vains\n */\n@Controller\n@RequiredArgsConstructor\npublic class AuthorizationController {\n\n    private final RegisteredClientRepository registeredClientRepository;\n\n    private final OAuth2AuthorizationConsentService authorizationConsentService;\n\n    @GetMapping("/activate")\n    public String activate(@RequestParam(value = "user_code", required = false) String userCode) {\n        if (userCode != null) {\n            return "redirect:/oauth2/device_verification?user_code=" + userCode;\n        }\n        return "device-activate";\n    }\n\n    @GetMapping("/activated")\n    public String activated() {\n        return "device-activated";\n    }\n\n    @GetMapping(value = "/", params = "success")\n    public String success() {\n        return "device-activated";\n    }\n\n    @GetMapping("/login")\n    public String login() {\n        return "login";\n    }\n\n    @GetMapping(value = "/oauth2/consent")\n    public String consent(Principal principal, Model model,\n                          @RequestParam(OAuth2ParameterNames.CLIENT_ID) String clientId,\n                          @RequestParam(OAuth2ParameterNames.SCOPE) String scope,\n                          @RequestParam(OAuth2ParameterNames.STATE) String state,\n                          @RequestParam(name = OAuth2ParameterNames.USER_CODE, required = false) String userCode) {\n\n        // Remove scopes that were already approved\n        Set<String> scopesToApprove = new HashSet<>();\n        Set<String> previouslyApprovedScopes = new HashSet<>();\n        RegisteredClient registeredClient = this.registeredClientRepository.findByClientId(clientId);\n        if (registeredClient == null) {\n            throw new RuntimeException("\u5ba2\u6237\u7aef\u4e0d\u5b58\u5728");\n        }\n        OAuth2AuthorizationConsent currentAuthorizationConsent =\n                this.authorizationConsentService.findById(registeredClient.getId(), principal.getName());\n        Set<String> authorizedScopes;\n        if (currentAuthorizationConsent != null) {\n            authorizedScopes = currentAuthorizationConsent.getScopes();\n        } else {\n            authorizedScopes = Collections.emptySet();\n        }\n        for (String requestedScope : StringUtils.delimitedListToStringArray(scope, " ")) {\n            if (OidcScopes.OPENID.equals(requestedScope)) {\n                continue;\n            }\n            if (authorizedScopes.contains(requestedScope)) {\n                previouslyApprovedScopes.add(requestedScope);\n            } else {\n                scopesToApprove.add(requestedScope);\n            }\n        }\n\n        model.addAttribute("clientId", clientId);\n        model.addAttribute("state", state);\n        model.addAttribute("scopes", withDescription(scopesToApprove));\n        model.addAttribute("previouslyApprovedScopes", withDescription(previouslyApprovedScopes));\n        model.addAttribute("principalName", principal.getName());\n        model.addAttribute("userCode", userCode);\n        if (StringUtils.hasText(userCode)) {\n            model.addAttribute("requestURI", "/oauth2/device_verification");\n        } else {\n            model.addAttribute("requestURI", "/oauth2/authorize");\n        }\n\n        return "consent";\n    }\n\n    private static Set<ScopeWithDescription> withDescription(Set<String> scopes) {\n        Set<ScopeWithDescription> scopeWithDescriptions = new HashSet<>();\n        for (String scope : scopes) {\n            scopeWithDescriptions.add(new ScopeWithDescription(scope));\n\n        }\n        return scopeWithDescriptions;\n    }\n\n    @Data\n    public static class ScopeWithDescription {\n        private static final String DEFAULT_DESCRIPTION = "UNKNOWN SCOPE - We cannot provide information about this permission, use caution when granting this.";\n        private static final Map<String, String> scopeDescriptions = new HashMap<>();\n        static {\n            scopeDescriptions.put(\n                    OidcScopes.PROFILE,\n                    "This application will be able to read your profile information."\n            );\n            scopeDescriptions.put(\n                    "message.read",\n                    "This application will be able to read your message."\n            );\n            scopeDescriptions.put(\n                    "message.write",\n                    "This application will be able to add new messages. It will also be able to edit and delete existing messages."\n            );\n            scopeDescriptions.put(\n                    "other.scope",\n                    "This is another scope example of a scope description."\n            );\n        }\n\n        public final String scope;\n        public final String description;\n\n        ScopeWithDescription(String scope) {\n            this.scope = scope;\n            this.description = scopeDescriptions.getOrDefault(scope, DEFAULT_DESCRIPTION);\n        }\n    }\n\n}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"8-authorizationconfig\u6587\u4ef6\u4e2d\u6dfb\u52a0\u76f8\u5173\u914d\u7f6e\u5c06provider\u548cconverter\u6dfb\u52a0\u81f3\u7aef\u70b9\u914d\u7f6e\u4e2d",children:"8. AuthorizationConfig\u6587\u4ef6\u4e2d\u6dfb\u52a0\u76f8\u5173\u914d\u7f6e\uff0c\u5c06provider\u548cconverter\u6dfb\u52a0\u81f3\u7aef\u70b9\u914d\u7f6e\u4e2d"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"authorizationServerSettings"}),"\u548c",(0,r.jsx)(t.code,{children:"registeredClientRepository"}),"\u662f\u5728",(0,r.jsx)(t.code,{children:"authorizationServerSecurityFilterChain"}),"\u65b9\u6cd5\u7684\u5165\u53c2\u4e2d\u6ce8\u5165\u7684"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'// \u65b0\u5efa\u8bbe\u5907\u7801converter\u548cprovider\nDeviceClientAuthenticationConverter deviceClientAuthenticationConverter =\n        new DeviceClientAuthenticationConverter(\n                authorizationServerSettings.getDeviceAuthorizationEndpoint());\nDeviceClientAuthenticationProvider deviceClientAuthenticationProvider =\n        new DeviceClientAuthenticationProvider(registeredClientRepository);\n\n\nhttp.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\n        // \u8bbe\u7f6e\u8bbe\u5907\u7801\u7528\u6237\u9a8c\u8bc1url(\u81ea\u5b9a\u4e49\u7528\u6237\u9a8c\u8bc1\u9875)\n        .deviceAuthorizationEndpoint(deviceAuthorizationEndpoint ->\n                deviceAuthorizationEndpoint.verificationUri("/activate")\n        )\n        // \u8bbe\u7f6e\u9a8c\u8bc1\u8bbe\u5907\u7801\u7528\u6237\u786e\u8ba4\u9875\u9762\n        .deviceVerificationEndpoint(deviceVerificationEndpoint ->\n                deviceVerificationEndpoint.consentPage(CUSTOM_CONSENT_PAGE_URI)\n        )\n        .clientAuthentication(clientAuthentication ->\n                // \u5ba2\u6237\u7aef\u8ba4\u8bc1\u6dfb\u52a0\u8bbe\u5907\u7801\u7684converter\u548cprovider\n                clientAuthentication\n                        .authenticationConverter(deviceClientAuthenticationConverter)\n                        .authenticationProvider(deviceClientAuthenticationProvider)\n        );\n'})}),"\n",(0,r.jsxs)(t.p,{children:["\u5b8c\u6574",(0,r.jsx)(t.code,{children:"AuthorizationConfig.java"}),"\u5185\u5bb9\u5982\u4e0b"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'package com.example.config;\n\nimport com.example.authorization.DeviceClientAuthenticationConverter;\nimport com.example.authorization.DeviceClientAuthenticationProvider;\nimport com.nimbusds.jose.jwk.JWKSet;\nimport com.nimbusds.jose.jwk.RSAKey;\nimport com.nimbusds.jose.jwk.source.ImmutableJWKSet;\nimport com.nimbusds.jose.jwk.source.JWKSource;\nimport com.nimbusds.jose.proc.SecurityContext;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.http.MediaType;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.security.access.annotation.Secured;\nimport org.springframework.security.config.Customizer;\nimport org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.oauth2.core.AuthorizationGrantType;\nimport org.springframework.security.oauth2.core.ClientAuthenticationMethod;\nimport org.springframework.security.oauth2.core.oidc.OidcScopes;\nimport org.springframework.security.oauth2.jwt.JwtDecoder;\nimport org.springframework.security.oauth2.server.authorization.JdbcOAuth2AuthorizationConsentService;\nimport org.springframework.security.oauth2.server.authorization.JdbcOAuth2AuthorizationService;\nimport org.springframework.security.oauth2.server.authorization.OAuth2AuthorizationConsentService;\nimport org.springframework.security.oauth2.server.authorization.OAuth2AuthorizationService;\nimport org.springframework.security.oauth2.server.authorization.client.JdbcRegisteredClientRepository;\nimport org.springframework.security.oauth2.server.authorization.client.RegisteredClient;\nimport org.springframework.security.oauth2.server.authorization.client.RegisteredClientRepository;\nimport org.springframework.security.oauth2.server.authorization.config.annotation.web.configuration.OAuth2AuthorizationServerConfiguration;\nimport org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.OAuth2AuthorizationServerConfigurer;\nimport org.springframework.security.oauth2.server.authorization.settings.AuthorizationServerSettings;\nimport org.springframework.security.oauth2.server.authorization.settings.ClientSettings;\nimport org.springframework.security.provisioning.InMemoryUserDetailsManager;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint;\nimport org.springframework.security.web.util.matcher.MediaTypeRequestMatcher;\n\nimport java.security.KeyPair;\nimport java.security.KeyPairGenerator;\nimport java.security.interfaces.RSAPrivateKey;\nimport java.security.interfaces.RSAPublicKey;\nimport java.util.UUID;\n\n/**\n * \u8ba4\u8bc1\u914d\u7f6e\n * {@link EnableMethodSecurity} \u5f00\u542f\u5168\u5c40\u65b9\u6cd5\u8ba4\u8bc1\uff0c\u542f\u7528JSR250\u6ce8\u89e3\u652f\u6301\uff0c\u542f\u7528\u6ce8\u89e3 {@link Secured} \u652f\u6301\uff0c\n * \u5728Spring Security 6.0\u7248\u672c\u4e2d\u5c06@Configuration\u6ce8\u89e3\u4ece@EnableWebSecurity, @EnableMethodSecurity, @EnableGlobalMethodSecurity\n * \u548c @EnableGlobalAuthentication \u4e2d\u79fb\u9664\uff0c\u4f7f\u7528\u8fd9\u4e9b\u6ce8\u89e3\u9700\u624b\u52a8\u6dfb\u52a0 @Configuration \u6ce8\u89e3\n * {@link EnableWebSecurity} \u6ce8\u89e3\u6709\u4e24\u4e2a\u4f5c\u7528:\n * 1. \u52a0\u8f7d\u4e86WebSecurityConfiguration\u914d\u7f6e\u7c7b, \u914d\u7f6e\u5b89\u5168\u8ba4\u8bc1\u7b56\u7565\u3002\n * 2. \u52a0\u8f7d\u4e86AuthenticationConfiguration, \u914d\u7f6e\u4e86\u8ba4\u8bc1\u4fe1\u606f\u3002\n *\n * @author vains\n */\n@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity(jsr250Enabled = true, securedEnabled = true)\npublic class AuthorizationConfig {\n\n    private static final String CUSTOM_CONSENT_PAGE_URI = "/oauth2/consent";\n\n    /**\n     * \u914d\u7f6e\u7aef\u70b9\u7684\u8fc7\u6ee4\u5668\u94fe\n     *\n     * @param http spring security\u6838\u5fc3\u914d\u7f6e\u7c7b\n     * @return \u8fc7\u6ee4\u5668\u94fe\n     * @throws Exception \u629b\u51fa\n     */\n    @Bean\n    public SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http,\n                                                                      RegisteredClientRepository registeredClientRepository,\n                                                                      AuthorizationServerSettings authorizationServerSettings) throws Exception {\n        // \u914d\u7f6e\u9ed8\u8ba4\u7684\u8bbe\u7f6e\uff0c\u5ffd\u7565\u8ba4\u8bc1\u7aef\u70b9\u7684csrf\u6821\u9a8c\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n\n        // \u65b0\u5efa\u8bbe\u5907\u7801converter\u548cprovider\n        DeviceClientAuthenticationConverter deviceClientAuthenticationConverter =\n                new DeviceClientAuthenticationConverter(\n                        authorizationServerSettings.getDeviceAuthorizationEndpoint());\n        DeviceClientAuthenticationProvider deviceClientAuthenticationProvider =\n                new DeviceClientAuthenticationProvider(registeredClientRepository);\n\n\n        http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\n                // \u5f00\u542fOpenID Connect 1.0\u534f\u8bae\u76f8\u5173\u7aef\u70b9\n                .oidc(Customizer.withDefaults())\n                // \u8bbe\u7f6e\u81ea\u5b9a\u4e49\u7528\u6237\u786e\u8ba4\u6388\u6743\u9875\n                .authorizationEndpoint(authorizationEndpoint -> authorizationEndpoint.consentPage(CUSTOM_CONSENT_PAGE_URI))\n                // \u8bbe\u7f6e\u8bbe\u5907\u7801\u7528\u6237\u9a8c\u8bc1url(\u81ea\u5b9a\u4e49\u7528\u6237\u9a8c\u8bc1\u9875)\n                .deviceAuthorizationEndpoint(deviceAuthorizationEndpoint ->\n                        deviceAuthorizationEndpoint.verificationUri("/activate")\n                )\n                // \u8bbe\u7f6e\u9a8c\u8bc1\u8bbe\u5907\u7801\u7528\u6237\u786e\u8ba4\u9875\u9762\n                .deviceVerificationEndpoint(deviceVerificationEndpoint ->\n                        deviceVerificationEndpoint.consentPage(CUSTOM_CONSENT_PAGE_URI)\n                )\n                .clientAuthentication(clientAuthentication ->\n                        // \u5ba2\u6237\u7aef\u8ba4\u8bc1\u6dfb\u52a0\u8bbe\u5907\u7801\u7684converter\u548cprovider\n                        clientAuthentication\n                                .authenticationConverter(deviceClientAuthenticationConverter)\n                                .authenticationProvider(deviceClientAuthenticationProvider)\n                );\n        http\n                // \u5f53\u672a\u767b\u5f55\u65f6\u8bbf\u95ee\u8ba4\u8bc1\u7aef\u70b9\u65f6\u91cd\u5b9a\u5411\u81f3login\u9875\u9762\n                .exceptionHandling((exceptions) -> exceptions\n                        .defaultAuthenticationEntryPointFor(\n                                new LoginUrlAuthenticationEntryPoint("/login"),\n                                new MediaTypeRequestMatcher(MediaType.TEXT_HTML)\n                        )\n                )\n                // \u5904\u7406\u4f7f\u7528access token\u8bbf\u95ee\u7528\u6237\u4fe1\u606f\u7aef\u70b9\u548c\u5ba2\u6237\u7aef\u6ce8\u518c\u7aef\u70b9\n                .oauth2ResourceServer((resourceServer) -> resourceServer\n                        .jwt(Customizer.withDefaults()));\n\n        return http.build();\n    }\n\n    /**\n     * \u914d\u7f6e\u8ba4\u8bc1\u76f8\u5173\u7684\u8fc7\u6ee4\u5668\u94fe\n     *\n     * @param http spring security\u6838\u5fc3\u914d\u7f6e\u7c7b\n     * @return \u8fc7\u6ee4\u5668\u94fe\n     * @throws Exception \u629b\u51fa\n     */\n    @Bean\n    public SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http) throws Exception {\n        http.authorizeHttpRequests((authorize) -> authorize\n                        // \u653e\u884c\u9759\u6001\u8d44\u6e90\n                        .requestMatchers("/assets/**", "/webjars/**", "/login").permitAll()\n                        .anyRequest().authenticated()\n                )\n                // \u6307\u5b9a\u767b\u5f55\u9875\u9762\n                .formLogin(formLogin ->\n                        formLogin.loginPage("/login")\n                );\n        // \u6dfb\u52a0BearerTokenAuthenticationFilter\uff0c\u5c06\u8ba4\u8bc1\u670d\u52a1\u5f53\u505a\u4e00\u4e2a\u8d44\u6e90\u670d\u52a1\uff0c\u89e3\u6790\u8bf7\u6c42\u5934\u4e2d\u7684token\n        http.oauth2ResourceServer((resourceServer) -> resourceServer\n                .jwt(Customizer.withDefaults()));\n\n        return http.build();\n    }\n\n    /**\n     * \u914d\u7f6e\u5bc6\u7801\u89e3\u6790\u5668\uff0c\u4f7f\u7528BCrypt\u7684\u65b9\u5f0f\u5bf9\u5bc6\u7801\u8fdb\u884c\u52a0\u5bc6\u548c\u9a8c\u8bc1\n     *\n     * @return BCryptPasswordEncoder\n     */\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    /**\n     * \u914d\u7f6e\u5ba2\u6237\u7aefRepository\n     *\n     * @param jdbcTemplate    db \u6570\u636e\u6e90\u4fe1\u606f\n     * @param passwordEncoder \u5bc6\u7801\u89e3\u6790\u5668\n     * @return \u57fa\u4e8e\u6570\u636e\u5e93\u7684repository\n     */\n    @Bean\n    public RegisteredClientRepository registeredClientRepository(JdbcTemplate jdbcTemplate, PasswordEncoder passwordEncoder) {\n        RegisteredClient registeredClient = RegisteredClient.withId(UUID.randomUUID().toString())\n                // \u5ba2\u6237\u7aefid\n                .clientId("messaging-client")\n                // \u5ba2\u6237\u7aef\u79d8\u94a5\uff0c\u4f7f\u7528\u5bc6\u7801\u89e3\u6790\u5668\u52a0\u5bc6\n                .clientSecret(passwordEncoder.encode("123456"))\n                // \u5ba2\u6237\u7aef\u8ba4\u8bc1\u65b9\u5f0f\uff0c\u57fa\u4e8e\u8bf7\u6c42\u5934\u7684\u8ba4\u8bc1\n                .clientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_BASIC)\n                // \u914d\u7f6e\u8d44\u6e90\u670d\u52a1\u5668\u4f7f\u7528\u8be5\u5ba2\u6237\u7aef\u83b7\u53d6\u6388\u6743\u65f6\u652f\u6301\u7684\u65b9\u5f0f\n                .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)\n                .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)\n                .authorizationGrantType(AuthorizationGrantType.CLIENT_CREDENTIALS)\n                // \u6388\u6743\u7801\u6a21\u5f0f\u56de\u8c03\u5730\u5740\uff0coauth2.1\u5df2\u6539\u4e3a\u7cbe\u51c6\u5339\u914d\uff0c\u4e0d\u80fd\u53ea\u8bbe\u7f6e\u57df\u540d\uff0c\u5e76\u4e14\u5c4f\u853d\u4e86localhost\uff0c\u672c\u673a\u4f7f\u7528127.0.0.1\u8bbf\u95ee\n                .redirectUri("http://127.0.0.1:8080/login/oauth2/code/messaging-client-oidc")\n                .redirectUri("https://www.baidu.com")\n                // \u8be5\u5ba2\u6237\u7aef\u7684\u6388\u6743\u8303\u56f4\uff0cOPENID\u4e0ePROFILE\u662fIdToken\u7684scope\uff0c\u83b7\u53d6\u6388\u6743\u65f6\u8bf7\u6c42OPENID\u7684scope\u65f6\u8ba4\u8bc1\u670d\u52a1\u4f1a\u8fd4\u56deIdToken\n                .scope(OidcScopes.OPENID)\n                .scope(OidcScopes.PROFILE)\n                // \u81ea\u5b9ascope\n                .scope("message.read")\n                .scope("message.write")\n                // \u5ba2\u6237\u7aef\u8bbe\u7f6e\uff0c\u8bbe\u7f6e\u7528\u6237\u9700\u8981\u786e\u8ba4\u6388\u6743\n                .clientSettings(ClientSettings.builder().requireAuthorizationConsent(true).build())\n                .build();\n\n        // \u57fa\u4e8edb\u5b58\u50a8\u5ba2\u6237\u7aef\uff0c\u8fd8\u6709\u4e00\u4e2a\u57fa\u4e8e\u5185\u5b58\u7684\u5b9e\u73b0 InMemoryRegisteredClientRepository\n        JdbcRegisteredClientRepository registeredClientRepository = new JdbcRegisteredClientRepository(jdbcTemplate);\n\n        // \u521d\u59cb\u5316\u5ba2\u6237\u7aef\n        RegisteredClient repositoryByClientId = registeredClientRepository.findByClientId(registeredClient.getClientId());\n        if (repositoryByClientId == null) {\n            registeredClientRepository.save(registeredClient);\n        }\n        // \u8bbe\u5907\u7801\u6388\u6743\u5ba2\u6237\u7aef\n        RegisteredClient deviceClient = RegisteredClient.withId(UUID.randomUUID().toString())\n                .clientId("device-message-client")\n                // \u516c\u5171\u5ba2\u6237\u7aef\n                .clientAuthenticationMethod(ClientAuthenticationMethod.NONE)\n                // \u8bbe\u5907\u7801\u6388\u6743\n                .authorizationGrantType(AuthorizationGrantType.DEVICE_CODE)\n                .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)\n                // \u81ea\u5b9ascope\n                .scope("message.read")\n                .scope("message.write")\n                .build();\n        RegisteredClient byClientId = registeredClientRepository.findByClientId(deviceClient.getClientId());\n        if (byClientId == null) {\n            registeredClientRepository.save(deviceClient);\n        }\n\n        // PKCE\u5ba2\u6237\u7aef\n        RegisteredClient pkceClient = RegisteredClient.withId(UUID.randomUUID().toString())\n                .clientId("pkce-message-client")\n                // \u516c\u5171\u5ba2\u6237\u7aef\n                .clientAuthenticationMethod(ClientAuthenticationMethod.NONE)\n                // \u6388\u6743\u7801\u6a21\u5f0f\uff0c\u56e0\u4e3a\u662f\u6269\u5c55\u6388\u6743\u7801\u6d41\u7a0b\uff0c\u6240\u4ee5\u6d41\u7a0b\u8fd8\u662f\u6388\u6743\u7801\u7684\u6d41\u7a0b\uff0c\u6539\u53d8\u7684\u53ea\u662f\u53c2\u6570\n                .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)\n                .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)\n                // \u6388\u6743\u7801\u6a21\u5f0f\u56de\u8c03\u5730\u5740\uff0coauth2.1\u5df2\u6539\u4e3a\u7cbe\u51c6\u5339\u914d\uff0c\u4e0d\u80fd\u53ea\u8bbe\u7f6e\u57df\u540d\uff0c\u5e76\u4e14\u5c4f\u853d\u4e86localhost\uff0c\u672c\u673a\u4f7f\u7528127.0.0.1\u8bbf\u95ee\n                .redirectUri("http://127.0.0.1:8080/login/oauth2/code/messaging-client-oidc")\n                .clientSettings(ClientSettings.builder().requireProofKey(Boolean.TRUE).build())\n                // \u81ea\u5b9ascope\n                .scope("message.read")\n                .scope("message.write")\n                .build();\n        RegisteredClient findPkceClient = registeredClientRepository.findByClientId(pkceClient.getClientId());\n        if (findPkceClient == null) {\n            registeredClientRepository.save(pkceClient);\n        }\n        return registeredClientRepository;\n    }\n\n    /**\n     * \u914d\u7f6e\u57fa\u4e8edb\u7684oauth2\u7684\u6388\u6743\u7ba1\u7406\u670d\u52a1\n     *\n     * @param jdbcTemplate               db\u6570\u636e\u6e90\u4fe1\u606f\n     * @param registeredClientRepository \u4e0a\u8fb9\u6ce8\u5165\u7684\u5ba2\u6237\u7aefrepository\n     * @return JdbcOAuth2AuthorizationService\n     */\n    @Bean\n    public OAuth2AuthorizationService authorizationService(JdbcTemplate jdbcTemplate, RegisteredClientRepository registeredClientRepository) {\n        // \u57fa\u4e8edb\u7684oauth2\u8ba4\u8bc1\u670d\u52a1\uff0c\u8fd8\u6709\u4e00\u4e2a\u57fa\u4e8e\u5185\u5b58\u7684\u670d\u52a1\u5b9e\u73b0InMemoryOAuth2AuthorizationService\n        return new JdbcOAuth2AuthorizationService(jdbcTemplate, registeredClientRepository);\n    }\n\n    /**\n     * \u914d\u7f6e\u57fa\u4e8edb\u7684\u6388\u6743\u786e\u8ba4\u7ba1\u7406\u670d\u52a1\n     *\n     * @param jdbcTemplate               db\u6570\u636e\u6e90\u4fe1\u606f\n     * @param registeredClientRepository \u5ba2\u6237\u7aefrepository\n     * @return JdbcOAuth2AuthorizationConsentService\n     */\n    @Bean\n    public OAuth2AuthorizationConsentService authorizationConsentService(JdbcTemplate jdbcTemplate, RegisteredClientRepository registeredClientRepository) {\n        // \u57fa\u4e8edb\u7684\u6388\u6743\u786e\u8ba4\u7ba1\u7406\u670d\u52a1\uff0c\u8fd8\u6709\u4e00\u4e2a\u57fa\u4e8e\u5185\u5b58\u7684\u670d\u52a1\u5b9e\u73b0InMemoryOAuth2AuthorizationConsentService\n        return new JdbcOAuth2AuthorizationConsentService(jdbcTemplate, registeredClientRepository);\n    }\n\n    /**\n     * \u914d\u7f6ejwk\u6e90\uff0c\u4f7f\u7528\u975e\u5bf9\u79f0\u52a0\u5bc6\uff0c\u516c\u5f00\u7528\u4e8e\u68c0\u7d22\u5339\u914d\u6307\u5b9a\u9009\u62e9\u5668\u7684JWK\u7684\u65b9\u6cd5\n     *\n     * @return JWKSource\n     */\n    @Bean\n    public JWKSource<SecurityContext> jwkSource() {\n        KeyPair keyPair = generateRsaKey();\n        RSAPublicKey publicKey = (RSAPublicKey) keyPair.getPublic();\n        RSAPrivateKey privateKey = (RSAPrivateKey) keyPair.getPrivate();\n        RSAKey rsaKey = new RSAKey.Builder(publicKey)\n                .privateKey(privateKey)\n                .keyID(UUID.randomUUID().toString())\n                .build();\n        JWKSet jwkSet = new JWKSet(rsaKey);\n        return new ImmutableJWKSet<>(jwkSet);\n    }\n\n    /**\n     * \u751f\u6210rsa\u5bc6\u94a5\u5bf9\uff0c\u63d0\u4f9b\u7ed9jwk\n     *\n     * @return \u5bc6\u94a5\u5bf9\n     */\n    private static KeyPair generateRsaKey() {\n        KeyPair keyPair;\n        try {\n            KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance("RSA");\n            keyPairGenerator.initialize(2048);\n            keyPair = keyPairGenerator.generateKeyPair();\n        } catch (Exception ex) {\n            throw new IllegalStateException(ex);\n        }\n        return keyPair;\n    }\n\n    /**\n     * \u914d\u7f6ejwt\u89e3\u6790\u5668\n     *\n     * @param jwkSource jwk\u6e90\n     * @return JwtDecoder\n     */\n    @Bean\n    public JwtDecoder jwtDecoder(JWKSource<SecurityContext> jwkSource) {\n        return OAuth2AuthorizationServerConfiguration.jwtDecoder(jwkSource);\n    }\n\n    /**\n     * \u6dfb\u52a0\u8ba4\u8bc1\u670d\u52a1\u5668\u914d\u7f6e\uff0c\u8bbe\u7f6ejwt\u7b7e\u53d1\u8005\u3001\u9ed8\u8ba4\u7aef\u70b9\u8bf7\u6c42\u5730\u5740\u7b49\n     *\n     * @return AuthorizationServerSettings\n     */\n    @Bean\n    public AuthorizationServerSettings authorizationServerSettings() {\n        return AuthorizationServerSettings.builder().build();\n    }\n\n    /**\n     * \u5148\u6682\u65f6\u914d\u7f6e\u4e00\u4e2a\u57fa\u4e8e\u5185\u5b58\u7684\u7528\u6237\uff0c\u6846\u67b6\u5728\u7528\u6237\u8ba4\u8bc1\u65f6\u4f1a\u9ed8\u8ba4\u8c03\u7528\n     * {@link UserDetailsService#loadUserByUsername(String)} \u65b9\u6cd5\u6839\u636e\n     * \u8d26\u53f7\u67e5\u8be2\u7528\u6237\u4fe1\u606f\uff0c\u4e00\u822c\u662f\u91cd\u5199\u8be5\u65b9\u6cd5\u5b9e\u73b0\u81ea\u5df1\u7684\u903b\u8f91\n     *\n     * @param passwordEncoder \u5bc6\u7801\u89e3\u6790\u5668\n     * @return UserDetailsService\n     */\n    @Bean\n    public UserDetailsService users(PasswordEncoder passwordEncoder) {\n        UserDetails user = User.withUsername("admin")\n                .password(passwordEncoder.encode("123456"))\n                .roles("admin", "normal", "unAuthentication")\n                .authorities("app", "web", "/test2", "/test3")\n                .build();\n        return new InMemoryUserDetailsManager(user);\n    }\n\n}\n'})}),"\n",(0,r.jsx)(t.p,{children:"\u81f3\u6b64\uff0c\u81ea\u5b9a\u4e49\u7684\u8bbe\u5907\u7801\u7684\u6d41\u7a0b\u5c31\u7ed3\u675f\u4e86\uff0c\u63a5\u4e0b\u6765\u5f00\u59cb\u6d4b\u8bd5\u4e00\u4e0b\u3002"}),"\n",(0,r.jsx)(t.h2,{id:"\u4e8c\u6d4b\u8bd5\u8bbe\u5907\u7801\u6d41\u7a0b",children:"\u4e8c\u3001\u6d4b\u8bd5\u8bbe\u5907\u7801\u6d41\u7a0b"}),"\n",(0,r.jsxs)(t.p,{children:["\u6388\u6743\u7801\u6d41\u7a0b\u8be6\u89c1",(0,r.jsx)(t.a,{href:"https://datatracker.ietf.org/doc/html/rfc8628",children:"rfc8628"})]}),"\n",(0,r.jsxs)(t.p,{children:["\u9996\u5148\uff0c\u7528\u6237\u8bf7\u6c42",(0,r.jsx)(t.code,{children:"/oauth2/device_authorization"}),"\u63a5\u53e3\uff0c\u83b7\u53d6",(0,r.jsx)(t.code,{children:"user_code"}),"\u3001\u8bbe\u5907\u7801\u548c\u7ed9\u7528\u6237\u5728\u6d4f\u89c8\u5668\u8bbf\u95ee\u7684\u5730\u5740\uff0c\u7528\u6237\u5728\u6d4f\u89c8\u5668\u6253\u5f00\u5730\u5740\uff0c\u8f93\u5165",(0,r.jsx)(t.code,{children:"user_code"}),"\uff0c\u5982\u679c\u7528\u6237\u5c1a\u672a\u767b\u5f55\u5219\u9700\u8981\u8fdb\u884c\u767b\u5f55\uff1b\u8f93\u5165",(0,r.jsx)(t.code,{children:"user_code"}),"\u4e4b\u540e\u5982\u679c\u8be5\u5ba2\u6237\u7aef\u5f53\u524d\u7528\u6237\u5c1a\u672a\u6388\u6743\u5219\u91cd\u5b9a\u5411\u81f3\u6388\u6743\u786e\u8ba4\u9875\u9762\uff1b\u6388\u6743\u5b8c\u6210\u540e\u8bbe\u5907\u901a\u8fc7\u8bbe\u5907\u7801\u6362\u53d6token\uff0c\u8bbe\u5907\u4e00\u822c\u662f\u5728\u7ed9\u51fa\u7528\u6237\u9a8c\u8bc1\u5730\u5740\u540e\u8f6e\u8bad\u643a\u5e26\u8bbe\u5907\u7801\u8bbf\u95ee",(0,r.jsx)(t.code,{children:"/oauth2/token"}),'\u63a5\u53e3\uff0c\u5982\u679c\u7528\u6237\u5c1a\u672a\u9a8c\u8bc1\u65f6\u8bbf\u95ee\u5219\u4f1a\u54cd\u5e94"authorization_pending"\uff0c\u8be6\u89c1\uff1a',(0,r.jsx)(t.a,{href:"https://datatracker.ietf.org/doc/html/rfc8628#section-3.5",children:"rfc8628#section-3.5"})]}),"\n",(0,r.jsxs)(t.h3,{id:"1-\u8bbe\u5907\u53d1\u8d77\u6388\u6743\u8bf7\u6c42\u643a\u5e26\u8981\u6c42\u7684\u53c2\u6570\u8bf7\u6c42oauth2device_authorization\u63a5\u53e3",children:["1. \u8bbe\u5907\u53d1\u8d77\u6388\u6743\u8bf7\u6c42\uff0c\u643a\u5e26\u8981\u6c42\u7684\u53c2\u6570\u8bf7\u6c42",(0,r.jsx)(t.code,{children:"/oauth2/device_authorization"}),"\u63a5\u53e3"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"img",src:n(8965).A+"",width:"1424",height:"571"})}),"\n",(0,r.jsx)(t.p,{children:"\u8bf7\u6c42\u53c2\u6570\u8bf4\u660e"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"client_id"}),": \u5ba2\u6237\u7aefid"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"scope"}),": \u8bbe\u5907\u8bf7\u6c42\u6388\u6743\u7684\u8303\u56f4"]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"\u54cd\u5e94\u53c2\u6570\u8bf4\u660e"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"user_code"}),": \u7528\u6237\u5728\u6d4f\u89c8\u5668\u6253\u5f00\u9a8c\u8bc1\u5730\u5740\u65f6\u8f93\u5165\u7684\u5185\u5bb9"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"device_code"}),"\uff1a\u8bbe\u5907\u7801\uff0c\u7528\u8be5\u503c\u6362\u53d6token"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"verification_uri_complete"}),"\uff1a\u7528\u6237\u5728\u6d4f\u89c8\u5668\u6253\u5f00\u7684\u9a8c\u8bc1\u5730\u5740\uff0c\u9875\u9762\u4f1a\u81ea\u52a8\u83b7\u53d6\u53c2\u6570\u5e76\u63d0\u4ea4\u8868\u5355"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"verification_uri"}),"\uff1a\u9a8c\u8bc1\u5730\u5740\uff0c\u9700\u8981\u7528\u6237\u8f93\u5165",(0,r.jsx)(t.code,{children:"user_code"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"expires_in"}),"\uff1a\u8fc7\u671f\u65f6\u95f4\uff0c\u5355\u4f4d\uff08\u79d2\uff09"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"2-\u8bbf\u95eeverification_uri\u6216\u8005verification_uri_complete",children:"2. \u8bbf\u95eeverification_uri\u6216\u8005verification_uri_complete"}),"\n",(0,r.jsx)(t.p,{children:"\u672a\u767b\u5f55\uff0c\u8df3\u8f6c\u81f3\u767b\u5f55\u9875"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"img",src:n(13708).A+"",width:"1512",height:"406"})}),"\n",(0,r.jsx)(t.h3,{id:"3-\u8f93\u5165user_code\u5e76\u63d0\u4ea4",children:"3. \u8f93\u5165user_code\u5e76\u63d0\u4ea4"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"img",src:n(38127).A+"",width:"1512",height:"418"})}),"\n",(0,r.jsx)(t.h3,{id:"4-\u91cd\u5b9a\u5411\u81f3\u7528\u6237\u6388\u6743\u786e\u8ba4\u9875\u9762",children:"4. \u91cd\u5b9a\u5411\u81f3\u7528\u6237\u6388\u6743\u786e\u8ba4\u9875\u9762"}),"\n",(0,r.jsx)(t.p,{children:"\u8be5\u5ba2\u6237\u7aef\u7528\u6237\u5c1a\u672a\u786e\u8ba4\u8fc7\uff0c\u91cd\u5b9a\u5411\u81f3\u6388\u6743\u786e\u8ba4\u9875\u9762\uff0c\u52fe\u9009scope\u540e\u63d0\u4ea4"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"img",src:n(68414).A+"",width:"1512",height:"602"})}),"\n",(0,r.jsx)(t.h3,{id:"5-\u6388\u6743\u6210\u529f\u540e\u8df3\u8f6c\u81f3\u6210\u529f\u9875\u9762",children:"5. \u6388\u6743\u6210\u529f\u540e\u8df3\u8f6c\u81f3\u6210\u529f\u9875\u9762"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"img",src:n(19745).A+"",width:"1512",height:"452"})}),"\n",(0,r.jsxs)(t.h3,{id:"6-\u8bbe\u5907\u53d1\u8d77\u8bf7\u6c42\u7528\u8bbe\u5907\u7801\u6362\u53d6token\u8bf7\u6c42oauth2token\u63a5\u53e3",children:["6. \u8bbe\u5907\u53d1\u8d77\u8bf7\u6c42\u7528\u8bbe\u5907\u7801\u6362\u53d6token\uff0c\u8bf7\u6c42",(0,r.jsx)(t.code,{children:"/oauth2/token"}),"\u63a5\u53e3"]}),"\n",(0,r.jsx)(t.p,{children:"\u8001\u6837\u5b50\uff0c\u4f7f\u7528postman\u6a21\u62df\u8bbe\u5907\u8bf7\u6c42"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"img",src:n(66264).A+"",width:"1423",height:"646"})}),"\n",(0,r.jsx)(t.p,{children:"\u8fd9\u91cc\u6211\u662f\u91cd\u65b0\u83b7\u53d6\u4e86\u4e00\u4e2a\uff0c\u4e4b\u524d\u7684\u8fc7\u671f\u4e86\uff0c\u4f7f\u7528\u8fc7\u671f\u8bbe\u5907\u7801\u8bf7\u6c42\u5982\u4e0b\u6240\u793a"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"img",src:n(85419).A+"",width:"1422",height:"531"})}),"\n",(0,r.jsx)(t.p,{children:"\u7528\u6237\u5c1a\u672a\u9a8c\u8bc1\u65f6\u4f7f\u7528\u8bbe\u5907\u7801\u8bf7\u6c42\u5982\u4e0b"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"img",src:n(55322).A+"",width:"1428",height:"518"})}),"\n",(0,r.jsx)(t.p,{children:"\u53c2\u6570\u89e3\u91ca"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"client_id"}),"\uff1a\u5ba2\u6237\u7aefid"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"device_code"}),"\uff1a\u8bf7\u6c42",(0,r.jsx)(t.code,{children:"/oauth2/device_authorization"}),"\u63a5\u53e3\u8fd4\u56de\u7684\u8bbe\u5907\u7801(",(0,r.jsx)(t.code,{children:"device_code"}),")"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"grant_type"}),"\uff1a\u5728\u8bbe\u5907\u7801\u6a21\u5f0f\u56fa\u5b9a\u662f",(0,r.jsx)(t.code,{children:"urn:ietf:params:oauth:grant-type:device_code"})]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"\u81f3\u6b64\uff0c\u81ea\u5b9a\u4e49\u8bbe\u5907\u7801\u6d41\u7a0b\u7ed3\u675f\uff0c\u9879\u76ee\u7ed3\u6784\u5982\u4e0b\u56fe\u6240\u793a"}),"\n",(0,r.jsx)(t.h2,{id:"\u4e09\u5199\u5728\u6700\u540e",children:"\u4e09\u3001\u5199\u5728\u6700\u540e"}),"\n",(0,r.jsxs)(t.p,{children:["\u8bbe\u5907\u7801\u6d41\u7a0b\u4e00\u822c\u4f7f\u7528\u5728\u4e0d\u4fbf\u8f93\u5165\u7684\u8bbe\u5907\u4e0a\uff0c\u8bbe\u5907\u63d0\u4f9b\u4e00\u4e2a\u94fe\u63a5\u7ed9\u7528\u6237\u9a8c\u8bc1\uff0c\u7528\u6237\u5728\u5176\u5b83\u8bbe\u5907\u7684\u6d4f\u89c8\u5668\u4e2d\u8ba4\u8bc1\uff1b\u5176\u5b83\u7684\u4e09\u65b9\u670d\u52a1\u9700\u8981\u63a5\u5165\u65f6\u5c31\u6bd4\u8f83\u9002\u5408\u6388\u6743\u7801\u6a21\u5f0f\uff0c\u684c\u9762\u5ba2\u6237\u7aef\u3001\u79fb\u52a8app\u548c\u524d\u7aef\u5e94\u7528\u5c31\u6bd4\u8f83\u9002\u5408pkce\u6d41\u7a0b\uff0cpkce\u9760\u968f\u673a\u751f\u6210\u7684",(0,r.jsx)(t.code,{children:"Code Verifier"}),"\u548c",(0,r.jsx)(t.code,{children:"Code Challenge"}),"\u6765\u4fdd\u8bc1\u6d41\u7a0b\u7684\u5b89\u5168\uff0c\u65e0\u6cd5\u8ba9\u4ed6\u4eba\u62c6\u5305\u83b7\u53d6clientId\u548c",(0,r.jsx)(t.code,{children:"clientSecret"}),"\u6765\u4f2a\u9020\u767b\u5f55\u4fe1\u606f\uff1b\u81f3\u4e8e\u7528\u6237\u767b\u5f55\u65f6\u8f93\u5165\u7684\u8d26\u53f7\u548c\u5bc6\u7801\u53ea\u80fd\u901a\u8fc7\u5347\u7ea7https\u6765\u9632\u6b62\u62e6\u622a\u8bf7\u6c42\u83b7\u53d6\u7528\u6237\u5bc6\u7801\u3002"]})]})}function d(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},85419:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/4-8-7575ec1679800015b4fefd41e18e0a80.awebp"}}]);