"use strict";(self.webpackChunklight_docusaurus=self.webpackChunklight_docusaurus||[]).push([[5238],{414:(n,r,l)=>{l.r(r),l.d(r,{assets:()=>t,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var e=l(85893),o=l(11151);const a={},s=void 0,i={id:"zh-cn/linux/install/Install-Harbor",title:"Install-Harbor",description:"1. \u5b89\u88c5 Harbor \u79c1\u670d",source:"@site/docs/zh-cn/linux/install/7-Install-Harbor.md",sourceDirName:"zh-cn/linux/install",slug:"/zh-cn/linux/install/Install-Harbor",permalink:"/light-docusaurus/docs/zh-cn/linux/install/Install-Harbor",draft:!1,unlisted:!1,editUrl:"https://github.com/lorchr/light-docusaurus/tree/main/docs/zh-cn/linux/install/7-Install-Harbor.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{},sidebar:"troch",previous:{title:"Install-Jenkins",permalink:"/light-docusaurus/docs/zh-cn/linux/install/Install-Jenkins"},next:{title:"Install-Docker-Registry",permalink:"/light-docusaurus/docs/zh-cn/linux/install/Install-Docker-Registry"}},t={},c=[{value:"1. \u5b89\u88c5 Harbor \u79c1\u670d",id:"1-\u5b89\u88c5-harbor-\u79c1\u670d",level:2},{value:"1. \u5b89\u88c5",id:"1-\u5b89\u88c5",level:3},{value:"2. \u521d\u59cb\u5316\u914d\u7f6e",id:"2-\u521d\u59cb\u5316\u914d\u7f6e",level:3},{value:"3. \u4f7f\u7528",id:"3-\u4f7f\u7528",level:3}];function h(n){const r={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.ah)(),...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r.h2,{id:"1-\u5b89\u88c5-harbor-\u79c1\u670d",children:"1. \u5b89\u88c5 Harbor \u79c1\u670d"}),"\n",(0,e.jsxs)(r.ul,{children:["\n",(0,e.jsx)(r.li,{children:(0,e.jsx)(r.a,{href:"https://goharbor.io/",children:"https://goharbor.io/"})}),"\n",(0,e.jsx)(r.li,{children:(0,e.jsx)(r.a,{href:"https://github.com/goharbor/harbor/releases",children:"https://github.com/goharbor/harbor/releases"})}),"\n"]}),"\n",(0,e.jsx)(r.h3,{id:"1-\u5b89\u88c5",children:"1. \u5b89\u88c5"}),"\n",(0,e.jsx)(r.pre,{children:(0,e.jsx)(r.code,{className:"language-shell",children:"# \u521b\u5efa\u5b89\u88c5\u76ee\u5f55\nmkdir /usr/local/harbor\n\n# \u4e0b\u8f7d\u5b89\u88c5\u5305\nwget https://github.com/goharbor/harbor/releases/download/v1.10.13-rc1/harbor-offline-installer-v1.10.13-rc1.tgz -O /usr/local/harbor/harbor-offline-installer-v1.10.13-rc1.tgz\n\n# \u89e3\u538b\u5b89\u88c5\u5305\ntar xzvf /usr/local/harbor/harbor-offline-installer-v1.10.13-rc1.tgz -C /usr/local/harbor/\n\n# \u5907\u4efd\u914d\u7f6e\u6587\u4ef6\ncp harbor.yml harbor.yml.bak\n\n# \u65b0\u5efa\u914d\u7f6e\u6587\u4ef6\nvim harbor.md\n\n# \u914d\u7f6e\u6587\u4ef6\u91cd\u547d\u540d\nmv harbor.md harbor.yml\n"})}),"\n",(0,e.jsx)(r.h3,{id:"2-\u521d\u59cb\u5316\u914d\u7f6e",children:"2. \u521d\u59cb\u5316\u914d\u7f6e"}),"\n",(0,e.jsx)(r.pre,{children:(0,e.jsx)(r.code,{className:"language-yaml",children:"# \u670d\u52a1\u7684\u540d\u79f0\u6216ip\n# hostname: harbor.light.com\nhostname: 192.168.137.102\n\n# \u542f\u52a8\u7aef\u53e3\nhttp:\n  port: 5080\n\n# \u521d\u59cb\u5bc6\u7801\nharbor_admin_password: Harbor12345\n\n# \u9ed8\u8ba4\u4f7f\u7528\u5185\u7f6epostgresql \u7528\u6237\u4e3a root\ndatabase:\n  password: root123\n  max_idle_conns: 50\n  max_open_conns: 100\n\n# \u6570\u636e\u5377volume\ndata_volume: /data\n\n# \u65e5\u5fd7\u914d\u7f6e\nlog:\n  level: info\n  local:\n    rotate_count: 50\n    rotate_size: 200M\n    location: /usr/local/harbor/log\n\n# jobservice\u7684\u6700\u5927\u5de5\u4f5c\u7ebf\u7a0b\njobservice:\n  max_job_workers: 2\n\n# Web hook \u4efb\u52a1\u7684\u6700\u5927\u91cd\u8bd5\u6b21\u6570\nnotification:\n  webhook_job_max_retry: 2\n\n# \u7981\u7528 chart\nchart:\n  absolute_url: disabled\n"})}),"\n",(0,e.jsx)(r.p,{children:"\u6267\u884c\u7b80\u5355\u5b89\u88c5"}),"\n",(0,e.jsxs)(r.blockquote,{children:["\n",(0,e.jsx)(r.p,{children:"/usr/local/harbor/harbor/install.sh"}),"\n"]}),"\n",(0,e.jsxs)(r.p,{children:["\u8bbf\u95eeWeb\u9875\u9762: ",(0,e.jsx)(r.a,{href:"http://192.168.137.102:5080",children:"http://192.168.137.102:5080"})]}),"\n",(0,e.jsxs)(r.ul,{children:["\n",(0,e.jsx)(r.li,{children:"admin/Harbor12345"}),"\n"]}),"\n",(0,e.jsx)(r.h3,{id:"3-\u4f7f\u7528",children:"3. \u4f7f\u7528"}),"\n",(0,e.jsx)(r.pre,{children:(0,e.jsx)(r.code,{className:"language-shell",children:"# \u521b\u5efa\u7528\u6237\nhliu/Liuhui1993\n\n# \u521b\u5efa\u9879\u76ee \u5173\u8054\u7528\u6237\npi-diginn\n\n# \u955c\u50cf\u547d\u540d\u683c\u5f0f \u53c2\u8003\u63a8\u9001\u955c\u50cf\u547d\u4ee4 harbor-server/PROJECT/IMAGE[:TAG]\n192.168.137.102:5080/pi-diginn/pd-service-admin:4.0.0 # \u5408\u6cd5\u547d\u540d\n192.168.137.102:5080/pd-service-admin:4.0.0           # \u975e\u6cd5\u547d\u540d\n\ndocker login --username=hliu --password=Liuhui1993 192.168.137.102:5080\ndocker push 192.168.137.102:5080/pi-diginn/pd-service-admin:4.0.0\ndocker logout\n"})}),"\n",(0,e.jsx)(r.p,{children:"\u5378\u8f7dHarbor"}),"\n",(0,e.jsxs)(r.blockquote,{children:["\n",(0,e.jsx)(r.p,{children:"cd /usr/local/harbor/harbor/\ndocker-compose stop"}),"\n"]})]})}function d(n={}){const{wrapper:r}={...(0,o.ah)(),...n.components};return r?(0,e.jsx)(r,{...n,children:(0,e.jsx)(h,{...n})}):h(n)}},11151:(n,r,l)=>{l.d(r,{ah:()=>a});var e=l(67294);const o=e.createContext({});function a(n){const r=e.useContext(o);return e.useMemo((()=>"function"==typeof n?n(r):{...r,...n}),[r,n])}}}]);