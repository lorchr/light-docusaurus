"use strict";(self.webpackChunklight_docusaurus=self.webpackChunklight_docusaurus||[]).push([[3907],{12040:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>l,metadata:()=>i,toc:()=>h});var r=s(85893),t=s(11151);const l={},d=void 0,i={id:"zh-cn/linux/install/Install-Nexus3",title:"Install-Nexus3",description:"1. \u5b89\u88c5 Nexus3",source:"@site/docs/zh-cn/linux/install/5-Install-Nexus3.md",sourceDirName:"zh-cn/linux/install",slug:"/zh-cn/linux/install/Install-Nexus3",permalink:"/light-docusaurus/docs/zh-cn/linux/install/Install-Nexus3",draft:!1,unlisted:!1,editUrl:"https://github.com/lorchr/light-docusaurus/tree/main/docs/zh-cn/linux/install/5-Install-Nexus3.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{},sidebar:"troch",previous:{title:"Install-Gitea",permalink:"/light-docusaurus/docs/zh-cn/linux/install/Install-Gitea"},next:{title:"Install-Jenkins",permalink:"/light-docusaurus/docs/zh-cn/linux/install/Install-Jenkins"}},c={},h=[{value:"1. \u5b89\u88c5 Nexus3",id:"1-\u5b89\u88c5-nexus3",level:2},{value:"1. \u5b89\u88c5",id:"1-\u5b89\u88c5",level:3},{value:"2. \u6ce8\u518c\u4e3a\u670d\u52a1",id:"2-\u6ce8\u518c\u4e3a\u670d\u52a1",level:3},{value:"3. \u542f\u52a8",id:"3-\u542f\u52a8",level:3},{value:"4. \u4ed3\u5e93\u5730\u5740",id:"4-\u4ed3\u5e93\u5730\u5740",level:3},{value:"5. \u6d4b\u8bd5",id:"5-\u6d4b\u8bd5",level:3},{value:"\u4f7f\u7528Docker\u642d\u5efa",id:"\u4f7f\u7528docker\u642d\u5efa",level:3}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.ah)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"1-\u5b89\u88c5-nexus3",children:"1. \u5b89\u88c5 Nexus3"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.sonatype.com/download-oss-sonatype",children:"https://www.sonatype.com/download-oss-sonatype"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://help.sonatype.com/repomanager3/product-information/system-requirements#SystemRequirements-Linux",children:"https://help.sonatype.com/repomanager3/product-information/system-requirements#SystemRequirements-Linux"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://help.sonatype.com/repomanager3/download/download-archives---repository-manager-3",children:"https://help.sonatype.com/repomanager3/download/download-archives---repository-manager-3"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"1-\u5b89\u88c5",children:"1. \u5b89\u88c5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'# \u4e0b\u8f7d\u5b89\u88c5\u5305\nwget https://download.sonatype.com/nexus/3/nexus-3.2.0-01-unix.tar.gz -O /usr/local/nexus/nexus-3.2.0-01-unix.tar.gz\n\n# \u521b\u5efa\u5b89\u88c5\u76ee\u5f55\nmkdir /usr/local/nexus/\n\n# \u89e3\u538b\u5b89\u88c5\u5305\ntar -zxvf nexus-3.2.0-01-unix.tar.gz -C /usr/local/nexus/\n\n# \u8bbe\u7f6e NEXUS3 \u8fd0\u884c\u7528\u6237\u4e3a root\nvim /usr/local/nexus/nexus-3.2.0-01/bin/nexus.rc\nrun_as_user="root"\n\n# \u4fee\u6539 NEXUS3 \u542f\u52a8\u65f6\u8981\u4f7f\u7528\u7684 JDK \u7248\u672c\nvim /usr/local/nexus/nexus-3.2.0-01/bin/nexus\nINSTALL4J_JAVA_HOME_OVERRIDE=/usr/local/java/jdk1.8.0/\n\n# \u4fee\u6539 NEXUS3 \u9ed8\u8ba4\u7aef\u53e3 (\u53ef\u9009)\nvim /usr/local/nexus/nexus-3.2.0-01/etc/nexus-default.properties\napplication-port=18081\n\n# \u5173\u95ed\u9632\u706b\u5899\uff0c\u5e76\u5f00\u542f\u8fdc\u7a0b\u8bbf\u95ee\u7aef\u53e3 18081\nfirewall-cmd --zone=public --add-port=18081/tcp --permanent\nfirewall-cmd reload\nfirewall-cmd --list-all\n\n# \u521b\u5efa\u7528\u6237\u5e76\u6388\u6743\uff08\u8df3\u8fc7\uff09\nadduser nexus\npasswd nexus\nchown -R nexus /usr/local/java\nchown -R nexus /usr/local/nexus\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-\u6ce8\u518c\u4e3a\u670d\u52a1",children:"2. \u6ce8\u518c\u4e3a\u670d\u52a1"}),"\n",(0,r.jsxs)(n.p,{children:["\u65b0\u5efa\u4e00\u4e2a",(0,r.jsx)(n.code,{children:"nexus.service"}),"\u6587\u4ef6\uff1a"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"vim /usr/lib/systemd/system/nexus.service"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"[Unit]\nDescription=nexus\nAfter=network.target\n\n[Service]\nType=forking\n# Nexus\u7684\u6267\u884c\u6587\u4ef6\nExecStart=/usr/local/nexus/nexus-3.2.0-01/bin/nexus start\nExecStop=/usr/local/nexus/nexus-3.2.0-01/bin/nexus stop\nUser=root\nRestart=on-abort\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-\u542f\u52a8",children:"3. \u542f\u52a8"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"# \u91cd\u542f\u5b88\u62a4\u8fdb\u7a0b\nsystemctl daemon-reload\n\n# \u542f\u52a8 NEXUS3\nsystemctl enable nexus && systemctl start nexus\n\n# \u67e5\u770b\u72b6\u6001\nsystemctl status nexus\n\n# \u65b0\u7248\u672c\u67e5\u770b\u5bc6\u7801\uff0c\u8001\u7248\u672c\u9ed8\u8ba4\uff08admin/admin123\uff09\ncat /usr/local/nexus/sonatype-work/nexus3/admin.password\n\n# \u67e5\u770b\u5f00\u673a\u81ea\u542f\nsystemctl list-unit-files | grep nexus\n\n# \u5173\u95ed\u5f00\u673a\u81ea\u542f\nsystemctl disable nexus\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8bbf\u95eeWeb\u9875\u9762: ",(0,r.jsx)(n.a,{href:"http://192.168.137.102:18081/",children:"http://192.168.137.102:18081/"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"admin/admin123"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"4-\u4ed3\u5e93\u5730\u5740",children:"4. \u4ed3\u5e93\u5730\u5740"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u5e8f\u53f7"}),(0,r.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(n.th,{children:"\u79cd\u7c7b"}),(0,r.jsx)(n.th,{children:"URL"}),(0,r.jsx)(n.th,{children:"\u5907\u6ce8"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"Maven"}),(0,r.jsx)(n.td,{children:"Proxy"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://repo1.maven.org/maven2/",children:"https://repo1.maven.org/maven2/"})}),(0,r.jsx)(n.td,{children:"\u4e2d\u592e\u4ed3\u5e93"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"Maven"}),(0,r.jsx)(n.td,{children:"Proxy"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://maven.aliyun.com/repository/public",children:"https://maven.aliyun.com/repository/public"})}),(0,r.jsx)(n.td,{children:"\u963f\u91cc\u4e91\u4ed3\u5e93"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"Maven"}),(0,r.jsx)(n.td,{children:"Hosted"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"\u672c\u5730\u4ed3\u5e93"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"-"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"NPM"}),(0,r.jsx)(n.td,{children:"Proxy"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://registry.npmjs.org",children:"https://registry.npmjs.org"})}),(0,r.jsx)(n.td,{children:"\u4e2d\u592e\u4ed3\u5e93"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"NPM"}),(0,r.jsx)(n.td,{children:"Proxy"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://registry.npm.tabao.org",children:"https://registry.npm.tabao.org"})}),(0,r.jsx)(n.td,{children:"\u6dd8\u5b9d\u4ed3\u5e93"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"NPM"}),(0,r.jsx)(n.td,{children:"Proxy"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://registry.npmmirror.com",children:"https://registry.npmmirror.com"})}),(0,r.jsx)(n.td,{children:"\u6dd8\u5b9d\u4ed3\u5e93"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"4"}),(0,r.jsx)(n.td,{children:"NPM"}),(0,r.jsx)(n.td,{children:"Hosted"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"\u672c\u5730\u4ed3\u5e93"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"-"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"Docker"}),(0,r.jsx)(n.td,{children:"Group"}),(0,r.jsx)(n.td,{children:"http-18083"}),(0,r.jsx)(n.td,{children:"\u7ec4\u5408"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"Docker"}),(0,r.jsx)(n.td,{children:"Proxy"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://registry-1.docker.io",children:"https://registry-1.docker.io"})}),(0,r.jsx)(n.td,{children:"\u4e2d\u592e\u4ed3\u5e93"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"Docker"}),(0,r.jsx)(n.td,{children:"Proxy"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://registry.cn-hangzhou.aliyuncs.com",children:"https://registry.cn-hangzhou.aliyuncs.com"})}),(0,r.jsx)(n.td,{children:"\u963f\u91cc\u4e91\u4ed3\u5e93"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"4"}),(0,r.jsx)(n.td,{children:"Docker"}),(0,r.jsx)(n.td,{children:"Hosted"}),(0,r.jsx)(n.td,{children:"http-18082"}),(0,r.jsx)(n.td,{children:"\u672c\u5730\u4ed3\u5e93"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Docker\u4ed3\u5e93\u9700\u8981\u914d\u7f6ehttp\u5730\u5740"}),"\uff0c\u5e76\u91cd\u65b0\u52a0\u8f7d\nvim /etc/docker/daemon.json"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "registry-mirrors": ["https://rv4ppfhe.mirror.aliyuncs.com"],\n  "exec-opts": ["native.cgroupdriver=systemd"],\n  "insecure-registries": [\n        "192.168.137.102:5000",\n        "192.168.137.102:5080",\n        "192.168.137.102:18082"\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"5-\u6d4b\u8bd5",children:"5. \u6d4b\u8bd5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"# \u91cd\u542fDocker\nsystemctl daemon-reload && service docker restart\n\n# \u67e5\u770b\u914d\u7f6e\u7684\u5730\u5740\u662f\u5426\u751f\u6548\ndocker info\n\n# \u767b\u5f55\u4ed3\u5e93\ndocker login 192.168.137.102:18082\n\n# \u62c9\u53d6\u6d4b\u8bd5\u955c\u50cf\ndocker pull alpine\n\n# \u91cd\u65b0\u6253Tag\ndocker tag alpine:latest 192.168.137.102:18082/pi-diginn/alpine:latest\n\n# \u63a8\u9001\u5230\u79c1\u670d\ndocker push 192.168.137.102:18082/pi-diginn/alpine:latest\n\n# \u4ece\u79c1\u670d\u62c9\u53d6\u955c\u50cf \u8d70Group\u4ee3\u7406\ndocker pull 192.168.137.102:18083/pi-diginn/alpine:latest\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u4f7f\u7528docker\u642d\u5efa",children:"\u4f7f\u7528Docker\u642d\u5efa"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://help.sonatype.com/repomanager3/nexus-repository-administration/formats/docker-registry/docker-repository-reverse-proxy-strategies",children:"https://help.sonatype.com/repomanager3/nexus-repository-administration/formats/docker-registry/docker-repository-reverse-proxy-strategies"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"docker run -d \\\n    -p 8081:8081 \\\n    -p 8082:8082 \\\n    -p 8083:8083 \\\n    -v /data/nexus-data:/nexus-data \\\n    -v /etc/hosts:/etc/hosts \\\n    -v /etc/localtime:/etc/localtime \\\n    --restart unless-stopped \\\n    --name nexus \\ \n    sonatype/nexus3\n\nhttps://blog.51cto.com/215687833/5051848\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.cnblogs.com/hahaha111122222/p/13099635.html",children:"\u5b89\u88c5"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://hazx.hmacg.cn/server/nexus-docker-proxy.html",children:"\u5b89\u88c5"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://zhang.ge/5139.html",children:"\u5b89\u88c5"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://dylanyang.top/post/2020/06/23/nexus-3.x%E6%B8%85%E7%90%86docker%E9%95%9C%E5%83%8F/",children:"\u6e05\u7406\u955c\u50cf"})}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,t.ah)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},11151:(e,n,s)=>{s.d(n,{ah:()=>l});var r=s(67294);const t=r.createContext({});function l(e){const n=r.useContext(t);return r.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}}}]);