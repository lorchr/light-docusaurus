"use strict";(self.webpackChunklight_docusaurus=self.webpackChunklight_docusaurus||[]).push([[224],{80465:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>A,contentTitle:()=>c,default:()=>t,frontMatter:()=>l,metadata:()=>d,toc:()=>o});var i=r(85893),s=r(11151);const l={},c="RabbitMQ",d={id:"compare/Different-Between-Kafka-RabbitMQ-RocketMQ",title:"Different-Between-Kafka-RabbitMQ-RocketMQ",description:"- \u6a2a\u8d2f\u516b\u65b9\u63ed\u79d8RabbitMQ\u3001RocketMQ\u3001Kafka \u7684\u6838\u5fc3\u539f\u7406",source:"@site/middleware/compare/1-Different-Between-Kafka-RabbitMQ-RocketMQ.md",sourceDirName:"compare",slug:"/compare/Different-Between-Kafka-RabbitMQ-RocketMQ",permalink:"/light-docusaurus/middleware/compare/Different-Between-Kafka-RabbitMQ-RocketMQ",draft:!1,unlisted:!1,editUrl:"https://github.com/lorchr/light-docusaurus/tree/main/middleware/compare/1-Different-Between-Kafka-RabbitMQ-RocketMQ.md",tags:[],version:"current",lastUpdatedBy:"liuhui",lastUpdatedAt:1703836482,formattedLastUpdatedAt:"2023\u5e7412\u670829\u65e5",sidebarPosition:1,frontMatter:{},sidebar:"middleware",previous:{title:"Compare",permalink:"/light-docusaurus/middleware/category/compare"},next:{title:"Different-Between-Hazelcast-Redis",permalink:"/light-docusaurus/middleware/compare/Different-Between-Hazelcast-Redis"}},A={},o=[{value:"RabbitMQ\u5404\u7ec4\u4ef6\u7684\u529f\u80fd",id:"rabbitmq\u5404\u7ec4\u4ef6\u7684\u529f\u80fd",level:2},{value:"RabbitMQ\u7684\u591a\u79cd\u4ea4\u6362\u673a\u7c7b\u578b",id:"rabbitmq\u7684\u591a\u79cd\u4ea4\u6362\u673a\u7c7b\u578b",level:2},{value:"TTL",id:"ttl",level:2},{value:"\u751f\u4ea7\u8005\u7684\u6d88\u606f\u786e\u8ba4\u673a\u5236",id:"\u751f\u4ea7\u8005\u7684\u6d88\u606f\u786e\u8ba4\u673a\u5236",level:2},{value:"Return\u6d88\u606f\u673a\u5236\uff1a",id:"return\u6d88\u606f\u673a\u5236",level:2},{value:"\u6d88\u8d39\u7aefACK\u4e0eNACK",id:"\u6d88\u8d39\u7aefack\u4e0enack",level:2},{value:"\u6b7b\u4fe1\u961f\u5217DLX",id:"\u6b7b\u4fe1\u961f\u5217dlx",level:2},{value:"RocketMQ\u7684\u6838\u5fc3\u6982\u5ff5",id:"rocketmq\u7684\u6838\u5fc3\u6982\u5ff5",level:2},{value:"\u5ef6\u65f6\u6d88\u606f",id:"\u5ef6\u65f6\u6d88\u606f",level:2},{value:"\u987a\u5e8f\u6d88\u606f",id:"\u987a\u5e8f\u6d88\u606f",level:2},{value:"\u4e8b\u52a1\u6d88\u606f",id:"\u4e8b\u52a1\u6d88\u606f",level:2},{value:"RocketMQ\u7684\u9ad8\u53ef\u7528\u673a\u5236",id:"rocketmq\u7684\u9ad8\u53ef\u7528\u673a\u5236",level:2},{value:"\u6d88\u606f\u6d88\u8d39\u7684\u9ad8\u53ef\u7528\uff08\u4e3b\u4ece\uff09\uff1a",id:"\u6d88\u606f\u6d88\u8d39\u7684\u9ad8\u53ef\u7528\u4e3b\u4ece",level:3},{value:"\u6d88\u606f\u53d1\u9001\u9ad8\u53ef\u7528\uff08\u914d\u7f6e\u591a\u4e2a\u4e3b\u8282\u70b9\uff09\uff1a",id:"\u6d88\u606f\u53d1\u9001\u9ad8\u53ef\u7528\u914d\u7f6e\u591a\u4e2a\u4e3b\u8282\u70b9",level:3},{value:"\u4e3b\u4ece\u590d\u5236\uff1a",id:"\u4e3b\u4ece\u590d\u5236",level:3},{value:"\u8d1f\u8f7d\u5747\u8861",id:"\u8d1f\u8f7d\u5747\u8861",level:2},{value:"Producer\u8d1f\u8f7d\u5747\u8861\uff1a",id:"producer\u8d1f\u8f7d\u5747\u8861",level:3},{value:"Consumer\u8d1f\u8f7d\u5747\u8861\uff1a",id:"consumer\u8d1f\u8f7d\u5747\u8861",level:3},{value:"\u6b7b\u4fe1\u961f\u5217",id:"\u6b7b\u4fe1\u961f\u5217",level:2},{value:"Kafka\u7684\u6838\u5fc3\u6982\u5ff5",id:"kafka\u7684\u6838\u5fc3\u6982\u5ff5",level:2},{value:"Kafka\u6838\u5fc3\u603b\u63a7\u5236\u5668Controller",id:"kafka\u6838\u5fc3\u603b\u63a7\u5236\u5668controller",level:2},{value:"Controller\u9009\u4e3e\u673a\u5236",id:"controller\u9009\u4e3e\u673a\u5236",level:3},{value:"Partition\u526f\u672c\u9009\u4e3eLeader\u673a\u5236",id:"partition\u526f\u672c\u9009\u4e3eleader\u673a\u5236",level:3},{value:"\u6d88\u8d39\u8005\u6d88\u8d39\u6d88\u606f\u7684Offset\u8bb0\u5f55\u673a\u5236",id:"\u6d88\u8d39\u8005\u6d88\u8d39\u6d88\u606f\u7684offset\u8bb0\u5f55\u673a\u5236",level:3},{value:"\u6d88\u8d39\u8005Rebalance\u673a\u5236",id:"\u6d88\u8d39\u8005rebalance\u673a\u5236",level:2},{value:"Rebalance\u8fc7\u7a0b\u5982\u4e0b",id:"rebalance\u8fc7\u7a0b\u5982\u4e0b",level:3},{value:"\u7b2c\u4e00\u9636\u6bb5\uff1a\u9009\u62e9\u7ec4\u534f\u8c03\u5668",id:"\u7b2c\u4e00\u9636\u6bb5\u9009\u62e9\u7ec4\u534f\u8c03\u5668",level:4},{value:"\u7b2c\u4e8c\u9636\u6bb5\uff1a\u52a0\u5165\u6d88\u8d39\u7ec4JOIN GROUP",id:"\u7b2c\u4e8c\u9636\u6bb5\u52a0\u5165\u6d88\u8d39\u7ec4join-group",level:4},{value:"\u7b2c\u4e09\u9636\u6bb5\uff08SYNC GROUP\uff09",id:"\u7b2c\u4e09\u9636\u6bb5sync-group",level:4},{value:"\u6d88\u8d39\u8005Rebalance\u5206\u533a\u5206\u914d\u7b56\u7565",id:"\u6d88\u8d39\u8005rebalance\u5206\u533a\u5206\u914d\u7b56\u7565",level:3},{value:"Producer\u53d1\u5e03\u6d88\u606f\u673a\u5236\u5256\u6790",id:"producer\u53d1\u5e03\u6d88\u606f\u673a\u5236\u5256\u6790",level:2},{value:"1\u3001\u5199\u5165\u65b9\u5f0f",id:"1\u5199\u5165\u65b9\u5f0f",level:3},{value:"2\u3001\u6d88\u606f\u8def\u7531",id:"2\u6d88\u606f\u8def\u7531",level:3},{value:"3\u3001\u5199\u5165\u6d41\u7a0b",id:"3\u5199\u5165\u6d41\u7a0b",level:3},{value:"HW\u4e0eLEO",id:"hw\u4e0eleo",level:2},{value:"\u65e5\u5fd7\u5206\u6bb5\u5b58\u50a8",id:"\u65e5\u5fd7\u5206\u6bb5\u5b58\u50a8",level:2},{value:"\u5982\u4f55\u4fdd\u8bc1\u987a\u5e8f\u6d88\u8d39\uff1f",id:"\u5982\u4f55\u4fdd\u8bc1\u987a\u5e8f\u6d88\u8d39",level:2},{value:"RabbitMQ\uff1a\u4e00\u4e2aQueue\u5bf9\u5e94\u4e00\u4e2aConsumer\u5373\u53ef\u89e3\u51b3\u3002",id:"rabbitmq\u4e00\u4e2aqueue\u5bf9\u5e94\u4e00\u4e2aconsumer\u5373\u53ef\u89e3\u51b3",level:3},{value:"RocketMQ\uff1ahash(key)%\u961f\u5217\u6570",id:"rocketmqhashkey\u961f\u5217\u6570",level:3},{value:"Kafka\uff1ahash(key)%\u5206\u533a\u6570",id:"kafkahashkey\u5206\u533a\u6570",level:3},{value:"\u5982\u4f55\u5b9e\u73b0\u5ef6\u8fdf\u6d88\u8d39\uff1f",id:"\u5982\u4f55\u5b9e\u73b0\u5ef6\u8fdf\u6d88\u8d39",level:2},{value:"RabbitMQ\uff1a\u4e24\u79cd\u65b9\u6848\u6b7b\u4fe1\u961f\u5217 + TTL\u5f15\u5165RabbitMQ\u7684\u5ef6\u8fdf\u63d2\u4ef6",id:"rabbitmq\u4e24\u79cd\u65b9\u6848\u6b7b\u4fe1\u961f\u5217--ttl\u5f15\u5165rabbitmq\u7684\u5ef6\u8fdf\u63d2\u4ef6",level:3},{value:"RocketMQ\uff1a\u5929\u751f\u652f\u6301\u5ef6\u65f6\u6d88\u606f\u3002",id:"rocketmq\u5929\u751f\u652f\u6301\u5ef6\u65f6\u6d88\u606f",level:3},{value:"Kafka\uff1a\u6b65\u9aa4\u5982\u4e0b",id:"kafka\u6b65\u9aa4\u5982\u4e0b",level:3},{value:"\u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u7684\u53ef\u9760\u6027\u6295\u9012",id:"\u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u7684\u53ef\u9760\u6027\u6295\u9012",level:2},{value:"RabbitMQ\uff1a",id:"rabbitmq-1",level:3},{value:"RocketMQ",id:"rocketmq-1",level:3},{value:"Kafka",id:"kafka-1",level:3},{value:"\u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u7684\u5e42\u7b49\uff1f",id:"\u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u7684\u5e42\u7b49",level:2},{value:"\u5982\u4f55\u89e3\u51b3\u6d88\u606f\u79ef\u538b\u7684\u95ee\u9898\uff1f",id:"\u5982\u4f55\u89e3\u51b3\u6d88\u606f\u79ef\u538b\u7684\u95ee\u9898",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.ah)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://mp.weixin.qq.com/s/Pn_D6mv47zd7KxSr1Fs6cQ",children:"\u6a2a\u8d2f\u516b\u65b9\u63ed\u79d8RabbitMQ\u3001RocketMQ\u3001Kafka \u7684\u6838\u5fc3\u539f\u7406"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u4eca\u5929\u6211\u4eec\u901a\u8fc7\u4e00\u7bc7\u6587\u7ae0\u6765\u8ba4\u8bc6\u4e00\u4e0b\u5e38\u89c1\u6d88\u606f\u961f\u5217RabbitMQ\u3001RocketMQ\u3001Kafka\u3002"}),"\n",(0,i.jsx)(n.h1,{id:"rabbitmq",children:"RabbitMQ"}),"\n",(0,i.jsx)(n.h2,{id:"rabbitmq\u5404\u7ec4\u4ef6\u7684\u529f\u80fd",children:"RabbitMQ\u5404\u7ec4\u4ef6\u7684\u529f\u80fd"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Broker \uff1a\u4e00\u4e2aRabbitMQ\u5b9e\u4f8b\u5c31\u662f\u4e00\u4e2aBroker"}),"\n",(0,i.jsxs)(n.li,{children:["Virtual Host \uff1a\u865a\u62df\u4e3b\u673a\u3002",(0,i.jsx)(n.code,{children:"\u76f8\u5f53\u4e8eMySQL\u7684DataBase"}),"\uff0c\u4e00\u4e2aBroker\u4e0a\u53ef\u4ee5\u5b58\u5728\u591a\u4e2avhost\uff0cvhost\u4e4b\u95f4\u76f8\u4e92\u9694\u79bb\u3002\u6bcf\u4e2avhost\u90fd\u62e5\u6709\u81ea\u5df1\u7684\u961f\u5217\u3001\u4ea4\u6362\u673a\u3001\u7ed1\u5b9a\u548c\u6743\u9650\u673a\u5236\u3002vhost\u5fc5\u987b\u5728\u8fde\u63a5\u65f6\u6307\u5b9a\uff0c\u9ed8\u8ba4\u7684vhost\u662f/\u3002"]}),"\n",(0,i.jsx)(n.li,{children:"Exchange \uff1a\u4ea4\u6362\u673a\uff0c\u7528\u6765\u63a5\u6536\u751f\u4ea7\u8005\u53d1\u9001\u7684\u6d88\u606f\u5e76\u5c06\u8fd9\u4e9b\u6d88\u606f\u8def\u7531\u7ed9\u670d\u52a1\u5668\u4e2d\u7684\u961f\u5217\u3002"}),"\n",(0,i.jsx)(n.li,{children:"Queue \uff1a\u6d88\u606f\u961f\u5217\uff0c\u7528\u6765\u4fdd\u5b58\u6d88\u606f\u76f4\u5230\u53d1\u9001\u7ed9\u6d88\u8d39\u8005\u3002\u5b83\u662f\u6d88\u606f\u7684\u5bb9\u5668\u3002\u4e00\u4e2a\u6d88\u606f\u53ef\u6295\u5165\u4e00\u4e2a\u6216\u591a\u4e2a\u961f\u5217\u3002"}),"\n",(0,i.jsxs)(n.li,{children:["Banding \uff1a\u7ed1\u5b9a\u5173\u7cfb\uff0c\u7528\u4e8e",(0,i.jsx)(n.code,{children:"\u6d88\u606f\u961f\u5217\u548c\u4ea4\u6362\u673a\u4e4b\u95f4\u7684\u5173\u8054"}),"\u3002\u901a\u8fc7\u8def\u7531\u952e\uff08",(0,i.jsx)(n.code,{children:"Routing Key"}),"\uff09\u5c06\u4ea4\u6362\u673a\u548c\u6d88\u606f\u961f\u5217\u5173\u8054\u8d77\u6765\u3002"]}),"\n",(0,i.jsx)(n.li,{children:"Channel \uff1a\u7ba1\u9053\uff0c\u4e00\u6761\u53cc\u5411\u6570\u636e\u6d41\u901a\u9053\u3002\u4e0d\u7ba1\u662f\u53d1\u5e03\u6d88\u606f\u3001\u8ba2\u9605\u961f\u5217\u8fd8\u662f\u63a5\u6536\u6d88\u606f\uff0c\u8fd9\u4e9b\u52a8\u4f5c\u90fd\u662f\u901a\u8fc7\u7ba1\u9053\u5b8c\u6210\u3002\u56e0\u4e3a\u5bf9\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u6765\u8bf4\uff0c\u5efa\u7acb\u548c\u9500\u6bc1TCP\u90fd\u662f\u975e\u5e38\u6602\u8d35\u7684\u5f00\u9500\uff0c\u6240\u4ee5\u5f15\u5165\u4e86\u7ba1\u9053\u7684\u6982\u5ff5\uff0c\u4ee5\u590d\u7528\u4e00\u6761TCP\u8fde\u63a5\u3002"}),"\n",(0,i.jsx)(n.li,{children:"Connection \uff1a\u751f\u4ea7\u8005/\u6d88\u8d39\u8005 \u4e0ebroker\u4e4b\u95f4\u7684TCP\u8fde\u63a5\u3002"}),"\n",(0,i.jsx)(n.li,{children:"Publisher \uff1a\u6d88\u606f\u7684\u751f\u4ea7\u8005\u3002"}),"\n",(0,i.jsx)(n.li,{children:"Consumer \uff1a\u6d88\u606f\u7684\u6d88\u8d39\u8005\u3002"}),"\n",(0,i.jsxs)(n.li,{children:["Message \uff1a\u6d88\u606f\uff0c\u5b83\u662f\u7531\u6d88\u606f\u5934\u548c\u6d88\u606f\u4f53\u7ec4\u6210\u3002\u6d88\u606f\u5934\u5219\u5305\u62ec",(0,i.jsx)(n.code,{children:"Routing-Key"}),"\u3001",(0,i.jsx)(n.code,{children:"Priority"}),"\uff08\u4f18\u5148\u7ea7\uff09\u7b49\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:r(20995).Z+"",width:"640",height:"169"})}),"\n",(0,i.jsx)(n.h2,{id:"rabbitmq\u7684\u591a\u79cd\u4ea4\u6362\u673a\u7c7b\u578b",children:"RabbitMQ\u7684\u591a\u79cd\u4ea4\u6362\u673a\u7c7b\u578b"}),"\n",(0,i.jsxs)(n.p,{children:["Exchange \u5206\u53d1\u6d88\u606f\u7ed9 Queue \u65f6\uff0c Exchange \u7684\u7c7b\u578b\u5bf9\u5e94\u4e0d\u540c\u7684\u5206\u53d1\u7b56\u7565\uff0c\u67093\u79cd\u7c7b\u578b\u7684 Exchange \uff1a",(0,i.jsx)(n.code,{children:"Direct"}),"\u3001",(0,i.jsx)(n.code,{children:"Fanout"}),"\u3001",(0,i.jsx)(n.code,{children:"Topic"}),"\u3002"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Direct\uff1a\u6d88\u606f\u4e2d\u7684 Routing Key \u5982\u679c\u548c Binding \u4e2d\u7684 Routing Key \u5b8c\u5168\u4e00\u81f4\uff0c Exchange \u5c31\u4f1a\u5c06\u6d88\u606f\u5206\u53d1\u5230\u5bf9\u5e94\u7684\u961f\u5217\u4e2d\u3002"}),"\n",(0,i.jsxs)(n.li,{children:["Fanout\uff1a\u6bcf\u4e2a\u53d1\u5230 Fanout \u7c7b\u578b\u4ea4\u6362\u673a\u7684\u6d88\u606f\u90fd\u4f1a\u5206\u53d1\u5230\u6240\u6709\u7ed1\u5b9a\u7684\u961f\u5217\u4e0a\u53bb\u3002Fanout\u4ea4\u6362\u673a\u6ca1\u6709 Routing Key \u3002",(0,i.jsx)(n.code,{children:"\u5b83\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u4ea4\u6362\u673a\u4e2d\u8f6c\u53d1\u6d88\u606f\u662f\u6700\u5feb\u7684"}),"\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:["Topic\uff1aTopic\u4ea4\u6362\u673a\u901a\u8fc7\u6a21\u5f0f\u5339\u914d\u5206\u914d\u6d88\u606f\uff0c\u5c06 Routing Key \u548c\u67d0\u4e2a\u6a21\u5f0f\u8fdb\u884c\u5339\u914d\u3002\u5b83\u53ea\u80fd\u8bc6\u522b\u4e24\u4e2a",(0,i.jsx)(n.code,{children:"\u901a\u914d\u7b26"}),'\uff1a"#"\u548c"*"\u3002# \u5339\u914d0\u4e2a\u6216\u591a\u4e2a\u5355\u8bcd\uff0c * \u5339\u914d1\u4e2a\u5355\u8bcd\u3002']}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"ttl",children:"TTL"}),"\n",(0,i.jsx)(n.p,{children:"TTL\uff08Time To Live\uff09\uff1a\u751f\u5b58\u65f6\u95f4\u3002RabbitMQ\u652f\u6301\u6d88\u606f\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u4e00\u51712\u79cd\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"\u5728\u6d88\u606f\u53d1\u9001\u65f6\u8fdb\u884c\u6307\u5b9a"}),"\u3002\u901a\u8fc7\u914d\u7f6e\u6d88\u606f\u4f53\u7684 Properties \uff0c\u53ef\u4ee5\u6307\u5b9a\u5f53\u524d\u6d88\u606f\u7684\u8fc7\u671f\u65f6\u95f4\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"\u5728\u521b\u5efaExchange\u65f6\u6307\u5b9a"}),"\u3002\u4ece\u8fdb\u5165\u6d88\u606f\u961f\u5217\u5f00\u59cb\u8ba1\u7b97\uff0c\u53ea\u8981\u8d85\u8fc7\u4e86\u961f\u5217\u7684\u8d85\u65f6\u65f6\u95f4\u914d\u7f6e\uff0c\u90a3\u4e48\u6d88\u606f\u4f1a\u81ea\u52a8\u6e05\u9664\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u751f\u4ea7\u8005\u7684\u6d88\u606f\u786e\u8ba4\u673a\u5236",children:"\u751f\u4ea7\u8005\u7684\u6d88\u606f\u786e\u8ba4\u673a\u5236"}),"\n",(0,i.jsx)(n.p,{children:"Confirm\u673a\u5236\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u6d88\u606f\u7684\u786e\u8ba4\uff0c\u662f\u6307\u751f\u4ea7\u8005\u6295\u9012\u6d88\u606f\u540e\uff0c\u5982\u679cBroker\u6536\u5230\u6d88\u606f\uff0c\u5219\u4f1a\u7ed9\u6211\u4eec\u751f\u4ea7\u8005\u4e00\u4e2a\u5e94\u7b54\u3002"}),"\n",(0,i.jsxs)(n.li,{children:["\u751f\u4ea7\u8005\u8fdb\u884c\u63a5\u53d7\u5e94\u7b54\uff0c\u7528\u6765\u786e\u8ba4\u8fd9\u6761\u6d88\u606f\u662f\u5426\u6b63\u5e38\u7684\u53d1\u9001\u5230\u4e86Broker\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4e5f\u662f\u6d88\u606f\u7684",(0,i.jsx)(n.code,{children:"\u53ef\u9760\u6027\u6295\u9012\u7684\u6838\u5fc3\u4fdd\u969c"}),"\uff01"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u4f55\u5b9e\u73b0Confirm\u786e\u8ba4\u6d88\u606f\uff1f"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:r(6102).Z+"",width:"640",height:"334"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"\u5728channel\u4e0a\u5f00\u542f\u786e\u8ba4\u6a21\u5f0f"}),"\uff1a",(0,i.jsx)(n.code,{children:"channel.confirmSelect()"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"\u5728channel\u4e0a\u5f00\u542f\u76d1\u542c"}),"\uff1a",(0,i.jsx)(n.code,{children:"addConfirmListener"})," \uff0c\u76d1\u542c\u6210\u529f\u548c\u5931\u8d25\u7684\u5904\u7406\u7ed3\u679c\uff0c\u6839\u636e\u5177\u4f53\u7684\u7ed3\u679c\u5bf9\u6d88\u606f\u8fdb\u884c\u91cd\u65b0\u53d1\u9001\u6216\u8bb0\u5f55\u65e5\u5fd7\u5904\u7406\u7b49\u540e\u7eed\u64cd\u4f5c\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"return\u6d88\u606f\u673a\u5236",children:"Return\u6d88\u606f\u673a\u5236\uff1a"}),"\n",(0,i.jsxs)(n.p,{children:["Return Listener\u7528\u4e8e",(0,i.jsx)(n.code,{children:"\u5904\u7406\u4e00\u4e9b\u4e0d\u53ef\u8def\u7531\u7684\u6d88\u606f"}),"\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u6211\u4eec\u7684\u6d88\u606f\u751f\u4ea7\u8005\uff0c\u901a\u8fc7\u6307\u5b9a\u4e00\u4e2a",(0,i.jsx)(n.code,{children:"Exchange"}),"\u548c",(0,i.jsx)(n.code,{children:"Routing"}),"\uff0c\u628a\u6d88\u606f\u9001\u8fbe\u5230\u67d0\u4e00\u4e2a\u961f\u5217\u4e2d\u53bb\uff0c\u7136\u540e\u6211\u4eec\u7684\u6d88\u8d39\u8005\u76d1\u542c\u961f\u5217\u8fdb\u884c\u6d88\u606f\u7684\u6d88\u8d39\u5904\u7406\u64cd\u4f5c\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u4f46\u662f\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u6211\u4eec\u5728\u53d1\u9001\u6d88\u606f\u7684\u65f6\u5019\uff0c\u5f53\u524d\u7684exchange\u4e0d\u5b58\u5728\u6216\u8005\u6307\u5b9a\u7684\u8def\u7531key\u8def\u7531\u4e0d\u5230\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u9700\u8981\u76d1\u542c\u8fd9\u79cd\u4e0d\u53ef\u8fbe\u6d88\u606f\uff0c\u5c31\u9700\u8981\u4f7f\u7528\u5230Returrn Listener\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u57fa\u7840API\u4e2d\u6709\u4e2a\u5173\u952e\u7684\u914d\u7f6e\u9879 Mandatory \uff1a\u5982\u679c\u4e3atrue\uff0c\u76d1\u542c\u5668\u4f1a\u6536\u5230\u8def\u7531\u4e0d\u53ef\u8fbe\u7684\u6d88\u606f\uff0c\u7136\u540e\u8fdb\u884c\u5904\u7406\u3002\u5982\u679c\u4e3afalse\uff0cbroker\u7aef\u4f1a\u81ea\u52a8\u5220\u9664\u8be5\u6d88\u606f\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["\u540c\u6837\uff0c\u901a\u8fc7\u76d1\u542c\u7684\u65b9\u5f0f\uff0c ",(0,i.jsx)(n.code,{children:"chennel.addReturnListener(ReturnListener rl)"})," \u4f20\u5165\u5df2\u7ecf\u91cd\u5199\u8fc7",(0,i.jsx)(n.code,{children:"handleReturn"}),"\u65b9\u6cd5\u7684",(0,i.jsx)(n.code,{children:"ReturnListener"}),"\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u6d88\u8d39\u7aefack\u4e0enack",children:"\u6d88\u8d39\u7aefACK\u4e0eNACK"}),"\n",(0,i.jsxs)(n.p,{children:["\u6d88\u8d39\u7aef\u8fdb\u884c\u6d88\u8d39\u7684\u65f6\u5019\uff0c\u5982\u679c\u7531\u4e8e\u4e1a\u52a1\u5f02\u5e38\u53ef\u4ee5\u8fdb\u884c\u65e5\u5fd7\u7684\u8bb0\u5f55\uff0c\u7136\u540e\u8fdb\u884c\u8865\u507f\u3002\u4f46\u662f\u5bf9\u4e8e\u670d\u52a1\u5668\u5b95\u673a\u7b49\u4e25\u91cd\u95ee\u9898\uff0c\u6211\u4eec\u9700\u8981",(0,i.jsx)(n.code,{children:"\u624b\u52a8ACK"}),"\u4fdd\u969c\u6d88\u8d39\u7aef\u6d88\u8d39\u6210\u529f\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// deliveryTag\uff1a\u6d88\u606f\u5728mq\u4e2d\u7684\u552f\u4e00\u6807\u8bc6\n\n// multiple\uff1a\u662f\u5426\u6279\u91cf(\u548cqos\u8bbe\u7f6e\u7c7b\u4f3c\u7684\u53c2\u6570)\n\n// requeue\uff1a\u662f\u5426\u9700\u8981\u91cd\u56de\u961f\u5217\u3002\u6216\u8005\u4e22\u5f03\u6216\u8005\u91cd\u56de\u961f\u9996\u518d\u6b21\u6d88\u8d39\u3002\n\npublic void basicNack(long deliveryTag, boolean multiple, boolean requeue) \n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u4e0a\u4ee3\u7801\uff0c\u6d88\u606f\u5728",(0,i.jsx)(n.code,{children:"\u6d88\u8d39\u7aef\u91cd\u56de\u961f\u5217"}),"\u662f\u4e3a\u4e86\u5bf9\u6ca1\u6709\u6210\u529f\u5904\u7406\u6d88\u606f\uff0c\u628a\u6d88\u606f\u91cd\u65b0\u8fd4\u56de\u5230Broker\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u5b9e\u9645\u5e94\u7528\u4e2d\u90fd\u4f1a\u5173\u95ed\u91cd\u56de\u961f\u5217\uff08",(0,i.jsx)(n.code,{children:"\u907f\u514d\u8fdb\u5165\u6b7b\u5faa\u73af"}),"\uff09\uff0c\u4e5f\u5c31\u662f\u8bbe\u7f6e\u4e3afalse\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u6b7b\u4fe1\u961f\u5217dlx",children:"\u6b7b\u4fe1\u961f\u5217DLX"}),"\n",(0,i.jsx)(n.p,{children:"\u6b7b\u4fe1\u961f\u5217\uff08DLX Dead-Letter-Exchange\uff09\uff1a\u5f53\u6d88\u606f\u5728\u4e00\u4e2a\u961f\u5217\u4e2d\u53d8\u6210\u6b7b\u4fe1\u4e4b\u540e\uff0c\u5b83\u4f1a\u88ab\u91cd\u65b0\u63a8\u9001\u5230\u53e6\u4e00\u4e2a\u961f\u5217\uff0c\u8fd9\u4e2a\u961f\u5217\u5c31\u662f\u6b7b\u4fe1\u961f\u5217\u3002"}),"\n",(0,i.jsx)(n.p,{children:"DLX\u4e5f\u662f\u4e00\u4e2a\u6b63\u5e38\u7684Exchange\uff0c\u548c\u4e00\u822c\u7684Exchange\u6ca1\u6709\u533a\u522b\uff0c\u5b83\u80fd\u5728\u4efb\u4f55\u7684\u961f\u5217\u4e0a\u88ab\u6307\u5b9a\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u8bbe\u7f6e\u67d0\u4e2a\u961f\u5217\u7684\u5c5e\u6027\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u5f53\u8fd9\u4e2a\u961f\u5217\u4e2d\u6709\u6b7b\u4fe1\u65f6\uff0cRabbitMQ\u5c31\u4f1a\u81ea\u52a8\u7684\u5c06\u8fd9\u4e2a\u6d88\u606f\u91cd\u65b0\u53d1\u5e03\u5230\u8bbe\u7f6e\u7684Exchange\u4e0a\u53bb\uff0c\u8fdb\u800c\u88ab\u8def\u7531\u5230\u53e6\u4e00\u4e2a\u961f\u5217\u3002"}),"\n",(0,i.jsx)(n.h1,{id:"rocketmq",children:"RocketMQ"}),"\n",(0,i.jsx)(n.p,{children:"\u963f\u91cc\u5df4\u5df4\u53cc\u5341\u4e00\u5b98\u65b9\u6307\u5b9a\u6d88\u606f\u4ea7\u54c1\uff0c\u652f\u6491\u963f\u91cc\u5df4\u5df4\u96c6\u56e2\u6240\u6709\u7684\u6d88\u606f\u670d\u52a1\uff0c\u5386\u7ecf\u5341\u4f59\u5e74\u9ad8\u53ef\u7528\u4e0e\u9ad8\u53ef\u9760\u7684\u4e25\u82db\u8003\u9a8c\uff0c\u662f\u963f\u91cc\u5df4\u5df4\u4ea4\u6613\u94fe\u8def\u7684\u6838\u5fc3\u4ea7\u54c1\u3002"}),"\n",(0,i.jsx)(n.p,{children:"Rocket\uff1a\u706b\u7bad\u7684\u610f\u601d\u3002"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:r(42093).Z+"",width:"1080",height:"620"})}),"\n",(0,i.jsx)(n.h2,{id:"rocketmq\u7684\u6838\u5fc3\u6982\u5ff5",children:"RocketMQ\u7684\u6838\u5fc3\u6982\u5ff5"}),"\n",(0,i.jsxs)(n.p,{children:["\u4ed6\u6709\u4ee5\u4e0b\u6838\u5fc3\u6982\u5ff5\uff1a",(0,i.jsx)(n.code,{children:"Broker"})," \u3001 ",(0,i.jsx)(n.code,{children:"Topic"})," \u3001 ",(0,i.jsx)(n.code,{children:"Tag"})," \u3001 ",(0,i.jsx)(n.code,{children:"MessageQueue"})," \u3001 ",(0,i.jsx)(n.code,{children:"NameServer"})," \u3001 ",(0,i.jsx)(n.code,{children:"Group"})," \u3001 ",(0,i.jsx)(n.code,{children:"Offset"})," \u3001 ",(0,i.jsx)(n.code,{children:"Producer"})," \u4ee5\u53ca ",(0,i.jsx)(n.code,{children:"Consumer"})," \u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u4e0b\u9762\u6765\u8be6\u7ec6\u4ecb\u7ecd\u3002"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Broker\uff1a\u6d88\u606f\u4e2d\u8f6c\u89d2\u8272\uff0c\u8d1f\u8d23",(0,i.jsx)(n.strong,{children:"\u5b58\u50a8\u6d88\u606f"}),"\uff0c\u8f6c\u53d1\u6d88\u606f\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Broker\u662f\u5177\u4f53\u63d0\u4f9b\u4e1a\u52a1\u7684\u670d\u52a1\u5668\uff0c\u5355\u4e2aBroker\u8282\u70b9\u4e0e\u6240\u6709\u7684NameServer\u8282\u70b9\u4fdd\u6301\u957f\u8fde\u63a5\u53ca\u5fc3\u8df3\uff0c\u5e76\u4f1a\u5b9a\u65f6\u5c06Topic\u4fe1\u606f\u6ce8\u518c\u5230NameServer\uff0c\u987a\u5e26\u4e00\u63d0\u5e95\u5c42\u7684\u901a\u4fe1\u548c\u8fde\u63a5\u90fd\u662f",(0,i.jsx)(n.strong,{children:"\u57fa\u4e8eNetty\u5b9e\u73b0"}),"\u7684\u3002\nBroker\u8d1f\u8d23\u6d88\u606f\u5b58\u50a8\uff0c\u4ee5Topic\u4e3a\u7eac\u5ea6\u652f\u6301\u8f7b\u91cf\u7ea7\u7684\u961f\u5217\uff0c\u5355\u673a\u53ef\u4ee5\u652f\u6491\u4e0a\u4e07\u961f\u5217\u89c4\u6a21\uff0c\u652f\u6301\u6d88\u606f\u63a8\u62c9\u6a21\u578b\u3002\u5b98\u7f51\u4e0a\u6709\u6570\u636e\u663e\u793a\uff1a\u5177\u6709",(0,i.jsx)(n.strong,{children:"\u4e0a\u4ebf\u7ea7\u6d88\u606f\u5806\u79ef\u80fd\u529b"}),"\uff0c\u540c\u65f6\u53ef",(0,i.jsx)(n.strong,{children:"\u4e25\u683c\u4fdd\u8bc1\u6d88\u606f\u7684\u6709\u5e8f\u6027"}),"\u3002"]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Topic\uff1a\u4e3b\u9898\uff01\u5b83\u662f\u6d88\u606f\u7684\u7b2c\u4e00\u7ea7\u7c7b\u578b\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u6bd4\u5982\u4e00\u4e2a\u7535\u5546\u7cfb\u7edf\u53ef\u4ee5\u5206\u4e3a\uff1a\u4ea4\u6613\u6d88\u606f\u3001\u7269\u6d41\u6d88\u606f\u7b49\uff0c\u4e00\u6761\u6d88\u606f\u5fc5\u987b\u6709\u4e00\u4e2a Topic \u3002Topic\u4e0e\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7684\u5173\u7cfb\u975e\u5e38\u677e\u6563\uff0c\u4e00\u4e2a Topic \u53ef\u4ee5\u67090\u4e2a\u30011\u4e2a\u3001\u591a\u4e2a\u751f\u4ea7\u8005\u5411\u5176\u53d1\u9001\u6d88\u606f\uff0c\u4e00\u4e2a\u751f\u4ea7\u8005\u4e5f\u53ef\u4ee5\u540c\u65f6\u5411\u4e0d\u540c\u7684 Topic \u53d1\u9001\u6d88\u606f\u3002\u4e00\u4e2a Topic \u4e5f\u53ef\u4ee5\u88ab 0\u4e2a\u30011\u4e2a\u3001\u591a\u4e2a\u6d88\u8d39\u8005\u8ba2\u9605\u3002"}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Tag\uff1a\u6807\u7b7e\uff01\u53ef\u4ee5\u770b\u4f5c\u5b50\u4e3b\u9898\uff0c\u5b83\u662f\u6d88\u606f\u7684\u7b2c\u4e8c\u7ea7\u7c7b\u578b\uff0c\u7528\u4e8e\u4e3a\u7528\u6237\u63d0\u4f9b\u989d\u5916\u7684\u7075\u6d3b\u6027\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528\u6807\u7b7e\uff0c\u540c\u4e00\u4e1a\u52a1\u6a21\u5757\u4e0d\u540c\u76ee\u7684\u7684\u6d88\u606f\u5c31\u53ef\u4ee5\u7528\u76f8\u540cTopic\u800c\u4e0d\u540c\u7684Tag\u6765\u6807\u8bc6\u3002\u6bd4\u5982\u4ea4\u6613\u6d88\u606f\u53c8\u53ef\u4ee5\u5206\u4e3a\uff1a\u4ea4\u6613\u521b\u5efa\u6d88\u606f\u3001\u4ea4\u6613\u5b8c\u6210\u6d88\u606f\u7b49\uff0c\u4e00\u6761\u6d88\u606f\u53ef\u4ee5\u6ca1\u6709Tag\u3002\u6807\u7b7e\u6709\u52a9\u4e8e\u4fdd\u6301\u60a8\u7684\u4ee3\u7801\u5e72\u51c0\u548c\u8fde\u8d2f\uff0c\u5e76\u4e14\u8fd8\u53ef\u4ee5\u4e3aRabbitMQ\u63d0\u4f9b\u7684\u67e5\u8be2\u7cfb\u7edf\u63d0\u4f9b\u5e2e\u52a9\u3002"}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"MessageQueue\uff1a\u4e00\u4e2aTopic\u4e0b\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a\u6d88\u606f\u961f\u5217\uff0c\u53d1\u9001\u6d88\u606f\u65f6\u6267\u884c\u8be5\u6d88\u606f\u7684Topic\uff0cRocketMQ\u4f1a\u8f6e\u8be2\u8be5Topic\u4e0b\u7684\u6240\u6709\u961f\u5217\u5c06\u6d88\u606f\u53d1\u51fa\u53bb\u3002\u6d88\u606f\u7684\u7269\u7406\u7ba1\u7406\u5355\u4f4d\u3002\u4e00\u4e2aTopic\u4e0b\u53ef\u4ee5\u6709\u591a\u4e2aQueue\uff0cQueue\u7684\u5f15\u5165\u4f7f\u5f97\u6d88\u606f\u7684\u5b58\u50a8\u53ef\u4ee5\u5206\u5e03\u5f0f\u96c6\u7fa4\u5316\uff0c\u5177\u6709\u4e86\u6c34\u5e73\u6269\u5c55\u80fd\u529b\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["NameServer\uff1a\u7c7b\u4f3cKafka\u4e2d\u7684ZooKeeper\uff0c\u4f46NameServer",(0,i.jsx)(n.strong,{children:"\u96c6\u7fa4\u4e4b\u95f4\u662f\u6ca1\u6709\u901a\u4fe1"}),"\u7684\uff0c\u76f8\u5bf9ZK\u6765\u8bf4\u66f4\u52a0",(0,i.jsx)(n.strong,{children:"\u8f7b\u91cf"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5b83\u4e3b\u8981\u8d1f\u8d23\u5bf9\u4e8e\u6e90\u6570\u636e\u7684\u7ba1\u7406\uff0c\u5305\u62ec\u4e86\u5bf9\u4e8eTopic\u548c\u8def\u7531\u4fe1\u606f\u7684\u7ba1\u7406\u3002\u6bcf\u4e2aBroker\u5728\u542f\u52a8\u7684\u65f6\u5019\u4f1a\u5230NameServer\u6ce8\u518c\uff0cProducer\u5728\u53d1\u9001\u6d88\u606f\u524d\u4f1a\u6839\u636eTopic\u53bbNameServer",(0,i.jsx)(n.strong,{children:"\u83b7\u53d6\u5bf9\u5e94Broker\u7684\u8def\u7531\u4fe1\u606f"}),"\uff0cConsumer\u4e5f\u4f1a\u5b9a\u65f6\u83b7\u53d6 Topic \u7684\u8def\u7531\u4fe1\u606f\u3002"]}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:"Producer\uff1a\u751f\u4ea7\u8005\uff0c\u652f\u6301\u4e09\u79cd\u65b9\u5f0f\u53d1\u9001\u6d88\u606f\uff1a\u540c\u6b65\u3001\u5f02\u6b65\u548c\u5355\u5411\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5355\u5411\u53d1\u9001 \uff1a\u6d88\u606f\u53d1\u51fa\u53bb\u540e\uff0c\u53ef\u4ee5\u7ee7\u7eed\u53d1\u9001\u4e0b\u4e00\u6761\u6d88\u606f\u6216\u6267\u884c\u4e1a\u52a1\u4ee3\u7801\uff0c\u4e0d\u7b49\u5f85\u670d\u52a1\u5668\u56de\u5e94\uff0c\u4e14",(0,i.jsx)(n.strong,{children:"\u6ca1\u6709\u56de\u8c03\u51fd\u6570"}),"\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5f02\u6b65\u53d1\u9001 \uff1a\u6d88\u606f\u53d1\u51fa\u53bb\u540e\uff0c\u53ef\u4ee5\u7ee7\u7eed\u53d1\u9001\u4e0b\u4e00\u6761\u6d88\u606f\u6216\u6267\u884c\u4e1a\u52a1\u4ee3\u7801\uff0c\u4e0d\u7b49\u5f85\u670d\u52a1\u5668\u56de\u5e94\uff0c\u6709",(0,i.jsx)(n.strong,{children:"\u56de\u8c03\u51fd\u6570"}),"\u3002"]}),"\n",(0,i.jsx)(n.li,{children:"\u540c\u6b65\u53d1\u9001 \uff1a\u6d88\u606f\u53d1\u51fa\u53bb\u540e\uff0c\u7b49\u5f85\u670d\u52a1\u5668\u54cd\u5e94\u6210\u529f\u6216\u5931\u8d25\uff0c\u624d\u80fd\u7ee7\u7eed\u540e\u9762\u7684\u64cd\u4f5c\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsx)(n.li,{children:"Consumer\uff1a\u6d88\u8d39\u8005\uff0c\u652f\u6301 PUSH \u548c PULL \u4e24\u79cd\u6d88\u8d39\u6a21\u5f0f\uff0c\u652f\u6301\u96c6\u7fa4\u6d88\u8d39\u548c\u5e7f\u64ad\u6d88\u8d39"}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u96c6\u7fa4\u6d88\u8d39 \uff1a\u8be5\u6a21\u5f0f\u4e0b\u4e00\u4e2a\u6d88\u8d39\u8005\u96c6\u7fa4\u5171\u540c\u6d88\u8d39\u4e00\u4e2a\u4e3b\u9898\u7684\u591a\u4e2a\u961f\u5217\uff0c\u4e00\u4e2a\u961f\u5217\u53ea\u4f1a\u88ab\u4e00\u4e2a\u6d88\u8d39\u8005\u6d88\u8d39\uff0c\u5982\u679c\u67d0\u4e2a\u6d88\u8d39\u8005\u6302\u6389\uff0c\u5206\u7ec4\u5185\u5176\u5b83\u6d88\u8d39\u8005\u4f1a\u63a5\u66ff\u6302\u6389\u7684\u6d88\u8d39\u8005\u7ee7\u7eed\u6d88\u8d39\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u5e7f\u64ad\u6d88\u8d39 \uff1a\u4f1a\u53d1\u7ed9\u6d88\u8d39\u8005\u7ec4\u4e2d\u7684\u6bcf\u4e00\u4e2a\u6d88\u8d39\u8005\u8fdb\u884c\u6d88\u8d39\u3002\u76f8\u5f53\u4e8eRabbitMQ\u7684\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"8",children:["\n",(0,i.jsx)(n.li,{children:"Group\uff1a\u5206\u7ec4\uff0c\u4e00\u4e2a\u7ec4\u53ef\u4ee5\u8ba2\u9605\u591a\u4e2aTopic\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5206\u4e3aProducerGroup\uff0cConsumerGroup\uff0c\u4ee3\u8868\u67d0\u4e00\u7c7b\u7684\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\uff0c\u4e00\u822c\u6765\u8bf4\u540c\u4e00\u4e2a\u670d\u52a1\u53ef\u4ee5\u4f5c\u4e3aGroup\uff0c\u540c\u4e00\u4e2aGroup\u4e00\u822c\u6765\u8bf4\u53d1\u9001\u548c\u6d88\u8d39\u7684\u6d88\u606f\u90fd\u662f\u4e00\u6837\u7684"}),"\n",(0,i.jsxs)(n.ol,{start:"9",children:["\n",(0,i.jsx)(n.li,{children:"Offset\uff1a\u5728RocketMQ\u4e2d\uff0c\u6240\u6709\u6d88\u606f\u961f\u5217\u90fd\u662f\u6301\u4e45\u5316\uff0c\u957f\u5ea6\u65e0\u9650\u7684\u6570\u636e\u7ed3\u6784\uff0c\u6240\u8c13\u957f\u5ea6\u65e0\u9650\u662f\u6307\u961f\u5217\u4e2d\u7684\u6bcf\u4e2a\u5b58\u50a8\u5355\u5143\u90fd\u662f\u5b9a\u957f\uff0c\u8bbf\u95ee\u5176\u4e2d\u7684\u5b58\u50a8\u5355\u5143\u4f7f\u7528Offset\u6765\u8bbf\u95ee\uff0cOffset\u4e3aJava Long\u7c7b\u578b\uff0c64\u4f4d\uff0c\u7406\u8bba\u4e0a\u5728 100\u5e74\u5185\u4e0d\u4f1a\u6ea2\u51fa\uff0c\u6240\u4ee5\u8ba4\u4e3a\u662f\u957f\u5ea6\u65e0\u9650\u3002\u4e5f\u53ef\u4ee5\u8ba4\u4e3aMessage Queue\u662f\u4e00\u4e2a\u957f\u5ea6\u65e0\u9650\u7684\u6570\u7ec4\uff0cOffset\u5c31\u662f\u4e0b\u6807\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u5ef6\u65f6\u6d88\u606f",children:"\u5ef6\u65f6\u6d88\u606f"}),"\n",(0,i.jsx)(n.p,{children:"\u5f00\u6e90\u7248\u7684RocketMQ\u4e0d\u652f\u6301\u4efb\u610f\u65f6\u95f4\u7cbe\u5ea6\uff0c\u4ec5\u652f\u6301\u7279\u5b9a\u7684level\uff0c\u4f8b\u5982\u5b9a\u65f65s\uff0c10s\uff0c1min\u7b49\u3002\u5176\u4e2d\uff0clevel=0\u7ea7\u8868\u793a\u4e0d\u5ef6\u65f6\uff0clevel=1\u8868\u793a1\u7ea7\u5ef6\u65f6\uff0clevel=2\u8868\u793a2\u7ea7\u5ef6\u65f6\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u5ef6\u65f6\u7b49\u7ea7\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"messageDelayLevel=1s 5s 10s 30s 1m 2m 3m 4m 5m 6m 7m 8m 9m 10m 20m 30m 1h 2h\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u987a\u5e8f\u6d88\u606f",children:"\u987a\u5e8f\u6d88\u606f"}),"\n",(0,i.jsxs)(n.p,{children:["\u6d88\u606f\u6709\u5e8f\u6307\u7684\u662f\u53ef\u4ee5\u6309\u7167\u6d88\u606f\u7684\u53d1\u9001\u987a\u5e8f\u6765\u6d88\u8d39\uff08FIFO\uff09\u3002RocketMQ\u53ef\u4ee5\u4e25\u683c\u7684\u4fdd\u8bc1\u6d88\u606f\u6709\u5e8f\uff0c\u53ef\u4ee5\u5206\u4e3a ",(0,i.jsx)(n.code,{children:"\u5206\u533a\u6709\u5e8f"})," \u6216\u8005 ",(0,i.jsx)(n.code,{children:"\u5168\u5c40\u6709\u5e8f"})," \u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u4e8b\u52a1\u6d88\u606f",children:"\u4e8b\u52a1\u6d88\u606f"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:r(51130).Z+"",width:"1080",height:"449"})}),"\n",(0,i.jsx)(n.p,{children:"\u6d88\u606f\u961f\u5217MQ\u63d0\u4f9b\u7c7b\u4f3cX/Open XA\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u529f\u80fd\uff0c\u901a\u8fc7\u6d88\u606f\u961f\u5217MQ\u4e8b\u52a1\u6d88\u606f\u80fd\u8fbe\u5230\u5206\u5e03\u5f0f\u4e8b\u52a1\u7684\u6700\u7ec8\u4e00\u81f4\u3002\u4e0a\u56fe\u8bf4\u660e\u4e86\u4e8b\u52a1\u6d88\u606f\u7684\u5927\u81f4\u6d41\u7a0b\uff1a\u6b63\u5e38\u4e8b\u52a1\u6d88\u606f\u7684\u53d1\u9001\u548c\u63d0\u4ea4\u3001\u4e8b\u52a1\u6d88\u606f\u7684\u8865\u507f\u6d41\u7a0b\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u4e8b\u52a1\u6d88\u606f\u53d1\u9001\u53ca\u63d0\u4ea4\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u53d1\u9001half\u6d88\u606f"}),"\n",(0,i.jsx)(n.li,{children:"\u670d\u52a1\u7aef\u54cd\u5e94\u6d88\u606f\u5199\u5165\u7ed3\u679c"}),"\n",(0,i.jsx)(n.li,{children:"\u6839\u636e\u53d1\u9001\u7ed3\u679c\u6267\u884c\u672c\u5730\u4e8b\u52a1\uff08\u5982\u679c\u5199\u5165\u5931\u8d25\uff0c\u6b64\u65f6half\u6d88\u606f\u5bf9\u4e1a\u52a1\u4e0d\u53ef\u89c1\uff0c\u672c\u5730\u903b\u8f91\u4e0d\u6267\u884c\uff09\uff1b"}),"\n",(0,i.jsx)(n.li,{children:"\u6839\u636e\u672c\u5730\u4e8b\u52a1\u72b6\u6001\u6267\u884cCommit\u6216Rollback\uff08Commit\u64cd\u4f5c\u751f\u6210\u6d88\u606f\u7d22\u5f15\uff0c\u6d88\u606f\u5bf9\u6d88\u8d39\u8005\u53ef\u89c1\uff09\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u4e8b\u52a1\u6d88\u606f\u7684\u8865\u507f\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5bf9\u6ca1\u6709Commit/Rollback\u7684\u4e8b\u52a1\u6d88\u606f\uff08pending\u72b6\u6001\u7684\u6d88\u606f\uff09\uff0c\u4ece\u670d\u52a1\u7aef\u53d1\u8d77\u4e00\u6b21\u201c\u56de\u67e5\u201d\uff1b"}),"\n",(0,i.jsx)(n.li,{children:"Producer\u6536\u5230\u56de\u67e5\u6d88\u606f\uff0c\u68c0\u67e5\u56de\u67e5\u6d88\u606f\u5bf9\u5e94\u7684\u672c\u5730\u4e8b\u52a1\u7684\u72b6\u6001\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u6839\u636e\u672c\u5730\u4e8b\u52a1\u72b6\u6001\uff0c\u91cd\u65b0Commit\u6216RollBack"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5176\u4e2d\uff0c\u8865\u507f\u9636\u6bb5\u7528\u4e8e\u89e3\u51b3\u6d88\u606fCommit\u6216Rollback\u53d1\u751f\u8d85\u65f6\u6216\u8005\u5931\u8d25\u7684\u60c5\u51b5\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u4e8b\u52a1\u6d88\u606f\u72b6\u6001\uff1a"}),"\n",(0,i.jsxs)(n.p,{children:["\u4e8b\u52a1\u6d88\u606f\u5171\u6709\u4e09\u79cd\u72b6\u6001\uff1a",(0,i.jsx)(n.code,{children:"\u63d0\u4ea4\u72b6\u6001"}),"\u3001",(0,i.jsx)(n.code,{children:"\u56de\u6eda\u72b6\u6001"}),"\u3001",(0,i.jsx)(n.code,{children:"\u4e2d\u95f4\u72b6\u6001"}),"\uff1a"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"TransactionStatus.CommitTransaction\uff1a\u63d0\u4ea4\u4e8b\u52a1\uff0c\u5b83\u5141\u8bb8\u6d88\u8d39\u8005\u6d88\u8d39\u6b64\u6d88\u606f\u3002"}),"\n",(0,i.jsx)(n.li,{children:"TransactionStatus.RollbackTransaction\uff1a\u56de\u6eda\u4e8b\u52a1\uff0c\u5b83\u4ee3\u8868\u8be5\u6d88\u606f\u5c06\u88ab\u5220\u9664\uff0c\u4e0d\u5141\u8bb8\u88ab\u6d88\u8d39\u3002"}),"\n",(0,i.jsx)(n.li,{children:"TransactionStatus.Unkonwn\uff1a\u4e2d\u95f4\u72b6\u6001\uff0c\u5b83\u4ee3\u8868\u9700\u8981\u68c0\u67e5\u6d88\u606f\u961f\u5217\u6765\u786e\u5b9a\u6d88\u606f\u72b6\u6001\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"rocketmq\u7684\u9ad8\u53ef\u7528\u673a\u5236",children:"RocketMQ\u7684\u9ad8\u53ef\u7528\u673a\u5236"}),"\n",(0,i.jsx)(n.p,{children:"\u200dRocketMQ\u662f\u5929\u751f\u652f\u6301\u5206\u5e03\u5f0f\u7684\uff0c\u53ef\u4ee5\u914d\u7f6e\u4e3b\u4ece\u4ee5\u53ca\u6c34\u5e73\u6269\u5c55\u3002"}),"\n",(0,i.jsx)(n.p,{children:"Master\u89d2\u8272\u7684Broker\u652f\u6301\u8bfb\u548c\u5199\uff0cSlave\u89d2\u8272\u7684Broker\u4ec5\u652f\u6301\u8bfb\uff0c\u4e5f\u5c31\u662f Producer\u53ea\u80fd\u548cMaster\u89d2\u8272\u7684Broker\u8fde\u63a5\u5199\u5165\u6d88\u606f\uff1bConsumer\u53ef\u4ee5\u8fde\u63a5 Master\u89d2\u8272\u7684Broker\uff0c\u4e5f\u53ef\u4ee5\u8fde\u63a5Slave\u89d2\u8272\u7684Broker\u6765\u8bfb\u53d6\u6d88\u606f\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u6d88\u606f\u6d88\u8d39\u7684\u9ad8\u53ef\u7528\u4e3b\u4ece",children:"\u6d88\u606f\u6d88\u8d39\u7684\u9ad8\u53ef\u7528\uff08\u4e3b\u4ece\uff09\uff1a"}),"\n",(0,i.jsx)(n.p,{children:"\u5728Consumer\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u5e76\u4e0d\u9700\u8981\u8bbe\u7f6e\u662f\u4eceMaster\u8bfb\u8fd8\u662f\u4eceSlave\u8bfb\uff0c\u5f53Master\u4e0d\u53ef\u7528\u6216\u8005\u7e41\u5fd9\u7684\u65f6\u5019\uff0cConsumer\u4f1a\u88ab\u81ea\u52a8\u5207\u6362\u5230\u4eceSlave\u8bfb\u3002\u6709\u4e86\u81ea\u52a8\u5207\u6362Consumer\u8fd9\u79cd\u673a\u5236\uff0c\u5f53\u4e00\u4e2aMaster\u89d2\u8272\u7684\u673a\u5668\u51fa\u73b0\u6545\u969c\u540e\uff0cConsumer\u4ecd\u7136\u53ef\u4ee5\u4eceSlave\u8bfb\u53d6\u6d88\u606f\uff0c\u4e0d\u5f71\u54cdConsumer\u7a0b\u5e8f\u3002"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\u57284.5\u7248\u672c\u4e4b\u524d\u5982\u679cMaster\u8282\u70b9\u6302\u4e86\uff0cSlave\u8282\u70b9\u662f\u4e0d\u80fd\u81ea\u52a8\u5207\u6362\u6210master\u8282\u70b9\u7684\u8fd9\u4e2a\u65f6\u5019\u9700\u8981\u624b\u52a8\u505c\u6b62Slave\u89d2\u8272\u7684Broker\uff0c\u66f4\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u7528\u65b0\u7684\u914d\u7f6e\u6587\u4ef6\u542f\u52a8Broker\u3002\u4f46\u662f\u57284.5\u4e4b\u540e\uff0cRocketMQ\u5f15\u5165\u4e86Dledger\u540c\u6b65\u673a\u5236\uff0c\u8fd9\u4e2a\u65f6\u5019\u5982\u679cMaster\u8282\u70b9\u6302\u4e86\uff0cDledger\u4f1a\u901a\u8fc7Raft\u534f\u8bae\u9009\u4e3e\u51fa\u65b0\u7684master\u8282\u70b9\uff0c\u4e0d\u9700\u8981\u624b\u52a8\u4fee\u6539\u914d\u7f6e\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u6d88\u606f\u53d1\u9001\u9ad8\u53ef\u7528\u914d\u7f6e\u591a\u4e2a\u4e3b\u8282\u70b9",children:"\u6d88\u606f\u53d1\u9001\u9ad8\u53ef\u7528\uff08\u914d\u7f6e\u591a\u4e2a\u4e3b\u8282\u70b9\uff09\uff1a"}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u521b\u5efaTopic\u7684\u65f6\u5019\uff0c\u628aTopic\u7684\u591a\u4e2aMessage Queue\u521b\u5efa\u5728\u591a\u4e2aBroker\u7ec4\u4e0a\uff08\u76f8\u540cBroker\u540d\u79f0\uff0c\u4e0d\u540c brokerId\u7684\u673a\u5668\u7ec4\u6210\u4e00\u4e2aBroker\u7ec4\uff09\uff0c\u8fd9\u6837\u5f53\u4e00\u4e2aBroker\u7ec4\u7684Master\u4e0d\u53ef\u7528\u540e\uff0c\u5176\u4ed6\u7ec4\u7684Master\u4ecd\u7136\u53ef\u7528\uff0cProducer\u4ecd\u7136\u53ef\u4ee5\u53d1\u9001\u6d88\u606f\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u4e3b\u4ece\u590d\u5236",children:"\u4e3b\u4ece\u590d\u5236\uff1a"}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u4e00\u4e2aBroker\u7ec4\u6709Master\u548cSlave\uff0c\u6d88\u606f\u9700\u8981\u4eceMaster\u590d\u5236\u5230Slave \u4e0a\uff0c\u6709\u540c\u6b65\u548c\u5f02\u6b65\u4e24\u79cd\u590d\u5236\u65b9\u5f0f\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u540c\u6b65\u590d\u5236\uff1a\u540c\u6b65\u590d\u5236\u65b9\u5f0f\u662f\u7b49Master\u548cSlave\u5747\u5199\u6210\u529f\u540e\u624d\u53cd\u9988\u7ed9\u5ba2\u6237\u7aef\u5199\u6210\u529f\u72b6\u6001\u3002\u5982\u679cMaster\u51fa\u6545\u969c\uff0c Slave\u4e0a\u6709\u5168\u90e8\u7684\u5907\u4efd\u6570\u636e\uff0c\u5bb9\u6613\u6062\u590d\u540c\u6b65\u590d\u5236\u4f1a\u589e\u5927\u6570\u636e\u5199\u5165\u5ef6\u8fdf\uff0c\u964d\u4f4e\u7cfb\u7edf\u541e\u5410\u91cf\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u5f02\u6b65\u590d\u5236\uff1a\u5f02\u6b65\u590d\u5236\u65b9\u5f0f\u662f\u53ea\u8981Master\u5199\u6210\u529f \u5373\u53ef\u53cd\u9988\u7ed9\u5ba2\u6237\u7aef\u5199\u6210\u529f\u72b6\u6001\u3002\u5728\u5f02\u6b65\u590d\u5236\u65b9\u5f0f\u4e0b\uff0c\u7cfb\u7edf\u62e5\u6709\u8f83\u4f4e\u7684\u5ef6\u8fdf\u548c\u8f83\u9ad8\u7684\u541e\u5410\u91cf\uff0c\u4f46\u662f\u5982\u679cMaster\u51fa\u4e86\u6545\u969c\uff0c\u6709\u4e9b\u6570\u636e\u56e0\u4e3a\u6ca1\u6709\u88ab\u5199 \u5165Slave\uff0c\u6709\u53ef\u80fd\u4f1a\u4e22\u5931"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u5e94\u8be5\u628aMaster\u548cSlave\u914d\u7f6e\u6210\u540c\u6b65\u5237\u76d8\u65b9\u5f0f\uff0c\u4e3b\u4ece\u4e4b\u95f4\u914d\u7f6e\u6210\u5f02\u6b65\u7684\u590d\u5236\u65b9\u5f0f\uff0c\u8fd9\u6837\u5373\u4f7f\u6709\u4e00\u53f0\u673a\u5668\u51fa\u6545\u969c\uff0c\u4ecd\u7136\u80fd\u4fdd\u8bc1\u6570\u636e\u4e0d\u4e22\uff0c\u662f\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u8d1f\u8f7d\u5747\u8861",children:"\u8d1f\u8f7d\u5747\u8861"}),"\n",(0,i.jsx)(n.h3,{id:"producer\u8d1f\u8f7d\u5747\u8861",children:"Producer\u8d1f\u8f7d\u5747\u8861\uff1a"}),"\n",(0,i.jsxs)(n.p,{children:["Producer\u7aef\uff0c\u6bcf\u4e2a\u5b9e\u4f8b\u5728\u53d1\u6d88\u606f\u7684\u65f6\u5019\uff0c\u9ed8\u8ba4\u4f1a",(0,i.jsx)(n.strong,{children:"\u8f6e\u8be2\u6240\u6709\u7684Message Queue\u53d1\u9001"}),"\uff0c\u4ee5\u8fbe\u5230\u8ba9\u6d88\u606f\u5e73\u5747\u843d\u5728\u4e0d\u540c\u7684Queue\u4e0a\u3002\u800c\u7531\u4e8eQueue\u53ef\u4ee5\u6563\u843d\u5728\u4e0d\u540c\u7684Broker\uff0c\u6240\u4ee5\u6d88\u606f\u5c31\u53d1\u9001\u5230\u4e0d\u540c\u7684Broker\u4e0b\uff0c\u5982\u4e0b\u56fe\uff1a"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:r(16839).Z+"",width:"640",height:"296"})}),"\n",(0,i.jsx)(n.h3,{id:"consumer\u8d1f\u8f7d\u5747\u8861",children:"Consumer\u8d1f\u8f7d\u5747\u8861\uff1a"}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679cConsumer\u5b9e\u4f8b\u7684\u6570\u91cf\u6bd4Message Queue\u7684\u603b\u6570\u91cf\u8fd8\u591a\u7684\u8bdd\uff0c",(0,i.jsx)(n.strong,{children:"\u591a\u51fa\u6765\u7684Consumer\u5b9e\u4f8b\u5c06\u65e0\u6cd5\u5206\u5230Queue"}),"\uff0c\u4e5f\u5c31\u65e0\u6cd5\u6d88\u8d39\u5230\u6d88\u606f\uff0c\u4e5f\u5c31\u65e0\u6cd5\u8d77\u5230\u5206\u644a\u8d1f\u8f7d\u7684\u4f5c\u7528\u4e86\u3002\u6240\u4ee5\u9700\u8981\u63a7\u5236\u8ba9Queue\u7684\u603b\u6570\u91cf\u5927\u4e8e\u7b49\u4e8eConsumer\u7684\u6570\u91cf\u3002"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u6d88\u8d39\u8005\u7684\u96c6\u7fa4\u6a21\u5f0f\uff1a\u542f\u52a8\u591a\u4e2a\u6d88\u8d39\u8005\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u6d88\u8d39\u8005\u7684\u8d1f\u8f7d\u5747\u8861\uff08\u5747\u644a\u961f\u5217\uff09"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u9ed8\u8ba4\u4f7f\u7528\u7684\u662f\u5747\u644a\u961f\u5217"}),"\uff1a\u4f1a\u6309\u7167Queue\u7684\u6570\u91cf\u548c\u5b9e\u4f8b\u7684\u6570\u91cf\u5e73\u5747\u5206\u914dQueue\u7ed9\u6bcf\u4e2a\u5b9e\u4f8b\uff0c\u8fd9\u6837\u6bcf\u4e2a\u6d88\u8d39\u8005\u53ef\u4ee5\u5747\u644a\u6d88\u8d39\u7684\u961f\u5217\uff0c\u5982\u4e0b\u56fe\u6240\u793a6\u4e2a\u961f\u5217\u548c\u4e09\u4e2a\u751f\u4ea7\u8005\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:["\u53e6\u5916\u4e00\u79cd\u5e73\u5747\u7684\u7b97\u6cd5",(0,i.jsx)(n.strong,{children:"\u73af\u72b6\u8f6e\u6d41\u5206Queue"}),"\u7684\u5f62\u5f0f\uff0c\u6bcf\u4e2a\u6d88\u8d39\u8005\uff0c\u5747\u644a\u4e0d\u540c\u4e3b\u8282\u70b9\u7684\u4e00\u4e2a\u6d88\u606f\u961f\u5217\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5bf9\u4e8e\u5e7f\u64ad\u6a21\u5f0f\u5e76\u4e0d\u662f\u8d1f\u8f7d\u5747\u8861\u7684\uff0c\u8981\u6c42\u4e00\u6761\u6d88\u606f\u9700\u8981\u6295\u9012\u5230\u4e00\u4e2a\u6d88\u8d39\u7ec4\u4e0b\u9762\u6240\u6709\u7684\u6d88\u8d39\u8005\u5b9e\u4f8b\uff0c\u6240\u4ee5\u4e5f\u5c31\u6ca1\u6709\u6d88\u606f\u88ab\u5206\u644a\u6d88\u8d39\u7684\u8bf4\u6cd5\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u6b7b\u4fe1\u961f\u5217",children:"\u6b7b\u4fe1\u961f\u5217"}),"\n",(0,i.jsxs)(n.p,{children:["\u5f53\u4e00\u6761\u6d88\u606f\u6d88\u8d39\u5931\u8d25\uff0cRocketMQ\u5c31\u4f1a\u81ea\u52a8\u8fdb\u884c\u6d88\u606f\u91cd\u8bd5\u3002\u800c\u5982\u679c\u6d88\u606f\u8d85\u8fc7\u6700\u5927\u91cd\u8bd5\u6b21\u6570\uff0cRocketMQ\u5c31\u4f1a\u8ba4\u4e3a\u8fd9\u4e2a\u6d88\u606f\u6709\u95ee\u9898\u3002\u4f46\u662f\u6b64\u65f6\uff0cRocketMQ\u4e0d\u4f1a\u7acb\u523b\u5c06\u8fd9\u4e2a\u6709\u95ee\u9898\u7684\u6d88\u606f\u4e22\u5f03\uff0c\u800c\u4f1a\u5c06\u5176\u53d1\u9001\u5230\u8fd9\u4e2a\u6d88\u8d39\u8005\u7ec4\u5bf9\u5e94\u7684\u4e00\u79cd\u7279\u6b8a\u961f\u5217\uff1a\u6b7b\u4fe1\u961f\u5217\u3002\u6b7b\u4fe1\u961f\u5217\u7684\u540d\u79f0\u662f ",(0,i.jsx)(n.code,{children:"%DLQ%+ConsumGroup"})," \u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u6b7b\u4fe1\u961f\u5217\u5177\u6709\u4ee5\u4e0b\u7279\u6027\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4e00\u4e2a\u6b7b\u4fe1\u961f\u5217\u5bf9\u5e94\u4e00\u4e2aGroup ID\uff0c \u800c\u4e0d\u662f\u5bf9\u5e94\u5355\u4e2a\u6d88\u8d39\u8005\u5b9e\u4f8b\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u5982\u679c\u4e00\u4e2aGroup ID\u672a\u4ea7\u751f\u6b7b\u4fe1\u6d88\u606f\uff0c\u6d88\u606f\u961f\u5217RocketMQ\u4e0d\u4f1a\u4e3a\u5176\u521b\u5efa\u76f8\u5e94\u7684\u6b7b\u4fe1\u961f\u5217\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u4e00\u4e2a\u6b7b\u4fe1\u961f\u5217\u5305\u542b\u4e86\u5bf9\u5e94Group ID\u4ea7\u751f\u7684\u6240\u6709\u6b7b\u4fe1\u6d88\u606f\uff0c\u4e0d\u8bba\u8be5\u6d88\u606f\u5c5e\u4e8e\u54ea\u4e2aTopic\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h1,{id:"kafka",children:"Kafka"}),"\n",(0,i.jsxs)(n.p,{children:["Kafka\u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u3001\u652f\u6301\u5206\u533a\u7684\u3001\u591a\u526f\u672c\u7684\uff0c",(0,i.jsx)(n.strong,{children:"\u57fa\u4e8eZooKeeper\u534f\u8c03"}),"\u7684\u5206\u5e03\u5f0f\u6d88\u606f\u7cfb\u7edf\u3002"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\u65b0\u7248Kafka\u5df2\u7ecf\u4e0d\u518d\u9700\u8981ZooKeeper\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5b83\u6700\u5927\u7684\u7279\u6027\u5c31\u662f\u53ef\u4ee5\u5b9e\u65f6\u7684\u5904\u7406\u5927\u91cf\u6570\u636e\u4ee5\u6ee1\u8db3\u5404\u79cd\u9700\u6c42\u573a\u666f\uff1a\u6bd4\u5982\u57fa\u4e8eHadoop\u7684\u6279\u5904\u7406\u7cfb\u7edf\u3001\u4f4e\u5ef6\u8fdf\u7684\u5b9e\u65f6\u7cfb\u7edf\u3001Storm/Spark\u6d41\u5f0f\u5904\u7406\u5f15\u64ce\uff0cWeb/Nginx\u65e5\u5fd7\u3001\u8bbf\u95ee\u65e5\u5fd7\uff0c\u6d88\u606f\u670d\u52a1\u7b49\u7b49\uff0c\u7528",(0,i.jsx)(n.strong,{children:"Scala\u8bed\u8a00\u7f16\u5199"}),"\u3002\u5c5e\u4e8eApache\u57fa\u91d1\u4f1a\u7684\u9876\u7ea7\u5f00\u6e90\u9879\u76ee\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u5148\u770b\u4e00\u4e0bKafka\u7684\u67b6\u6784\u56fe \uff1a"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:r(92480).Z+"",width:"1080",height:"589"})}),"\n",(0,i.jsx)(n.h2,{id:"kafka\u7684\u6838\u5fc3\u6982\u5ff5",children:"Kafka\u7684\u6838\u5fc3\u6982\u5ff5"}),"\n",(0,i.jsx)(n.p,{children:"\u5728Kafka\u4e2d\u6709\u51e0\u4e2a\u6838\u5fc3\u6982\u5ff5\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Broker\uff1a\u6d88\u606f\u4e2d\u95f4\u4ef6\u5904\u7406\u8282\u70b9\uff0c\u4e00\u4e2aKafka\u8282\u70b9\u5c31\u662f\u4e00\u4e2aBroker\uff0c\u4e00\u4e2a\u6216\u8005\u591a\u4e2aBroker\u53ef\u4ee5\u7ec4\u6210\u4e00\u4e2aKafka\u96c6\u7fa4"}),"\n",(0,i.jsx)(n.li,{children:"Topic\uff1aKafka\u6839\u636etopic\u5bf9\u6d88\u606f\u8fdb\u884c\u5f52\u7c7b\uff0c\u53d1\u5e03\u5230Kafka\u96c6\u7fa4\u7684\u6bcf\u6761\u6d88\u606f\u90fd\u9700\u8981\u6307\u5b9a\u4e00\u4e2atopic"}),"\n",(0,i.jsx)(n.li,{children:"Producer\uff1a\u6d88\u606f\u751f\u4ea7\u8005\uff0c\u5411Broker\u53d1\u9001\u6d88\u606f\u7684\u5ba2\u6237\u7aef"}),"\n",(0,i.jsx)(n.li,{children:"Consumer\uff1a\u6d88\u606f\u6d88\u8d39\u8005\uff0c\u4eceBroker\u8bfb\u53d6\u6d88\u606f\u7684\u5ba2\u6237\u7aef"}),"\n",(0,i.jsx)(n.li,{children:"ConsumerGroup\uff1a\u6bcf\u4e2aConsumer\u5c5e\u4e8e\u4e00\u4e2a\u7279\u5b9a\u7684ConsumerGroup\uff0c\u4e00\u6761\u6d88\u606f\u53ef\u4ee5\u88ab\u591a\u4e2a\u4e0d\u540c\u7684ConsumerGroup\u6d88\u8d39\uff0c\u4f46\u662f\u4e00\u4e2aConsumerGroup\u4e2d\u53ea\u80fd\u6709\u4e00\u4e2a- Consumer\u80fd\u591f\u6d88\u8d39\u8be5\u6d88\u606f"}),"\n",(0,i.jsx)(n.li,{children:"Partition\uff1a\u7269\u7406\u4e0a\u7684\u6982\u5ff5\uff0c\u4e00\u4e2atopic\u53ef\u4ee5\u5206\u4e3a\u591a\u4e2apartition\uff0c\u6bcf\u4e2apartition\u5185\u90e8\u6d88\u606f\u662f\u6709\u5e8f\u7684"}),"\n",(0,i.jsx)(n.li,{children:"Leader\uff1a\u6bcf\u4e2aPartition\u6709\u591a\u4e2a\u526f\u672c\uff0c\u5176\u4e2d\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u4f5c\u4e3aLeader\uff0cLeader\u662f\u8d1f\u8d23\u6570\u636e\u8bfb\u5199\u7684Partition\u3002"}),"\n",(0,i.jsx)(n.li,{children:"Follower\uff1aFollower\u8ddf\u968fLeader\uff0c\u6240\u6709\u5199\u8bf7\u6c42\u90fd\u901a\u8fc7Leader\u8def\u7531\uff0c\u6570\u636e\u53d8\u66f4\u4f1a\u5e7f\u64ad\u7ed9\u6240\u6709Follower\uff0cFollower\u4e0eLeader\u4fdd\u6301\u6570\u636e\u540c\u6b65\u3002\u5982\u679cLeader\u5931\u6548\uff0c\u5219\u4eceFollower\u4e2d\u9009\u4e3e\u51fa\u4e00\u4e2a\u65b0\u7684Leader\u3002\u5f53Follower\u4e0eLeader\u6302\u6389\u3001\u5361\u4f4f\u6216\u8005\u540c\u6b65\u592a\u6162\uff0cLeader\u4f1a\u628a\u8fd9\u4e2aFollower\u4ece ISR\u5217\u8868 \u4e2d\u5220\u9664\uff0c\u91cd\u65b0\u521b\u5efa\u4e00\u4e2aFollower\u3002"}),"\n",(0,i.jsx)(n.li,{children:"Offset\uff1a\u504f\u79fb\u91cf\u3002Kafka\u7684\u5b58\u50a8\u6587\u4ef6\u90fd\u662f\u6309\u7167offset.kafka\u6765\u547d\u540d\uff0c\u7528Offset\u505a\u540d\u5b57\u7684\u597d\u5904\u662f\u65b9\u4fbf\u67e5\u627e\u3002\u4f8b\u5982\u4f60\u60f3\u627e\u4f4d\u4e8e2049\u7684\u4f4d\u7f6e\uff0c\u53ea\u8981\u627e\u52302048.kafka\u7684\u6587\u4ef6\u5373\u53ef\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u53ef\u4ee5\u8fd9\u4e48\u6765\u7406\u89e3Topic\uff0cPartition\u548cBroker\uff1a"}),"\n",(0,i.jsxs)(n.p,{children:["\u4e00\u4e2aTopic\uff0c\u4ee3\u8868\u903b\u8f91\u4e0a\u7684\u4e00\u4e2a\u4e1a\u52a1\u6570\u636e\u96c6\uff0c\u6bd4\u5982\u8ba2\u5355\u76f8\u5173\u64cd\u4f5c\u6d88\u606f\u653e\u5165\u8ba2\u5355Topic\uff0c\u7528\u6237\u76f8\u5173\u64cd\u4f5c\u6d88\u606f\u653e\u5165\u7528\u6237Topic\uff0c\u5bf9\u4e8e\u5927\u578b\u7f51\u7ad9\u6765\u8bf4\uff0c\u540e\u7aef\u6570\u636e\u90fd\u662f\u6d77\u91cf\u7684\uff0c\u8ba2\u5355\u6d88\u606f\u5f88\u53ef\u80fd\u662f\u975e\u5e38\u5de8\u91cf\u7684\uff0c\u6bd4\u5982\u6709\u51e0\u767e\u4e2aG\u751a\u81f3\u8fbe\u5230TB\u7ea7\u522b\uff0c\u5982\u679c\u628a\u8fd9\u4e48\u591a\u6570\u636e\u90fd\u653e\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u53ef\u5b9a\u4f1a\u6709\u5bb9\u91cf\u9650\u5236\u95ee\u9898\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u5728Topic\u5185\u90e8\u5212\u5206\u591a\u4e2aPartition\u6765\u5206\u7247\u5b58\u50a8\u6570\u636e\uff0c\u4e0d\u540c\u7684Partition\u53ef\u4ee5\u4f4d\u4e8e\u4e0d\u540c\u7684\u673a\u5668\u4e0a\uff0c",(0,i.jsx)(n.strong,{children:"\u76f8\u5f53\u4e8e\u5206\u5e03\u5f0f\u5b58\u50a8"}),"\u3002\u6bcf\u53f0\u673a\u5668\u4e0a\u90fd\u8fd0\u884c\u4e00\u4e2aKafka\u7684\u8fdb\u7a0bBroker\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"kafka\u6838\u5fc3\u603b\u63a7\u5236\u5668controller",children:"Kafka\u6838\u5fc3\u603b\u63a7\u5236\u5668Controller"}),"\n",(0,i.jsx)(n.p,{children:"\u5728Kafka\u96c6\u7fa4\u4e2d\u4f1a\u6709\u4e00\u4e2a\u6216\u8005\u591a\u4e2aBroker\uff0c\u5176\u4e2d\u6709\u4e00\u4e2aBroker\u4f1a\u88ab\u9009\u4e3e\u4e3a\u63a7\u5236\u5668\uff08Kafka Controller\uff09\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a Broker-Leader \uff0c\u5b83\u8d1f\u8d23\u7ba1\u7406\u6574\u4e2a \u96c6\u7fa4\u4e2d\u6240\u6709\u5206\u533a\u548c\u526f\u672c\u7684\u72b6\u6001\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Partition-Leader\n"})}),"\n",(0,i.jsx)(n.h3,{id:"controller\u9009\u4e3e\u673a\u5236",children:"Controller\u9009\u4e3e\u673a\u5236"}),"\n",(0,i.jsx)(n.p,{children:"\u5728Kafka\u96c6\u7fa4\u542f\u52a8\u7684\u65f6\u5019\uff0c\u9009\u4e3e\u7684\u8fc7\u7a0b\u662f\u96c6\u7fa4\u4e2d\u6bcf\u4e2aBroker\u90fd\u4f1a\u5c1d\u8bd5\u5728ZooKeeper\u4e0a\u521b\u5efa\u4e00\u4e2a /controller\u4e34\u65f6\u8282\u70b9\uff0cZooKeeper\u4f1a\u4fdd\u8bc1\u6709\u4e14\u4ec5\u6709\u4e00\u4e2aBroker\u80fd\u521b\u5efa\u6210\u529f\uff0c\u8fd9\u4e2aBroker\u5c31\u4f1a\u6210\u4e3a\u96c6\u7fa4\u7684\u603b\u63a7\u5668Controller\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u5f53\u8fd9\u4e2aController\u89d2\u8272\u7684Broker\u5b95\u673a\u4e86\uff0c\u6b64\u65f6ZooKeeper\u4e34\u65f6\u8282\u70b9\u4f1a\u6d88\u5931\uff0c\u96c6\u7fa4\u91cc\u5176\u4ed6Broker\u4f1a\u4e00\u76f4\u76d1\u542c\u8fd9\u4e2a\u4e34\u65f6\u8282 \u70b9\uff0c\u53d1\u73b0\u4e34\u65f6\u8282\u70b9\u6d88\u5931\u4e86\uff0c\u5c31\u7ade\u4e89\u518d\u6b21\u521b\u5efa\u4e34\u65f6\u8282\u70b9\uff0c\u5c31\u662f\u6211\u4eec\u4e0a\u9762\u8bf4\u7684\u9009\u4e3e\u673a\u5236\uff0cZooKeeper\u53c8\u4f1a\u4fdd\u8bc1\u6709\u4e00\u4e2aBroker\u6210\u4e3a\u65b0\u7684Controller\u3002\u5177\u5907\u63a7\u5236\u5668\u8eab\u4efd\u7684Broker\u9700\u8981\u6bd4\u5176\u4ed6\u666e\u901a\u7684Broker\u591a\u4e00\u4efd\u804c\u8d23\uff0c\u5177\u4f53\u7ec6\u8282\u5982\u4e0b\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u76d1\u542cBroker\u76f8\u5173\u7684\u53d8\u5316"}),"\u3002\u4e3aZooKeeper\u4e2d\u7684/brokers/ids/\u8282\u70b9\u6dfb\u52a0BrokerChangeListener\uff0c\u7528\u6765\u5904\u7406Broker\u589e\u51cf\u7684\u53d8\u5316\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u76d1\u542cTopic\u76f8\u5173\u7684\u53d8\u5316"}),"\u3002\u4e3aZooKeeper\u4e2d\u7684/brokers/topics\u8282\u70b9\u6dfb\u52a0TopicChangeListener\uff0c\u7528\u6765\u5904\u7406Topic\u589e\u51cf\u7684\u53d8\u5316\uff1b\u4e3aZooKeeper\u4e2d\u7684/admin/delete_topics\u8282\u70b9\u6dfb\u52a0TopicDeletionListener\uff0c\u7528\u6765\u5904\u7406\u5220\u9664Topic\u7684\u52a8\u4f5c\u3002"]}),"\n",(0,i.jsx)(n.li,{children:"\u4eceZooKeeper\u4e2d\u8bfb\u53d6\u83b7\u53d6\u5f53\u524d\u6240\u6709\u4e0eTopic\u3001Partition\u4ee5\u53caBroker\u6709\u5173\u7684\u4fe1\u606f\u5e76\u8fdb\u884c\u76f8\u5e94\u7684\u7ba1\u7406 \u3002\u5bf9\u4e8e\u6240\u6709Topic\u6240\u5bf9\u5e94\u7684ZooKeeper\u4e2d\u7684/brokers/topics/\u8282\u70b9\u6dfb\u52a0PartitionModificationsListener\uff0c\u7528\u6765\u76d1\u542cTopic\u4e2d\u7684\u5206\u533a\u5206\u914d\u53d8\u5316\u3002"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"\u66f4\u65b0\u96c6\u7fa4\u7684\u5143\u6570\u636e\u4fe1\u606f\uff0c\u540c\u6b65\u5230\u5176\u4ed6\u666e\u901a\u7684Broker\u8282\u70b9\u4e2d"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"partition\u526f\u672c\u9009\u4e3eleader\u673a\u5236",children:"Partition\u526f\u672c\u9009\u4e3eLeader\u673a\u5236"}),"\n",(0,i.jsxs)(n.p,{children:["Controller\u611f\u77e5\u5230\u5206\u533aLeader\u6240\u5728\u7684Broker\u6302\u4e86\uff0cController\u4f1a\u4ece",(0,i.jsx)(n.strong,{children:"ISR\u5217\u8868"}),"\uff08\u53c2\u6570",(0,i.jsx)(n.code,{children:"unclean.leader.election.enable=false"}),"\u7684\u524d\u63d0\u4e0b\uff09\u91cc\u6311\u7b2c\u4e00\u4e2aBroker\u4f5c\u4e3aLeader\uff08\u7b2c\u4e00\u4e2aBroker\u6700\u5148\u653e\u8fdbISR\u5217\u8868\uff0c\u53ef\u80fd\u662f\u540c\u6b65\u6570\u636e\u6700\u591a\u7684\u526f\u672c\uff09\uff0c\u5982\u679c\u53c2\u6570",(0,i.jsx)(n.code,{children:"unclean.leader.election.enable"}),"\u4e3atrue\uff0c\u4ee3\u8868\u5728ISR\u5217\u8868\u91cc\u6240\u6709\u526f\u672c\u90fd\u6302\u4e86\u7684\u65f6\u5019\u53ef\u4ee5\u5728ISR\u5217\u8868\u4ee5\u5916\u7684\u526f\u672c\u4e2d\u9009Leader\uff0c\u8fd9\u79cd\u8bbe\u7f6e\uff0c\u53ef\u4ee5\u63d0\u9ad8\u53ef\u7528\u6027\uff0c\u4f46\u662f\u9009\u51fa\u7684\u65b0Leader\u6709\u53ef\u80fd\u6570\u636e\u5c11\u5f88\u591a\u3002\u526f\u672c\u8fdb\u5165ISR\u5217\u8868\u6709\u4e24\u4e2a\u6761\u4ef6\uff1a"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u526f\u672c\u8282\u70b9\u4e0d\u80fd\u4ea7\u751f\u5206\u533a\uff0c\u5fc5\u987b\u80fd\u4e0eZooKeeper\u4fdd\u6301\u4f1a\u8bdd\u4ee5\u53ca\u8ddfLeader\u526f\u672c\u7f51\u7edc\u8fde\u901a"}),"\n",(0,i.jsx)(n.li,{children:"\u526f\u672c\u80fd\u590d\u5236Leader\u4e0a\u7684\u6240\u6709\u5199\u64cd\u4f5c\uff0c\u5e76\u4e14\u4e0d\u80fd\u843d\u540e\u592a\u591a\u3002\uff08\u4e0eLeader\u526f\u672c\u540c\u6b65\u6ede\u540e\u7684\u526f\u672c\uff0c\u662f\u7531replica.lag.time.max.ms\u914d\u7f6e\u51b3\u5b9a\u7684\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u65f6\u95f4\u90fd\u6ca1\u6709\u8ddfLeader\u540c\u6b65\u8fc7\u7684\u4e00\u6b21\u7684\u526f\u672c\u4f1a\u88ab\u79fb\u51faISR\u5217\u8868\uff09"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u6d88\u8d39\u8005\u6d88\u8d39\u6d88\u606f\u7684offset\u8bb0\u5f55\u673a\u5236",children:"\u6d88\u8d39\u8005\u6d88\u8d39\u6d88\u606f\u7684Offset\u8bb0\u5f55\u673a\u5236"}),"\n",(0,i.jsx)(n.p,{children:"\u6bcf\u4e2aConsumer\u4f1a\u5b9a\u671f\u5c06\u81ea\u5df1\u6d88\u8d39\u5206\u533a\u7684Offset\u63d0\u4ea4\u7ed9Kafka\u5185\u90e8Topic\uff1aconsumer_offsets\uff0c\u63d0\u4ea4\u8fc7\u53bb\u7684\u65f6\u5019\uff0ckey\u662fconsumerGroupId+topic+\u5206\u533a\u53f7\uff0cvalue\u5c31\u662f\u5f53\u524dOffset\u7684\u503c\uff0cKafka\u4f1a\u5b9a\u671f\u6e05\u7406Topic\u91cc\u7684\u6d88\u606f\uff0c\u6700\u540e\u5c31\u4fdd\u7559\u6700\u65b0\u7684\u90a3\u6761\u6570\u636e\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u56e0\u4e3a__consumer_offsets\u53ef\u80fd\u4f1a\u63a5\u6536\u9ad8\u5e76\u53d1\u7684\u8bf7\u6c42\uff0cKafka\u9ed8\u8ba4\u7ed9\u5176\u5206\u914d50\u4e2a\u5206\u533a\uff08\u53ef\u4ee5\u901a\u8fc7offsets.topic.num.partitions\u8bbe\u7f6e\uff09\uff0c\u8fd9\u6837\u53ef\u4ee5\u901a\u8fc7\u52a0\u673a\u5668\u7684\u65b9\u5f0f\u6297\u5927\u5e76\u53d1\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u6d88\u8d39\u8005rebalance\u673a\u5236",children:"\u6d88\u8d39\u8005Rebalance\u673a\u5236"}),"\n",(0,i.jsx)(n.p,{children:"Rebalance\u5c31\u662f\u8bf4 \u5982\u679c\u6d88\u8d39\u7ec4\u91cc\u7684\u6d88\u8d39\u8005\u6570\u91cf\u6709\u53d8\u5316\u6216\u6d88\u8d39\u7684\u5206\u533a\u6570\u6709\u53d8\u5316\uff0cKafka\u4f1a\u91cd\u65b0\u5206\u914d\u6d88\u8d39\u8005\u4e0e\u6d88\u8d39\u5206\u533a\u7684\u5173\u7cfb \u3002\u6bd4\u5982consumer group\u4e2d\u67d0\u4e2a\u6d88\u8d39\u8005\u6302\u4e86\uff0c\u6b64\u65f6\u4f1a\u81ea\u52a8\u628a\u5206\u914d\u7ed9\u4ed6\u7684\u5206\u533a\u4ea4\u7ed9\u5176\u4ed6\u7684\u6d88\u8d39\u8005\uff0c\u5982\u679c\u4ed6\u53c8\u91cd\u542f\u4e86\uff0c\u90a3\u4e48\u53c8\u4f1a\u628a\u4e00\u4e9b\u5206\u533a\u91cd\u65b0\u4ea4\u8fd8\u7ed9\u4ed6\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u6ce8\u610f\uff1aRebalance\u53ea\u9488\u5bf9subscribe\u8fd9\u79cd\u4e0d\u6307\u5b9a\u5206\u533a\u6d88\u8d39\u7684\u60c5\u51b5\uff0c\u5982\u679c\u901a\u8fc7assign\u8fd9\u79cd\u6d88\u8d39\u65b9\u5f0f\u6307\u5b9a\u4e86\u5206\u533a\uff0cKafka\u4e0d\u4f1a\u8fdb\u884cRebalance\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u4e0b\u60c5\u51b5\u53ef\u80fd\u4f1a\u89e6\u53d1\u6d88\u8d39\u8005Rebalance\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u6d88\u8d39\u7ec4\u91cc\u7684Consumer\u589e\u52a0\u6216\u51cf\u5c11\u4e86"}),"\n",(0,i.jsx)(n.li,{children:"\u52a8\u6001\u7ed9Topic\u589e\u52a0\u4e86\u5206\u533a"}),"\n",(0,i.jsx)(n.li,{children:"\u6d88\u8d39\u7ec4\u8ba2\u9605\u4e86\u66f4\u591a\u7684Topic"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Rebalance\u8fc7\u7a0b\u4e2d\uff0c\u6d88\u8d39\u8005\u65e0\u6cd5\u4eceKafka\u6d88\u8d39\u6d88\u606f\uff0c\u8fd9\u5bf9Kafka\u7684TPS\u4f1a\u6709\u5f71\u54cd\uff0c\u5982\u679cKafka\u96c6\u7fa4\u5185\u8282\u70b9\u8f83\u591a\uff0c\u6bd4\u5982\u6570\u767e \u4e2a\uff0c\u90a3\u91cd\u5e73\u8861\u53ef\u80fd\u4f1a\u8017\u65f6\u6781\u591a\uff0c\u6240\u4ee5\u5e94\u5c3d\u91cf\u907f\u514d\u5728\u7cfb\u7edf\u9ad8\u5cf0\u671f\u7684\u91cd\u5e73\u8861\u53d1\u751f\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"rebalance\u8fc7\u7a0b\u5982\u4e0b",children:"Rebalance\u8fc7\u7a0b\u5982\u4e0b"}),"\n",(0,i.jsx)(n.p,{children:"\u5f53\u6709\u6d88\u8d39\u8005\u52a0\u5165\u6d88\u8d39\u7ec4\u65f6\uff0c\u6d88\u8d39\u8005\u3001\u6d88\u8d39\u7ec4\u53ca\u7ec4\u534f\u8c03\u5668\u4e4b\u95f4\u4f1a\u7ecf\u5386\u4ee5\u4e0b\u51e0\u4e2a\u9636\u6bb5\uff1a"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:r(75625).Z+"",width:"1080",height:"482"})}),"\n",(0,i.jsx)(n.h4,{id:"\u7b2c\u4e00\u9636\u6bb5\u9009\u62e9\u7ec4\u534f\u8c03\u5668",children:"\u7b2c\u4e00\u9636\u6bb5\uff1a\u9009\u62e9\u7ec4\u534f\u8c03\u5668"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u7ec4\u534f\u8c03\u5668",(0,i.jsx)(n.code,{children:"GroupCoordinator"}),"\uff1a\u6bcf\u4e2a",(0,i.jsx)(n.code,{children:"consumer group"}),"\u90fd\u4f1a\u9009\u62e9\u4e00\u4e2aBroker\u4f5c\u4e3a\u81ea\u5df1\u7684\u7ec4\u534f\u8c03\u5668",(0,i.jsx)(n.code,{children:"coordinator"}),"\uff0c\u8d1f\u8d23\u76d1\u63a7\u8fd9\u4e2a\u6d88\u8d39\u7ec4\u91cc\u7684\u6240\u6709\u6d88\u8d39\u8005\u7684\u5fc3\u8df3\uff0c\u4ee5\u53ca\u5224\u65ad\u662f\u5426\u5b95\u673a\uff0c\u7136\u540e\u5f00\u542f\u6d88\u8d39\u8005Rebalance\u3002",(0,i.jsx)(n.code,{children:"consumer group"}),"\u4e2d\u7684\u6bcf\u4e2a",(0,i.jsx)(n.code,{children:"consumer"}),"\u542f\u52a8\u65f6\u4f1a\u5411Kafka\u96c6\u7fa4\u4e2d\u7684\u67d0\u4e2a\u8282\u70b9\u53d1\u9001",(0,i.jsx)(n.code,{children:"FindCoordinatorRequest"}),"\u8bf7\u6c42\u6765\u67e5\u627e\u5bf9\u5e94\u7684\u7ec4\u534f\u8c03\u5668",(0,i.jsx)(n.code,{children:"GroupCoordinator"}),"\uff0c\u5e76\u8ddf\u5176\u5efa\u7acb\u7f51\u7edc\u8fde\u63a5\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:["\u7ec4\u534f\u8c03\u5668\u9009\u62e9\u65b9\u5f0f\uff1a\u901a\u8fc7\u5982\u4e0b\u516c\u5f0f\u53ef\u4ee5\u9009\u51faconsumer\u6d88\u8d39\u7684Offset\u8981\u63d0\u4ea4\u5230",(0,i.jsx)(n.code,{children:"__consumer_offsets"}),"\u7684\u54ea\u4e2a\u5206\u533a\uff0c\u8fd9\u4e2a\u5206\u533aLeader\u5bf9\u5e94\u7684Broker\u5c31\u662f\u8fd9\u4e2aconsumer group\u7684coordinator\u516c\u5f0f\uff1a"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"hash(consumer group id) % \u5bf9\u5e94\u4e3b\u9898\u7684\u5206\u533a\u6570\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u7b2c\u4e8c\u9636\u6bb5\u52a0\u5165\u6d88\u8d39\u7ec4join-group",children:"\u7b2c\u4e8c\u9636\u6bb5\uff1a\u52a0\u5165\u6d88\u8d39\u7ec4JOIN GROUP"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u6210\u529f\u627e\u5230\u6d88\u8d39\u7ec4\u6240\u5bf9\u5e94\u7684",(0,i.jsx)(n.code,{children:"GroupCoordinator"}),"\u4e4b\u540e\u5c31\u8fdb\u5165\u52a0\u5165\u6d88\u8d39\u7ec4\u7684\u9636\u6bb5\uff0c\u5728\u6b64\u9636\u6bb5\u7684\u6d88\u8d39\u8005\u4f1a\u5411",(0,i.jsx)(n.code,{children:"GroupCoordinator"}),"\u53d1\u9001",(0,i.jsx)(n.code,{children:"JoinGroupRequest"}),"\u8bf7\u6c42\uff0c\u5e76\u5904\u7406\u54cd\u5e94\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u7136\u540e",(0,i.jsx)(n.code,{children:"GroupCoordinator"}),"\u4ece\u4e00\u4e2a",(0,i.jsx)(n.code,{children:"consumer group"}),"\u4e2d\u9009\u62e9\u7b2c\u4e00\u4e2a\u52a0\u5165group\u7684consumer\u4f5c\u4e3aLeader\uff08\u6d88\u8d39\u7ec4\u534f\u8c03\u5668\uff09\uff0c\u628a",(0,i.jsx)(n.code,{children:"consumer group"}),"\u60c5\u51b5\u53d1\u9001\u7ed9\u8fd9\u4e2aLeader\uff0c\u63a5\u7740\u8fd9\u4e2aLeader\u4f1a\u8d1f\u8d23\u5236\u5b9a\u5206\u533a\u65b9\u6848\u3002"]}),"\n",(0,i.jsx)(n.h4,{id:"\u7b2c\u4e09\u9636\u6bb5sync-group",children:"\u7b2c\u4e09\u9636\u6bb5\uff08SYNC GROUP\uff09"}),"\n",(0,i.jsxs)(n.p,{children:["consumer leader\u901a\u8fc7\u7ed9",(0,i.jsx)(n.code,{children:"GroupCoordinator"}),"\u53d1\u9001",(0,i.jsx)(n.code,{children:"SyncGroupRequest"}),"\uff0c\u63a5\u7740",(0,i.jsx)(n.code,{children:"GroupCoordinator"}),"\u5c31\u628a\u5206\u533a\u65b9\u6848\u4e0b\u53d1\u7ed9\u5404\u4e2aconsumer\uff0c\u4ed6\u4eec\u4f1a\u6839\u636e\u6307\u5b9a\u5206\u533a\u7684Leader Broker\u8fdb\u884c\u7f51\u7edc\u8fde\u63a5\u4ee5\u53ca\u6d88\u606f\u6d88\u8d39\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"\u6d88\u8d39\u8005rebalance\u5206\u533a\u5206\u914d\u7b56\u7565",children:"\u6d88\u8d39\u8005Rebalance\u5206\u533a\u5206\u914d\u7b56\u7565"}),"\n",(0,i.jsxs)(n.p,{children:["\u4e3b\u8981\u6709\u4e09\u79cdRebalance\u7684\u7b56\u7565\uff1a",(0,i.jsx)(n.code,{children:"range"})," \u3001 ",(0,i.jsx)(n.code,{children:"round-robin"})," \u3001 ",(0,i.jsx)(n.code,{children:"sticky"})," \u3002\u9ed8\u8ba4\u60c5\u51b5\u4e3a",(0,i.jsx)(n.code,{children:"range"}),"\u5206\u914d\u7b56\u7565\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u5047\u8bbe\u4e00\u4e2a\u4e3b\u9898\u670910\u4e2a\u5206\u533a\uff080-9\uff09\uff0c\u73b0\u5728\u6709\u4e09\u4e2aconsumer\u6d88\u8d39\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["range\u7b56\u7565\uff1a\u6309\u7167\u5206\u533a\u5e8f\u53f7\u6392\u5e8f\u5206\u914d \uff0c\u5047\u8bbe",(0,i.jsx)(n.code,{children:"n\uff1d\u5206\u533a\u6570\uff0f\u6d88\u8d39\u8005\u6570\u91cf = 3"}),"\uff0c ",(0,i.jsx)(n.code,{children:"m\uff1d\u5206\u533a\u6570%\u6d88\u8d39\u8005\u6570\u91cf = 1"}),"\uff0c\u90a3\u4e48\u524d m \u4e2a\u6d88 \u8d39\u8005\u6bcf\u4e2a\u5206\u914d n+1 \u4e2a\u5206\u533a\uff0c\u540e\u9762\u7684\uff08\u6d88\u8d39\u8005\u6570\u91cf\uff0dm \uff09\u4e2a\u6d88\u8d39\u8005\u6bcf\u4e2a\u5206\u914d n \u4e2a\u5206\u533a\u3002\u6bd4\u5982\u5206\u533a0~ 3\u7ed9\u4e00\u4e2aconsumer\uff0c\u5206\u533a4~ 6\u7ed9\u4e00\u4e2aconsumer\uff0c\u5206\u533a7~9\u7ed9\u4e00\u4e2aconsumer\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"round-robin\u7b56\u7565\uff1a\u8f6e\u8be2\u5206\u914d \uff0c\u6bd4\u5982\u5206\u533a0\u30013\u30016\u30019\u7ed9\u4e00\u4e2aconsumer\uff0c\u5206\u533a1\u30014\u30017\u7ed9\u4e00\u4e2aconsumer\uff0c\u5206\u533a2\u30015\u3001 8\u7ed9\u4e00\u4e2aconsumer"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"sticky\u7b56\u7565\uff1a\u521d\u59cb\u65f6\u5206\u914d\u7b56\u7565\u4e0eround-robin\u7c7b\u4f3c\uff0c\u4f46\u662f\u5728rebalance\u7684\u65f6\u5019\uff0c\u9700\u8981\u4fdd\u8bc1\u5982\u4e0b\u4e24\u4e2a\u539f\u5219\uff1a"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5206\u533a\u7684\u5206\u914d\u8981\u5c3d\u53ef\u80fd\u5747\u5300 \u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5206\u533a\u7684\u5206\u914d\u5c3d\u53ef\u80fd\u4e0e\u4e0a\u6b21\u5206\u914d\u7684\u4fdd\u6301\u76f8\u540c\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5f53\u4e24\u8005\u53d1\u751f\u51b2\u7a81\u65f6\uff0c\u7b2c\u4e00\u4e2a\u76ee\u6807\u4f18\u5148\u4e8e\u7b2c\u4e8c\u4e2a\u76ee\u6807 \u3002\u8fd9\u6837\u53ef\u4ee5\u6700\u5927\u7a0b\u5ea6\u7ef4\u6301\u539f\u6765\u7684\u5206\u533a\u5206\u914d\u7684\u7b56\u7565\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u6bd4\u5982\u5bf9\u4e8e\u7b2c\u4e00\u79cdrange\u60c5\u51b5\u7684\u5206\u914d\uff0c\u5982\u679c\u7b2c\u4e09\u4e2aconsumer\u6302\u4e86\uff0c\u90a3\u4e48\u91cd\u65b0\u7528sticky\u7b56\u7565\u5206\u914d\u7684\u7ed3\u679c\u5982\u4e0b\uff1aconsumer1\u9664\u4e86\u539f\u6709\u76840~ 3\uff0c\u4f1a\u518d\u5206\u914d\u4e00\u4e2a7 consumer2\u9664\u4e86\u539f\u6709\u76844~ 6\uff0c\u4f1a\u518d\u5206\u914d8\u548c9\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"producer\u53d1\u5e03\u6d88\u606f\u673a\u5236\u5256\u6790",children:"Producer\u53d1\u5e03\u6d88\u606f\u673a\u5236\u5256\u6790"}),"\n",(0,i.jsx)(n.h3,{id:"1\u5199\u5165\u65b9\u5f0f",children:"1\u3001\u5199\u5165\u65b9\u5f0f"}),"\n",(0,i.jsxs)(n.p,{children:["producer\u91c7\u7528push\u6a21\u5f0f\u5c06\u6d88\u606f\u53d1\u5e03\u5230broker\uff0c\u6bcf\u6761\u6d88\u606f\u90fd\u88abappend\u5230patition\u4e2d\uff0c\u5c5e\u4e8e\u987a\u5e8f\u5199\u78c1\u76d8\uff08",(0,i.jsx)(n.strong,{children:"\u987a\u5e8f\u5199\u78c1\u76d8 \u6bd4 \u968f\u673a\u5199 \u6548\u7387\u8981\u9ad8\uff0c\u4fdd\u969c kafka \u541e\u5410\u7387"}),"\uff09\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"2\u6d88\u606f\u8def\u7531",children:"2\u3001\u6d88\u606f\u8def\u7531"}),"\n",(0,i.jsx)(n.p,{children:"producer\u53d1\u9001\u6d88\u606f\u5230broker\u65f6\uff0c\u4f1a\u6839\u636e\u5206\u533a\u7b97\u6cd5\u9009\u62e9\u5c06\u5176\u5b58\u50a8\u5230\u54ea\u4e00\u4e2apartition\u3002\u5176\u8def\u7531\u673a\u5236\u4e3a\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"hash(key)%\u5206\u533a\u6570\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3\u5199\u5165\u6d41\u7a0b",children:"3\u3001\u5199\u5165\u6d41\u7a0b"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:r(17810).Z+"",width:"1080",height:"889"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["producer\u5148\u4eceZooKeeper\u7684 ",(0,i.jsx)(n.code,{children:"/brokers/\u2026/state"})," \u8282\u70b9\u627e\u5230\u8be5partition\u7684leader"]}),"\n",(0,i.jsx)(n.li,{children:"producer\u5c06\u6d88\u606f\u53d1\u9001\u7ed9\u8be5leader"}),"\n",(0,i.jsx)(n.li,{children:"leader\u5c06\u6d88\u606f\u5199\u5165\u672c\u5730log"}),"\n",(0,i.jsx)(n.li,{children:"followers\u4eceleader pull\u6d88\u606f\uff0c\u5199\u5165\u672c\u5730log\u540e\u5411leader\u53d1\u9001ACK"}),"\n",(0,i.jsx)(n.li,{children:"leader\u6536\u5230\u6240\u6709ISR\u4e2d\u7684replica\u7684ACK\u540e\uff0c\u589e\u52a0HW\uff08high watermark\uff0c\u6700\u540ecommit\u7684offset\uff09\u5e76\u5411producer\u53d1\u9001ACK"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"hw\u4e0eleo",children:"HW\u4e0eLEO"}),"\n",(0,i.jsxs)(n.p,{children:["HW\u4fd7\u79f0\u9ad8\u6c34\u4f4d \uff0c",(0,i.jsx)(n.code,{children:"HighWatermark"}),"\u7684\u7f29\u5199\uff0c\u53d6\u4e00\u4e2apartition\u5bf9\u5e94\u7684ISR\u4e2d\u6700\u5c0f\u7684",(0,i.jsx)(n.code,{children:"LEO\uff08log-end-offset\uff09"}),"\u4f5c\u4e3aHW\uff0c consumer\u6700\u591a\u53ea\u80fd\u6d88\u8d39\u5230HW\u6240\u5728\u7684\u4f4d\u7f6e\u3002\u53e6\u5916\u6bcf\u4e2areplica\u90fd\u6709HW\uff0cleader\u548cfollower\u5404\u81ea\u8d1f\u8d23\u66f4\u65b0\u81ea\u5df1\u7684HW\u7684\u72b6\u6001\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u5bf9\u4e8eleader\u65b0\u5199\u5165\u7684\u6d88\u606f\uff0cconsumer\u4e0d\u80fd\u7acb\u523b\u6d88\u8d39\uff0cleader\u4f1a\u7b49\u5f85\u8be5\u6d88\u606f\u88ab\u6240\u6709ISR\u4e2d\u7684replicas\u540c\u6b65\u540e\u66f4\u65b0HW\uff0c\u6b64\u65f6\u6d88\u606f\u624d\u80fd\u88abconsumer\u6d88\u8d39\u3002\u8fd9\u6837\u5c31\u4fdd\u8bc1\u4e86\u5982\u679cleader\u6240\u5728\u7684broker\u5931\u6548\uff0c\u8be5\u6d88\u606f\u4ecd\u7136\u53ef\u4ee5\u4ece\u65b0\u9009\u4e3e\u7684leader\u4e2d\u83b7\u53d6\u3002\u5bf9\u4e8e\u6765\u81ea\u5185\u90e8broker\u7684\u8bfb\u53d6\u8bf7\u6c42\uff0c\u6ca1\u6709HW\u7684\u9650\u5236\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u65e5\u5fd7\u5206\u6bb5\u5b58\u50a8",children:"\u65e5\u5fd7\u5206\u6bb5\u5b58\u50a8"}),"\n",(0,i.jsxs)(n.p,{children:["Kafka\u4e00\u4e2a\u5206\u533a\u7684\u6d88\u606f\u6570\u636e\u5bf9\u5e94\u5b58\u50a8\u5728\u4e00\u4e2a\u6587\u4ef6\u5939\u4e0b\uff0c\u4ee5",(0,i.jsx)(n.code,{children:"topic\u540d\u79f0+\u5206\u533a\u53f7"}),"\u547d\u540d\uff0c\u6d88\u606f\u5728\u5206\u533a\u5185\u662f\u5206\u6bb5\u5b58\u50a8\u7684\uff0c \u6bcf\u4e2a\u6bb5\u7684\u6d88\u606f\u90fd\u5b58\u50a8\u5728\u4e0d\u4e00\u6837\u7684log\u6587\u4ef6\u91cc\uff0cKafka\u89c4\u5b9a\u4e86\u4e00\u4e2a\u6bb5\u4f4d\u7684log\u6587\u4ef6",(0,i.jsx)(n.strong,{children:"\u6700\u5927\u4e3a1G"}),"\uff0c\u505a\u8fd9\u4e2a\u9650\u5236\u76ee\u7684\u662f\u4e3a\u4e86\u65b9\u4fbf\u628alog\u6587\u4ef6\u52a0\u8f7d\u5230\u5185\u5b58\u53bb\u64cd\u4f5c\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"1 ### \u90e8\u5206\u6d88\u606f\u7684offset\u7d22\u5f15\u6587\u4ef6\uff0ckafka\u6bcf\u6b21\u5f80\u5206\u533a\u53d14K(\u53ef\u914d\u7f6e)\u6d88\u606f\u5c31\u4f1a\u8bb0\u5f55\u4e00\u6761\u5f53\u524d\u6d88\u606f\u7684offset\u5230index\u6587\u4ef6\uff0c \n\n2 ### \u5982\u679c\u8981\u5b9a\u4f4d\u6d88\u606f\u7684offset\u4f1a\u5148\u5728\u8fd9\u4e2a\u6587\u4ef6\u91cc\u5feb\u901f\u5b9a\u4f4d\uff0c\u518d\u53bblog\u6587\u4ef6\u91cc\u627e\u5177\u4f53\u6d88\u606f \n\n3 00000000000000000000.index \n\n4 ### \u6d88\u606f\u5b58\u50a8\u6587\u4ef6\uff0c\u4e3b\u8981\u5b58offset\u548c\u6d88\u606f\u4f53 \n\n5 00000000000000000000.log \n\n6 ### \u6d88\u606f\u7684\u53d1\u9001\u65f6\u95f4\u7d22\u5f15\u6587\u4ef6\uff0ckafka\u6bcf\u6b21\u5f80\u5206\u533a\u53d14K(\u53ef\u914d\u7f6e)\u6d88\u606f\u5c31\u4f1a\u8bb0\u5f55\u4e00\u6761\u5f53\u524d\u6d88\u606f\u7684\u53d1\u9001\u65f6\u95f4\u6233\u4e0e\u5bf9\u5e94\u7684offset\u5230timeindex\u6587\u4ef6\uff0c \n\n7 ### \u5982\u679c\u9700\u8981\u6309\u7167\u65f6\u95f4\u6765\u5b9a\u4f4d\u6d88\u606f\u7684offset\uff0c\u4f1a\u5148\u5728\u8fd9\u4e2a\u6587\u4ef6\u91cc\u67e5\u627e \n\n8 00000000000000000000.timeindex \n\n9 \n\n10 00000000000005367851.index \n\n11 00000000000005367851.log \n\n12 00000000000005367851.timeindex \n\n13 \n\n14 00000000000009936472.index \n\n15 00000000000009936472.log \n\n16 00000000000009936472.timeindex\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u4e2a9936472\u4e4b\u7c7b\u7684\u6570\u5b57\uff0c\u5c31\u662f\u4ee3\u8868\u4e86\u8fd9\u4e2a\u65e5\u5fd7\u6bb5\u6587\u4ef6\u91cc\u5305\u542b\u7684\u8d77\u59cb Offset\uff0c\u4e5f\u5c31\u8bf4\u660e\u8fd9\u4e2a\u5206\u533a\u91cc\u81f3\u5c11\u90fd\u5199\u5165\u4e86\u63a5\u8fd11000\u4e07\u6761\u6570\u636e\u4e86\u3002Kafka Broker\u6709\u4e00\u4e2a\u53c2\u6570\uff0c",(0,i.jsx)(n.code,{children:"log.segment.bytes"}),"\uff0c\u9650\u5b9a\u4e86\u6bcf\u4e2a\u65e5\u5fd7\u6bb5\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u6700\u5927\u5c31\u662f1GB\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u4e00\u4e2a\u65e5\u5fd7\u6bb5\u6587\u4ef6\u6ee1\u4e86\uff0c\u5c31\u81ea\u52a8\u5f00\u4e00\u4e2a\u65b0\u7684\u65e5\u5fd7\u6bb5\u6587\u4ef6\u6765\u5199\u5165\uff0c\u907f\u514d\u5355\u4e2a\u6587\u4ef6\u8fc7\u5927\uff0c\u5f71\u54cd\u6587\u4ef6\u7684\u8bfb\u5199\u6027\u80fd\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u53eb\u505a",(0,i.jsx)(n.code,{children:"log rolling"}),"\uff0c\u6b63\u5728\u88ab\u5199\u5165\u7684\u90a3\u4e2a\u65e5\u5fd7\u6bb5\u6587\u4ef6\uff0c\u53eb\u505a",(0,i.jsx)(n.code,{children:"active log segment"}),"\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u6700\u540e\u9644\u4e00\u5f20ZooKeeper\u8282\u70b9\u6570\u636e\u56fe"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:r(47736).Z+"",width:"640",height:"364"})}),"\n",(0,i.jsx)(n.h1,{id:"mq\u5e26\u6765\u7684\u4e00\u4e9b\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848",children:"MQ\u5e26\u6765\u7684\u4e00\u4e9b\u95ee\u9898\u3001\u53ca\u89e3\u51b3\u65b9\u6848"}),"\n",(0,i.jsx)(n.h2,{id:"\u5982\u4f55\u4fdd\u8bc1\u987a\u5e8f\u6d88\u8d39",children:"\u5982\u4f55\u4fdd\u8bc1\u987a\u5e8f\u6d88\u8d39\uff1f"}),"\n",(0,i.jsx)(n.h3,{id:"rabbitmq\u4e00\u4e2aqueue\u5bf9\u5e94\u4e00\u4e2aconsumer\u5373\u53ef\u89e3\u51b3",children:"RabbitMQ\uff1a\u4e00\u4e2aQueue\u5bf9\u5e94\u4e00\u4e2aConsumer\u5373\u53ef\u89e3\u51b3\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"rocketmqhashkey\u961f\u5217\u6570",children:"RocketMQ\uff1ahash(key)%\u961f\u5217\u6570"}),"\n",(0,i.jsx)(n.h3,{id:"kafkahashkey\u5206\u533a\u6570",children:"Kafka\uff1ahash(key)%\u5206\u533a\u6570"}),"\n",(0,i.jsx)(n.h2,{id:"\u5982\u4f55\u5b9e\u73b0\u5ef6\u8fdf\u6d88\u8d39",children:"\u5982\u4f55\u5b9e\u73b0\u5ef6\u8fdf\u6d88\u8d39\uff1f"}),"\n",(0,i.jsx)(n.h3,{id:"rabbitmq\u4e24\u79cd\u65b9\u6848\u6b7b\u4fe1\u961f\u5217--ttl\u5f15\u5165rabbitmq\u7684\u5ef6\u8fdf\u63d2\u4ef6",children:"RabbitMQ\uff1a\u4e24\u79cd\u65b9\u6848\u6b7b\u4fe1\u961f\u5217 + TTL\u5f15\u5165RabbitMQ\u7684\u5ef6\u8fdf\u63d2\u4ef6"}),"\n",(0,i.jsx)(n.h3,{id:"rocketmq\u5929\u751f\u652f\u6301\u5ef6\u65f6\u6d88\u606f",children:"RocketMQ\uff1a\u5929\u751f\u652f\u6301\u5ef6\u65f6\u6d88\u606f\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"kafka\u6b65\u9aa4\u5982\u4e0b",children:"Kafka\uff1a\u6b65\u9aa4\u5982\u4e0b"}),"\n",(0,i.jsx)(n.p,{children:"\u4e13\u95e8\u4e3a\u8981\u5ef6\u8fdf\u7684\u6d88\u606f\u521b\u5efa\u4e00\u4e2aTopic\u65b0\u5efa\u4e00\u4e2a\u6d88\u8d39\u8005\u53bb\u6d88\u8d39\u8fd9\u4e2aTopic\u6d88\u606f\u6301\u4e45\u5316\u518d\u5f00\u4e00\u4e2a\u7ebf\u7a0b\u5b9a\u65f6\u53bb\u62c9\u53d6\u6301\u4e45\u5316\u7684\u6d88\u606f\uff0c\u653e\u5165\u5b9e\u9645\u8981\u6d88\u8d39\u7684Topic\u5b9e\u9645\u6d88\u8d39\u7684\u6d88\u8d39\u8005\u4ece\u5b9e\u9645\u8981\u6d88\u8d39\u7684Topic\u62c9\u53d6\u6d88\u606f\u3002"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:r(4190).Z+"",width:"1080",height:"334"})}),"\n",(0,i.jsx)(n.h2,{id:"\u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u7684\u53ef\u9760\u6027\u6295\u9012",children:"\u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u7684\u53ef\u9760\u6027\u6295\u9012"}),"\n",(0,i.jsx)(n.h3,{id:"rabbitmq-1",children:"RabbitMQ\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Broker --\x3e \u6d88\u8d39\u8005\uff1a\u624b\u52a8ACK"}),"\n",(0,i.jsx)(n.li,{children:"\u751f\u4ea7\u8005 --\x3e Broker\uff1a\u4e24\u79cd\u65b9\u6848"}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u6570\u636e\u5e93\u6301\u4e45\u5316\uff1a"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"1. \u5c06\u4e1a\u52a1\u8ba2\u5355\u6570\u636e\u548c\u751f\u6210\u7684Message\u8fdb\u884c\u6301\u4e45\u5316\u64cd\u4f5c\uff08\u4e00\u822c\u60c5\u51b5\u4e0b\u63d2\u5165\u6570\u636e\u5e93\uff0c\u8fd9\u91cc\u5982\u679c\u5206\u5e93\u7684\u8bdd\u53ef\u80fd\u6d89\u53ca\u5230\u5206\u5e03\u5f0f\u4e8b\u52a1\uff09\n\n2. \u5c06Message\u53d1\u9001\u5230Broker\u670d\u52a1\u5668\u4e2d\n\n3. \u901a\u8fc7RabbitMQ\u7684Confirm\u673a\u5236\uff0c\u5728producer\u7aef\uff0c\u76d1\u542c\u670d\u52a1\u5668\u662f\u5426ACK\u3002\n\n4. \u5982\u679cACK\u4e86\uff0c\u5c31\u5c06Message\u8fd9\u6761\u6570\u636e\u72b6\u6001\u66f4\u65b0\u4e3a\u5df2\u53d1\u9001\u3002\u5982\u679c\u5931\u8d25\uff0c\u4fee\u6539\u4e3a\u5931\u8d25\u72b6\u6001\u3002\n\n5. \u5206\u5e03\u5f0f\u5b9a\u65f6\u4efb\u52a1\u67e5\u8be2\u6570\u636e\u5e933\u5206\u949f\uff08\u8fd9\u4e2a\u5177\u4f53\u65f6\u95f4\u5e94\u8be5\u6839\u636e\u7684\u65f6\u6548\u6027\u6765\u5b9a\uff09\u4e4b\u524d\u7684\u53d1\u9001\u5931\u8d25\u7684\u6d88\u606f\n\n6. \u91cd\u65b0\u53d1\u9001\u6d88\u606f\uff0c\u8bb0\u5f55\u53d1\u9001\u6b21\u6570\n\n7. \u5982\u679c\u53d1\u9001\u6b21\u6570\u8fc7\u591a\u4ecd\u7136\u5931\u8d25\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u4eba\u5de5\u6392\u67e5\u4e4b\u7c7b\u7684\u64cd\u4f5c\u3002\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:r(42759).Z+"",width:"1080",height:"769"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4f18\u70b9\uff1a\u80fd\u591f\u4fdd\u8bc1\u6d88\u606f\u767e\u5206\u767e\u4e0d\u4e22\u5931\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u7f3a\u70b9\uff1a\u7b2c\u4e00\u6b65\u4f1a\u6d89\u53ca\u5230\u5206\u5e03\u5f0f\u4e8b\u52a1\u95ee\u9898\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"\u6d88\u606f\u7684\u5ef6\u8fdf\u6295\u9012\uff1a"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u6d41\u7a0b\u56fe\u4e2d\uff0c\u989c\u8272\u4e0d\u540c\u7684\u4ee3\u8868\u4e0d\u540c\u7684message"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"1.\u5c06\u4e1a\u52a1\u8ba2\u5355\u6301\u4e45\u5316\n\n2.\u53d1\u9001\u4e00\u6761Message\u5230broker(\u79f0\u4e4b\u4e3a\u4e3bMessage)\uff0c\u518d\u53d1\u9001\u76f8\u540c\u7684\u4e00\u6761\u5230\u4e0d\u540c\u7684\u961f\u5217\u6216\u8005\u4ea4\u6362\u673a(\u8fd9\u6761\u79f0\u4e3a\u786e\u8ba4Message)\u4e2d\u3002\n\n3.\u4e3bMessage\u7531\u5b9e\u9645\u4e1a\u52a1\u5904\u7406\u7aef\u6d88\u8d39\u540e\uff0c\u751f\u6210\u4e00\u6761\u54cd\u5e94Message\u3002\u4e4b\u524d\u7684\u786e\u8ba4Message\u7531Message Service\u5e94\u7528\u5904\u7406\u5165\u5e93\u3002\n\n4~6.\u5b9e\u9645\u4e1a\u52a1\u5904\u7406\u7aef\u53d1\u9001\u7684\u786e\u8ba4Message\u7531Message Service\u63a5\u6536\u540e\uff0c\u5c06\u539fMessage\u72b6\u6001\u4fee\u6539\u3002\n\n7.\u5982\u679c\u8be5\u6761Message\u6ca1\u6709\u88ab\u786e\u8ba4\uff0c\u5219\u901a\u8fc7rpc\u8c03\u7528\u91cd\u65b0\u7531producer\u8fdb\u884c\u5168\u8fc7\u7a0b\u3002\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:r(78420).Z+"",width:"640",height:"212"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4f18\u70b9\uff1a\u76f8\u5bf9\u4e8e\u6301\u4e45\u5316\u65b9\u6848\u6765\u8bf4\u54cd\u5e94\u901f\u5ea6\u6709\u6240\u63d0\u5347"}),"\n",(0,i.jsx)(n.li,{children:"\u7f3a\u70b9\uff1a\u7cfb\u7edf\u590d\u6742\u6027\u6709\u70b9\u9ad8\uff0c\u4e07\u4e00\u4e24\u6761\u6d88\u606f\u90fd\u5931\u8d25\u4e86\uff0c\u6d88\u606f\u5b58\u5728\u4e22\u5931\u60c5\u51b5\uff0c\u4ecd\u9700Confirm\u673a\u5236\u505a\u8865\u507f\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"rocketmq-1",children:"RocketMQ"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u751f\u4ea7\u8005\u5f04\u4e22\u6570\u636e\uff1a"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Producer\u5728\u628aMessage\u53d1\u9001Broker\u7684\u8fc7\u7a0b\u4e2d\uff0c\u56e0\u4e3a\u7f51\u7edc\u95ee\u9898\u7b49\u53d1\u751f\u4e22\u5931\uff0c\u6216\u8005Message\u5230\u4e86Broker\uff0c\u4f46\u662f\u51fa\u4e86\u95ee\u9898\uff0c\u6ca1\u6709\u4fdd\u5b58\u4e0b\u6765\u3002\u9488\u5bf9\u8fd9\u4e2a\u95ee\u9898\uff0cRocketMQ\u5bf9Producer\u53d1\u9001\u6d88\u606f\u8bbe\u7f6e\u4e863\u79cd\u65b9\u5f0f\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u540c\u6b65\u53d1\u9001"}),"\n",(0,i.jsx)(n.li,{children:"\u5f02\u6b65\u53d1\u9001"}),"\n",(0,i.jsx)(n.li,{children:"\u5355\u5411\u53d1\u9001"}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Broker\u5f04\u4e22\u6570\u636e\uff1a"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Broker\u63a5\u6536\u5230Message\u6682\u5b58\u5230\u5185\u5b58\uff0cConsumer\u8fd8\u6ca1\u6765\u5f97\u53ca\u6d88\u8d39\uff0cBroker\u6302\u6389\u4e86\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u53ef\u4ee5\u901a\u8fc7 \u6301\u4e45\u5316 \u8bbe\u7f6e\u53bb\u89e3\u51b3\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u521b\u5efaQueue\u7684\u65f6\u5019\u8bbe\u7f6e\u6301\u4e45\u5316\uff0c\u4fdd\u8bc1Broker\u6301\u4e45\u5316Queue\u7684\u5143\u6570\u636e\uff0c\u4f46\u662f\u4e0d\u4f1a\u6301\u4e45\u5316Queue\u91cc\u9762\u7684\u6d88\u606f"}),"\n",(0,i.jsx)(n.li,{children:"\u5c06Message\u7684deliveryMode\u8bbe\u7f6e\u4e3a2\uff0c\u53ef\u4ee5\u5c06\u6d88\u606f\u6301\u4e45\u5316\u5230\u78c1\u76d8\uff0c\u8fd9\u6837\u53ea\u6709Message\u652f\u6301\u5316\u5230\u78c1\u76d8\u4e4b\u540e\u624d\u4f1a\u53d1\u9001\u901a\u77e5Producer ack"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u4e24\u6b65\u8fc7\u540e\uff0c\u5373\u4f7fBroker\u6302\u4e86\uff0cProducer\u80af\u5b9a\u6536\u4e0d\u5230ack\u7684\uff0c\u5c31\u53ef\u4ee5\u8fdb\u884c\u91cd\u53d1\u3002"}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"\u6d88\u8d39\u8005\u5f04\u4e22\u6570\u636e\uff1a"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Consumer\u6709\u6d88\u8d39\u5230Message\uff0c\u4f46\u662f\u5185\u90e8\u51fa\u73b0\u95ee\u9898\uff0cMessage\u8fd8\u6ca1\u5904\u7406\uff0cBroker\u4ee5\u4e3aConsumer\u5904\u7406\u5b8c\u4e86\uff0c\u53ea\u4f1a\u628a\u540e\u7eed\u7684\u6d88\u606f\u53d1\u9001\u3002\u8fd9\u65f6\u5019\uff0c\u5c31\u8981 \u5173\u95edautoack\uff0c\u6d88\u606f\u5904\u7406\u8fc7\u540e\uff0c\u8fdb\u884c\u624b\u52a8ack , \u591a\u6b21\u6d88\u8d39\u5931\u8d25\u7684\u6d88\u606f\uff0c\u4f1a\u8fdb\u5165 \u6b7b\u4fe1\u961f\u5217 \uff0c\u8fd9\u65f6\u5019\u9700\u8981\u4eba\u5de5\u5e72\u9884\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"kafka-1",children:"Kafka"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u751f\u4ea7\u8005\u5f04\u4e22\u6570\u636e"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u8bbe\u7f6e\u4e86 ",(0,i.jsx)(n.code,{children:"acks=all"})," \uff0c\u4e00\u5b9a\u4e0d\u4f1a\u4e22\uff0c\u8981\u6c42\u662f\uff0c\u4f60\u7684 leader \u63a5\u6536\u5230\u6d88\u606f\uff0c\u6240\u6709\u7684 follower \u90fd\u540c\u6b65\u5230\u4e86\u6d88\u606f\u4e4b\u540e\uff0c\u624d\u8ba4\u4e3a\u672c\u6b21\u5199\u6210\u529f\u4e86\u3002\u5982\u679c\u6ca1\u6ee1\u8db3\u8fd9\u4e2a\u6761\u4ef6\uff0c\u751f\u4ea7\u8005\u4f1a\u81ea\u52a8\u4e0d\u65ad\u7684\u91cd\u8bd5\uff0c\u91cd\u8bd5\u65e0\u9650\u6b21\u3002"]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Broker\u5f04\u4e22\u6570\u636e"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Kafka \u67d0\u4e2a broker \u5b95\u673a\uff0c\u7136\u540e\u91cd\u65b0\u9009\u4e3e ",(0,i.jsx)(n.code,{children:"partition"})," \u7684 leader\u3002\u5927\u5bb6\u60f3\u60f3\uff0c\u8981\u662f\u6b64\u65f6\u5176\u4ed6\u7684 follower \u521a\u597d\u8fd8\u6709\u4e9b\u6570\u636e\u6ca1\u6709\u540c\u6b65\uff0c\u7ed3\u679c\u6b64\u65f6 leader \u6302\u4e86\uff0c\u7136\u540e\u9009\u4e3e\u67d0\u4e2a follower \u6210 leader \u4e4b\u540e\uff0c\u4e0d\u5c31\u5c11\u4e86\u4e00\u4e9b\u6570\u636e\uff1f\u8fd9\u5c31\u4e22\u4e86\u4e00\u4e9b\u6570\u636e\u554a\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u6b64\u65f6\u4e00\u822c\u662f\u8981\u6c42\u8d77\u7801\u8bbe\u7f6e\u5982\u4e0b 4 \u4e2a\u53c2\u6570\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"replication.factor\nmin.insync.replicas\nacks=all\nretries=MAX\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u6211\u4eec\u751f\u4ea7\u73af\u5883\u5c31\u662f\u6309\u7167\u4e0a\u8ff0\u8981\u6c42\u914d\u7f6e\u7684\uff0c\u8fd9\u6837\u914d\u7f6e\u4e4b\u540e\uff0c\u81f3\u5c11\u5728 Kafka broker \u7aef\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u5728 leader \u6240\u5728 broker \u53d1\u751f\u6545\u969c\uff0c\u8fdb\u884c leader \u5207\u6362\u65f6\uff0c\u6570\u636e\u4e0d\u4f1a\u4e22\u5931\u3002"}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"\u6d88\u8d39\u8005\u5f04\u4e22\u6570\u636e"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u4f60\u6d88\u8d39\u5230\u4e86\u8fd9\u4e2a\u6d88\u606f\uff0c\u7136\u540e\u6d88\u8d39\u8005\u90a3\u8fb9\u81ea\u52a8\u63d0\u4ea4\u4e86 offset\uff0c\u8ba9 Kafka \u4ee5\u4e3a\u4f60\u5df2\u7ecf\u6d88\u8d39\u597d\u4e86\u8fd9\u4e2a\u6d88\u606f\uff0c\u4f46\u5176\u5b9e\u4f60\u624d\u521a\u51c6\u5907\u5904\u7406\u8fd9\u4e2a\u6d88\u606f\uff0c\u4f60\u8fd8\u6ca1\u5904\u7406\uff0c\u4f60\u81ea\u5df1\u5c31\u6302\u4e86\uff0c\u6b64\u65f6\u8fd9\u6761\u6d88\u606f\u5c31\u4e22\u54af\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u4e0d\u662f\u8ddf RabbitMQ \u5dee\u4e0d\u591a\u5417\uff0c\u5927\u5bb6\u90fd\u77e5\u9053 Kafka \u4f1a\u81ea\u52a8\u63d0\u4ea4 offset\uff0c\u90a3\u4e48\u53ea\u8981 \u5173\u95ed\u81ea\u52a8\u63d0\u4ea4 offset\uff0c\u5728\u5904\u7406\u5b8c\u4e4b\u540e\u81ea\u5df1\u624b\u52a8\u63d0\u4ea4 offset\uff0c\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u6570\u636e\u4e0d\u4f1a\u4e22\u3002\u4f46\u662f\u6b64\u65f6\u786e\u5b9e\u8fd8\u662f\u53ef\u80fd\u4f1a\u6709\u91cd\u590d\u6d88\u8d39\uff0c\u6bd4\u5982\u4f60\u521a\u5904\u7406\u5b8c\uff0c\u8fd8\u6ca1\u63d0\u4ea4 offset\uff0c\u7ed3\u679c\u81ea\u5df1\u6302\u4e86\uff0c\u6b64\u65f6\u80af\u5b9a\u4f1a\u91cd\u590d\u6d88\u8d39\u4e00\u6b21\uff0c\u81ea\u5df1\u4fdd\u8bc1\u5e42\u7b49\u6027\u5c31\u597d\u4e86\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u7684\u5e42\u7b49",children:"\u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u7684\u5e42\u7b49\uff1f"}),"\n",(0,i.jsx)(n.p,{children:"\u4ee5 RocketMQ \u4e3a\u4f8b\uff0c\u4e0b\u9762\u5217\u51fa\u4e86\u6d88\u606f\u91cd\u590d\u7684\u573a\u666f\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u53d1\u9001\u65f6\u6d88\u606f\u91cd\u590d"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5f53\u4e00\u6761\u6d88\u606f\u5df2\u88ab\u6210\u529f\u53d1\u9001\u5230\u670d\u52a1\u7aef\u5e76\u5b8c\u6210\u6301\u4e45\u5316\uff0c\u6b64\u65f6\u51fa\u73b0\u4e86\u7f51\u7edc\u95ea\u65ad\u6216\u8005\u5ba2\u6237\u7aef\u5b95\u673a\uff0c\u5bfc\u81f4\u670d\u52a1\u7aef\u5bf9\u5ba2\u6237\u7aef\u5e94\u7b54\u5931\u8d25\u3002\u5982\u679c\u6b64\u65f6\u751f\u4ea7\u8005\u610f\u8bc6\u5230\u6d88\u606f\u53d1\u9001\u5931\u8d25\u5e76\u5c1d\u8bd5\u518d\u6b21\u53d1\u9001\u6d88\u606f\uff0c\u6d88\u8d39\u8005\u540e\u7eed\u4f1a\u6536\u5230\u4e24\u6761\u5185\u5bb9\u76f8\u540c\u5e76\u4e14Message ID\u4e5f\u76f8\u540c\u7684\u6d88\u606f\u3002"}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"\u6295\u9012\u65f6\u6d88\u606f\u91cd\u590d"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u6d88\u606f\u6d88\u8d39\u7684\u573a\u666f\u4e0b\uff0c\u6d88\u606f\u5df2\u6295\u9012\u5230\u6d88\u8d39\u8005\u5e76\u5b8c\u6210\u4e1a\u52a1\u5904\u7406\uff0c\u5f53\u5ba2\u6237\u7aef\u7ed9\u670d\u52a1\u7aef\u53cd\u9988\u5e94\u7b54\u7684\u65f6\u5019\u7f51\u7edc\u95ea\u65ad\u3002\u4e3a\u4e86\u4fdd\u8bc1\u6d88\u606f\u81f3\u5c11\u88ab\u6d88\u8d39\u4e00\u6b21\uff0c\u6d88\u606f\u961f\u5217RocketMQ\u7248\u7684\u670d\u52a1\u7aef\u5c06\u5728\u7f51\u7edc\u6062\u590d\u540e\u518d\u6b21\u5c1d\u8bd5\u6295\u9012\u4e4b\u524d\u5df2\u88ab\u5904\u7406\u8fc7\u7684\u6d88\u606f\uff0c\u6d88\u8d39\u8005\u540e\u7eed\u4f1a\u6536\u5230\u4e24\u6761\u5185\u5bb9\u76f8\u540c\u5e76\u4e14Message ID\u4e5f\u76f8\u540c\u7684\u6d88\u606f\u3002"}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"\u8d1f\u8f7d\u5747\u8861\u65f6\u6d88\u606f\u91cd\u590d\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u7f51\u7edc\u6296\u52a8\u3001Broker\u91cd\u542f\u4ee5\u53ca\u6d88\u8d39\u8005\u5e94\u7528\u91cd\u542f\uff09"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5f53\u6d88\u606f\u961f\u5217RocketMQ\u7248\u7684Broker\u6216\u5ba2\u6237\u7aef\u91cd\u542f\u3001\u6269\u5bb9\u6216\u7f29\u5bb9\u65f6\uff0c\u4f1a\u89e6\u53d1Rebalance\uff0c\u6b64\u65f6\u6d88\u8d39\u8005\u53ef\u80fd\u4f1a\u6536\u5230\u91cd\u590d\u6d88\u606f\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u90a3\u4e48\uff0c\u6709\u4ec0\u4e48\u89e3\u51b3\u65b9\u6848\u5462\uff1f\u76f4\u63a5\u4e0a\u56fe\u3002"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:r(78366).Z+"",width:"640",height:"716"})}),"\n",(0,i.jsx)(n.h2,{id:"\u5982\u4f55\u89e3\u51b3\u6d88\u606f\u79ef\u538b\u7684\u95ee\u9898",children:"\u5982\u4f55\u89e3\u51b3\u6d88\u606f\u79ef\u538b\u7684\u95ee\u9898\uff1f"}),"\n",(0,i.jsx)(n.p,{children:"\u5173\u4e8e\u8fd9\u4e2a\u95ee\u9898\uff0c\u6709\u51e0\u4e2a\u70b9\u9700\u8981\u8003\u8651\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u5982\u4f55\u5feb\u901f\u8ba9\u79ef\u538b\u7684\u6d88\u606f\u88ab\u6d88\u8d39\u6389\uff1f"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u4e34\u65f6\u5199\u4e00\u4e2a\u6d88\u606f\u5206\u53d1\u7684\u6d88\u8d39\u8005\uff0c\u628a\u79ef\u538b\u961f\u5217\u91cc\u7684\u6d88\u606f\u5747\u5300\u5206\u53d1\u5230N\u4e2a\u961f\u5217\u4e2d\uff0c\u540c\u65f6\u4e00\u4e2a\u961f\u5217\u5bf9\u5e94\u4e00\u4e2a\u6d88\u8d39\u8005\uff0c\u76f8\u5f53\u4e8e\u6d88\u8d39\u901f\u5ea6\u63d0\u9ad8\u4e86N\u500d\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u4fee\u6539\u524d\uff1a"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.img,{alt:"img",src:r(83896).Z+"",width:"640",height:"363"}),"\n\u4fee\u6539\u540e\uff1a"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:r(43972).Z+"",width:"640",height:"435"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"\u79ef\u538b\u65f6\u95f4\u592a\u4e45\uff0c\u5bfc\u81f4\u90e8\u5206\u6d88\u606f\u8fc7\u671f\uff0c\u600e\u4e48\u5904\u7406\uff1f"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u6279\u91cf\u91cd\u5bfc\u3002\u5728\u4e1a\u52a1\u4e0d\u7e41\u5fd9\u7684\u65f6\u5019\uff0c\u6bd4\u5982\u51cc\u6668\uff0c\u63d0\u524d\u51c6\u5907\u597d\u7a0b\u5e8f\uff0c\u628a\u4e22\u5931\u7684\u90a3\u6279\u6d88\u606f\u67e5\u51fa\u6765\uff0c\u91cd\u65b0\u5bfc\u5165\u5230MQ\u4e2d\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u6d88\u606f\u5927\u91cf\u79ef\u538b\uff0cMQ\u78c1\u76d8\u88ab\u5199\u6ee1\u4e86\uff0c\u5bfc\u81f4\u65b0\u6d88\u606f\u8fdb\u4e0d\u6765\u4e86\uff0c\u4e22\u6389\u4e86\u5927\u91cf\u6d88\u606f\uff0c\u600e\u4e48\u5904\u7406\uff1f"}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u4e2a\u6ca1\u529e\u6cd5\u3002\u8c01\u8ba9\u3010\u6d88\u606f\u5206\u53d1\u7684\u6d88\u8d39\u8005\u3011\u5199\u7684\u592a\u6162\u4e86\uff0c\u4f60\u4e34\u65f6\u5199\u7a0b\u5e8f\uff0c\u63a5\u5165\u6570\u636e\u6765\u6d88\u8d39\uff0c\u6d88\u8d39\u4e00\u4e2a\u4e22\u5f03\u4e00\u4e2a\uff0c\u90fd\u4e0d\u8981\u4e86\uff0c\u5feb\u901f\u6d88\u8d39\u6389\u6240\u6709\u7684\u6d88\u606f\u3002\u7136\u540e\u8d70\u7b2c\u4e8c\u4e2a\u65b9\u6848\uff0c\u5230\u4e86\u665a\u4e0a\u518d\u8865\u6570\u636e\u5427\u3002"})]})}function t(e={}){const{wrapper:n}={...(0,s.ah)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},92480:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/kafka-1-560407c03bb3e7c20bbfc0a64b19b8b0.png"},75625:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/kafka-2-e55e1eb4bd986dec50bda6294879b2e6.png"},17810:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/kafka-3-c198b3b1572aebe4edda1f91b0a2d1b1.png"},47736:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/kafka-4-1564c2e88877267aca76ee909c673680.jpg"},4190:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/kafka-5-35379db40b7ee53eca32ec0f88d52752.png"},83896:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/message-consume-1-84f12dd961e4943af9fba539122e98ca.jpg"},43972:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/message-consume-2-0f110c666ae5c653f36047c326f223fb.jpg"},20995:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/rabbitmq-1-c8b08e5e294d0e340415dabd8c39ba00.jpg"},6102:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/rabbitmq-2-1528636495556be56ae3cc31b0421f49.jpg"},42759:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/rabbitmq-3-48b10ea5889239c23fc46ec315e2eddb.png"},78420:(e,n,r)=>{r.d(n,{Z:()=>i});const i="data:image/jpeg;base64,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"},78366:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/repeat-message-a77d0cf9d7a87c06fc852826391d2a1f.jpg"},42093:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/rocketmq-1-32a80f83a7d496a36d0e28e6a25a0895.png"},51130:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/rocketmq-2-826afd255d2538852624b4f8d3f124b8.png"},16839:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/rocketmq-3-ec227041a49697b3752a7d28d6fe001e.jpg"},11151:(e,n,r)=>{r.d(n,{ah:()=>l});var i=r(67294);const s=i.createContext({});function l(e){const n=i.useContext(s);return i.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}}}]);