"use strict";(self.webpackChunklight_docusaurus=self.webpackChunklight_docusaurus||[]).push([[38542],{242:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>r,default:()=>x,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"nginx/Static-Resource-Compress","title":"Static-Resource-Compress","description":"- Nginx\u9759\u6001\u538b\u7f29\u548c\u4ee3\u7801\u538b\u7f29,\u63d0\u9ad8\u8bbf\u95ee\u901f\u5ea6!","source":"@site/middleware/nginx/7-Static-Resource-Compress.md","sourceDirName":"nginx","slug":"/nginx/Static-Resource-Compress","permalink":"/middleware/nginx/Static-Resource-Compress","draft":false,"unlisted":false,"editUrl":"https://github.com/lorchr/light-docusaurus/tree/main/middleware/nginx/7-Static-Resource-Compress.md","tags":[],"version":"current","lastUpdatedBy":"Lorchr","lastUpdatedAt":1749279355000,"sidebarPosition":7,"frontMatter":{},"sidebar":"middleware","previous":{"title":"Nginx-Rate-Limit","permalink":"/middleware/nginx/Nginx-Rate-Limit"},"next":{"title":"Netty","permalink":"/middleware/category/netty"}}');var l=i(74848),t=i(28453);const c={},r=void 0,d={},a=[{value:"nginx\u9759\u6001\u8d44\u6e90\u52a8\u6001\u538b\u7f29",id:"nginx\u9759\u6001\u8d44\u6e90\u52a8\u6001\u538b\u7f29",level:2},{value:"nginx\u5f00\u542fgzip\u538b\u7f29",id:"nginx\u5f00\u542fgzip\u538b\u7f29",level:3},{value:"\u538b\u7f29\u7684\u6548\u679c\u56fe",id:"\u538b\u7f29\u7684\u6548\u679c\u56fe",level:3},{value:"\u6ca1\u6709\u538b\u7f29\u7684\u6548\u679c\u56fe",id:"\u6ca1\u6709\u538b\u7f29\u7684\u6548\u679c\u56fe",level:3},{value:"nginx\u9759\u6001\u8d44\u6e90\u9759\u6001\u538b\u7f29",id:"nginx\u9759\u6001\u8d44\u6e90\u9759\u6001\u538b\u7f29",level:2},{value:"\u5c06js\u3001css\u7b49\u6587\u4ef6\uff0c\u751f\u6210\u5bf9\u5e94\u7684.gz\u6587\u4ef6",id:"\u5c06jscss\u7b49\u6587\u4ef6\u751f\u6210\u5bf9\u5e94\u7684gz\u6587\u4ef6",level:3},{value:"nginx\u914d\u7f6e",id:"nginx\u914d\u7f6e",level:3},{value:"\u9759\u6001\u538b\u7f29",id:"\u9759\u6001\u538b\u7f29",level:3},{value:"\u52a8\u6001\u538b\u7f29",id:"\u52a8\u6001\u538b\u7f29",level:3}];function p(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://juejin.cn/post/7101663374957608974",children:"Nginx\u9759\u6001\u538b\u7f29\u548c\u4ee3\u7801\u538b\u7f29,\u63d0\u9ad8\u8bbf\u95ee\u901f\u5ea6!"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://mp.weixin.qq.com/s/4lz7t6RX0ilJ28QJ97XA9Q",children:"Nginx\u9759\u6001\u538b\u7f29\u548c\u4ee3\u7801\u538b\u7f29\uff0c\u63d0\u9ad8\u8bbf\u95ee\u901f\u5ea6\uff01"})}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u57fa\u4e8e\u76ee\u524d\u5927\u90e8\u5206\u7684\u5e94\u7528\uff0c\u90fd\u4f7f\u7528\u4e86\u524d\u540e\u7aef\u5206\u79bb\u7684\u6846\u67b6\uff0cvue\u7684\u524d\u7aef\u5e94\u7528\uff0c\u4e5f\u662f\u5341\u5206\u7684\u6d41\u884c\u3002\u4e0d\u77e5\u9053\u5927\u5bb6\u6709\u65e0\u9047\u5230\u8fd9\u6837\u7684\u95ee\u9898\uff1a"}),"\n",(0,l.jsx)(e.p,{children:"\u968f\u7740\u524d\u7aef\u6846\u67b6\u7684\u9875\u9762\uff0c\u529f\u80fd\u5f00\u53d1\u4e0d\u65ad\u7684\u8fed\u4ee3\uff1b\u5b89\u88c5\u7684\u4f9d\u8d56\uff0c\u4e0d\u65ad\u7684\u589e\u591a\uff1b"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u6837\u5bfc\u81f4\u7684\u95ee\u9898\uff0c\u5c31\u662f\u6211\u4eec\u7684\u524d\u7aef\u6846\u67b6\uff0c\u4f1a\u53d8\u5f97\u5341\u5206\u5e9e\u5927\uff0c\u6253\u5305\u51fa\u6765\u7684dist\u76ee\u5f55\u4f1a\u53d8\u5f97\u5f88\u5927\u4e86\u5594\uff01\uff01\uff01"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u6837\u5c31\u4f1a\u5bfc\u81f4\u4e00\u4e2a\u95ee\u9898\uff1a\u9996\u6b21\u8bbf\u95ee\u5e94\u7528\uff0c\u4f1a\u53d8\u5f97\u5f88\u6162\uff01\uff01\uff01"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u786e\u5b9e\u662f\u4e00\u4e2a\u4e25\u91cd\u7684\u95ee\u9898\uff01\uff01\uff01T_T"}),"\n",(0,l.jsx)(e.p,{children:"\u5bf9\u4e8e\u8fd9\u4e2a\u95ee\u9898\uff0c\u548b\u4eec\u4eca\u5929\u5c31\u4ece\u4ee3\u7801\u538b\u7f29+nginx\u9759\u6001\u8d44\u6e90\u538b\u7f29\uff0c\u4e24\u4e2a\u65b9\u9762\u8fdb\u884c\u7814\u7a76\u89e3\u51b3\uff01\uff01\uff01"}),"\n",(0,l.jsx)(e.h2,{id:"nginx\u9759\u6001\u8d44\u6e90\u52a8\u6001\u538b\u7f29",children:"nginx\u9759\u6001\u8d44\u6e90\u52a8\u6001\u538b\u7f29"}),"\n",(0,l.jsx)(e.h3,{id:"nginx\u5f00\u542fgzip\u538b\u7f29",children:"nginx\u5f00\u542fgzip\u538b\u7f29"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:'server {\n    listen       80;\n    listen  [::]:80;\n    server_name  localhost;\n    server_tokens off;\n\n    # \u5f00\u542fgzip\u538b\u7f29\n    gzip                on;\n    gzip_disable        "msie6";\n    gzip_vary           on;\n    gzip_proxied        any;\n    gzip_comp_level     6;\n    gzip_buffers 16     8k;\n    gzip_http_version   1.1;\n    gzip_types          text/plain application/css text/css application/xml text/javascript application/javascript application/x-javascript;\n    \n    #llsydn \u524d\u7aef\n    location /jxbp {           \n        alias  /opt/llsydn/jxbp;\n        index index.html;\n        try_files $uri $uri/ /dist/index.html;\n    }\n}\n'})}),"\n",(0,l.jsxs)(e.p,{children:["\u7136\u540e\u91cd\u542fnginx\uff1a",(0,l.jsx)(e.code,{children:"nginx -s reload"})]}),"\n",(0,l.jsx)(e.p,{children:"\u770b\u770b\u662f\u5426\u5df2\u7ecf\u751f\u6548\uff01\uff01\uff01"}),"\n",(0,l.jsx)(e.h3,{id:"\u538b\u7f29\u7684\u6548\u679c\u56fe",children:"\u538b\u7f29\u7684\u6548\u679c\u56fe"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{alt:"img",src:i(79510).A+"",width:"936",height:"373"})}),"\n",(0,l.jsx)(e.h3,{id:"\u6ca1\u6709\u538b\u7f29\u7684\u6548\u679c\u56fe",children:"\u6ca1\u6709\u538b\u7f29\u7684\u6548\u679c\u56fe"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{alt:"img",src:i(16887).A+"",width:"776",height:"451"})}),"\n",(0,l.jsx)(e.p,{children:"\u4ece\u4e0a\u9762\u4e24\u5f20\u56fe\u53ef\u4ee5\u770b\u5230:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7b2c\u4e00\u5f20\u7ecf\u8fc7\u538b\u7f29\uff1afinish\u65f6\u95f4\u4e3a2.36s\uff0ctransferred\u4e3a7.6MB"}),"\n",(0,l.jsx)(e.li,{children:"\u7b2c\u4e8c\u5f20\u6ca1\u6709\u538b\u7f29\uff1afinish\u65f6\u95f4\u4e3a6.32s\uff0ctransferred\u4e3a24.6MB"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u5f88\u660e\u663e\uff0c\u7ecf\u8fc7\u4e86nginx\u7684\u9759\u6001\u8d44\u6e90\u538b\u7f29\uff0c\u8bbf\u95ee\u901f\u5ea6\u63d0\u9ad8\u4e86\uff0c\u663e\u8457\u7684\uff01\uff01\uff01"}),"\n",(0,l.jsx)(e.p,{children:"\u770b\u5230\u8fd9\uff0c\u548b\u4eec\u4f1a\u6709\u8fd9\u6837\u7684\u4e00\u4e2a\u95ee\u9898\uff0c\u8fd9\u538b\u7f29\u90fd\u662fnginx\u5e72\u7684\u6d3b\uff0c\u90a3\u5f53\u8bbf\u95ee\u91cf\u53d8\u5927\uff0c\u90a3\u5bf9\u4e8enginx\u7684\u538b\u529b\uff0c\u662f\u5341\u5206\u5927\u7684\uff0c\u6bd5\u7adf\u90fd\u662f\u52a8\u6001\u538b\u7f29\u7684\uff01\uff01\uff01"}),"\n",(0,l.jsx)(e.p,{children:"\u90a3\u6709\u65e0\u89e3\u51b3\u65b9\u6cd5\u5462\uff1f"}),"\n",(0,l.jsx)(e.p,{children:"nginx\u9759\u6001\u8d44\u6e90\u52a8\u6001\u538b\u7f29\u7684\u539f\u7406\uff0c\u65e0\u975e\u5c31\u5e2e\u6211\u4eec\u5c06js\u3001css\u7b49\u6587\u4ef6\uff0c\u538b\u7f29\u4e3a\u4e00\u4e2a.gz\u6587\u4ef6\uff0c\u7136\u540e\u4f20\u8f93\u7ed9\u524d\u7aef\u6d4f\u89c8\u5668\uff0c\u8fdb\u884c\u89e3\u6790\u3002\u8bf4\u5230\u8fd9\uff0c\u548b\u4eec\u4e0d\u7981\u4f1a\u8bf4\uff1a\u90a3\u548b\u4eec\u5148\u5c06js\u3001css\u7b49\u6587\u4ef6\uff0c\u751f\u6210\u5bf9\u5e94\u7684.gz\u6587\u4ef6\uff0c\u4e0d\u5c31\u4e0d\u9700\u8981nginx\u52a8\u6001\u538b\u7f29\u4e86\u561b\uff1f\u597d\u50cf\u662f\u8fd9\u4e48\u4e00\u56de\u4e8b\uff01\uff01\uff01"}),"\n",(0,l.jsx)(e.p,{children:"\u5929\u624d\u5440\uff01\uff01\uff01"}),"\n",(0,l.jsx)(e.h2,{id:"nginx\u9759\u6001\u8d44\u6e90\u9759\u6001\u538b\u7f29",children:"nginx\u9759\u6001\u8d44\u6e90\u9759\u6001\u538b\u7f29"}),"\n",(0,l.jsx)(e.h3,{id:"\u5c06jscss\u7b49\u6587\u4ef6\u751f\u6210\u5bf9\u5e94\u7684gz\u6587\u4ef6",children:"\u5c06js\u3001css\u7b49\u6587\u4ef6\uff0c\u751f\u6210\u5bf9\u5e94\u7684.gz\u6587\u4ef6"}),"\n",(0,l.jsxs)(e.p,{children:["\u8fd9\u4e2a\uff0c\u5c31\u53ef\u4ee5\u501f\u52a9\u4e00\u4e9b\u4f9d\u8d56\u8fdb\u884c\u5904\u7406\u4e86\uff1a",(0,l.jsx)(e.code,{children:"compression-webpack-plugin"})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5b89\u88c5\u4f9d\u8d56\uff1a"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"npm install compression-webpack-plugin -D\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"vue.config.js"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-javascript",children:"const CompressionWebpackPlugin = require('compression-webpack-plugin')\nconst productionGzipExtensions = ['js', 'css']\nvueConfig.configureWebpack.plugins.push(new CompressionWebpackPlugin({\n    test:/.js$|.html$|.\\css/, // \u5339\u914d\u6587\u4ef6\u540d\n    threshold: 1024, // \u5bf9\u8d85\u8fc71k\u7684\u6570\u636e\u538b\u7f29\n    deleteOriginalAssets: false // \u4e0d\u5220\u9664\u6e90\u6587\u4ef6\n}))\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6253\u5305\uff1a"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"npm run build\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{alt:"img",src:i(93876).A+"",width:"484",height:"335"})}),"\n",(0,l.jsx)(e.p,{children:"\u53ef\u4ee5\u770b\u5230\uff0c\u5df2\u7ecf\u5e2e\u6211\u4eec\u751f\u6210\u5bf9\u5e94\u7684.gz\u6587\u4ef6\u4e86\uff01\uff01\uff01"}),"\n",(0,l.jsx)(e.h3,{id:"nginx\u914d\u7f6e",children:"nginx\u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u4e0a\u9762\u7684\u57fa\u7840\u4e0a\uff0c\u518d\u52a0\u4e0a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"gzip_static on\n"})}),"\n",(0,l.jsx)(e.p,{children:"nginx\u5f97\u5b89\u88c5\u4e0b\u9762\u5f97\u6a21\u5757\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"ngx_http_gzip_module        \u6a21\u5757\nngx_http_gzip_static_module \u6a21\u5757\nngx_http_gunzip_module      \u6a21\u5757\n"})}),"\n",(0,l.jsx)(e.p,{children:"nginx\u5f00\u542fgzip\u538b\u7f29"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:'server {\n    listen       80;\n    listen  [::]:80;\n    server_name  localhost;\n    server_tokens off;\n\n    # \u5f00\u542fgzip\u538b\u7f29\n    gzip                on;\n    gzip_static         on\n    gzip_disable        "msie6";\n    gzip_vary           on;\n    gzip_proxied        any;\n    gzip_comp_level     6;\n    gzip_buffers 16     8k;\n    gzip_http_version   1.1;\n    gzip_types          text/plain application/css text/css application/xml text/javascript application/javascript application/x-javascript;\n    \n    #llsydn \u524d\u7aef\n    location /jxbp {           \n        alias  /opt/llsydn/jxbp;\n        index index.html;\n        try_files $uri $uri/ /dist/index.html;\n    }\n}\n'})}),"\n",(0,l.jsxs)(e.p,{children:["\u7136\u540e\u91cd\u542fnginx\uff1a",(0,l.jsx)(e.code,{children:"nginx -s reload"})]}),"\n",(0,l.jsx)(e.p,{children:"\u770b\u770b\u662f\u5426\u5df2\u7ecf\u751f\u6548\uff01\uff01\uff01"}),"\n",(0,l.jsx)(e.h3,{id:"\u9759\u6001\u538b\u7f29",children:"\u9759\u6001\u538b\u7f29"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{alt:"img",src:i(5669).A+"",width:"737",height:"507"})}),"\n",(0,l.jsx)(e.h3,{id:"\u52a8\u6001\u538b\u7f29",children:"\u52a8\u6001\u538b\u7f29"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{alt:"img",src:i(17818).A+"",width:"825",height:"496"})}),"\n",(0,l.jsx)(e.p,{children:"\u597d\u4e86\uff0cnginx\u7684\u9759\u6001\u538b\u7f29\uff0c\u5c31\u5230\u8fd9\u91cc\u4e86\uff01\uff01\uff01"})]})}function x(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(p,{...n})}):p(n)}},5669:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/7-4-3d9bb5d480da2dec08915bdc0fe5664f.webp"},16887:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/7-2-507115d05dde9ee7153e86aee4aab382.webp"},17818:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/7-5-2642578ac627573fdf3c11b857ede8e3.webp"},28453:(n,e,i)=>{i.d(e,{R:()=>c,x:()=>r});var s=i(96540);const l={},t=s.createContext(l);function c(n){const e=s.useContext(t);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:c(n.components),s.createElement(t.Provider,{value:e},n.children)}},79510:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/7-1-ee07fb7469a91235960908885e04a2e4.webp"},93876:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/7-3-7b87a4500dbe9a13b56cf8a00b2d8e12.webp"}}]);