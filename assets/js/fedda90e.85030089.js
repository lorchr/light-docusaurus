"use strict";(self.webpackChunklight_docusaurus=self.webpackChunklight_docusaurus||[]).push([[26499],{56546:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>p});var a=t(74848),o=t(28453);const s={},i=void 0,r={id:"zh-cn/java/JVM-Stack-And Heap-Dump",title:"JVM-Stack-And Heap-Dump",description:"jstack",source:"@site/docs/zh-cn/java/15-JVM-Stack-And Heap-Dump.md",sourceDirName:"zh-cn/java",slug:"/zh-cn/java/JVM-Stack-And Heap-Dump",permalink:"/light-docusaurus/docs/zh-cn/java/JVM-Stack-And Heap-Dump",draft:!1,unlisted:!1,editUrl:"https://github.com/lorchr/light-docusaurus/tree/main/docs/zh-cn/java/15-JVM-Stack-And Heap-Dump.md",tags:[],version:"current",sidebarPosition:15,frontMatter:{},sidebar:"troch",previous:{title:"Java-Instrumentation-JavaAgent",permalink:"/light-docusaurus/docs/zh-cn/java/Java-Instrumentation-JavaAgent"},next:{title:"Http-Client-Skip-Https-Check",permalink:"/light-docusaurus/docs/zh-cn/java/Http-Client-Skip-Https-Check"}},c={},p=[{value:"jstack",id:"jstack",level:2},{value:"jstack\u7528\u6cd5",id:"jstack\u7528\u6cd5",level:3},{value:"dump\u6808\u4fe1\u606f",id:"dump\u6808\u4fe1\u606f",level:3},{value:"jmap",id:"jmap",level:2},{value:"jmap\u7528\u6cd5",id:"jmap\u7528\u6cd5",level:3},{value:"dump\u5806\u4fe1\u606f",id:"dump\u5806\u4fe1\u606f",level:3},{value:"jhat",id:"jhat",level:2},{value:"jhat\u7528\u6cd5",id:"jhat\u7528\u6cd5",level:3},{value:"jhat\u5206\u6790dump\u7684\u5806\u4fe1\u606f",id:"jhat\u5206\u6790dump\u7684\u5806\u4fe1\u606f",level:3}];function l(e){const n={code:"code",h2:"h2",h3:"h3",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"jstack",children:"jstack"}),"\n",(0,a.jsx)(n.h3,{id:"jstack\u7528\u6cd5",children:"jstack\u7528\u6cd5"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ /home/mobaxterm > jstack --help\nUsage:\n    jstack [-l] <pid>\n        (to connect to running process)\n    jstack -F [-m] [-l] <pid>\n        (to connect to a hung process)\n    jstack [-m] [-l] <executable> <core>\n        (to connect to a core file)\n    jstack [-m] [-l] [server_id@]<remote server IP or hostname>\n        (to connect to a remote debug server)\n\nOptions:\n    -F  to force a thread dump. Use when jstack <pid> does not respond (process is hung)\n    -m  to print both java and native frames (mixed mode)\n    -l  long listing. Prints additional information about locks\n    -h or -help to print this help message\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"dump\u6808\u4fe1\u606f",children:"dump\u6808\u4fe1\u606f"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"# dump\u6808\u4fe1\u606f\njstack -l <pid> > pid_stack.txt\n"})}),"\n",(0,a.jsx)(n.h2,{id:"jmap",children:"jmap"}),"\n",(0,a.jsx)(n.h3,{id:"jmap\u7528\u6cd5",children:"jmap\u7528\u6cd5"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:'$ /home/mobaxterm > jmap --help\nUsage:\n    jmap [option] <pid>\n        (to connect to running process)\n    jmap [option] <executable <core>\n        (to connect to a core file)\n    jmap [option] [server_id@]<remote server IP or hostname>\n        (to connect to remote debug server)\n\nwhere <option> is one of:\n    <none>               to print same info as Solaris pmap\n    -heap                to print java heap summary\n    -histo[:live]        to print histogram of java object heap; if the "live"\n                         suboption is specified, only count live objects\n    -clstats             to print class loader statistics\n    -finalizerinfo       to print information on objects awaiting finalization\n    -dump:<dump-options> to dump java heap in hprof binary format\n                         dump-options:\n                           live         dump only live objects; if not specified,\n                                        all objects in the heap are dumped.\n                           format=b     binary format\n                           file=<file>  dump heap to <file>\n                         Example: jmap -dump:live,format=b,file=heap.bin <pid>\n    -F                   force. Use with -dump:<dump-options> <pid> or -histo\n                         to force a heap dump or histogram when <pid> does not\n                         respond. The "live" suboption is not supported\n                         in this mode.\n    -h | -help           to print this help message\n    -J<flag>             to pass <flag> directly to the runtime system\n'})}),"\n",(0,a.jsx)(n.h3,{id:"dump\u5806\u4fe1\u606f",children:"dump\u5806\u4fe1\u606f"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"# dump\u5806\u4fe1\u606f  .log .bin .hprof\njmap -dump:live,format=b,file=pid_heap.hprof\n"})}),"\n",(0,a.jsx)(n.h2,{id:"jhat",children:"jhat"}),"\n",(0,a.jsx)(n.h3,{id:"jhat\u7528\u6cd5",children:"jhat\u7528\u6cd5"}),"\n",(0,a.jsx)(n.h3,{id:"jhat\u5206\u6790dump\u7684\u5806\u4fe1\u606f",children:"jhat\u5206\u6790dump\u7684\u5806\u4fe1\u606f"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"jhat -J-d64 -J-ms2g -J-mx4g -port 8999 heap.hprof\n"})})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>r});var a=t(96540);const o={},s=a.createContext(o);function i(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);