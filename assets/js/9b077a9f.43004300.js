"use strict";(self.webpackChunklight_docusaurus=self.webpackChunklight_docusaurus||[]).push([[7699],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),m=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},d=function(e){var t=m(e.components);return a.createElement(l.Provider,{value:t},e.children)},s="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),s=m(n),c=r,g=s["".concat(l,".").concat(c)]||s[c]||u[c]||o;return n?a.createElement(g,p(p({ref:t},d),{},{components:n})):a.createElement(g,p({ref:t},d))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,p=new Array(o);p[0]=c;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[s]="string"==typeof e?e:r,p[1]=i;for(var m=2;m<o;m++)p[m]=n[m];return a.createElement.apply(null,p)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},8287:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>p,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>m});var a=n(7462),r=(n(7294),n(3905));const o={},p=void 0,i={unversionedId:"zh-cn/spring-boot/file/PDF-Add-WaterPrint",id:"zh-cn/spring-boot/file/PDF-Add-WaterPrint",title:"PDF-Add-WaterPrint",description:"\u6765\u6e90\uff1ahttps://blog.csdn.net/m0_71777195/article/details/131283334",source:"@site/docs/zh-cn/spring-boot/file/PDF-Add-WaterPrint.md",sourceDirName:"zh-cn/spring-boot/file",slug:"/zh-cn/spring-boot/file/PDF-Add-WaterPrint",permalink:"/light-docusaurus/docs/zh-cn/spring-boot/file/PDF-Add-WaterPrint",draft:!1,editUrl:"https://github.com/lorchr/light-docusaurus/tree/main/docs/zh-cn/spring-boot/file/PDF-Add-WaterPrint.md",tags:[],version:"current",frontMatter:{},sidebar:"troch",previous:{title:"File",permalink:"/light-docusaurus/docs/category/file"},next:{title:"File-Upload-Split-Continue-on-Break",permalink:"/light-docusaurus/docs/zh-cn/spring-boot/file/File-Upload-Split-Continue-on-Break"}},l={},m=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u65b9\u5f0f\u4e00\uff1a\u4f7f\u7528 Apache PDFBox \u5e93",id:"\u65b9\u5f0f\u4e00\u4f7f\u7528-apache-pdfbox-\u5e93",level:2},{value:"\u6dfb\u52a0 PDFBox \u4f9d\u8d56",id:"\u6dfb\u52a0-pdfbox-\u4f9d\u8d56",level:3},{value:"\u6dfb\u52a0\u6c34\u5370",id:"\u6dfb\u52a0\u6c34\u5370",level:3},{value:"\u5b8c\u6574\u4ee3\u7801",id:"\u5b8c\u6574\u4ee3\u7801",level:3},{value:"\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528 iText \u5e93",id:"\u65b9\u5f0f\u4e8c\u4f7f\u7528-itext-\u5e93",level:2},{value:"\u6dfb\u52a0 iText \u4f9d\u8d56",id:"\u6dfb\u52a0-itext-\u4f9d\u8d56",level:3},{value:"\u6dfb\u52a0\u6c34\u5370",id:"\u6dfb\u52a0\u6c34\u5370-1",level:3},{value:"\u5b8c\u6574\u4ee3\u7801",id:"\u5b8c\u6574\u4ee3\u7801-1",level:3},{value:"\u65b9\u5f0f\u4e09\uff1a\u7528 Ghostscript \u547d\u4ee4\u884c",id:"\u65b9\u5f0f\u4e09\u7528-ghostscript-\u547d\u4ee4\u884c",level:2},{value:"\u6dfb\u52a0\u6c34\u5370",id:"\u6dfb\u52a0\u6c34\u5370-2",level:3},{value:"\u65b9\u5f0f\u56db\uff1aFree Spire.PDF for Java",id:"\u65b9\u5f0f\u56dbfree-spirepdf-for-java",level:2},{value:"\u6dfb\u52a0 Free Spire.PDF for Java \u4f9d\u8d56",id:"\u6dfb\u52a0-free-spirepdf-for-java-\u4f9d\u8d56",level:3},{value:"\u5b8c\u6574\u4ee3\u7801",id:"\u5b8c\u6574\u4ee3\u7801-2",level:3},{value:"\u65b9\u5f0f\u4e94\uff1aAspose.PDF for Java",id:"\u65b9\u5f0f\u4e94asposepdf-for-java",level:2},{value:"\u5b8c\u6574\u4ee3\u7801",id:"\u5b8c\u6574\u4ee3\u7801-3",level:3},{value:"\u7ed3\u8bba",id:"\u7ed3\u8bba",level:2}],d={toc:m},s="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(s,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"\u6765\u6e90\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://blog.csdn.net/m0_71777195/article/details/131283334"},"https://blog.csdn.net/m0_71777195/article/details/131283334")),(0,r.kt)("h2",{id:"\u7b80\u4ecb"},"\u7b80\u4ecb"),(0,r.kt)("p",null,"PDF\uff08Portable Document Format\uff0c\u4fbf\u643a\u5f0f\u6587\u6863\u683c\u5f0f\uff09\u662f\u4e00\u79cd\u6d41\u884c\u7684\u6587\u4ef6\u683c\u5f0f\uff0c\u5b83\u53ef\u4ee5\u5728\u591a\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u548c\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u67e5\u770b\u548c\u6253\u5370\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u9700\u8981\u5bf9 PDF \u6587\u4ef6\u6dfb\u52a0\u6c34\u5370\uff0c\u4ee5\u4f7f\u5176\u66f4\u5177\u6709\u8fa8\u8bc6\u5ea6\u6216\u8005\u4fdd\u62a4\u5176\u7248\u6743\u3002\u672c\u6587\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 Spring Boot \u6765\u5b9e\u73b0 PDF \u6dfb\u52a0\u6c34\u5370\u7684\u65b9\u5f0f\u3002"),(0,r.kt)("h2",{id:"\u65b9\u5f0f\u4e00\u4f7f\u7528-apache-pdfbox-\u5e93"},"\u65b9\u5f0f\u4e00\uff1a\u4f7f\u7528 Apache PDFBox \u5e93"),(0,r.kt)("p",null,"PDFBox \u662f\u4e00\u4e2a\u6d41\u884c\u7684\u3001\u514d\u8d39\u7684\u3001\u7528 Java \u7f16\u5199\u7684\u5e93\uff0c\u5b83\u53ef\u4ee5\u7528\u6765\u521b\u5efa\u3001\u4fee\u6539\u548c\u63d0\u53d6 PDF \u5185\u5bb9\u3002PDFBox \u63d0\u4f9b\u4e86\u8bb8\u591a API\uff0c\u5305\u62ec\u6dfb\u52a0\u6587\u672c\u6c34\u5370\u7684\u529f\u80fd\u3002"),(0,r.kt)("h3",{id:"\u6dfb\u52a0-pdfbox-\u4f9d\u8d56"},"\u6dfb\u52a0 PDFBox \u4f9d\u8d56"),(0,r.kt)("p",null,"\u9996\u5148\uff0c\u5728 pom.xml \u6587\u4ef6\u4e2d\u6dfb\u52a0 PDFBox \u7684\u4f9d\u8d56\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>org.apache.pdfbox</groupId>\n    <artifactId>pdfbox</artifactId>\n    <version>2.0.24</version>\n</dependency>\n")),(0,r.kt)("h3",{id:"\u6dfb\u52a0\u6c34\u5370"},"\u6dfb\u52a0\u6c34\u5370"),(0,r.kt)("p",null,'\u5728\u6dfb\u52a0\u6c34\u5370\u4e4b\u524d\uff0c\u9700\u8981\u8bfb\u53d6\u539f\u59cb PDF \u6587\u4ef6\uff1a\nPDDocument document = PDDocument.load(new File("original.pdf"));\n\u7136\u540e\uff0c\u904d\u5386 PDF \u4e2d\u7684\u6240\u6709\u9875\u9762\uff0c\u5e76\u4f7f\u7528 PDPageContentStream \u6dfb\u52a0\u6c34\u5370\uff1a'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'// \u904d\u5386 PDF \u4e2d\u7684\u6240\u6709\u9875\u9762\nfor (int i = 0; i < document.getNumberOfPages(); i++) {\n PDPage page = document.getPage(i);\n PDPageContentStream contentStream = new PDPageContentStream(document, page, PDPageContentStream.AppendMode.APPEND, true, true);\n // \u8bbe\u7f6e\u5b57\u4f53\u548c\u5b57\u53f7\n contentStream.setFont(PDType1Font.HELVETICA_BOLD, 36);\n // \u8bbe\u7f6e\u900f\u660e\u5ea6\n contentStream.setNonStrokingColor(200, 200, 200);\n // \u6dfb\u52a0\u6587\u672c\u6c34\u5370\n contentStream.beginText();\n contentStream.newLineAtOffset(100, 100); // \u8bbe\u7f6e\u6c34\u5370\u4f4d\u7f6e\n contentStream.showText("Watermark"); // \u8bbe\u7f6e\u6c34\u5370\u5185\u5bb9\n contentStream.endText();\n contentStream.close();\n}\n')),(0,r.kt)("p",null,"\u6700\u540e\uff0c\u9700\u8981\u4fdd\u5b58\u4fee\u6539\u540e\u7684 PDF \u6587\u4ef6\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'document.save(new File("output.pdf"));\ndocument.close();\n')),(0,r.kt)("h3",{id:"\u5b8c\u6574\u4ee3\u7801"},"\u5b8c\u6574\u4ee3\u7801"),(0,r.kt)("p",null,"\u4e0b\u9762\u662f\u4f7f\u7528 PDFBox \u6765\u5b9e\u73b0 PDF \u6dfb\u52a0\u6c34\u5370\u7684\u5b8c\u6574\u4ee3\u7801\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'import org.apache.pdfbox.pdmodel.PDDocument;\nimport org.apache.pdfbox.pdmodel.PDPage;\nimport org.apache.pdfbox.pdmodel.PDPageContentStream;\nimport org.apache.pdfbox.pdmodel.font.PDType1Font;\nimport java.io.File;\nimport java.io.IOException;\npublic class PdfBoxWatermark {\n public static void main(String[] args) throws IOException {\n // \u8bfb\u53d6\u539f\u59cb PDF \u6587\u4ef6\n PDDocument document = PDDocument.load(new File("original.pdf"));\n // \u904d\u5386 PDF \u4e2d\u7684\u6240\u6709\u9875\u9762\n for (int i = 0; i < document.getNumberOfPages(); i++) {\n PDPage page = document.getPage(i);\n PDPageContentStream contentStream = new PDPageContentStream(document, page, PDPageContentStream.AppendMode.APPEND, true, true);\n // \u8bbe\u7f6e\u5b57\u4f53\u548c\u5b57\u53f7\n contentStream.setFont(PDType1Font.HELVETICA_BOLD, 36);\n // \u8bbe\u7f6e\u900f\u660e\u5ea6\n contentStream.setNonStrokingColor(200, 200, 200);\n // \u6dfb\u52a0\u6587\u672c\u6c34\u5370\n contentStream.beginText();\n contentStream.newLineAtOffset(100, 100); // \u8bbe\u7f6e\u6c34\u5370\u4f4d\u7f6e\n contentStream.showText("Watermark"); // \u8bbe\u7f6e\u6c34\u5370\u5185\u5bb9\n contentStream.endText();\n contentStream.close();\n }\n // \u4fdd\u5b58\u4fee\u6539\u540e\u7684 PDF \u6587\u4ef6\n document.save(new File("output.pdf"));\n document.close();\n }\n}\n')),(0,r.kt)("h2",{id:"\u65b9\u5f0f\u4e8c\u4f7f\u7528-itext-\u5e93"},"\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528 iText \u5e93"),(0,r.kt)("p",null,"iText \u662f\u4e00\u6b3e\u6d41\u884c\u7684 Java PDF \u5e93\uff0c\u5b83\u53ef\u4ee5\u7528\u6765\u521b\u5efa\u3001\u8bfb\u53d6\u3001\u4fee\u6539\u548c\u63d0\u53d6 PDF \u5185\u5bb9\u3002iText \u63d0\u4f9b\u4e86\u8bb8\u591a API\uff0c\u5305\u62ec\u6dfb\u52a0\u6587\u672c\u6c34\u5370\u7684\u529f\u80fd\u3002"),(0,r.kt)("h3",{id:"\u6dfb\u52a0-itext-\u4f9d\u8d56"},"\u6dfb\u52a0 iText \u4f9d\u8d56"),(0,r.kt)("p",null,"\u5728 pom.xml \u6587\u4ef6\u4e2d\u6dfb\u52a0 iText \u7684\u4f9d\u8d56\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>com.itextpdf</groupId>\n    <artifactId>itextpdf</artifactId>\n    <version>5.5.13</version>\n</dependency>\n")),(0,r.kt)("h3",{id:"\u6dfb\u52a0\u6c34\u5370-1"},"\u6dfb\u52a0\u6c34\u5370"),(0,r.kt)("p",null,"\u5728\u6dfb\u52a0\u6c34\u5370\u4e4b\u524d\uff0c\u9700\u8981\u8bfb\u53d6\u539f\u59cb PDF \u6587\u4ef6\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'PdfReader reader = new PdfReader("original.pdf");\nPdfStamper stamper = new PdfStamper(reader, new FileOutputStream("output.pdf"));\n')),(0,r.kt)("p",null,"\u7136\u540e\uff0c\u904d\u5386 PDF \u4e2d\u7684\u6240\u6709\u9875\u9762\uff0c\u5e76\u4f7f\u7528 PdfContentByte \u6dfb\u52a0\u6c34\u5370\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'// \u83b7\u53d6 PDF \u4e2d\u7684\u9875\u6570\nint pageCount = reader.getNumberOfPages();\n// \u6dfb\u52a0\u6c34\u5370\nfor (int i = 1; i <= pageCount; i++) {\n PdfContentByte contentByte = stamper.getUnderContent(i); // \u6216\u8005 getOverContent()\n contentByte.beginText();\n contentByte.setFontAndSize(BaseFont.createFont(), 36f);\n contentByte.setColorFill(BaseColor.LIGHT_GRAY);\n contentByte.showTextAligned(Element.ALIGN_CENTER, "Watermark", 300, 400, 45);\n contentByte.endText();\n}\n')),(0,r.kt)("p",null,"\u6700\u540e\uff0c\u9700\u8981\u4fdd\u5b58\u4fee\u6539\u540e\u7684 PDF \u6587\u4ef6\u5e76\u5173\u95ed\u6587\u4ef6\u6d41\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"stamper.close();\nreader.close();\n")),(0,r.kt)("h3",{id:"\u5b8c\u6574\u4ee3\u7801-1"},"\u5b8c\u6574\u4ee3\u7801"),(0,r.kt)("p",null,"\u4e0b\u9762\u662f\u4f7f\u7528 iText \u6765\u5b9e\u73b0 PDF \u6dfb\u52a0\u6c34\u5370\u7684\u5b8c\u6574\u4ee3\u7801\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'import com.itextpdf.text.*;\nimport com.itextpdf.text.pdf.*;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\npublic class ItextWatermark {\n public static void main(String[] args) throws IOException, DocumentException {\n // \u8bfb\u53d6\u539f\u59cb PDF \u6587\u4ef6\n PdfReader reader = new PdfReader("original.pdf");\n PdfStamper stamper = new PdfStamper(reader, new FileOutputStream("output.pdf"));\n // \u83b7\u53d6 PDF \u4e2d\u7684\u9875\u6570\n int pageCount = reader.getNumberOfPages();\n // \u6dfb\u52a0\u6c34\u5370\n for (int i = 1; i <= pageCount; i++) {\n PdfContentByte contentByte = stamper.getUnderContent(i); // \u6216\u8005 getOverContent()\n contentByte.beginText();\n contentByte.setFontAndSize(BaseFont.createFont(), 36f);\n contentByte.setColorFill(BaseColor.LIGHT_GRAY);\n contentByte.showTextAligned(Element.ALIGN_CENTER, "Watermark", 300, 400, 45);\n contentByte.endText();\n }\n // \u4fdd\u5b58\u4fee\u6539\u540e\u7684 PDF \u6587\u4ef6\u5e76\u5173\u95ed\u6587\u4ef6\u6d41\n stamper.close();\n reader.close();\n }\n}\n')),(0,r.kt)("h2",{id:"\u65b9\u5f0f\u4e09\u7528-ghostscript-\u547d\u4ee4\u884c"},"\u65b9\u5f0f\u4e09\uff1a\u7528 Ghostscript \u547d\u4ee4\u884c"),(0,r.kt)("p",null,"Ghostscript \u662f\u4e00\u6b3e\u6d41\u884c\u7684\u3001\u514d\u8d39\u7684\u3001\u5f00\u6e90\u7684 PDF \u5904\u7406\u7a0b\u5e8f\uff0c\u5b83\u53ef\u4ee5\u7528\u6765\u521b\u5efa\u3001\u8bfb\u53d6\u3001\u4fee\u6539\u548c\u63d0\u53d6 PDF \u5185\u5bb9\u3002Ghostscript \u4e2d\u63d0\u4f9b\u4e86\u547d\u4ee4\u884c\u53c2\u6570\u6765\u6dfb\u52a0\u6c34\u5370\u3002\n\u9996\u5148\uff0c\u9700\u8981\u5728\u672c\u5730\u5b89\u88c5 Ghostscript \u7a0b\u5e8f\u3002\u53ef\u901a\u8fc7\u4ee5\u4e0b\u94fe\u63a5\u4e0b\u8f7d\u5b89\u88c5\u5305\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://www.ghostscript.com"},"https://www.ghostscript.com")),(0,r.kt)("h3",{id:"\u6dfb\u52a0\u6c34\u5370-2"},"\u6dfb\u52a0\u6c34\u5370"),(0,r.kt)("p",null,"\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528 Ghostscript \u7684\u547d\u4ee4\u884c\u5de5\u5177\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u5b9e\u73b0\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'gs -dBATCH -dNOPAUSE -sDEVICE=pdfwrite -sOutputFile=output.pdf -c "newpath /Helvetica-Bold findfont 36 scalefont setfont 0.5 setgray 200 200 moveto (Watermark) show showpage" original.pdf\n')),(0,r.kt)("p",null,"\u4e0a\u8ff0\u547d\u4ee4\u4e2d\uff0c-sDEVICE=pdfwrite \u8868\u793a\u8f93\u51fa\u4e3a PDF \u6587\u4ef6\uff1b-sOutputFile=output.pdf \u8868\u793a\u8f93\u51fa\u6587\u4ef6\u540d\u4e3a output.pdf\uff1b\u6700\u540e\u4e00\u4e2a\u53c2\u6570 original.pdf \u5219\u8868\u793a\u539f\u59cb PDF \u6587\u4ef6\u7684\u8def\u5f84\uff1b\u4e2d\u95f4\u7684\u5b57\u7b26\u4e32\u5219\u8868\u793a\u6dfb\u52a0\u7684\u6c34\u5370\u5185\u5bb9\u3002\n\u6ce8\u610f\u4e8b\u9879\n\u4f7f\u7528 Ghostscript \u547d\u4ee4\u884c\u6dfb\u52a0\u6c34\u5370\u65f6\uff0c\u4f1a\u76f4\u63a5\u4fee\u6539\u539f\u59cb PDF \u6587\u4ef6\uff0c\u56e0\u6b64\u5efa\u8bae\u5148\u5907\u4efd\u539f\u59cb\u6587\u4ef6\u3002"),(0,r.kt)("h2",{id:"\u65b9\u5f0f\u56dbfree-spirepdf-for-java"},"\u65b9\u5f0f\u56db\uff1aFree Spire.PDF for Java"),(0,r.kt)("p",null,"\u4e0b\u9762\u4ecb\u7ecd\u4e00\u4e0b\u4f7f\u7528 Free Spire.PDF for Java \u5b9e\u73b0 PDF \u6dfb\u52a0\u6c34\u5370\u7684\u65b9\u5f0f\u3002\nFree Spire.PDF for Java \u662f\u4e00\u6b3e\u514d\u8d39\u7684 Java PDF \u5e93\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7b80\u5355\u6613\u7528\u7684 API\uff0c\u7528\u4e8e\u521b\u5efa\u3001\u8bfb\u53d6\u3001\u4fee\u6539\u548c\u63d0\u53d6 PDF \u5185\u5bb9\u3002Free Spire.PDF for Java \u4e5f\u652f\u6301\u6dfb\u52a0\u6587\u672c\u6c34\u5370\u4ee5\u53ca\u56fe\u7247\u6c34\u5370\u3002\u53e6\u5916\uff0c\u641c\u7d22\u516c\u4f17\u53f7Linux\u5c31\u8be5\u8fd9\u6837\u5b66\u540e\u53f0\u56de\u590d\u201c\u7334\u5b50\u201d\uff0c\u83b7\u53d6\u4e00\u4efd\u60ca\u559c\u793c\u5305\u3002"),(0,r.kt)("h3",{id:"\u6dfb\u52a0-free-spirepdf-for-java-\u4f9d\u8d56"},"\u6dfb\u52a0 Free Spire.PDF for Java \u4f9d\u8d56"),(0,r.kt)("p",null,"\u9996\u5148\uff0c\u5728 pom.xml \u6587\u4ef6\u4e2d\u6dfb\u52a0 Free Spire.PDF for Java \u7684\u4f9d\u8d56\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>e-iceblue</groupId>\n    <artifactId>free-spire-pdf-for-java</artifactId>\n    <version>1.9.6</version>\n</dependency>\n")),(0,r.kt)("p",null,"\u6dfb\u52a0\u6587\u672c\u6c34\u5370"),(0,r.kt)("p",null,"\u5728\u6dfb\u52a0\u6c34\u5370\u4e4b\u524d\uff0c\u9700\u8981\u8bfb\u53d6\u539f\u59cb PDF \u6587\u4ef6\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'PdfDocument pdf = new PdfDocument();\npdf.loadFromFile("original.pdf");\n')),(0,r.kt)("p",null,"\u7136\u540e\uff0c\u904d\u5386 PDF \u4e2d\u7684\u6240\u6709\u9875\u9762\uff0c\u5e76\u4f7f\u7528 PdfPageBase \u6dfb\u52a0\u6c34\u5370\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'// \u904d\u5386 PDF \u4e2d\u7684\u6240\u6709\u9875\u9762\nfor (int i = 0; i < pdf.getPages().getCount(); i++) {\n PdfPageBase page = pdf.getPages().get(i);\n // \u6dfb\u52a0\u6587\u672c\u6c34\u5370\n PdfWatermark watermark = new PdfWatermark("Watermark");\n watermark.setFont(new PdfFont(PdfFontFamily.Helvetica, 36));\n watermark.setOpacity(0.5f);\n page.getWatermarks().add(watermark);\n}\n')),(0,r.kt)("p",null,"\u6700\u540e\uff0c\u9700\u8981\u4fdd\u5b58\u4fee\u6539\u540e\u7684 PDF \u6587\u4ef6\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'pdf.saveToFile("output.pdf");\npdf.close();\n')),(0,r.kt)("p",null,"\u6dfb\u52a0\u56fe\u7247\u6c34\u5370\n\u6dfb\u52a0\u56fe\u7247\u6c34\u5370\u4e0e\u6dfb\u52a0\u6587\u672c\u6c34\u5370\u7c7b\u4f3c\uff0c\u53ea\u9700\u8981\u5c06 PdfWatermark \u7684\u53c2\u6570\u4fee\u6539\u4e3a\u56fe\u7247\u8def\u5f84\u5373\u53ef\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'// \u6dfb\u52a0\u56fe\u7247\u6c34\u5370\nPdfWatermark watermark = new PdfWatermark("watermark.png");\nwatermark.setOpacity(0.5f);\npage.getWatermarks().add(watermark);\n')),(0,r.kt)("h3",{id:"\u5b8c\u6574\u4ee3\u7801-2"},"\u5b8c\u6574\u4ee3\u7801"),(0,r.kt)("p",null,"\u4e0b\u9762\u662f\u4f7f\u7528 Free Spire.PDF for Java \u6765\u5b9e\u73b0 PDF \u6dfb\u52a0\u6c34\u5370\u7684\u5b8c\u6574\u4ee3\u7801\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'import com.spire.pdf.*;\npublic class FreeSpirePdfWatermark {\n public static void main(String[] args) {\n // \u8bfb\u53d6\u539f\u59cb PDF \u6587\u4ef6\n PdfDocument pdf = new PdfDocument();\n pdf.loadFromFile("original.pdf");\n // \u904d\u5386 PDF \u4e2d\u7684\u6240\u6709\u9875\u9762\n for (int i = 0; i < pdf.getPages().getCount(); i++) {\n PdfPageBase page = pdf.getPages().get(i);\n // \u6dfb\u52a0\u6587\u672c\u6c34\u5370\n PdfWatermark watermark = new PdfWatermark("Watermark");\n watermark.setFont(new PdfFont(PdfFontFamily.Helvetica, 36));\n watermark.setOpacity(0.5f);\n page.getWatermarks().add(watermark);\n // \u6dfb\u52a0\u56fe\u7247\u6c34\u5370\n // PdfWatermark watermark = new PdfWatermark("watermark.png");\n // watermark.setOpacity(0.5f);\n // page.getWatermarks().add(watermark);\n }\n // \u4fdd\u5b58\u4fee\u6539\u540e\u7684 PDF \u6587\u4ef6\n pdf.saveToFile("output.pdf");\n pdf.close();\n }\n}\n')),(0,r.kt)("h2",{id:"\u65b9\u5f0f\u4e94asposepdf-for-java"},"\u65b9\u5f0f\u4e94\uff1aAspose.PDF for Java"),(0,r.kt)("p",null,"Aspose.PDF for Java \u662f\u4e00\u4e2a\u5f3a\u5927\u7684 PDF \u5904\u7406\u5e93\uff0c\u63d0\u4f9b\u4e86\u6dfb\u52a0\u6c34\u5370\u7684\u529f\u80fd\u3002\u7ed3\u5408 Spring Boot \u4f7f\u7528 Aspose.PDF for Java \u5e93\u6dfb\u52a0 PDF \u6c34\u5370\u7684\u65b9\u5f0f\u5982\u4e0b\uff1a\n\u9996\u5148\uff0c\u5728 pom.xml \u6587\u4ef6\u4e2d\u6dfb\u52a0 Aspose.PDF for Java \u7684\u4f9d\u8d56\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>com.aspose</groupId>\n    <artifactId>aspose-pdf</artifactId>\n    <version>21.4</version>\n</dependency>\n")),(0,r.kt)("p",null,"\u5728 Spring Boot \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528 Aspose.PDF for Java \u7684 API \u8bbe\u7f6e PDF \u6c34\u5370\u3002\n\u6dfb\u52a0\u6587\u672c\u6c34\u5370"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@PostMapping("/addTextWatermark")\npublic ResponseEntity addTextWatermark(@RequestParam("file") MultipartFile file) throws IOException {\n // \u52a0\u8f7d PDF \u6587\u4ef6\n Document pdfDocument = new Document(file.getInputStream());\n TextStamp textStamp = new TextStamp("Watermark");\n textStamp.setWordWrap(true);\n textStamp.setVerticalAlignment(VerticalAlignment.Center);\n textStamp.setHorizontalAlignment(HorizontalAlignment.Center);\n pdfDocument.getPages().get_Item(1).addStamp(textStamp);\n // \u4fdd\u5b58 PDF \u6587\u4ef6\n ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n pdfDocument.save(outputStream);\n return ResponseEntity.ok()\n .header(HttpHeaders.CONTENT_DISPOSITION, "attachment; filename=\\"watermarked.pdf\\"")\n .contentType(MediaType.APPLICATION_PDF)\n .body(outputStream.toByteArray());\n}\n')),(0,r.kt)("p",null,"\u6dfb\u52a0\u56fe\u7247\u6c34\u5370"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@PostMapping("/addImageWatermark")\npublic ResponseEntity addImageWatermark(@RequestParam("file") MultipartFile file) throws IOException {\n // \u52a0\u8f7d PDF \u6587\u4ef6\n Document pdfDocument = new Document(file.getInputStream());\n ImageStamp imageStamp = new ImageStamp("watermark.png");\n imageStamp.setWidth(100);\n imageStamp.setHeight(100);\n imageStamp.setVerticalAlignment(VerticalAlignment.Center);\n imageStamp.setHorizontalAlignment(HorizontalAlignment.Center);\n pdfDocument.getPages().get_Item(1).addStamp(imageStamp);\n // \u4fdd\u5b58 PDF \u6587\u4ef6\n ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n pdfDocument.save(outputStream);\n return ResponseEntity.ok()\n .header(HttpHeaders.CONTENT_DISPOSITION, "attachment; filename=\\"watermarked.pdf\\"")\n .contentType(MediaType.APPLICATION_PDF)\n .body(outputStream.toByteArray());\n}\n')),(0,r.kt)("p",null,"\u6ce8\u610f\uff0c\u4ee5\u4e0a\u4ee3\u7801\u4e2d\u7684\u6587\u4ef6\u540d\u3001\u5bbd\u5ea6\u3001\u9ad8\u5ea6\u7b49\u53c2\u6570\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u8c03\u6574\u3002"),(0,r.kt)("h3",{id:"\u5b8c\u6574\u4ee3\u7801-3"},"\u5b8c\u6574\u4ee3\u7801"),(0,r.kt)("p",null,"\u5b8c\u6574\u7684 Spring Boot \u63a7\u5236\u5668\u7c7b\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'import com.aspose.pdf.*;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.multipart.MultipartFile;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\n@RestController\n@RequestMapping("/api/pdf")\npublic class PdfController {\n @PostMapping("/addTextWatermark")\n public ResponseEntity addTextWatermark(@RequestParam("file") MultipartFile file) throws IOException {\n // \u52a0\u8f7d PDF \u6587\u4ef6\n Document pdfDocument = new Document(file.getInputStream());\n TextStamp textStamp = new TextStamp("Watermark");\n textStamp.setWordWrap(true);\n textStamp.setVerticalAlignment(VerticalAlignment.Center);\n textStamp.setHorizontalAlignment(HorizontalAlignment.Center);\n pdfDocument.getPages().get_Item(1).addStamp(textStamp);\n // \u4fdd\u5b58 PDF \u6587\u4ef6\n ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n pdfDocument.save(outputStream);\n return ResponseEntity.ok()\n .header(HttpHeaders.CONTENT_DISPOSITION, "attachment; filename=\\"watermarked.pdf\\"")\n .contentType(MediaType.APPLICATION_PDF)\n .body(outputStream.toByteArray());\n }\n @PostMapping("/addImageWatermark")\n public ResponseEntity addImageWatermark(@RequestParam("file") MultipartFile file) throws IOException {\n // \u52a0\u8f7d PDF \u6587\u4ef6\n Document pdfDocument = new Document(file.getInputStream());\n ImageStamp imageStamp = new ImageStamp("watermark.png");\n imageStamp.setWidth(100);\n imageStamp.setHeight(100);\n imageStamp.setVerticalAlignment(VerticalAlignment.Center);\n imageStamp.setHorizontalAlignment(HorizontalAlignment.Center);\n pdfDocument.getPages().get_Item(1).addStamp(imageStamp);\n // \u4fdd\u5b58 PDF \u6587\u4ef6\n ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n pdfDocument.save(outputStream);\n return ResponseEntity.ok()\n .header(HttpHeaders.CONTENT_DISPOSITION, "attachment; filename=\\"watermarked.pdf\\"")\n .contentType(MediaType.APPLICATION_PDF)\n .body(outputStream.toByteArray());\n }\n}\n')),(0,r.kt)("p",null,"\u8fd9\u91cc\u4f7f\u7528\u4e86\u4e24\u4e2a RESTful API\uff1a/addTextWatermark \u548c /addImageWatermark\uff0c\u5206\u522b\u7528\u4e8e\u6dfb\u52a0\u6587\u672c\u6c34\u5370\u548c\u56fe\u7247\u6c34\u5370\u3002\u5728\u8bf7\u6c42\u4e2d\u901a\u8fc7 file \u53c2\u6570\u4f20\u9012 PDF \u6587\u4ef6\u3002\n\u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 Postman \u6765\u6d4b\u8bd5 Spring Boot \u5e94\u7528\u7a0b\u5e8f\u7684 API\u3002\n\u4e0b\u8f7d\u5e76\u5b89\u88c5 Postman\u3002\n\u6253\u5f00 Postman\uff0c\u9009\u62e9 POST \u8bf7\u6c42\u65b9\u6cd5\u3002\n\u5728 URL \u5730\u5740\u680f\u4e2d\u8f93\u5165 http://localhost:8080/api/pdf/addTextWatermark\u3002\n\u5728 Headers \u6807\u7b7e\u9875\u4e2d\u8bbe\u7f6e Content-Type \u4e3a multipart/form-data\u3002\n\u5728 Body \u6807\u7b7e\u9875\u4e2d\u9009\u62e9 form-data \u7c7b\u578b\uff0c\u7136\u540e\u8bbe\u7f6e key \u4e3a file\uff0cvalue \u9009\u62e9\u672c\u5730\u7684 PDF \u6587\u4ef6\u3002\n\u70b9\u51fb Send \u6309\u94ae\u53d1\u9001\u8bf7\u6c42\uff0c\u7b49\u5f85\u5e94\u7b54\u7ed3\u679c\u3002\n\u5904\u7406\u7ed3\u679c\u5c06\u4f1a\u5728\u54cd\u5e94\u7684 Body \u4e2d\u8fd4\u56de\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u6d4f\u89c8\u5668\u4e0b\u8f7d\u6216\u4fdd\u5b58\u5230\u672c\u5730\u78c1\u76d8\u3002\n\u4ee5\u4e0a\u5c31\u662f\u4f7f\u7528 Aspose.PDF for Java \u5e93\u7ed3\u5408 Spring Boot \u6dfb\u52a0 PDF \u6c34\u5370\u7684\u65b9\u5f0f\u3002"),(0,r.kt)("h2",{id:"\u7ed3\u8bba"},"\u7ed3\u8bba"),(0,r.kt)("p",null,"\u672c\u6587\u4ecb\u7ecd\u4e86\u51e0\u79cd\u4f7f\u7528 Spring Boot \u5b9e\u73b0 PDF \u6dfb\u52a0\u6c34\u5370\u7684\u65b9\u5f0f\uff0c\u5206\u522b\u662f\u4f7f\u7528 Apache PDFBox \u5e93\u3001iText \u5e93\u4ee5\u53ca Ghostscript \u547d\u4ee4\u884c\u7b49\u3002\u9009\u62e9\u54ea\u79cd\u65b9\u5f0f\uff0c\u53ef\u4ee5\u6839\u636e\u9879\u76ee\u9700\u6c42\u548c\u4e2a\u4eba\u504f\u597d\u6765\u51b3\u5b9a\u3002\u65e0\u8bba\u91c7\u7528\u54ea\u79cd\u65b9\u5f0f\uff0c\u90fd\u9700\u8981\u6ce8\u610f\u4fdd\u62a4\u539f\u59cb PDF \u6587\u4ef6\uff0c\u4e0d\u8981\u5728\u4e0d\u5fc5\u8981\u7684\u60c5\u51b5\u4e0b\u76f4\u63a5\u4fee\u6539\u539f\u59cb\u6587\u4ef6\u3002"))}u.isMDXComponent=!0}}]);