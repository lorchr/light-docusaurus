"use strict";(self.webpackChunklight_docusaurus=self.webpackChunklight_docusaurus||[]).push([[9482],{5904:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var a=t(85893),r=t(11151);const o={},i=void 0,s={id:"zh-cn/spring-boot/file/PDF-Add-WaterMark",title:"PDF-Add-WaterMark",description:"- SpringBoot \u5b9e\u73b0 PDF \u6dfb\u52a0\u6c34\u5370\u6709\u54ea\u4e9b\u65b9\u6848",source:"@site/docs/zh-cn/spring-boot/file/4-PDF-Add-WaterMark.md",sourceDirName:"zh-cn/spring-boot/file",slug:"/zh-cn/spring-boot/file/PDF-Add-WaterMark",permalink:"/light-docusaurus/docs/zh-cn/spring-boot/file/PDF-Add-WaterMark",draft:!1,unlisted:!1,editUrl:"https://github.com/lorchr/light-docusaurus/tree/main/docs/zh-cn/spring-boot/file/4-PDF-Add-WaterMark.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"troch",previous:{title:"Image-Add-Watermark",permalink:"/light-docusaurus/docs/zh-cn/spring-boot/file/Image-Add-Watermark"},next:{title:"SliceUpload",permalink:"/light-docusaurus/docs/zh-cn/spring-boot/file/SliceUpload"}},d={},l=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u65b9\u5f0f\u4e00\uff1a\u4f7f\u7528 Apache PDFBox \u5e93",id:"\u65b9\u5f0f\u4e00\u4f7f\u7528-apache-pdfbox-\u5e93",level:3},{value:"\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528 iText \u5e93",id:"\u65b9\u5f0f\u4e8c\u4f7f\u7528-itext-\u5e93",level:3},{value:"\u65b9\u5f0f\u4e09\uff1a\u7528 Ghostscript \u547d\u4ee4\u884c",id:"\u65b9\u5f0f\u4e09\u7528-ghostscript-\u547d\u4ee4\u884c",level:3},{value:"\u65b9\u5f0f\u56db\uff1aFree Spire.PDF for Java",id:"\u65b9\u5f0f\u56dbfree-spirepdf-for-java",level:3},{value:"\u65b9\u5f0f\u4e94\uff1aAspose.PDF for Java",id:"\u65b9\u5f0f\u4e94asposepdf-for-java",level:3},{value:"\u7ed3\u8bba",id:"\u7ed3\u8bba",level:2}];function p(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.ah)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://blog.csdn.net/m0_71777195/article/details/131283334",children:"SpringBoot \u5b9e\u73b0 PDF \u6dfb\u52a0\u6c34\u5370\u6709\u54ea\u4e9b\u65b9\u6848"})}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"}),"\n",(0,a.jsx)(n.p,{children:"PDF\uff08Portable Document Format\uff0c\u4fbf\u643a\u5f0f\u6587\u6863\u683c\u5f0f\uff09\u662f\u4e00\u79cd\u6d41\u884c\u7684\u6587\u4ef6\u683c\u5f0f\uff0c\u5b83\u53ef\u4ee5\u5728\u591a\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u548c\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u67e5\u770b\u548c\u6253\u5370\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u9700\u8981\u5bf9 PDF \u6587\u4ef6\u6dfb\u52a0\u6c34\u5370\uff0c\u4ee5\u4f7f\u5176\u66f4\u5177\u6709\u8fa8\u8bc6\u5ea6\u6216\u8005\u4fdd\u62a4\u5176\u7248\u6743\u3002\u672c\u6587\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 Spring Boot \u6765\u5b9e\u73b0 PDF \u6dfb\u52a0\u6c34\u5370\u7684\u65b9\u5f0f\u3002"}),"\n",(0,a.jsx)(n.h3,{id:"\u65b9\u5f0f\u4e00\u4f7f\u7528-apache-pdfbox-\u5e93",children:"\u65b9\u5f0f\u4e00\uff1a\u4f7f\u7528 Apache PDFBox \u5e93"}),"\n",(0,a.jsx)(n.p,{children:"PDFBox \u662f\u4e00\u4e2a\u6d41\u884c\u7684\u3001\u514d\u8d39\u7684\u3001\u7528 Java \u7f16\u5199\u7684\u5e93\uff0c\u5b83\u53ef\u4ee5\u7528\u6765\u521b\u5efa\u3001\u4fee\u6539\u548c\u63d0\u53d6 PDF \u5185\u5bb9\u3002PDFBox \u63d0\u4f9b\u4e86\u8bb8\u591a API\uff0c\u5305\u62ec\u6dfb\u52a0\u6587\u672c\u6c34\u5370\u7684\u529f\u80fd\u3002"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"\u6dfb\u52a0 PDFBox \u4f9d\u8d56\n\u9996\u5148\uff0c\u5728 pom.xml \u6587\u4ef6\u4e2d\u6dfb\u52a0 PDFBox \u7684\u4f9d\u8d56\uff1a"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.apache.pdfbox</groupId>\n    <artifactId>pdfbox</artifactId>\n    <version>2.0.24</version>\n</dependency>\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"\u6dfb\u52a0\u6c34\u5370\n\u5728\u6dfb\u52a0\u6c34\u5370\u4e4b\u524d\uff0c\u9700\u8981\u8bfb\u53d6\u539f\u59cb PDF \u6587\u4ef6\uff1a"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'PDDocument document = PDDocument.load(new File("original.pdf"));\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u7136\u540e\uff0c\u904d\u5386 PDF \u4e2d\u7684\u6240\u6709\u9875\u9762\uff0c\u5e76\u4f7f\u7528 PDPageContentStream \u6dfb\u52a0\u6c34\u5370\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// \u904d\u5386 PDF \u4e2d\u7684\u6240\u6709\u9875\u9762\nfor (int i = 0; i < document.getNumberOfPages(); i++) {\n    PDPage page = document.getPage(i);\n    PDPageContentStream contentStream = new PDPageContentStream(document, page, PDPageContentStream.AppendMode.APPEND, true, true);\n\n    // \u8bbe\u7f6e\u5b57\u4f53\u548c\u5b57\u53f7\n    contentStream.setFont(PDType1Font.HELVETICA_BOLD, 36);\n\n    // \u8bbe\u7f6e\u900f\u660e\u5ea6\n    contentStream.setNonStrokingColor(200, 200, 200);\n\n    // \u6dfb\u52a0\u6587\u672c\u6c34\u5370\n    contentStream.beginText();\n    contentStream.newLineAtOffset(100, 100); // \u8bbe\u7f6e\u6c34\u5370\u4f4d\u7f6e\n    contentStream.showText("Watermark"); // \u8bbe\u7f6e\u6c34\u5370\u5185\u5bb9\n    contentStream.endText();\n\n    contentStream.close();\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u6700\u540e\uff0c\u9700\u8981\u4fdd\u5b58\u4fee\u6539\u540e\u7684 PDF \u6587\u4ef6\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'document.save(new File("output.pdf"));\ndocument.close();\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"\u5b8c\u6574\u4ee3\u7801\n\u4e0b\u9762\u662f\u4f7f\u7528 PDFBox \u6765\u5b9e\u73b0 PDF \u6dfb\u52a0\u6c34\u5370\u7684\u5b8c\u6574\u4ee3\u7801\uff1a"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'import org.apache.pdfbox.pdmodel.PDDocument;\nimport org.apache.pdfbox.pdmodel.PDPage;\nimport org.apache.pdfbox.pdmodel.PDPageContentStream;\nimport org.apache.pdfbox.pdmodel.font.PDType1Font;\n\nimport java.io.File;\nimport java.io.IOException;\n\npublic class PdfBoxWatermark {\n    public static void main(String[] args) throws IOException {\n        // \u8bfb\u53d6\u539f\u59cb PDF \u6587\u4ef6\n        PDDocument document = PDDocument.load(new File("original.pdf"));\n\n        // \u904d\u5386 PDF \u4e2d\u7684\u6240\u6709\u9875\u9762\n        for (int i = 0; i < document.getNumberOfPages(); i++) {\n            PDPage page = document.getPage(i);\n            PDPageContentStream contentStream = new PDPageContentStream(document, page, PDPageContentStream.AppendMode.APPEND, true, true);\n\n            // \u8bbe\u7f6e\u5b57\u4f53\u548c\u5b57\u53f7\n            contentStream.setFont(PDType1Font.HELVETICA_BOLD, 36);\n\n            // \u8bbe\u7f6e\u900f\u660e\u5ea6\n            contentStream.setNonStrokingColor(200, 200, 200);\n\n            // \u6dfb\u52a0\u6587\u672c\u6c34\u5370\n            contentStream.beginText();\n            contentStream.newLineAtOffset(100, 100); // \u8bbe\u7f6e\u6c34\u5370\u4f4d\u7f6e\n            contentStream.showText("Watermark"); // \u8bbe\u7f6e\u6c34\u5370\u5185\u5bb9\n            contentStream.endText();\n\n            contentStream.close();\n        }\n\n        // \u4fdd\u5b58\u4fee\u6539\u540e\u7684 PDF \u6587\u4ef6\n        document.save(new File("output.pdf"));\n        document.close();\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u65b9\u5f0f\u4e8c\u4f7f\u7528-itext-\u5e93",children:"\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528 iText \u5e93"}),"\n",(0,a.jsx)(n.p,{children:"iText \u662f\u4e00\u6b3e\u6d41\u884c\u7684 Java PDF \u5e93\uff0c\u5b83\u53ef\u4ee5\u7528\u6765\u521b\u5efa\u3001\u8bfb\u53d6\u3001\u4fee\u6539\u548c\u63d0\u53d6 PDF \u5185\u5bb9\u3002iText \u63d0\u4f9b\u4e86\u8bb8\u591a API\uff0c\u5305\u62ec\u6dfb\u52a0\u6587\u672c\u6c34\u5370\u7684\u529f\u80fd\u3002"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"\u6dfb\u52a0 iText \u4f9d\u8d56\n\u5728 pom.xml \u6587\u4ef6\u4e2d\u6dfb\u52a0 iText \u7684\u4f9d\u8d56\uff1a"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>com.itextpdf</groupId>\n    <artifactId>itextpdf</artifactId>\n    <version>5.5.13</version>\n</dependency>\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"\u6dfb\u52a0\u6c34\u5370\n\u5728\u6dfb\u52a0\u6c34\u5370\u4e4b\u524d\uff0c\u9700\u8981\u8bfb\u53d6\u539f\u59cb PDF \u6587\u4ef6\uff1a"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'PdfReader reader = new PdfReader("original.pdf");\nPdfStamper stamper = new PdfStamper(reader, new FileOutputStream("output.pdf"));\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u7136\u540e\uff0c\u904d\u5386 PDF \u4e2d\u7684\u6240\u6709\u9875\u9762\uff0c\u5e76\u4f7f\u7528 PdfContentByte \u6dfb\u52a0\u6c34\u5370\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// \u83b7\u53d6 PDF \u4e2d\u7684\u9875\u6570\nint pageCount = reader.getNumberOfPages();\n\n// \u6dfb\u52a0\u6c34\u5370\nfor (int i = 1; i <= pageCount; i++) {\n    PdfContentByte contentByte = stamper.getUnderContent(i); // \u6216\u8005 getOverContent()\n    contentByte.beginText();\n    contentByte.setFontAndSize(BaseFont.createFont(), 36f);\n    contentByte.setColorFill(BaseColor.LIGHT_GRAY);\n    contentByte.showTextAligned(Element.ALIGN_CENTER, "Watermark", 300, 400, 45);\n    contentByte.endText();\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u6700\u540e\uff0c\u9700\u8981\u4fdd\u5b58\u4fee\u6539\u540e\u7684 PDF \u6587\u4ef6\u5e76\u5173\u95ed\u6587\u4ef6\u6d41\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"stamper.close();\nreader.close();\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"\u5b8c\u6574\u4ee3\u7801\n\u4e0b\u9762\u662f\u4f7f\u7528 iText \u6765\u5b9e\u73b0 PDF \u6dfb\u52a0\u6c34\u5370\u7684\u5b8c\u6574\u4ee3\u7801\uff1a"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'import com.itextpdf.text.*;\nimport com.itextpdf.text.pdf.*;\n\nimport java.io.FileOutputStream;\nimport java.io.IOException;\n\npublic class ItextWatermark {\n    public static void main(String[] args) throws IOException, DocumentException {\n        // \u8bfb\u53d6\u539f\u59cb PDF \u6587\u4ef6\n        PdfReader reader = new PdfReader("original.pdf");\n        PdfStamper stamper = new PdfStamper(reader, new FileOutputStream("output.pdf"));\n\n        // \u83b7\u53d6 PDF \u4e2d\u7684\u9875\u6570\n        int pageCount = reader.getNumberOfPages();\n\n        // \u6dfb\u52a0\u6c34\u5370\n        for (int i = 1; i <= pageCount; i++) {\n            PdfContentByte contentByte = stamper.getUnderContent(i); // \u6216\u8005 getOverContent()\n            contentByte.beginText();\n            contentByte.setFontAndSize(BaseFont.createFont(), 36f);\n            contentByte.setColorFill(BaseColor.LIGHT_GRAY);\n            contentByte.showTextAligned(Element.ALIGN_CENTER, "Watermark", 300, 400, 45);\n            contentByte.endText();\n        }\n\n        // \u4fdd\u5b58\u4fee\u6539\u540e\u7684 PDF \u6587\u4ef6\u5e76\u5173\u95ed\u6587\u4ef6\u6d41\n        stamper.close();\n        reader.close();\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u65b9\u5f0f\u4e09\u7528-ghostscript-\u547d\u4ee4\u884c",children:"\u65b9\u5f0f\u4e09\uff1a\u7528 Ghostscript \u547d\u4ee4\u884c"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://ghostscript.com/",children:"Ghostscript"})," \u662f\u4e00\u6b3e\u6d41\u884c\u7684\u3001\u514d\u8d39\u7684\u3001\u5f00\u6e90\u7684 PDF \u5904\u7406\u7a0b\u5e8f\uff0c\u5b83\u53ef\u4ee5\u7528\u6765\u521b\u5efa\u3001\u8bfb\u53d6\u3001\u4fee\u6539\u548c\u63d0\u53d6 PDF \u5185\u5bb9\u3002Ghostscript \u4e2d\u63d0\u4f9b\u4e86\u547d\u4ee4\u884c\u53c2\u6570\u6765\u6dfb\u52a0\u6c34\u5370\u3002"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Ghostscript\n\u9996\u5148\u9700\u8981\u5728\u672c\u5730\u5b89\u88c5 Ghostscript \u7a0b\u5e8f\u3002\u53ef\u901a\u8fc7\u4ee5\u4e0b\u94fe\u63a5",(0,a.jsx)(n.a,{href:"https://ghostscript.com/releases/gsdnld.html",children:"\u4e0b\u8f7d\u5b89\u88c5\u5305"}),"\uff1a"]}),"\n"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs10020/gs10020w64.exe",children:"Windows"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs10020/gs_10.02.0_amd64_snap.tgz",children:"MacOS"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs10020/gs_10.02.0_amd64_snap.tgz",children:"Linux"})}),"\n"]}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsxs)(n.li,{children:["\u6dfb\u52a0\u6c34\u5370\n\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"Ghostscript"})," \u7684\u547d\u4ee4\u884c\u5de5\u5177\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u5b9e\u73b0\uff1a"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:'gs -dBATCH -dNOPAUSE -sDEVICE=pdfwrite -sOutputFile=output.pdf -c "newpath /Helvetica-Bold findfont 36 scalefont setfont 0.5 setgray 200 200 moveto (Watermark) show showpage" original.pdf\n'})}),"\n",(0,a.jsxs)(n.p,{children:["\u4e0a\u8ff0\u547d\u4ee4\u4e2d\uff0c",(0,a.jsx)(n.code,{children:"-sDEVICE=pdfwrite"})," \u8868\u793a\u8f93\u51fa\u4e3a PDF \u6587\u4ef6\uff1b",(0,a.jsx)(n.code,{children:"-sOutputFile=output.pdf"})," \u8868\u793a\u8f93\u51fa\u6587\u4ef6\u540d\u4e3a ",(0,a.jsx)(n.code,{children:"output.pdf"}),"\uff1b\u6700\u540e\u4e00\u4e2a\u53c2\u6570 ",(0,a.jsx)(n.code,{children:"original.pdf"})," \u5219\u8868\u793a\u539f\u59cb PDF \u6587\u4ef6\u7684\u8def\u5f84\uff1b\u4e2d\u95f4\u7684\u5b57\u7b26\u4e32\u5219\u8868\u793a\u6dfb\u52a0\u7684\u6c34\u5370\u5185\u5bb9\u3002"]}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsxs)(n.li,{children:["\u6ce8\u610f\u4e8b\u9879\n\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"Ghostscript"})," \u547d\u4ee4\u884c\u6dfb\u52a0\u6c34\u5370\u65f6\uff0c\u4f1a\u76f4\u63a5\u4fee\u6539\u539f\u59cb PDF \u6587\u4ef6\uff0c\u56e0\u6b64\u5efa\u8bae\u5148\u5907\u4efd\u539f\u59cb\u6587\u4ef6\u3002"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"\u65b9\u5f0f\u56dbfree-spirepdf-for-java",children:"\u65b9\u5f0f\u56db\uff1aFree Spire.PDF for Java"}),"\n",(0,a.jsx)(n.p,{children:"\u4e0b\u9762\u4ecb\u7ecd\u4e00\u4e0b\u4f7f\u7528 Free Spire.PDF for Java \u5b9e\u73b0 PDF \u6dfb\u52a0\u6c34\u5370\u7684\u65b9\u5f0f\u3002"}),"\n",(0,a.jsx)(n.p,{children:"Free Spire.PDF for Java \u662f\u4e00\u6b3e\u514d\u8d39\u7684 Java PDF \u5e93\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7b80\u5355\u6613\u7528\u7684 API\uff0c\u7528\u4e8e\u521b\u5efa\u3001\u8bfb\u53d6\u3001\u4fee\u6539\u548c\u63d0\u53d6 PDF \u5185\u5bb9\u3002Free Spire.PDF for Java \u4e5f\u652f\u6301\u6dfb\u52a0\u6587\u672c\u6c34\u5370\u4ee5\u53ca\u56fe\u7247\u6c34\u5370\u3002"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"\u6dfb\u52a0 Free Spire.PDF for Java \u4f9d\u8d56\n\u9996\u5148\uff0c\u5728 pom.xml \u6587\u4ef6\u4e2d\u6dfb\u52a0 Free Spire.PDF for Java \u7684\u4f9d\u8d56\uff1a"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>e-iceblue</groupId>\n    <artifactId>free-spire-pdf-for-java</artifactId>\n    <version>1.9.6</version>\n</dependency>\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"\u6dfb\u52a0\u6587\u672c\u6c34\u5370\n\u5728\u6dfb\u52a0\u6c34\u5370\u4e4b\u524d\uff0c\u9700\u8981\u8bfb\u53d6\u539f\u59cb PDF \u6587\u4ef6\uff1a"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'PdfDocument pdf = new PdfDocument();\npdf.loadFromFile("original.pdf");\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u7136\u540e\uff0c\u904d\u5386 PDF \u4e2d\u7684\u6240\u6709\u9875\u9762\uff0c\u5e76\u4f7f\u7528 PdfPageBase \u6dfb\u52a0\u6c34\u5370\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// \u904d\u5386 PDF \u4e2d\u7684\u6240\u6709\u9875\u9762\nfor (int i = 0; i < pdf.getPages().getCount(); i++) {\n    PdfPageBase page = pdf.getPages().get(i);\n\n    // \u6dfb\u52a0\u6587\u672c\u6c34\u5370\n    PdfWatermark watermark = new PdfWatermark("Watermark");\n    watermark.setFont(new PdfFont(PdfFontFamily.Helvetica, 36));\n    watermark.setOpacity(0.5f);\n    page.getWatermarks().add(watermark);\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u6700\u540e\uff0c\u9700\u8981\u4fdd\u5b58\u4fee\u6539\u540e\u7684 PDF \u6587\u4ef6\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'pdf.saveToFile("output.pdf");\npdf.close();\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"\u6dfb\u52a0\u56fe\u7247\u6c34\u5370\n\u6dfb\u52a0\u56fe\u7247\u6c34\u5370\u4e0e\u6dfb\u52a0\u6587\u672c\u6c34\u5370\u7c7b\u4f3c\uff0c\u53ea\u9700\u8981\u5c06 PdfWatermark \u7684\u53c2\u6570\u4fee\u6539\u4e3a\u56fe\u7247\u8def\u5f84\u5373\u53ef\u3002"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// \u6dfb\u52a0\u56fe\u7247\u6c34\u5370\nPdfWatermark watermark = new PdfWatermark("watermark.png");\nwatermark.setOpacity(0.5f);\npage.getWatermarks().add(watermark);\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"4",children:["\n",(0,a.jsx)(n.li,{children:"\u5b8c\u6574\u4ee3\u7801\n\u4e0b\u9762\u662f\u4f7f\u7528 Free Spire.PDF for Java \u6765\u5b9e\u73b0 PDF \u6dfb\u52a0\u6c34\u5370\u7684\u5b8c\u6574\u4ee3\u7801\uff1a"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'import com.spire.pdf.*;\n\npublic class FreeSpirePdfWatermark {\n    public static void main(String[] args) {\n        // \u8bfb\u53d6\u539f\u59cb PDF \u6587\u4ef6\n        PdfDocument pdf = new PdfDocument();\n        pdf.loadFromFile("original.pdf");\n\n        // \u904d\u5386 PDF \u4e2d\u7684\u6240\u6709\u9875\u9762\n        for (int i = 0; i < pdf.getPages().getCount(); i++) {\n            PdfPageBase page = pdf.getPages().get(i);\n\n            // \u6dfb\u52a0\u6587\u672c\u6c34\u5370\n            PdfWatermark watermark = new PdfWatermark("Watermark");\n            watermark.setFont(new PdfFont(PdfFontFamily.Helvetica, 36));\n            watermark.setOpacity(0.5f);\n            page.getWatermarks().add(watermark);\n\n            // \u6dfb\u52a0\u56fe\u7247\u6c34\u5370\n            // PdfWatermark watermark = new PdfWatermark("watermark.png");\n            // watermark.setOpacity(0.5f);\n            // page.getWatermarks().add(watermark);\n        }\n\n        // \u4fdd\u5b58\u4fee\u6539\u540e\u7684 PDF \u6587\u4ef6\n        pdf.saveToFile("output.pdf");\n        pdf.close();\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u65b9\u5f0f\u4e94asposepdf-for-java",children:"\u65b9\u5f0f\u4e94\uff1aAspose.PDF for Java"}),"\n",(0,a.jsx)(n.p,{children:"Aspose.PDF for Java \u662f\u4e00\u4e2a\u5f3a\u5927\u7684 PDF \u5904\u7406\u5e93\uff0c\u63d0\u4f9b\u4e86\u6dfb\u52a0\u6c34\u5370\u7684\u529f\u80fd\u3002\u7ed3\u5408 Spring Boot \u4f7f\u7528 Aspose.PDF for Java \u5e93\u6dfb\u52a0 PDF \u6c34\u5370\u7684\u65b9\u5f0f\u5982\u4e0b\uff1a"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"\u9996\u5148\uff0c\u5728 pom.xml \u6587\u4ef6\u4e2d\u6dfb\u52a0 Aspose.PDF for Java \u7684\u4f9d\u8d56\uff1a"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>com.aspose</groupId>\n    <artifactId>aspose-pdf</artifactId>\n    <version>21.4</version>\n</dependency>\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u5728 Spring Boot \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528 Aspose.PDF for Java \u7684 API \u8bbe\u7f6e PDF \u6c34\u5370\u3002"}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"\u6dfb\u52a0\u6587\u672c\u6c34\u5370"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@PostMapping("/addTextWatermark")\npublic ResponseEntity<byte[]> addTextWatermark(@RequestParam("file") MultipartFile file) throws IOException {\n    // \u52a0\u8f7d PDF \u6587\u4ef6\n    Document pdfDocument = new Document(file.getInputStream());\n    TextStamp textStamp = new TextStamp("Watermark");\n    textStamp.setWordWrap(true);\n    textStamp.setVerticalAlignment(VerticalAlignment.Center);\n    textStamp.setHorizontalAlignment(HorizontalAlignment.Center);\n    pdfDocument.getPages().get_Item(1).addStamp(textStamp);\n\n    // \u4fdd\u5b58 PDF \u6587\u4ef6\n    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n    pdfDocument.save(outputStream);\n    return ResponseEntity.ok()\n            .header(HttpHeaders.CONTENT_DISPOSITION, "attachment; filename=\\"watermarked.pdf\\"")\n            .contentType(MediaType.APPLICATION_PDF)\n            .body(outputStream.toByteArray());\n}\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"\u6dfb\u52a0\u56fe\u7247\u6c34\u5370"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@PostMapping("/addImageWatermark")\npublic ResponseEntity<byte[]> addImageWatermark(@RequestParam("file") MultipartFile file) throws IOException {\n    // \u52a0\u8f7d PDF \u6587\u4ef6\n    Document pdfDocument = new Document(file.getInputStream());\n    ImageStamp imageStamp = new ImageStamp("watermark.png");\n    imageStamp.setWidth(100);\n    imageStamp.setHeight(100);\n    imageStamp.setVerticalAlignment(VerticalAlignment.Center);\n    imageStamp.setHorizontalAlignment(HorizontalAlignment.Center);\n    pdfDocument.getPages().get_Item(1).addStamp(imageStamp);\n\n    // \u4fdd\u5b58 PDF \u6587\u4ef6\n    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n    pdfDocument.save(outputStream);\n    return ResponseEntity.ok()\n            .header(HttpHeaders.CONTENT_DISPOSITION, "attachment; filename=\\"watermarked.pdf\\"")\n            .contentType(MediaType.APPLICATION_PDF)\n            .body(outputStream.toByteArray());\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u6ce8\u610f\uff0c\u4ee5\u4e0a\u4ee3\u7801\u4e2d\u7684\u6587\u4ef6\u540d\u3001\u5bbd\u5ea6\u3001\u9ad8\u5ea6\u7b49\u53c2\u6570\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u8c03\u6574\u3002"}),"\n",(0,a.jsxs)(n.ol,{start:"4",children:["\n",(0,a.jsx)(n.li,{children:"\u5b8c\u6574\u4ee3\u7801\n\u5b8c\u6574\u7684 Spring Boot \u63a7\u5236\u5668\u7c7b\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'import com.aspose.pdf.*;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\n\n@RestController\n@RequestMapping("/api/pdf")\npublic class PdfController {\n    @PostMapping("/addTextWatermark")\n    public ResponseEntity<byte[]> addTextWatermark(@RequestParam("file") MultipartFile file) throws IOException {\n        // \u52a0\u8f7d PDF \u6587\u4ef6\n        Document pdfDocument = new Document(file.getInputStream());\n        TextStamp textStamp = new TextStamp("Watermark");\n        textStamp.setWordWrap(true);\n        textStamp.setVerticalAlignment(VerticalAlignment.Center);\n        textStamp.setHorizontalAlignment(HorizontalAlignment.Center);\n        pdfDocument.getPages().get_Item(1).addStamp(textStamp);\n\n        // \u4fdd\u5b58 PDF \u6587\u4ef6\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n        pdfDocument.save(outputStream);\n        return ResponseEntity.ok()\n                .header(HttpHeaders.CONTENT_DISPOSITION, "attachment; filename=\\"watermarked.pdf\\"")\n                .contentType(MediaType.APPLICATION_PDF)\n                .body(outputStream.toByteArray());\n    }\n\n    @PostMapping("/addImageWatermark")\n    public ResponseEntity<byte[]> addImageWatermark(@RequestParam("file") MultipartFile file) throws IOException {\n        // \u52a0\u8f7d PDF \u6587\u4ef6\n        Document pdfDocument = new Document(file.getInputStream());\n        ImageStamp imageStamp = new ImageStamp("watermark.png");\n        imageStamp.setWidth(100);\n        imageStamp.setHeight(100);\n        imageStamp.setVerticalAlignment(VerticalAlignment.Center);\n        imageStamp.setHorizontalAlignment(HorizontalAlignment.Center);\n        pdfDocument.getPages().get_Item(1).addStamp(imageStamp);\n\n        // \u4fdd\u5b58 PDF \u6587\u4ef6\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n        pdfDocument.save(outputStream);\n        return ResponseEntity.ok()\n                .header(HttpHeaders.CONTENT_DISPOSITION, "attachment; filename=\\"watermarked.pdf\\"")\n                .contentType(MediaType.APPLICATION_PDF)\n                .body(outputStream.toByteArray());\n    }\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["\u8fd9\u91cc\u4f7f\u7528\u4e86\u4e24\u4e2a RESTful API\uff1a",(0,a.jsx)(n.code,{children:"/addTextWatermark"})," \u548c ",(0,a.jsx)(n.code,{children:"/addImageWatermark"}),"\uff0c\u5206\u522b\u7528\u4e8e\u6dfb\u52a0\u6587\u672c\u6c34\u5370\u548c\u56fe\u7247\u6c34\u5370\u3002\u5728\u8bf7\u6c42\u4e2d\u901a\u8fc7 file \u53c2\u6570\u4f20\u9012 PDF \u6587\u4ef6\u3002"]}),"\n",(0,a.jsx)(n.p,{children:"\u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 Postman \u6765\u6d4b\u8bd5 Spring Boot \u5e94\u7528\u7a0b\u5e8f\u7684 API\u3002"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"\u4e0b\u8f7d\u5e76\u5b89\u88c5 Postman\u3002"}),"\n",(0,a.jsx)(n.li,{children:"\u6253\u5f00 Postman\uff0c\u9009\u62e9 POST \u8bf7\u6c42\u65b9\u6cd5\u3002"}),"\n",(0,a.jsxs)(n.li,{children:["\u5728 URL \u5730\u5740\u680f\u4e2d\u8f93\u5165 ",(0,a.jsx)(n.code,{children:"http://localhost:8080/api/pdf/addTextWatermark"}),"\u3002"]}),"\n",(0,a.jsx)(n.li,{children:"\u5728 Headers \u6807\u7b7e\u9875\u4e2d\u8bbe\u7f6e Content-Type \u4e3a multipart/form-data\u3002"}),"\n",(0,a.jsx)(n.li,{children:"\u5728 Body \u6807\u7b7e\u9875\u4e2d\u9009\u62e9 form-data \u7c7b\u578b\uff0c\u7136\u540e\u8bbe\u7f6e key \u4e3a file\uff0cvalue \u9009\u62e9\u672c\u5730\u7684 PDF \u6587\u4ef6\u3002"}),"\n",(0,a.jsx)(n.li,{children:"\u70b9\u51fb Send \u6309\u94ae\u53d1\u9001\u8bf7\u6c42\uff0c\u7b49\u5f85\u5e94\u7b54\u7ed3\u679c\u3002"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u5904\u7406\u7ed3\u679c\u5c06\u4f1a\u5728\u54cd\u5e94\u7684 Body \u4e2d\u8fd4\u56de\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u6d4f\u89c8\u5668\u4e0b\u8f7d\u6216\u4fdd\u5b58\u5230\u672c\u5730\u78c1\u76d8\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u4ee5\u4e0a\u5c31\u662f\u4f7f\u7528 Aspose.PDF for Java \u5e93\u7ed3\u5408 Spring Boot \u6dfb\u52a0 PDF \u6c34\u5370\u7684\u65b9\u5f0f\u3002"}),"\n",(0,a.jsx)(n.h2,{id:"\u7ed3\u8bba",children:"\u7ed3\u8bba"}),"\n",(0,a.jsx)(n.p,{children:"\u672c\u6587\u4ecb\u7ecd\u4e86\u51e0\u79cd\u4f7f\u7528 Spring Boot \u5b9e\u73b0 PDF \u6dfb\u52a0\u6c34\u5370\u7684\u65b9\u5f0f\uff0c\u5206\u522b\u662f\u4f7f\u7528 Apache PDFBox \u5e93\u3001iText \u5e93\u4ee5\u53ca Ghostscript \u547d\u4ee4\u884c\u7b49\u3002\u9009\u62e9\u54ea\u79cd\u65b9\u5f0f\uff0c\u53ef\u4ee5\u6839\u636e\u9879\u76ee\u9700\u6c42\u548c\u4e2a\u4eba\u504f\u597d\u6765\u51b3\u5b9a\u3002\u65e0\u8bba\u91c7\u7528\u54ea\u79cd\u65b9\u5f0f\uff0c\u90fd\u9700\u8981\u6ce8\u610f\u4fdd\u62a4\u539f\u59cb PDF \u6587\u4ef6\uff0c\u4e0d\u8981\u5728\u4e0d\u5fc5\u8981\u7684\u60c5\u51b5\u4e0b\u76f4\u63a5\u4fee\u6539\u539f\u59cb\u6587\u4ef6\u3002\u6b22\u8fce\u70b9\u8d5e\u6536\u85cf\uff0c\u5728\u4f60\u8001\u677f\u5b89\u6392\u4f60\u5e72\u8fd9\u65f6\uff0c\u5e0c\u671b\u4f60\u80fd\u591f\u53ca\u65f6\u627e\u5230\u76f8\u5173\u7684Java\u5de5\u5177\u5e93\uff0c\u5b9e\u73b0\u8fd9\u9879\u529f\u80fd\u3002"})]})}function c(e={}){const{wrapper:n}={...(0,r.ah)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},11151:(e,n,t)=>{t.d(n,{ah:()=>o});var a=t(67294);const r=a.createContext({});function o(e){const n=a.useContext(r);return a.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}}}]);